{"id":"IMPROVEMENT-001","category":"Hook Consolidation","severity":"S3","title":"Duplicate Pattern Check Runs","description":"npm run patterns:check runs 3 times in pre-commit hook (on failure, success check, and again). Should cache result and reuse.","impact":"Reduces pre-commit time by 2-3s per check","files":[".husky/pre-commit"],"recommendation":"Store patterns:check output in variable and reuse result","estimated_time_savings":"6-9s per commit"}
{"id":"IMPROVEMENT-002","category":"Hook Consolidation","severity":"S3","title":"Multiple Script Invocations for Same Check","description":"npm run lint executes twice in pre-commit (line 9 for validation, line 11 for output). Runs command multiple times.","impact":"Reduces pre-commit time by 1-2s","files":[".husky/pre-commit"],"recommendation":"Capture output once, check exit code, display if needed","estimated_time_savings":"2-4s per commit"}
{"id":"IMPROVEMENT-003","category":"CI Optimization","severity":"S3","title":"Missing npm Install Cache Optimization","description":"CI workflows install dependencies 5+ times across separate jobs but don't use node cache effectively. Backlog enforcement and docs-lint both npm ci without checking cache hit rates.","impact":"CI pipeline could be 15-20% faster","files":[".github/workflows/ci.yml",".github/workflows/backlog-enforcement.yml",".github/workflows/docs-lint.yml"],"recommendation":"Add cache-hit conditional to skip npm ci if cache was hit","estimated_time_savings":"45-60s per CI run"}
{"id":"IMPROVEMENT-004","category":"Hook Consolidation","severity":"S3","title":"npm run validate:canon Runs Twice","description":"CANON validation runs in pre-commit hook and also in CI (separate job). Pattern is: check once locally, report errors immediately.","impact":"Reduces pre-commit time by 1s","files":[".husky/pre-commit",".github/workflows/ci.yml"],"recommendation":"Only run in CI; local check is informational duplicate","estimated_time_savings":"1-2s per commit"}
{"id":"IMPROVEMENT-005","category":"Manual Process Automation","severity":"S3","title":"Review Needed Detection Could Be Pre-commit","description":"npm run review:check runs only in CI (review-check.yml) but could run in pre-push hook to provide instant feedback before pushing.","impact":"Catch review needs before remote push","files":[".github/workflows/review-check.yml"],"recommendation":"Add npm run review:check to pre-push hook with early warning","estimated_time_savings":"Saves failed CI runs and feedback loops"}
{"id":"IMPROVEMENT-006","category":"CI Optimization","severity":"S3","title":"Pattern Compliance Check Runs Full Suite Then Changed Files","description":"Pattern check runs with --all on main push, but also on PRs with changed files only. Two separate runs = duplicate effort.","impact":"Reduces CI time by 8-10s per push","files":[".github/workflows/ci.yml"],"recommendation":"Use single run: check changed files (PR) OR all (main), not both patterns","estimated_time_savings":"8-10s per CI run"}
{"id":"IMPROVEMENT-007","category":"Error Message Improvement","severity":"S3","title":"Inconsistent Error Message Quality","description":"Some checks show tail output, others show grep filtered output. Makes debugging harder. Pattern compliance shows only 15 lines which may truncate important context.","impact":"Better developer experience, faster debugging","files":[".husky/pre-commit",".husky/pre-push"],"recommendation":"Standardize error output: show context, line numbers, and full message","estimated_time_savings":"Saves 5-10min per error debugging session"}
{"id":"IMPROVEMENT-008","category":"Script Consolidation","severity":"S3","title":"Overlapping Validation Scripts","description":"validate-audit.js (980 lines) duplicates checks also in audit:validate npm script. check-pattern-compliance.js has pattern definitions repeated in other scripts. sanitize-error.js exists in both .js and .ts versions.","impact":"Reduces codebase complexity, improves maintainability","files":["scripts/validate-audit.js","scripts/check-pattern-compliance.js","scripts/lib/sanitize-error.js","scripts/lib/sanitize-error.ts"],"recommendation":"Single source of truth for each validator. Remove .ts duplicate of sanitize-error.js","estimated_time_savings":"Reduces maintenance overhead by 10-15%"}
{"id":"IMPROVEMENT-009","category":"Hook Consolidation","severity":"S3","title":"Skill Validation Only Checks on Skill File Changes","description":"npm run skills:validate only runs when .claude/skills or .claude/commands files change. But changed skill can break builds in non-obvious ways.","impact":"Might catch skill-related issues earlier","files":[".husky/pre-commit"],"recommendation":"Always run skills:validate or run on broader file changes","estimated_time_savings":"Prevention: potential time saved from build failures"}
{"id":"IMPROVEMENT-010","category":"Manual Process Automation","severity":"S3","title":"Documentation Index Updates Are Manual Gate","description":"Pre-commit requires manual docs:index run when md files change. Could auto-run and stage the output.","impact":"Eliminates one manual step per doc change","files":[".husky/pre-commit"],"recommendation":"Auto-run npm run docs:index and git add DOCUMENTATION_INDEX.md when md files detected","estimated_time_savings":"30-60s per documentation update"}
{"id":"IMPROVEMENT-011","category":"CI Optimization","severity":"S3","title":"Tests Run Multiple Times Across Hook and CI","description":"Tests run in pre-commit hook (for config changes), then again in CI. Creates duplicate effort for same code.","impact":"Pre-commit takes 40-60s on first commit, CI adds another 50s","files":[".husky/pre-commit",".github/workflows/ci.yml"],"recommendation":"Run tests only in CI; trust local dev workflow. Or: skip CI tests if pre-commit passed.","estimated_time_savings":"40-60s per CI run"}
{"id":"IMPROVEMENT-012","category":"Hook Tools","severity":"S3","title":"No Built-in Hook Time Measurement","description":"No visibility into which hook step is slowest. Developers don't know if its tests (40s) or patterns (8s) or typescript (12s).","impact":"Better optimization targeting","files":[".husky/pre-commit",".husky/pre-push"],"recommendation":"Add timestamp logging to show per-check timing. Use date +%s%N for nanosecond precision.","estimated_time_savings":"Enables data-driven optimization"}
{"id":"IMPROVEMENT-013","category":"Script Consolidation","severity":"S3","title":"Overlapping Learnings Analysis","description":"analyze-learning-effectiveness.js (1271 lines) and check-pattern-compliance.js both process learnings from AI reviews. Can consolidate logic.","impact":"Reduces complexity, single algorithm for pattern matching","files":["scripts/analyze-learning-effectiveness.js","scripts/check-pattern-compliance.js"],"recommendation":"Extract common learning-parsing logic to lib/learning-analyzer.js","estimated_time_savings":"Reduces complexity by 200+ lines"}
{"id":"IMPROVEMENT-014","category":"Error Message Improvement","severity":"S3","title":"Unhelpful Pre-push Hook Messages","description":"Pre-push shows 15 lines of grep filtered output for pattern violations, losing context. User does not know what line violates which pattern.","impact":"Faster error resolution","files":[".husky/pre-push"],"recommendation":"Show full error with file:line:column format. Use npm run patterns:check output directly.","estimated_time_savings":"Saves 10-15min debugging per pattern error"}
{"id":"IMPROVEMENT-015","category":"Hook Consolidation","severity":"S3","title":"Security Check Runs in Pre-push But Not Pre-commit","description":"npm run security:check only in pre-push, not pre-commit. Security issues could be caught earlier (dev cycle is faster).","impact":"Catch security issues before push attempt","files":[".husky/pre-push"],"recommendation":"Add lightweight security:check to pre-commit (or use changed files only for speed)","estimated_time_savings":"Earlier feedback loop, prevents remote rejection"}
{"id":"IMPROVEMENT-016","category":"CI Optimization","severity":"S3","title":"Dependency Check (Knip) Has No Cache","description":"npm run deps:unused (knip) runs without caching and takes 3-5s. Can cache knip results or skip on non-package-change commits.","impact":"Saves 3-5s on CI runs when no deps changed","files":[".github/workflows/ci.yml"],"recommendation":"Skip deps:unused check if package.json/lock not in PR changes","estimated_time_savings":"3-5s per CI run (50% of runs)"}
{"id":"IMPROVEMENT-017","category":"Manual Process Automation","severity":"S3","title":"Cross-Doc Dependency Check Has No Auto-Fix","description":"npm run crossdoc:check blocks commit with cryptic dependency errors but provides no guidance to fix. Requires manual doc edits.","impact":"Better DX, faster resolution","files":["scripts/check-cross-doc-deps.js"],"recommendation":"Add --auto-fix flag to automatically update dependent docs or suggest changes","estimated_time_savings":"Saves 5-10min per cross-doc violation"}
{"id":"IMPROVEMENT-018","category":"Hook Consolidation","severity":"S3","title":"Document Header Check Only Runs on New Files","description":"npm run docs:headers only runs on NEW markdown files (git diff-filter=A). Modified files skip header validation. Headers can degrade.","impact":"Maintain documentation header consistency","files":[".husky/pre-commit"],"recommendation":"Check headers on Added AND Modified files (diff-filter=AM)","estimated_time_savings":"Prevents documentation quality degradation"}
{"id":"IMPROVEMENT-019","category":"CI Optimization","severity":"S3","title":"Sonarcloud Trigger on Every Push","description":"Sonarcloud analysis runs on every push and PR, but often skipped for fork PRs. Runs fetch-depth: 0 unnecessarily on some branches.","impact":"Save CI resource usage","files":[".github/workflows/sonarcloud.yml"],"recommendation":"Only run on main branch or PRs from original repo; skip on pushes to feature branches","estimated_time_savings":"5-10s per feature branch commit"}
{"id":"IMPROVEMENT-020","category":"Manual Process Automation","severity":"S3","title":"Pattern Fixes Are Manual","description":"npm run patterns:check detects violations but suggests only generic run patterns:check help. Should show specific fixes for each pattern type.","impact":"Faster error resolution for developers","files":["scripts/check-pattern-compliance.js"],"recommendation":"Add --suggest flag to show specific fix examples for each violation found","estimated_time_savings":"Saves 10-20min per pattern violation"}
