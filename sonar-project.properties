# SonarCloud Configuration
# See: https://docs.sonarsource.com/sonarcloud/advanced-setup/ci-based-analysis/sonarscanner-for-npm/

sonar.projectKey=jasonmichaelbell78-creator_sonash-v0
sonar.organization=jasonmichaelbell78-creator

# Source configuration
sonar.sources=.
sonar.sourceEncoding=UTF-8

# Exclusions for false positives and third-party code
sonar.exclusions=**/node_modules/**,**/dist/**,**/.next/**,**/coverage/**

# Identify tests (so they don't pollute source metrics)
sonar.tests=tests
sonar.test.inclusions=**/tests/**,**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx

# Test file exclusions (from coverage analysis)
sonar.coverage.exclusions=**/tests/**,**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx

# JavaScript/TypeScript configuration
sonar.javascript.lcov.reportPaths=coverage/lcov.info
sonar.typescript.lcov.reportPaths=coverage/lcov.info

# Issue documentation
# FALSE-POS items excluded: Test file password mocks, Tailwind @custom-variant, confetti Math.random
# ACCEPT-RISK items documented: Dev scripts with controlled inputs (see docs/SONARCLOUD_TRIAGE.md)

# =============================================================================
# Rule-Specific Exclusions (from docs/audits/FALSE_POSITIVES.jsonl)
# =============================================================================
# Use sonar.issue.ignore.multicriteria to exclude known false positives
# Format: sonar.issue.ignore.multicriteria.<id>.ruleKey=<rule>
#         sonar.issue.ignore.multicriteria.<id>.resourceKey=<glob>

sonar.issue.ignore.multicriteria=fp1,fp2,fp3,fp4,fp5

# FP-007: Console statements in Cloud Functions are expected (standard logging)
sonar.issue.ignore.multicriteria.fp1.ruleKey=typescript:S106
sonar.issue.ignore.multicriteria.fp1.resourceKey=functions/**/*.ts

# FP-002: Environment variables in server components/API routes
sonar.issue.ignore.multicriteria.fp2.ruleKey=typescript:S5765
sonar.issue.ignore.multicriteria.fp2.resourceKey=app/api/**/*.ts

# Test files - password/mock patterns acceptable
sonar.issue.ignore.multicriteria.fp3.ruleKey=typescript:S2068
sonar.issue.ignore.multicriteria.fp3.resourceKey=tests/**/*.ts

# Migration scripts - one-time execution with controlled inputs
sonar.issue.ignore.multicriteria.fp4.ruleKey=typescript:S4790
sonar.issue.ignore.multicriteria.fp4.resourceKey=scripts/migrations/**/*.ts

# Dev scripts - controlled inputs from CLI (false positive for path injection)
sonar.issue.ignore.multicriteria.fp5.ruleKey=typescript:S4790
sonar.issue.ignore.multicriteria.fp5.resourceKey=scripts/**/*.js

# =============================================================================
# Duplication Exclusions (generated/config files)
# =============================================================================
sonar.cpd.exclusions=**/generated/**,**/*.config.mjs,**/tailwind.config.ts

# =============================================================================
# Quality Gate Notes
# =============================================================================
# Actual thresholds configured in SonarCloud UI
# Current baseline (2026-01-13): 778 issues
# Target: No new critical/blocker issues, gradual reduction of major issues
