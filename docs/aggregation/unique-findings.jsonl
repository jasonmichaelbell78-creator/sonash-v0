{"original_id":"CODE-001","title":"5 failing tests in check-docs-light.test.ts","category":"code","severity":"S1","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"tests/scripts/check-docs-light.test.ts","line":199,"description":"5 tests failing in check-docs-light.test.ts: 'checks for required sections', 'validates internal links', 'checks Last Updated date', 'exits 0 when no errors found', 'exits 1 when errors found'. Tests appear to have issues with extractJSON parsing or script behavior changes.","recommendation":"Debug the check-docs-light.js script and update tests to match current behavior. Tests expect JSON output but may not be parsing correctly.","evidence":["npm test output: 5 failing tests","AssertionError: actual=1, expected=0 in 'exits 0 when no errors found'","AssertionError: actual=0, expected=1 in 'exits 1 when errors found'"],"cross_ref":"tests","sources":[{"type":"single-session","id":"CODE-001","date":"2026-01-17","category":"code"}]}
{"original_id":"CODE-002","title":"Debug console.log statements in production code","category":"code","severity":"S2","effort":"E1","confidence":"high","verified":"MANUAL_ONLY","file":"components/notebook/pages/today-page.tsx","line":396,"description":"12 console.log/error statements in today-page.tsx used for debugging. While wrapped in NODE_ENV checks, these add noise and should use structured logging.","recommendation":"Replace debug console statements with the project's logger utility (lib/logger.ts) which provides structured logging and Sentry integration.","evidence":["console.log(\"ðŸ’¾ Attempting to save:\", saveData) at line 396","console.log(\"ðŸ“Š Weekly Stats Debug:\", ...) at lines 511, 524, 529, 532, 545, 562, 584","console.error(\"âŒ Save failed with error:\", error) at line 422","grep console.log found 12 matches in today-page.tsx","Code audit CODE-002 flagged same issue"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"CODE-002","date":"2026-01-17","category":"code"},{"type":"single-session","id":"PERF-003","date":"2026-01-17","category":"performance"}],"files":[],"merged_from":["CODE-002","PERF-003"]}
{"original_id":"CODE-003","title":"High cognitive complexity in adminSetUserPrivilege","category":"code","severity":"S2","effort":"E2","confidence":"medium","verified":"TOOL_VALIDATED","file":"functions/src/admin.ts","line":1726,"description":"SonarCloud reports cognitive complexity of 16 (threshold 15) for adminSetUserPrivilege function. Function handles privilege validation, security logging, and Firestore operations.","recommendation":"Extract privilege type validation into a separate helper function to reduce cognitive load.","evidence":["SonarCloud rule typescript:S3776","Cognitive Complexity from 16 to the 15 allowed"],"cross_ref":"eslint","sources":[{"type":"single-session","id":"CODE-003","date":"2026-01-17","category":"code"}]}
{"original_id":"CODE-004","title":"Very high cognitive complexity in adminListUsers","category":"code","severity":"S1","effort":"E2","confidence":"high","verified":"TOOL_VALIDATED","file":"functions/src/admin.ts","line":1835,"description":"SonarCloud reports cognitive complexity of 34 (threshold 15) for adminListUsers function. Function handles pagination, cursor validation, sorting, and data transformation.","recommendation":"Break down into smaller functions: extractCursorValue(), buildUserQuery(), transformUserResults(). Each handles one concern.","evidence":["SonarCloud rule typescript:S3776","Cognitive Complexity from 34 to the 15 allowed","Function spans 75+ lines with nested conditionals"],"cross_ref":"eslint","sources":[{"type":"single-session","id":"CODE-004","date":"2026-01-17","category":"code"}]}
{"original_id":"CODE-005","title":"High cognitive complexity in UsersTab component","category":"code","severity":"S2","effort":"E2","confidence":"high","verified":"TOOL_VALIDATED","file":"components/admin/users-tab.tsx","line":84,"description":"SonarCloud reports cognitive complexity of 27 (threshold 15) for UsersTab function. Component manages pagination, search, detail drawer, editing, and privilege state.","recommendation":"Extract sub-components: UserSearchSection, UserDetailDrawer, PrivilegeEditor. Use custom hooks for state management.","evidence":["SonarCloud rule typescript:S3776","Cognitive Complexity from 27 to the 15 allowed","924 total lines in file"],"cross_ref":"eslint","sources":[{"type":"single-session","id":"CODE-005","date":"2026-01-17","category":"code"}]}
{"original_id":"CODE-006","title":"void operator usage flagged by SonarCloud","category":"code","severity":"S3","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":"components/admin/logs-tab.tsx","line":287,"description":"SonarCloud flags 'void refresh(() => active)' as code smell. The void operator is used to explicitly discard the Promise return value.","recommendation":"This is intentional to handle async functions in event handlers. Consider adding a comment explaining the pattern or using .catch() for explicit error handling.","evidence":["SonarCloud rule typescript:S3735","void refresh(() => active) at line 287","void refresh() at line 334"],"cross_ref":"eslint","sources":[{"type":"single-session","id":"CODE-006","date":"2026-01-17","category":"code"}]}
{"original_id":"CODE-007","title":"No correlation/request ID tracing","category":"code","severity":"S2","effort":"E2","confidence":"medium","verified":"MANUAL_ONLY","file":"lib/logger.ts","line":1,"description":"Logger does not include correlation IDs or request tracing. Frontend-to-backend requests cannot be traced through logs.","recommendation":"Add correlation ID generation in frontend, pass through Cloud Function calls, and include in all log entries for end-to-end tracing.","evidence":["grep for 'correlation.?id' returned no matches in lib/ or functions/","Logger captures context but no unique request identifier"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"CODE-007","date":"2026-01-17","category":"code"}]}
{"original_id":"CODE-008","title":"@ts-expect-error suppression for type mismatch","category":"code","severity":"S3","effort":"E0","confidence":"high","verified":"MANUAL_ONLY","file":"components/notebook/pages/resources-page.tsx","line":444,"description":"TypeScript error suppressed with @ts-expect-error comment. The setGenderFilter expects specific union type but receives broader string.","recommendation":"Cast the option value explicitly or narrow the type at the call site rather than suppressing the error.","evidence":["// @ts-expect-error - option is \"All\" | \"Men\" | \"Women\" which are valid values for setGenderFilter"],"cross_ref":"typescript","sources":[{"type":"single-session","id":"CODE-008","date":"2026-01-17","category":"code"}]}
{"original_id":"CODE-009","title":"TODO comment for unimplemented feature","category":"code","severity":"S3","effort":"E0","confidence":"medium","verified":"MANUAL_ONLY","file":"lib/database/firestore-adapter.ts","line":51,"description":"TODO comment indicates FirestoreService doesn't support configurable limits yet.","recommendation":"Either implement configurable limits in FirestoreService or track as technical debt in TECHNICAL_DEBT.md.","evidence":["// TODO: Pass limit to FirestoreService when it supports configurable limits"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"CODE-009","date":"2026-01-17","category":"code"}]}
{"original_id":"CODE-010","title":"TODO comment for user preferences feature","category":"code","severity":"S3","effort":"E0","confidence":"medium","verified":"MANUAL_ONLY","file":"components/notebook/features/quick-actions-fab.tsx","line":12,"description":"TODO comment for making action buttons customizable by user.","recommendation":"Track in ROADMAP.md or TECHNICAL_DEBT.md if this is a planned feature.","evidence":["// TODO: Make action buttons customizable by user (save preferences to profile/localStorage)"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"CODE-010","date":"2026-01-17","category":"code"}]}
{"original_id":"CODE-011","title":"Useless assignment to hasMore variable","category":"code","severity":"S3","effort":"E1","confidence":"medium","verified":"TOOL_VALIDATED","file":"functions/src/jobs.ts","line":620,"description":"SonarCloud reports useless assignment to variable 'hasMore'. Variable is assigned but may not be used after.","recommendation":"Remove the assignment or verify hasMore is actually used in the return value or subsequent logic.","evidence":["SonarCloud rule typescript:S1854","Remove this useless assignment to variable \"hasMore\""],"cross_ref":"eslint","sources":[{"type":"single-session","id":"CODE-011","date":"2026-01-17","category":"code"}]}
{"original_id":"CODE-012","title":"Nested component definition","category":"code","severity":"S2","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"components/admin/admin-tabs.tsx","line":64,"description":"SonarCloud flags component definition inside parent component. This causes unnecessary re-renders and breaks React optimization.","recommendation":"Move the inner component outside the parent and pass data as props.","evidence":["SonarCloud rule typescript:S6478","Move this component definition out of the parent component"],"cross_ref":"eslint","sources":[{"type":"single-session","id":"CODE-012","date":"2026-01-17","category":"code"}]}
{"original_id":"CODE-013","title":"Nested ternary operator","category":"code","severity":"S3","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"components/admin/logs-tab.tsx","line":481,"description":"SonarCloud flags nested ternary operation which reduces readability.","recommendation":"Extract to a helper function or use if/else statements for clarity.","evidence":["SonarCloud rule typescript:S3358","Extract this nested ternary operation into an independent statement"],"cross_ref":"eslint","sources":[{"type":"single-session","id":"CODE-013","date":"2026-01-17","category":"code"}]}
{"original_id":"CODE-014","title":"Nested template literals (6 occurrences)","category":"code","severity":"S3","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"functions/src/admin.ts","line":1388,"description":"SonarCloud flags nested template literals at lines 1388-1393. These reduce code readability.","recommendation":"Extract nested expressions to variables before interpolation.","evidence":["SonarCloud rule typescript:S4624","Refactor this code to not use nested template literals","Lines 1388-1393 all flagged"],"cross_ref":"eslint","sources":[{"type":"single-session","id":"CODE-014","date":"2026-01-17","category":"code"}]}
{"original_id":"SEC-001","title":"Missing critical security headers","category":"security","severity":"S1","effort":"E1","confidence":"high","verified":"DUAL_PASS_CONFIRMED","file":"firebase.json","line":6,"description":"Missing security headers: Content-Security-Policy (CSP), X-Frame-Options, X-Content-Type-Options, Strict-Transport-Security (HSTS), Referrer-Policy, Permissions-Policy. Only Cache-Control and COOP are configured.","recommendation":"Add comprehensive security headers to firebase.json hosting configuration. This was also flagged in audit-2026-01-13 (SEC-002). Priority fix.","evidence":["firebase.json only has Cache-Control and Cross-Origin-Opener-Policy headers","Prior audit SEC-002 documented same issue"],"cross_ref":"MANUAL_ONLY","owasp":["A05"],"cwe":"CWE-693","sources":[{"type":"single-session","id":"SEC-001","date":"2026-01-17","category":"security"}]}
{"original_id":"SEC-002","title":"App Check disabled on Cloud Functions","category":"security","severity":"S1","effort":"E0","confidence":"high","verified":"DUAL_PASS_CONFIRMED","file":"functions/src/index.ts","line":84,"description":"Firebase App Check is disabled (requireAppCheck: false) on all Cloud Functions. Comment says 'TEMPORARILY DISABLED - waiting for throttle to clear'. This removes bot protection layer.","recommendation":"Re-enable App Check once throttle period clears. This was flagged in audit-2026-01-13 (SEC-001). Check if throttle has cleared.","evidence":["Prior audit SEC-001 documented same issue","requireAppCheck: false appears 5 times in index.ts"],"cross_ref":"MANUAL_ONLY","owasp":["A01"],"cwe":"CWE-862","sources":[{"type":"single-session","id":"SEC-002","date":"2026-01-17","category":"security"}]}
{"original_id":"SEC-003","title":"Hardcoded reCAPTCHA site key fallback","category":"security","severity":"S2","effort":"E0","confidence":"medium","verified":"MANUAL_ONLY","file":"functions/src/recaptcha-verify.ts","line":66,"description":"Hardcoded reCAPTCHA site key as fallback: '6LdeazosAAAAAMDNCh1hTUDKh_UeS6xWY1-85B2O'. Makes key rotation difficult.","recommendation":"Remove hardcoded fallback. Fail early with clear error if RECAPTCHA_SITE_KEY env var is not set.","evidence":["grep shows hardcoded key in recaptcha-verify.ts","Prior audit SEC-003 documented same issue"],"cross_ref":"MANUAL_ONLY","owasp":["A02"],"cwe":"CWE-798","sources":[{"type":"single-session","id":"SEC-003","date":"2026-01-17","category":"security"}]}
{"original_id":"SEC-004","title":"SonarCloud: Potentially hard-coded password pattern","category":"security","severity":"S3","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":"lib/utils/errors.ts","line":69,"description":"SonarCloud flags error message strings containing 'password' as potential hardcoded credentials. These are user-facing error messages, not actual credentials.","recommendation":"This is a FALSE POSITIVE. The strings are Firebase error code descriptions (e.g., 'auth/wrong-password': 'Incorrect password'). No action needed.","evidence":["SonarCloud hotspot AZuOceBbCkZo7bf_PZva","Code shows error message mapping, not credentials"],"cross_ref":"sonarcloud","owasp":["A02"],"cwe":"CWE-798","sources":[{"type":"single-session","id":"SEC-004","date":"2026-01-17","category":"security"}]}
{"original_id":"SEC-005","title":"OS command execution in CLI scripts","category":"security","severity":"S2","effort":"E2","confidence":"medium","verified":"TOOL_VALIDATED","file":"scripts/ai-review.js","line":222,"description":"SonarCloud flags execSync/spawnSync in CLI scripts. These execute git commands with file paths that could contain special characters. Scripts are developer-only tools.","recommendation":"Validate and sanitize file paths before passing to shell commands. Use array-based spawn instead of shell string interpolation where possible.","evidence":["SonarCloud hotspots for command-injection in scripts/ai-review.js, check-pattern-compliance.js, check-review-needed.js","10 HIGH probability hotspots for command injection"],"cross_ref":"sonarcloud","owasp":["A03"],"cwe":"CWE-78","sources":[{"type":"single-session","id":"SEC-005","date":"2026-01-17","category":"security"}]}
{"original_id":"SEC-006","title":"ReDoS vulnerable regex patterns","category":"security","severity":"S2","effort":"E2","confidence":"medium","verified":"TOOL_VALIDATED","file":"functions/src/admin.ts","line":143,"description":"SonarCloud flags 33 regex patterns as vulnerable to ReDoS (super-linear runtime due to backtracking). Most are in CLI scripts but some are in production code (admin.ts, security-logger.ts, sentry.client.ts).","recommendation":"Review flagged regexes in production code. Use atomic groups or possessive quantifiers. For CLI scripts, input is bounded so risk is low.","evidence":["SonarCloud hotspots for dos/S5852 rule","33 MEDIUM probability hotspots across scripts and app code"],"cross_ref":"sonarcloud","owasp":["A03"],"cwe":"CWE-1333","sources":[{"type":"single-session","id":"SEC-006","date":"2026-01-17","category":"security"}]}
{"original_id":"SEC-007","title":"Math.random for visual effects","category":"security","severity":"S3","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":"components/celebrations/confetti-burst.tsx","line":39,"description":"SonarCloud flags Math.random() usage in celebration components. These are for visual randomization (confetti colors, positions), not security purposes.","recommendation":"FALSE POSITIVE. Math.random is appropriate for visual effects. Document that these are non-security uses.","evidence":["SonarCloud hotspots for weak-cryptography/S2245","10 occurrences in confetti-burst.tsx and firework-burst.tsx"],"cross_ref":"sonarcloud","owasp":["A02"],"cwe":"CWE-330","sources":[{"type":"single-session","id":"SEC-007","date":"2026-01-17","category":"security"}]}
{"original_id":"PROC-001","title":"GitHub Actions using version tags instead of commit SHAs","category":"process","severity":"S2","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":".github/workflows/auto-label-review-tier.yml","line":18,"description":"5 workflows use actions/checkout@v4, actions/setup-node@v4, and tj-actions/changed-files@v46 instead of pinning to commit SHAs. Version tags can be moved, creating supply chain risk.","recommendation":"Pin all GitHub Actions to full commit SHAs. backlog-enforcement.yml already follows this pattern correctly.","evidence":["auto-label-review-tier.yml:18 uses actions/checkout@v4","docs-lint.yml:36 uses tj-actions/changed-files@v46","backlog-enforcement.yml:17 uses actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 (correct)","SonarCloud hotspots for githubactions:S7637","2 workflows flagged"],"cross_ref":"sonarcloud","sources":[{"type":"single-session","id":"PROC-001","date":"2026-01-17","category":"process"},{"type":"single-session","id":"SEC-008","date":"2026-01-17","category":"security"}],"files":[],"merged_from":["PROC-001","SEC-008"]}
{"original_id":"SEC-009","title":"Secrets expanded in run block","category":"security","severity":"S3","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":".github/workflows/deploy-firebase.yml","line":58,"description":"SonarCloud flags secret expansion in GitHub Actions run block. The secret is written to a temporary file with chmod 600.","recommendation":"Current implementation is reasonable - file is temporary and permissions are restricted. Consider using action inputs instead of shell expansion for extra safety.","evidence":["SonarCloud hotspot for githubactions:S7636","Secret written to temp file with restricted permissions"],"cross_ref":"sonarcloud","owasp":["A05"],"cwe":"CWE-200","sources":[{"type":"single-session","id":"SEC-009","date":"2026-01-17","category":"security"}]}
{"original_id":"SEC-010","title":"process.env.NODE_ENV checks for debug info","category":"security","severity":"S3","effort":"E0","confidence":"high","verified":"MANUAL_ONLY","file":"components/providers/error-boundary.tsx","line":84,"description":"Components use process.env.NODE_ENV === 'development' to conditionally show debug info. This is correct Next.js pattern for dev-only features.","recommendation":"No action needed. This is the correct pattern for development-only debugging.","evidence":["10 occurrences of process.env.NODE_ENV checks in components","All guard debug output, not secrets"],"cross_ref":"MANUAL_ONLY","owasp":["A07"],"cwe":"CWE-200","sources":[{"type":"single-session","id":"SEC-010","date":"2026-01-17","category":"security"}]}
{"original_id":"SEC-011","title":"Agent config files present","category":"security","severity":"S3","effort":"E0","confidence":"medium","verified":"MANUAL_ONLY","file":".claude/settings.json","line":1,"description":".claude/ directory contains agent configurations, skills, and hooks. No obvious prompt injection patterns found in quick review.","recommendation":"Periodically review .claude/ configs for suspicious patterns. Current configs appear safe.","evidence":["19 files in .claude/ directory","settings.json, hooks/, skills/, commands/ all present"],"cross_ref":"MANUAL_ONLY","owasp":[],"cwe":"","sources":[{"type":"single-session","id":"SEC-011","date":"2026-01-17","category":"security"}]}
{"original_id":"DOC-001","title":"16 broken anchor links detected by docs:check","category":"documentation","severity":"S1","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"SESSION_CONTEXT.md","line":47,"description":"docs:check reports 16 broken anchor links across multiple files including SESSION_CONTEXT.md, ROADMAP.md, DOCUMENTATION_STANDARDS.md, and generated README files. These anchors reference non-existent headings.","recommendation":"Fix anchor references to match actual heading slugs or remove broken anchors.","evidence":["docs:check reports 16 broken anchor links","SESSION_CONTEXT.md:47 #-active-sprint-operational-visibility-p0","src/dataconnect-generated/README.md:9 #generated-javascript-readme"],"cross_ref":"docs_check","sources":[{"type":"single-session","id":"DOC-001","date":"2026-01-17","category":"documentation"}]}
{"original_id":"DOC-002","title":"20 placeholder issues across 5 template instances","category":"documentation","severity":"S1","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"docs/reviews/2026-Q1/PERFORMANCE_AUDIT_PLAN_2026_Q1.md","line":1,"description":"docs:sync-check reports 20 placeholder issues: SECURITY_AUDIT_PLAN (2), PERFORMANCE_AUDIT_PLAN (8), REFACTORING_AUDIT_PLAN (2), DOCUMENTATION_AUDIT_PLAN (6), PROCESS_AUDIT_PLAN (2). Templates were not fully instantiated.","recommendation":"Replace all [X] and YYYY-MM-DD placeholders with actual values in 2026-Q1 plan files.","evidence":["docs:sync-check shows 20 issues","PERFORMANCE_AUDIT_PLAN_2026_Q1.md has 8 placeholders","DOCUMENTATION_AUDIT_PLAN_2026_Q1.md has 6 placeholders"],"cross_ref":"docs_sync","sources":[{"type":"single-session","id":"DOC-002","date":"2026-01-17","category":"documentation"}]}
{"original_id":"DOC-003","title":"99 files fail docs:check (313 errors, 177 warnings)","category":"documentation","severity":"S2","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"scripts/README.md","line":1,"description":"docs:check reports all 99 checked files have errors. Most common: missing document title (H1), missing Purpose/Overview section, missing Version History section, missing AI Instructions section.","recommendation":"Prioritize fixing core documentation files first. Consider updating DOCUMENTATION_STANDARDS.md to reflect realistic requirements for auto-generated files.","evidence":["docs:check reports 313 errors, 177 warnings across 99 files","scripts/README.md missing title, purpose, version history","src/dataconnect-generated READMEs missing required sections"],"cross_ref":"docs_check","sources":[{"type":"single-session","id":"DOC-003","date":"2026-01-17","category":"documentation"}]}
{"original_id":"DOC-004","title":"TRIGGERS.md last updated 2026-01-02 (15 days stale)","category":"documentation","severity":"S2","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":"docs/TRIGGERS.md","line":1,"description":"TRIGGERS.md was last updated 2026-01-02 but hooks have been updated multiple times since (pre-commit now has 8 checks, pre-push has 7). Document may be out of sync with actual trigger configuration.","recommendation":"Update TRIGGERS.md to reflect current hook counts and any new triggers added since 2026-01-02.","evidence":["Last Updated: 2026-01-02 in header","Process audit (2026-01-17) noted pre-commit: 8 checks, pre-push: 7 checks","15 days since last update"],"cross_ref":"git_log","sources":[{"type":"single-session","id":"DOC-004","date":"2026-01-17","category":"documentation"}]}
{"original_id":"DOC-005","title":"DOCUMENTATION_STANDARDS.md last updated 2026-01-01 (16 days stale)","category":"documentation","severity":"S2","effort":"E0","confidence":"medium","verified":"MANUAL_ONLY","file":"docs/DOCUMENTATION_STANDARDS.md","line":1,"description":"DOCUMENTATION_STANDARDS.md version 1.2 was last updated 2026-01-01. Given 295 commits and significant doc changes since, standards may need refresh.","recommendation":"Review if documentation standards need updates based on lessons learned from recent audits.","evidence":["Last Updated: 2026-01-01 in header","Document Version: 1.2","295 commits since last update"],"cross_ref":"git_log","sources":[{"type":"single-session","id":"DOC-005","date":"2026-01-17","category":"documentation"}]}
{"original_id":"DOC-006","title":"DOCUMENT_DEPENDENCIES.md claims SYNCED but sync check reports 20 issues","category":"documentation","severity":"S2","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"docs/DOCUMENT_DEPENDENCIES.md","line":3,"description":"DOCUMENT_DEPENDENCIES.md header claims 'Sync Status: SYNCED' but docs:sync-check reports 20 issues. False sync status misleads maintainers.","recommendation":"Run docs:sync-check, fix all issues, then update sync status to reflect actual state.","evidence":["Header shows Version: 1.2","docs:sync-check reports 20 issues","Status mismatch between header and tooling"],"cross_ref":"docs_sync","sources":[{"type":"single-session","id":"DOC-006","date":"2026-01-17","category":"documentation"}]}
{"original_id":"DOC-007","title":"15 recent commits touch docs but AUDIT_TRACKER shows only 5 categories audited today","category":"documentation","severity":"S2","effort":"E1","confidence":"medium","verified":"MANUAL_ONLY","file":"docs/","line":0,"description":"git log shows 15 commits in past 7 days affecting markdown files. While code/security/performance/process/refactoring audits done today, documentation category was last audited 2026-01-10 (Multi-AI).","recommendation":"This audit addresses the gap. Continue monitoring doc changes between audits.","evidence":["git log shows 15 recent commits to *.md","AUDIT_TRACKER.md shows Documentation: 2026-01-10 (Multi-AI)","295 commits since last doc audit"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"DOC-007","date":"2026-01-17","category":"documentation"}]}
{"original_id":"DOC-008","title":"Archive docs contain significant link rot after moves","category":"documentation","severity":"S3","effort":"E2","confidence":"high","verified":"TOOL_VALIDATED","file":"docs/archive/","line":0,"description":"CANON-0100 identified multiple archived documents with broken links (./README.md, ./ROADMAP.md from docs/archive/). This is expected for archived content but adds noise to link validation.","recommendation":"Option A: Exclude docs/archive/** from link checks. Option B: Update archive links to correct relative paths.","evidence":["CANON-0100 documents this issue","docs/archive/AI_HANDOFF-2026-01-02.md has broken relative links","Expected behavior for archived content"],"cross_ref":"CANON-0100","sources":[{"type":"single-session","id":"DOC-008","date":"2026-01-17","category":"documentation"}]}
{"original_id":"DOC-009","title":"PR_REVIEW_PROMPT_TEMPLATE.md lacks Last Updated and Version History (now archived)","category":"documentation","severity":"S3","effort":"E0","confidence":"medium","verified":"MANUAL_ONLY","file":"docs/archive/2026-jan-deprecated/PR_REVIEW_PROMPT_TEMPLATE.md","line":1,"description":"CANON-0097 noted this template lacks Last Updated, Status, and Version History section. Now archived at docs/archive/2026-jan-deprecated/.","recommendation":"If template is still needed, restore with proper metadata. Otherwise, update CANON-0097 as resolved via archival.","evidence":["CANON-0097 documents this issue","Template has been archived to docs/archive/2026-jan-deprecated/","Template had Created and Purpose but not Last Updated/Status"],"cross_ref":"CANON-0097","sources":[{"type":"single-session","id":"DOC-009","date":"2026-01-17","category":"documentation"}]}
{"original_id":"DOC-010","title":"DOCUMENTATION_INDEX.md orphaned - not referenced by any markdown file","category":"documentation","severity":"S3","effort":"E0","confidence":"medium","verified":"MANUAL_ONLY","file":"DOCUMENTATION_INDEX.md","line":1,"description":"CANON-0093 noted DOCUMENTATION_INDEX.md is not linked from README.md or other navigation docs. Primary navigation artifact is undiscoverable.","recommendation":"Add prominent link to DOCUMENTATION_INDEX.md from README.md.","evidence":["CANON-0093 documents this issue","grep shows no markdown referencing DOCUMENTATION_INDEX.md","Should be linked from README.md"],"cross_ref":"CANON-0093","sources":[{"type":"single-session","id":"DOC-010","date":"2026-01-17","category":"documentation"}]}
{"original_id":"PERF-001","title":"Large monolithic component (1117 lines) without code splitting","category":"performance","severity":"S1","effort":"E2","confidence":"high","verified":"TOOL_VALIDATED","file":"components/notebook/pages/today-page.tsx","line":1,"description":"TodayPage is 1117 lines with 15+ state variables, 12 console.log statements, and multiple useEffect hooks. No code splitting or lazy loading despite being heavily interactive.","recommendation":"Split into smaller sub-components: TodayPageHeader, CleanTimeSection, MoodCheckInSection, HaltCheckSection, WeeklyStatsSection. Use dynamic imports for optional sections.","evidence":["wc -l shows 1117 lines","12 console.log debug statements found","15+ useState calls at component top"],"cross_ref":"build","affected_metric":"bundle","estimated_improvement":"15-20%","sources":[{"type":"single-session","id":"PERF-001","date":"2026-01-17","category":"performance"}]}
{"original_id":"PERF-002","title":"No React.memo on frequently re-rendered admin list (924 lines)","category":"performance","severity":"S1","effort":"E1","confidence":"high","verified":"DUAL_PASS_CONFIRMED","file":"components/admin/users-tab.tsx","line":84,"description":"UsersTab is 924 lines with complex state (search, pagination, drawer, editing). Child components re-render on any state change. SonarCloud flagged cognitive complexity 27.","recommendation":"Extract UserListItem, UserSearchBar, UserDetailDrawer as memoized sub-components. Add React.memo with proper equality checks.","evidence":["wc -l shows 924 lines","0 React.memo usage in codebase","Code audit CODE-005 flagged cognitive complexity 27"],"cross_ref":"MANUAL_ONLY","affected_metric":"render","estimated_improvement":"20-30%","sources":[{"type":"single-session","id":"PERF-002","date":"2026-01-17","category":"performance"}]}
{"original_id":"PERF-004","title":"30+ components with inline onClick arrow functions","category":"performance","severity":"S2","effort":"E1","confidence":"medium","verified":"MANUAL_ONLY","file":"components","line":0,"description":"Found 30+ components passing inline arrow functions to onClick props (onClick={() => ...). These create new function references on each render, potentially causing unnecessary child re-renders.","recommendation":"Extract handlers to useCallback where components are memoized or passed to child components.","evidence":["grep onClick={() => found 30+ matches in components/","settings-page.tsx, users-tab.tsx, logs-tab.tsx among top offenders"],"cross_ref":"MANUAL_ONLY","affected_metric":"render","estimated_improvement":"5-10%","sources":[{"type":"single-session","id":"PERF-004","date":"2026-01-17","category":"performance"}]}
{"original_id":"PERF-005","title":"28 components with inline style objects","category":"performance","severity":"S2","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"components","line":0,"description":"Found 28 components using style={{...}} inline objects which create new object references on each render, potentially causing unnecessary re-renders.","recommendation":"Move static styles to className (Tailwind) or extract to const objects outside component. Dynamic styles should use useMemo.","evidence":["grep style={{  found 28 files with 110 total occurrences","Top offenders: NightReviewCard (14), settings-page (5), today-page (6)"],"cross_ref":"MANUAL_ONLY","affected_metric":"render","estimated_improvement":"3-5%","sources":[{"type":"single-session","id":"PERF-005","date":"2026-01-17","category":"performance"}]}
{"original_id":"PERF-006","title":"Large chunk file (628KB) indicates code splitting opportunity","category":"performance","severity":"S2","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":".next/static/chunks","line":0,"description":"Largest chunk is 628KB. Next largest chunks: 356KB, 280KB, 220KB, 188KB. Total static directory: 3.5MB.","recommendation":"Run bundle analyzer (npm run analyze) to identify which modules are in large chunks. Consider dynamic imports for heavy libraries like framer-motion (37 imports).","evidence":["du -h shows 628KB largest chunk","Total .next/static is 3.5MB","37 framer-motion imports across components"],"cross_ref":"build","affected_metric":"bundle","estimated_improvement":"10-15%","sources":[{"type":"single-session","id":"PERF-006","date":"2026-01-17","category":"performance"}]}
{"original_id":"PERF-007","title":"20+ uses of key={index} in list rendering","category":"performance","severity":"S2","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":"components","line":0,"description":"Found 20+ instances of key={index} or key={i} in .map() renders. Index keys cause inefficient reconciliation when list items are reordered, added, or removed.","recommendation":"Use unique stable IDs for keys (item.id, item.uid). Index keys acceptable only for truly static lists.","evidence":["grep key={i} and key={index} found 20+ matches","onboarding-wizard.tsx, Step1WorksheetCard.tsx, entry-card.tsx among offenders"],"cross_ref":"MANUAL_ONLY","affected_metric":"render","estimated_improvement":"5-10%","sources":[{"type":"single-session","id":"PERF-007","date":"2026-01-17","category":"performance"}]}
{"original_id":"PERF-008","title":"setInterval without visibility check continues in background","category":"performance","severity":"S2","effort":"E1","confidence":"high","verified":"MANUAL_ONLY","file":"components/widgets/meeting-countdown.tsx","line":41,"description":"meeting-countdown.tsx and compact-meeting-countdown.tsx run setInterval (60s/30s) even when tab is backgrounded, wasting resources.","recommendation":"Use Page Visibility API to pause intervals when document is hidden. Pattern already exists in today-page.tsx:488.","evidence":["setInterval at lines 41 and 236","No visibilitychange listener in countdown components","today-page.tsx already implements visibility pattern"],"cross_ref":"MANUAL_ONLY","affected_metric":"memory","estimated_improvement":"Minor","sources":[{"type":"single-session","id":"PERF-008","date":"2026-01-17","category":"performance"}]}
{"original_id":"PERF-009","title":"getAllMeetings() deprecated but still available without limit","category":"performance","severity":"S2","effort":"E1","confidence":"medium","verified":"MANUAL_ONLY","file":"lib/db/meetings.ts","line":129,"description":"MeetingsService.getAllMeetings() fetches entire collection without limit. Marked deprecated but not removed. paginated version exists but may not be used everywhere.","recommendation":"Remove deprecated getAllMeetings or add deprecation warning. Audit call sites to ensure pagination is used.","evidence":["getAllMeetings at line 129 has no limit()","Comment says DEPRECATED, use getAllMeetingsPaginated","CANON-PERF noted similar issues"],"cross_ref":"MANUAL_ONLY","affected_metric":"LCP","estimated_improvement":"Variable","sources":[{"type":"single-session","id":"PERF-009","date":"2026-01-17","category":"performance"}]}
{"original_id":"PERF-010","title":"Only 6 dynamic imports despite 101 client components","category":"performance","severity":"S3","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"components","line":0,"description":"Found only 6 dynamic() imports but 101 'use client' directives. Most components are bundled eagerly even if conditionally rendered.","recommendation":"Add dynamic imports for conditionally-rendered heavy components: modals, drawers, map components, admin panels.","evidence":["grep dynamic( found 6 matches","grep 'use client' found 101 matches","dynamic imports: MeetingMap, SignInModal, OnboardingWizard, AccountLinkModal, SettingsPage"],"cross_ref":"build","affected_metric":"bundle","estimated_improvement":"Variable","sources":[{"type":"single-session","id":"PERF-010","date":"2026-01-17","category":"performance"}]}
{"original_id":"PERF-011","title":"useMemo/useCallback usage is inconsistent","category":"performance","severity":"S3","effort":"E1","confidence":"medium","verified":"MANUAL_ONLY","file":"components","line":0,"description":"Found 11 useMemo and 10 useCallback usages, but 0 React.memo. Without memo on child components, useCallback provides limited benefit.","recommendation":"Add React.memo to list item components and frequently re-rendered children before useCallback provides full benefit.","evidence":["grep useMemo found 11 files","grep useCallback found 10 files","grep React.memo found 0 files"],"cross_ref":"MANUAL_ONLY","affected_metric":"render","estimated_improvement":"Variable","sources":[{"type":"single-session","id":"PERF-011","date":"2026-01-17","category":"performance"}]}
{"original_id":"PERF-012","title":"Image optimization disabled (unoptimized: true)","category":"performance","severity":"S3","effort":"E2","confidence":"medium","verified":"MANUAL_ONLY","file":"next.config.mjs","line":14,"description":"Next.js image optimization is disabled via images: { unoptimized: true }. All images served at full resolution without WebP conversion or responsive sizing. CANON-0047 flagged this as S1.","recommendation":"Enable image optimization or implement static-friendly responsive pipeline. Consider using Cloudinary/Imgix for static export.","evidence":["next.config.mjs has unoptimized: true","Only 5 next/image imports found","0 <img> tags (good) but images may be CSS backgrounds"],"cross_ref":"CANON-0047","affected_metric":"LCP","estimated_improvement":"30-50%","sources":[{"type":"single-session","id":"PERF-012","date":"2026-01-17","category":"performance"}]}
{"original_id":"PROC-002","title":"tj-actions/changed-files without CVE-pinned version","category":"process","severity":"S3","effort":"E0","confidence":"medium","verified":"MANUAL_ONLY","file":".github/workflows/docs-lint.yml","line":36,"description":"docs-lint.yml uses tj-actions/changed-files@v46 without SHA pin. ci.yml correctly pins to SHA for CVE-2025-30066 protection.","recommendation":"Update to pinned SHA like ci.yml does: tj-actions/changed-files@c65cd883420fd2eb864698a825fc4162dd94482c","evidence":["docs-lint.yml:36 uses @v46","ci.yml correctly uses SHA-pinned version"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"PROC-002","date":"2026-01-17","category":"process"}]}
{"original_id":"PROC-003","title":"lint-staged using npx --no-install may fail if not in cache","category":"process","severity":"S3","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":".husky/pre-commit","line":21,"description":"Pre-commit hook uses 'npx --no-install lint-staged' which will fail if lint-staged isn't already cached. This is intentional security measure but causes the issue we've been experiencing.","recommendation":"Document workaround in DEVELOPMENT.md: run 'npm exec lint-staged' or 'npx lint-staged' once to cache the package.","evidence":["pre-commit:22 npx --no-install lint-staged","Error: npm error npx canceled due to missing packages"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"PROC-003","date":"2026-01-17","category":"process"}]}
{"original_id":"PROC-004","title":"Multiple trap commands may override each other","category":"process","severity":"S3","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":".claude/hooks/session-start.sh","line":245,"description":"session-start.sh has trap at line 245 for PATTERN_ERR_TMP but earlier trap at line 42 for TEST_TMPFILE (in pre-commit). Only last trap per signal is active.","recommendation":"Consolidate trap handlers or use a cleanup function that handles multiple temp files.","evidence":["Line 245: trap 'rm -f \"$PATTERN_ERR_TMP\"' EXIT","Earlier scripts may have their own traps"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"PROC-004","date":"2026-01-17","category":"process"}]}
{"original_id":"PROC-005","title":"28 scripts have 715 console.log/error/warn calls without structured logging","category":"process","severity":"S2","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"scripts/","line":0,"description":"Scripts rely on console.* calls which mix errors with stdout, making programmatic parsing difficult. No centralized logging utility exists.","recommendation":"Create scripts/lib/logger.js with levels (debug, info, warn, error) and JSON output option. Gradually migrate high-traffic scripts.","evidence":["grep found 715 console.* calls across 28 scripts","validate-audit.js:38, ai-review.js:36 among top offenders"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"PROC-005","date":"2026-01-17","category":"process"}]}
{"original_id":"PROC-006","title":"Script has minimal console output (1 call)","category":"process","severity":"S3","effort":"E0","confidence":"medium","verified":"MANUAL_ONLY","file":"scripts/check-cross-doc-deps.js","line":1,"description":"check-cross-doc-deps.js has only 1 console call, suggesting minimal user feedback during execution.","recommendation":"Add progress indicators for longer operations.","evidence":["grep count: 1 console call in check-cross-doc-deps.js"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"PROC-006","date":"2026-01-17","category":"process"}]}
{"original_id":"PROC-007","title":"TRIGGERS.md last updated 2026-01-02 but hooks updated since","category":"process","severity":"S3","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":"docs/TRIGGERS.md","line":1,"description":"TRIGGERS.md documents 68+ enforcement points but was last updated 2026-01-02. Pre-commit hook has 8 checks (documented) and pre-push has 7 checks. Document may be slightly stale.","recommendation":"Update TRIGGERS.md to reflect current hook counts and any changes since 2026-01-02.","evidence":["TRIGGERS.md version 1.3, last updated 2026-01-02","Pre-commit has 8 checks, pre-push has 7 checks"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"PROC-007","date":"2026-01-17","category":"process"}]}
{"original_id":"PROC-008","title":"All 12 slash commands have frontmatter descriptions","category":"process","severity":"S3","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":".claude/commands/","line":0,"description":"All commands in .claude/commands/ have proper YAML frontmatter with descriptions. This is working as expected.","recommendation":"No action needed - this is a positive finding.","evidence":["grep found 12 files with frontmatter","All audit-*.md, session-*.md, etc. have descriptions"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"PROC-008","date":"2026-01-17","category":"process"}]}
{"original_id":"PROC-009","title":"Artifact upload without retention policy","category":"process","severity":"S2","effort":"E1","confidence":"medium","verified":"MANUAL_ONLY","file":".github/workflows/ci.yml","line":99,"description":"CI workflow uploads coverage artifacts but doesn't specify retention period. Default is 90 days which may accumulate storage.","recommendation":"Add retention-days: 7 to actions/upload-artifact@v4 for coverage artifacts.","evidence":["ci.yml:99 uses actions/upload-artifact@v4 without retention-days"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"PROC-009","date":"2026-01-17","category":"process"}]}
{"original_id":"PROC-010","title":"Git diff with @{u}...HEAD fails on new branches without upstream","category":"process","severity":"S2","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":".husky/pre-push","line":48,"description":"Pre-push hook line 48 uses @{u}...HEAD which fails silently on branches without upstream tracking. The hook handles this gracefully but could be clearer.","recommendation":"Add explicit message when no upstream is detected instead of 'No upstream or no JS/TS/JSON changes detected'.","evidence":["pre-push:48 git diff --name-only --diff-filter=ACMR @{u}...HEAD","Error handled at line 52-53"],"cross_ref":"MANUAL_ONLY","sources":[{"type":"single-session","id":"PROC-010","date":"2026-01-17","category":"process"}]}
{"original_id":"REF-001","title":"TodayPage god component (1117 lines, 14 useState, 10 useEffect, 24 imports)","category":"refactoring","severity":"S1","effort":"E2","confidence":"high","verified":"DUAL_PASS_CONFIRMED","file":"components/notebook/pages/today-page.tsx","line":1,"description":"TodayPage mixes 5+ responsibilities: persistence, realtime sync, analytics, UI state, localStorage recovery. Highest LOC in codebase with 14 useState hooks and 10 useEffect hooks creating complex state interdependencies.","recommendation":"Split into hooks: useDailyLogState, useDailyLogRealtime, useWeeklyStats. Move Firestore queries to service layer. Target <400 lines per component.","evidence":["wc -l shows 1117 lines","grep useState shows 14 usages","grep useEffect shows 10 usages","grep import shows 24 imports"],"cross_ref":"CANON-0072","metrics":{"lines":1117,"useState":14,"useEffect":10,"imports":24,"responsibilities":5},"sources":[{"type":"single-session","id":"REF-001","date":"2026-01-17","category":"refactoring"}]}
{"original_id":"REF-002","title":"UsersTab god component (924 lines, 21 useState, 3 useEffect)","category":"refactoring","severity":"S1","effort":"E2","confidence":"high","verified":"DUAL_PASS_CONFIRMED","file":"components/admin/users-tab.tsx","line":1,"description":"Admin users component with 924 lines, 21 useState hooks for managing search, pagination, drawer, editing states. Too many responsibilities in single component making it hard to maintain and test.","recommendation":"Extract UserListItem, UserSearchBar, UserDetailDrawer as separate components. Create useUserSearch and useUserDetail hooks.","evidence":["wc -l shows 924 lines","grep useState shows 21 usages","5 interfaces defined in file"],"cross_ref":"MANUAL_ONLY","metrics":{"lines":924,"useState":21,"useEffect":3,"interfaces":5},"sources":[{"type":"single-session","id":"REF-002","date":"2026-01-17","category":"refactoring"}]}
{"original_id":"REF-003","title":"Step1WorksheetCard large component (845 lines) with nested conditionals","category":"refactoring","severity":"S2","effort":"E2","confidence":"high","verified":"TOOL_VALIDATED","file":"components/growth/Step1WorksheetCard.tsx","line":1,"description":"Complex growth worksheet with 845 lines, large initialData object (34 fields), and deeply nested switch statements for question rendering.","recommendation":"Extract FormSection, QuestionBlock as separate components. Move FORM_SECTIONS constant to separate config file.","evidence":["wc -l shows 845 lines","34 fields in initialData object","switch with multiple cases for question types"],"cross_ref":"MANUAL_ONLY","metrics":{"lines":845,"dataFields":34,"constants":4},"sources":[{"type":"single-session","id":"REF-003","date":"2026-01-17","category":"refactoring"}]}
{"original_id":"REF-004","title":"ResourcesPage large component (728 lines) mixing meetings and sober homes","category":"refactoring","severity":"S2","effort":"E2","confidence":"high","verified":"TOOL_VALIDATED","file":"components/notebook/pages/resources-page.tsx","line":1,"description":"Resources page handles two separate resource types (meetings, sober homes) with distinct data fetching, filtering, and display logic in single component.","recommendation":"Extract MeetingsSection and SoberHomesSection as separate components. Create useResourceFilters hook for shared filter state.","evidence":["wc -l shows 728 lines","Two distinct resource types with separate logic","Dynamic import for MeetingMap"],"cross_ref":"MANUAL_ONLY","metrics":{"lines":728,"responsibilities":3},"sources":[{"type":"single-session","id":"REF-004","date":"2026-01-17","category":"refactoring"}]}
{"original_id":"REF-005","title":"Time-of-day rotation logic duplicated in quotes.ts and slogans.ts (80+ lines)","category":"refactoring","severity":"S1","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"lib/db/quotes.ts","line":44,"description":"getTimeOfDay() and getQuoteForNow()/getSloganForNow() contain identical complex rotation algorithms (time windows + day-of-year seed) duplicated between two files. Bug fixes must be applied twice.","recommendation":"Extract to lib/utils/content-rotation.ts with generic getTimeOfDay() and getRotatingContentForNow<T>() functions.","evidence":["quotes.ts:44-48 getTimeOfDay identical to slogans.ts:64-68","quotes.ts:58-95 getQuoteForNow pattern matches slogans.ts:78-115"],"cross_ref":"CANON-0065","metrics":{"duplicatedLines":80,"files":2},"sources":[{"type":"single-session","id":"REF-005","date":"2026-01-17","category":"refactoring"},{"type":"canon","id":"CANON-0065","file":"CANON-REFACTOR.jsonl"}],"files":["lib/db/quotes.ts","lib/db/slogans.ts"],"merged_from":["REF-005","CANON-0065"]}
{"original_id":"REF-006","title":"reCAPTCHA token fetch pattern repeated 5x across codebase","category":"refactoring","severity":"S2","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"hooks/use-journal.ts","line":281,"description":"Same getRecaptchaToken() boilerplate repeated in firestore-service.ts (3x) and use-journal.ts (2x). Easy to forget when adding new Cloud Function calls.","recommendation":"Create callSecureFunction wrapper in lib/utils/callable-errors.ts that auto-injects reCAPTCHA token.","evidence":["lib/firestore-service.ts:126-144 saveDailyLog reCAPTCHA","lib/firestore-service.ts:376-391 saveNotebookJournalEntry reCAPTCHA","hooks/use-journal.ts:281-299 addEntry reCAPTCHA"],"cross_ref":"CANON-0076","metrics":{"instances":5,"files":3},"sources":[{"type":"single-session","id":"REF-006","date":"2026-01-17","category":"refactoring"}]}
{"original_id":"REF-007","title":"Growth card dialog/save pattern duplicated across 4 components","category":"refactoring","severity":"S2","effort":"E2","confidence":"medium","verified":"TOOL_VALIDATED","file":"components/growth/SpotCheckCard.tsx","line":24,"description":"isOpen/isSaving/handleSave state management pattern repeated in SpotCheckCard, GratitudeCard, NightReviewCard, Step1WorksheetCard.","recommendation":"Extract useGrowthCardDialog(saveConfig) hook that manages isOpen, isSaving, and provides handleSave.","evidence":["SpotCheckCard.tsx:24-88 isOpen/isSaving/handleSave","GratitudeCard.tsx:28-99 same pattern","NightReviewCard.tsx:75-165 same pattern","Step1WorksheetCard.tsx:455-650 same pattern"],"cross_ref":"CANON-0079","metrics":{"instances":4,"boilerplateLines":20},"sources":[{"type":"single-session","id":"REF-007","date":"2026-01-17","category":"refactoring"},{"type":"canon","id":"CANON-0079","file":"CANON-REFACTOR.jsonl"}],"files":["components/growth/SpotCheckCard.tsx","components/growth/GratitudeCard.tsx","components/growth/NightReviewCard.tsx","components/growth/Step1WorksheetCard.tsx"],"merged_from":["REF-007","CANON-0079"]}
{"original_id":"REF-008","title":"Direct Firebase SDK usage in 22+ files bypasses service layer","category":"refactoring","severity":"S1","effort":"E2","confidence":"high","verified":"TOOL_VALIDATED","file":"hooks/use-journal.ts","line":31,"description":"Components and hooks import directly from firebase/firestore (collection, doc, onSnapshot, getDocs) instead of using service layer. SDK changes would require touching 22+ files.","recommendation":"Route all Firebase access through lib/firestore-service.ts or dedicated services. Components should only import from services.","evidence":["hooks/use-journal.ts:31-36 imports collection, query, orderBy, onSnapshot","components/notebook/pages/today-page.tsx:309 dynamic import firebase/firestore","components/admin/admin-crud-table.tsx:47-54 direct collection/getDocs"],"cross_ref":"CANON-0075","metrics":{"directImports":22,"affectedFiles":10},"sources":[{"type":"single-session","id":"REF-008","date":"2026-01-17","category":"refactoring"},{"type":"canon","id":"CANON-0075","file":"CANON-REFACTOR.jsonl"}],"files":["hooks/use-journal.ts","components/notebook/pages/today-page.tsx","components/admin/admin-crud-table.tsx","components/growth/DailySloganWidget.tsx","components/providers/profile-context.tsx"],"merged_from":["REF-008","CANON-0075"]}
{"original_id":"CANON-0070","title":"Deprecated saveNotebookJournalEntry still used in 6+ UI components","category":"refactoring","severity":"S1","effort":"E2","confidence":"high","file":"lib/firestore-service.ts","files":["lib/firestore-service.ts","components/growth/GratitudeCard.tsx","components/growth/SpotCheckCard.tsx","components/growth/NightReviewCard.tsx","components/growth/Step1WorksheetCard.tsx","components/notebook/pages/today-page.tsx"],"symbols":["saveNotebookJournalEntry"],"description":"Two write paths create inconsistent metadata (tags/searchableText). Audit burden.","recommendation":"Migrate callers to useJournal.addEntry. Remove deprecated method.","evidence":["lib/firestore-service.ts:365-457 saveNotebookJournalEntry (DEPRECATED comment)","grep saveNotebookJournalEntry found 6+ component usages"],"pr_bucket_suggestion":"hooks-standardization","dependencies":["CANON-0067"],"status":"NEW","consensus_score":2,"sources":[{"type":"canon","id":"CANON-0070","file":"CANON-REFACTOR.jsonl"},{"type":"single-session","id":"REF-009","date":"2026-01-17","category":"refactoring"}],"merged_from":["CANON-0070","REF-009"]}
{"original_id":"REF-010","title":"CloudFunctionError interface defined twice in same file","category":"refactoring","severity":"S3","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":"lib/firestore-service.ts","line":200,"description":"CloudFunctionError interface is defined at both line 200-203 and line 423-426 in firestore-service.ts. Unnecessary duplication within same file.","recommendation":"Define once at module level or extract to lib/types/errors.ts","evidence":["lib/firestore-service.ts:200-203 interface CloudFunctionError","lib/firestore-service.ts:423-426 interface CloudFunctionError"],"cross_ref":"CANON-0087","metrics":{"duplicateDefinitions":2},"sources":[{"type":"single-session","id":"REF-010","date":"2026-01-17","category":"refactoring"},{"type":"canon","id":"CANON-0087","file":"CANON-REFACTOR.jsonl"}],"files":["lib/firestore-service.ts"],"merged_from":["REF-010","CANON-0087"]}
{"original_id":"REF-011","title":"2 tracked TODO markers in codebase","category":"refactoring","severity":"S3","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":"components/notebook/features/quick-actions-fab.tsx","line":12,"description":"Found 2 TODO/FIXME markers: quick-actions-fab.tsx:12 (customizable action buttons) and firestore-adapter.ts:51 (configurable limits).","recommendation":"Convert to GitHub issues or resolve. TODOs without tracking risk being forgotten.","evidence":["quick-actions-fab.tsx:12 TODO: Make action buttons customizable","firestore-adapter.ts:51 TODO: Pass limit to FirestoreService"],"cross_ref":"MANUAL_ONLY","metrics":{"todoCount":2},"sources":[{"type":"single-session","id":"REF-011","date":"2026-01-17","category":"refactoring"}]}
{"original_id":"REF-012","title":"4 linter suppressions in codebase (ts-ignore, ts-expect-error, eslint-disable)","category":"refactoring","severity":"S3","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"lib/logger.ts","line":86,"description":"Found 4 linter suppressions: logger.ts:86 (eslint-disable no-control-regex), resources-page.tsx:444 (ts-expect-error), admin/page.tsx:47 (eslint-disable react-hooks), use-geolocation.ts:171 (eslint-disable exhaustive-deps).","recommendation":"Review each suppression for possible removal or proper typing solution.","evidence":["lib/logger.ts:86 eslint-disable-next-line no-control-regex","components/notebook/pages/resources-page.tsx:444 @ts-expect-error","app/admin/page.tsx:47 eslint-disable react-hooks/set-state-in-effect","hooks/use-geolocation.ts:171 eslint-disable-line react-hooks/exhaustive-deps"],"cross_ref":"MANUAL_ONLY","metrics":{"suppressions":4},"sources":[{"type":"single-session","id":"REF-012","date":"2026-01-17","category":"refactoring"}]}
{"original_id":"EFFP-001","title":"No npm run dev:offline script - requires 2 terminals for emulator dev","category":"dx","severity":"S2","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":"package.json","line":5,"description":"Development with Firebase emulators requires manually running 'firebase emulators:start' in one terminal and 'npm run dev' in another. This friction reduces likelihood of offline testing.","recommendation":"Add 'dev:offline': 'concurrently \"firebase emulators:start\" \"npm run dev\"' to package.json scripts. Install concurrently as devDependency.","evidence":["grep 'dev:offline' package.json returns no matches","DEVELOPMENT.md lines 79-85 show 2-terminal workflow","EFF-001 from 2026-01-13 audit still unresolved"],"cross_ref":"EFF-001","roi":"HIGH","sources":[{"type":"single-session","id":"EFFP-001","date":"2026-01-17","category":"engineering-productivity"}]}
{"original_id":"EFFP-002","title":"No scripts/doctor.js for environment validation","category":"dx","severity":"S2","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"scripts/","line":0,"description":"No automated environment validation script exists. Developers must manually verify Node version, Firebase CLI, env vars, and other prerequisites. This causes 'works on my machine' issues.","recommendation":"Create scripts/doctor.js that checks: Node 18+, Firebase CLI installed, .env.local exists with required vars, functions/node_modules exists. Add 'doctor': 'node scripts/doctor.js' to package.json.","evidence":["ls scripts/doctor.js returns 'No such file'","package.json has no 'doctor' script","EFF-003 from 2026-01-13 audit still unresolved"],"cross_ref":"EFF-003","roi":"HIGH","sources":[{"type":"single-session","id":"EFFP-002","date":"2026-01-17","category":"engineering-productivity"}]}
{"original_id":"EFFP-003","title":"Setup requires multiple commands - no single bootstrap","category":"dx","severity":"S3","effort":"E0","confidence":"high","verified":"TOOL_VALIDATED","file":"package.json","line":5,"description":"New developer setup requires: git clone, npm install, cd functions && npm install, copy .env.local template, firebase login. No single 'npm run setup' command exists.","recommendation":"Add 'setup': 'npm install && cd functions && npm install && npm run doctor' to package.json. Consider adding .env.local.example template.","evidence":["DEVELOPMENT.md:42-46 shows multi-step setup","package.json has no 'setup' script"],"cross_ref":"MANUAL_ONLY","roi":"MEDIUM","sources":[{"type":"single-session","id":"EFFP-003","date":"2026-01-17","category":"engineering-productivity"}]}
{"original_id":"EFFP-004","title":"No correlation IDs for request tracing (frontend to backend)","category":"code","severity":"S1","effort":"E2","confidence":"high","verified":"TOOL_VALIDATED","file":"lib/logger.ts","line":1,"description":"No correlation/request IDs are generated or passed from frontend to Cloud Functions. When debugging production issues, cannot trace a user's journey across client and server logs.","recommendation":"Generate UUID on client per request, pass as X-Correlation-Id header to Cloud Functions, include in all logger calls. Add correlationId to LogContext type.","evidence":["grep 'correlationId|requestId|traceId' returns only node_modules hits","lib/logger.ts has no correlation ID support","EFF-006 from 2026-01-13 audit still unresolved"],"cross_ref":"EFF-006","roi":"HIGH","sources":[{"type":"single-session","id":"EFFP-004","date":"2026-01-17","category":"engineering-productivity"}]}
{"original_id":"EFFP-005","title":"8:1 ratio of console.log to structured logger calls (3111 vs 394)","category":"code","severity":"S2","effort":"E2","confidence":"high","verified":"TOOL_VALIDATED","file":"app/","line":0,"description":"Codebase has 3111 console.log statements vs 394 logger.* calls. console.log output is not captured by Sentry, not redacted for PII, and provides no structured context for debugging.","recommendation":"Replace console.log with logger.info/warn/error in production code paths. Keep console.log only for local debugging (remove before commit). Consider ESLint rule to warn on console.log.","evidence":["grep -c 'console.log' returns 3111","grep -c 'logger\\.' returns 394","Ratio: 7.9:1"],"cross_ref":"MANUAL_ONLY","roi":"MEDIUM","sources":[{"type":"single-session","id":"EFFP-005","date":"2026-01-17","category":"engineering-productivity"}]}
{"original_id":"EFFP-006","title":"Error messages lack actionable fix hints - generic 'Please try again'","category":"code","severity":"S3","effort":"E1","confidence":"medium","verified":"MANUAL_ONLY","file":"components/","line":0,"description":"15+ error toast messages use generic 'Please try again' without actionable guidance. Users don't know if they should: wait, refresh, check network, or contact support.","recommendation":"Add context-specific hints: 'Check your internet connection', 'This may take a moment, please wait', 'If this persists, contact support'. Include error code for support reference.","evidence":["grep 'Please try again' returns 15+ matches","components/admin/users-tab.tsx has 6 instances","components/growth/*.tsx has 4 instances"],"cross_ref":"MANUAL_ONLY","roi":"LOW","sources":[{"type":"single-session","id":"EFFP-006","date":"2026-01-17","category":"engineering-productivity"}]}
{"original_id":"EFFP-007","title":"No offline write queue - data loss when user goes offline","category":"offline","severity":"S1","effort":"E3","confidence":"high","verified":"DUAL_PASS_CONFIRMED","file":"hooks/use-journal.ts","line":319,"description":"Journal writes (addEntry, updateEntry) fail immediately when offline. No queue mechanism to hold writes and sync when back online. For a recovery app where users may have spotty connectivity, this causes data loss and frustration.","recommendation":"Implement IndexedDB-based write queue: 1) Queue writes locally when offline, 2) Sync on reconnection, 3) Handle conflicts with last-write-wins or prompt user. Consider using Firebase's built-in offline persistence first.","evidence":["hooks/use-journal.ts:319-340 calls httpsCallable directly with no offline handling","grep 'offlineQueue|writeQueue|pendingWrites' returns no app code matches","BOT-001 from 2026-01-13 audit identifies this as top bottleneck"],"cross_ref":"EFF-010","roi":"CRITICAL","sources":[{"type":"single-session","id":"EFFP-007","date":"2026-01-17","category":"engineering-productivity"}]}
{"original_id":"EFFP-008","title":"No Firebase persistence enabled - Firestore cache not persisted","category":"offline","severity":"S1","effort":"E1","confidence":"high","verified":"TOOL_VALIDATED","file":"lib/firebase.ts","line":1,"description":"enableIndexedDbPersistence or enableMultiTabIndexedDbPersistence is not called. Firestore data is only cached in memory, lost on page refresh. Users cannot view previously loaded data while offline.","recommendation":"Call enableIndexedDbPersistence(db) in Firebase initialization. Handle the 'failed-precondition' error for multi-tab scenarios. This is a quick win that enables offline reads with minimal code.","evidence":["grep 'enablePersistence|enableIndexedDbPersistence' returns no matches outside node_modules","lib/firebase.ts does not enable persistence"],"cross_ref":"MANUAL_ONLY","roi":"HIGH","sources":[{"type":"single-session","id":"EFFP-008","date":"2026-01-17","category":"engineering-productivity"}]}
{"original_id":"EFFP-009","title":"No service worker - no offline asset caching","category":"offline","severity":"S2","effort":"E2","confidence":"high","verified":"TOOL_VALIDATED","file":"public/","line":0,"description":"No service worker exists for caching static assets (JS, CSS, images). When offline, the app cannot load at all even though it's a PWA candidate with install-prompt component.","recommendation":"Add next-pwa or workbox-webpack-plugin to generate service worker. Configure precaching for app shell and runtime caching for API responses. Coordinate with Firebase persistence for full offline experience.","evidence":["ls public/sw.js returns 'No such file'","components/pwa/install-prompt.tsx exists but no SW to install","next.config.js has no PWA configuration"],"cross_ref":"MANUAL_ONLY","roi":"MEDIUM","sources":[{"type":"single-session","id":"EFFP-009","date":"2026-01-17","category":"engineering-productivity"}]}
{"original_id":"EFFP-010","title":"OfflineIndicator is display-only - no sync status or retry mechanism","category":"offline","severity":"S3","effort":"E1","confidence":"medium","verified":"MANUAL_ONLY","file":"components/status/offline-indicator.tsx","line":7,"description":"OfflineIndicator component shows online/offline status but provides no: pending write count, sync progress, or manual retry button. Users have no visibility into what's happening with their data.","recommendation":"Enhance OfflineIndicator to show: 1) Pending write count from queue, 2) Last successful sync time, 3) Manual 'Sync Now' button. Integrate with write queue from EFFP-007.","evidence":["components/status/offline-indicator.tsx only checks navigator.onLine","No integration with any sync/queue system","Component is imported in today-page.tsx but is passive"],"cross_ref":"MANUAL_ONLY","roi":"LOW","sources":[{"type":"single-session","id":"EFFP-010","date":"2026-01-17","category":"engineering-productivity"}]}
{"original_id":"CANON-0001","title":"App Check disabled on all production Cloud Functions","category":"code","severity":"S0","effort":"E2","confidence":"high","file":"functions/src/index.ts","files":["functions/src/index.ts"],"symbols":["saveDailyLog","saveJournalEntry","saveInventoryEntry","softDeleteJournalEntry"],"description":"S0: Bot/device attestation layer is disabled for callable endpoints, increasing abuse/spam risk and weakening defense-in-depth.","recommendation":"Re-enable App Check (requireAppCheck: true) across functions; add monitoring for App Check failures and ensure client App Check init is working.","pr_bucket_suggestion":"security-hardening","dependencies":["CANON-0003"],"status":"CONFIRMED","consensus_score":3,"sources":[{"type":"canon","id":"CANON-0001","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0002","title":"Legacy journalEntries collection allows direct client writes (bypasses function security posture)","category":"code","severity":"S0","effort":"E2","confidence":"high","file":"firestore.rules","files":["firestore.rules"],"symbols":["journalEntries"],"description":"S0: Direct client writes bypass App Check / rate limiting / server-side validation, creating a high-risk security outlier vs other collections.","recommendation":"Migrate remaining data off legacy path and set allow write: if false (or route writes through Cloud Functions if still used).","evidence":["firestore.rules allows owner create/update on /users/{userId}/journalEntries/{entryId} (both models)."],"pr_bucket_suggestion":"security-hardening","dependencies":[],"status":"CONFIRMED","consensus_score":3,"sources":[{"type":"canon","id":"CANON-0002","file":"CANON-CODE.jsonl"},{"type":"canon","id":"CANON-0034","file":"CANON-SECURITY.jsonl"}],"merged_from":["CANON-0002","CANON-0034"]}
{"original_id":"CANON-0003","title":"Console.* usage in app components bypasses standardized logger/sanitization","category":"refactoring","severity":"S1","effort":"E1","confidence":"high","file":"lib/db/library.ts","files":["lib/db/library.ts","lib/firestore-service.ts","components/notebook/journal-modal.tsx","components/notebook/pages/today-page.tsx","components/notebook/pages/library-page.tsx","lib/firebase.ts","components/growth/Step1WorksheetCard.tsx","components/admin/jobs-tab.tsx","components/admin/prayers-tab.tsx"],"symbols":["console.log","console.error","console.warn","initializeFirebase","TodayPage","Step1WorksheetCard","callCloudFunction","fetchQuickLinks","fetchPrayers"],"description":"Raw console logging can leak sensitive details, creates inconsistent observability, and violates the project's documented logger/sanitization intent.","recommendation":"Replace console.* with logger.* (or a client-safe wrapper), then enforce via lint rule (no-console with exceptions for logger implementation).","pr_bucket_suggestion":"security-hardening","dependencies":["CANON-0023"],"status":"CONFIRMED","consensus_score":4,"sources":[{"type":"canon","id":"CANON-0003","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0004","title":"Cloud Function schema missing 'step-1-worksheet' journal entry type (validation drift / feature break)","category":"code","severity":"S1","effort":"E0","confidence":"high","file":"functions/src/schemas.ts","files":["functions/src/schemas.ts","types/journal.ts"],"symbols":["journalEntrySchema","JournalEntryType"],"description":"Users can create Step 1 worksheet entries client-side that fail server validation, breaking saves at runtime.","recommendation":"Add 'step-1-worksheet' to journalEntrySchema type enum in functions/src/schemas.ts.","pr_bucket_suggestion":"types-domain","dependencies":[],"status":"CONFIRMED","consensus_score":3,"sources":[{"type":"canon","id":"CANON-0004","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0005","title":"Client App Check initialization is disabled/commented out","category":"code","severity":"S1","effort":"E1","confidence":"high","file":"lib/firebase.ts","files":["lib/firebase.ts"],"symbols":["initializeFirebase","_appCheck"],"description":"Without client App Check init, tokens may not be sent, undermining verification and/or causing callable failures once functions enforce App Check.","recommendation":"Restore initializeAppCheck gated by configured site key; use debug tokens only in development.","pr_bucket_suggestion":"security-hardening","dependencies":[],"status":"CONFIRMED","consensus_score":3,"sources":[{"type":"canon","id":"CANON-0005","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0006","title":"Cloud Function error handling duplicated (4 locations) + duplicate CloudFunctionError type definitions","category":"refactoring","severity":"S1","effort":"E1","confidence":"high","file":"lib/firestore-service.ts","files":["lib/firestore-service.ts","hooks/use-journal.ts"],"symbols":["saveDailyLog","saveNotebookJournalEntry","addEntry","crumplePage","CloudFunctionError"],"description":"Multiple copies of error mapping/code checks create drift risk and inconsistent user messaging; changes require editing several sites.","recommendation":"Extract CloudFunctionError type + handleCloudFunctionError() helper (likely in lib/utils/errors.ts) and use it in all locations.","pr_bucket_suggestion":"hooks-standardization","dependencies":[],"status":"CONFIRMED","consensus_score":3,"sources":[{"type":"canon","id":"CANON-0006","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0007","title":"Critical logic divergence in journal saving (deprecated FirestoreService path bypasses hook business logic)","category":"refactoring","severity":"S1","effort":"E1","confidence":"high","file":"lib/firestore-service.ts","files":["lib/firestore-service.ts","hooks/use-journal.ts","components/growth/Step1WorksheetCard.tsx","components/notebook/pages/today-page.tsx"],"symbols":["FirestoreService.saveNotebookJournalEntry","useJournal.addEntry","generateSearchableText","generateTags"],"description":"Entries saved through the deprecated service miss searchable metadata, breaking search/filter for those entries.","recommendation":"Refactor Step1WorksheetCard and TodayPage to use useJournal.addEntry; remove deprecated saveNotebookJournalEntry from FirestoreService.","pr_bucket_suggestion":"hooks-standardization","dependencies":["CANON-0007"],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0007","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0008","title":"reCAPTCHA verification is logged but not enforced when configured","category":"code","severity":"S1","effort":"E1","confidence":"high","file":"functions/src/security-wrapper.ts","files":["functions/src/security-wrapper.ts"],"symbols":["withSecurityChecks"],"description":"Requests can bypass bot mitigation if missing tokens are allowed to proceed while only being logged.","recommendation":"When recaptchaAction is set, require a token (throw on missing/blank) unless an explicit opt-out is provided.","pr_bucket_suggestion":"security-hardening","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0008","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0009","title":"Server layout composes client providers; boundary should be explicit","category":"refactoring","severity":"S1","effort":"E1","confidence":"high","file":"app/layout.tsx","files":["app/layout.tsx"],"symbols":["RootLayout"],"description":"Boundary clarity and potential hydration/bundle concerns; explicit client-side providers wrapper is recommended.","recommendation":"Create app/providers.tsx ('use client') wrapping AuthProvider/CelebrationProvider/ErrorBoundary and import from layout.tsx.","pr_bucket_suggestion":"boundaries","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0009","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0010","title":"Admin-claim Firestore rule writes lack function-only defense-in-depth","category":"code","severity":"S1","effort":"E2","confidence":"high","file":"firestore.rules","files":["firestore.rules"],"symbols":["isAdmin"],"description":"If admin claims are compromised/misconfigured, direct writes expand blast radius without server-side auditing/enforcement.","recommendation":"Add Cloud Function wrappers for admin mutations with server-side checks + audit logging; tighten rules to function-only where appropriate.","pr_bucket_suggestion":"security-hardening","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0010","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0011","title":"Missing automated tests for Cloud Function security layers (App Check / rate limiting / authz)","category":"code","severity":"S1","effort":"E2","confidence":"high","file":"functions/src/index.ts","files":["functions/src/index.ts","functions/src/security-wrapper.ts"],"symbols":["withSecurityChecks","saveDailyLog","saveJournalEntry"],"description":"Security regressions can ship undetected without tests covering enforcement layers.","recommendation":"Add tests covering unauth rejection, rate-limit behavior, App Check pass/fail, user-scope enforcement, and reCAPTCHA behavior.","pr_bucket_suggestion":"tests-hardening","dependencies":["CANON-0001","CANON-0002"],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0011","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0012","title":"No integration tests for Firestore rules (emulator-based)","category":"code","severity":"S1","effort":"E2","confidence":"high","file":"firestore.rules","files":["firestore.rules"],"symbols":[],"description":"Rules are a primary security boundary; regressions can become data exposure incidents without automated tests.","recommendation":"Set up Firebase emulator rule tests using @firebase/rules-unit-testing for key permission scenarios (including legacy collections).","pr_bucket_suggestion":"tests-hardening","dependencies":["CANON-0002","CANON-0008"],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0012","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0013","title":"Security-critical files have low test coverage (account-linking, firestore-service, recaptcha, users DB)","category":"code","severity":"S1","effort":"E2","confidence":"high","file":"lib/auth/account-linking.ts","files":["lib/auth/account-linking.ts","lib/firestore-service.ts","lib/recaptcha.ts","lib/db/users.ts"],"symbols":["linkEmailPassword","linkWithGoogle","saveDailyLog","getRecaptchaToken"],"description":"Low coverage in auth/data/recaptcha paths increases risk of undetected production regressions in security-sensitive user flows.","recommendation":"Add tests to raise coverage targets for these files; mock Cloud Functions where needed; add token generation unit coverage.","pr_bucket_suggestion":"tests-hardening","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0013","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0014","title":"reCAPTCHA verification coverage may be incomplete when App Check is disabled (needs verification)","category":"code","severity":"S1","effort":"E1","confidence":"high","file":"functions/src/index.ts","files":["functions/src/index.ts","functions/src/recaptcha-verify.ts"],"symbols":["verifyRecaptcha","saveDailyLog","saveJournalEntry"],"description":"If server-side verification is not enforced independently, bot mitigation may be weaker than intended when App Check is off.","recommendation":"Verify server-side recaptchaToken validation paths; consider making reCAPTCHA mandatory (align with CANON-0004).","pr_bucket_suggestion":"security-hardening","dependencies":["CANON-0004","CANON-0001"],"status":"SUSPECTED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0014","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0015","title":"Potential rate limit bypass via cycling anonymous accounts (needs threat-model validation)","category":"code","severity":"S1","effort":"E2","confidence":"high","file":"components/providers/auth-context.tsx","files":["components/providers/auth-context.tsx","lib/auth/account-linking.ts"],"symbols":["ensureAnonymousSession","signInAnonymously"],"description":"If rate limiting is keyed only by userId, attackers might bypass limits by creating new anonymous sessions repeatedly.","recommendation":"Validate feasibility; if real, add secondary rate limiting keyed by device/IP or strengthen anonymous auth constraints.","pr_bucket_suggestion":"security-hardening","dependencies":[],"status":"SUSPECTED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0015","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0016","title":"Potential sensitive data in localStorage (needs audit)","category":"code","severity":"S1","effort":"E2","confidence":"high","files":[],"symbols":[],"description":"If recovery/journal content is stored in localStorage, it persists unencrypted on-device and may raise privacy/compliance concerns.","recommendation":"Audit localStorage/sessionStorage usage; restrict to non-sensitive UI prefs; document policy.","pr_bucket_suggestion":"security-hardening","dependencies":[],"status":"SUSPECTED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0016","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0017","title":"Duplicated time-of-day rotation logic for quotes and slogans","category":"refactoring","severity":"S2","effort":"E1","confidence":"high","file":"lib/db/quotes.ts","files":["lib/db/quotes.ts","lib/db/slogans.ts"],"symbols":["QuotesService.getQuoteForNow","SlogansService.getSloganForNow","getTimeOfDay","getQuoteForNow","getSloganForNow"],"description":"Rotation changes risk diverging behavior and duplicating bug fixes.","recommendation":"Extract shared rotation utilities and reuse in both services; add unit tests for schedule/rotation paths.","pr_bucket_suggestion":"ui-primitives","dependencies":[],"status":"CONFIRMED","consensus_score":3,"sources":[{"type":"canon","id":"CANON-0017","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0018","title":"Unsafe type assertions with 'as unknown as' (worksheet + related components)","category":"code","severity":"S2","effort":"E1","confidence":"high","file":"components/growth/Step1WorksheetCard.tsx","files":["components/growth/Step1WorksheetCard.tsx","components/journal/entry-detail-dialog.tsx","components/maps/meeting-map.tsx"],"symbols":["Step1WorksheetCard","Step1Data","entry-detail-dialog","meeting-map"],"description":"Double casts bypass TypeScript safety; runtime crashes possible if data shape differs.","recommendation":"Add runtime validation (e.g., Zod parse) before casting; replace with type guards where applicable.","pr_bucket_suggestion":"types-domain","dependencies":["CANON-0007"],"status":"CONFIRMED","consensus_score":3,"sources":[{"type":"canon","id":"CANON-0018","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0019","title":"ESLint security plugin warnings in scripts (unsafe regex / non-literal fs / object injection patterns)","category":"code","severity":"S2","effort":"E2","confidence":"high","file":"scripts/check-review-needed.js","files":["scripts/check-review-needed.js","scripts/suggest-pattern-automation.js","scripts/validate-phase-completion.js","scripts/check-pattern-compliance.js","scripts/update-readme-status.js"],"symbols":["detectUnsafeRegex","detectNonLiteralFs","detectObjectInjection"],"description":"Even if scripts run in trusted contexts, these patterns are repeatedly flagged and can become risky if reused; they also create noisy lint output.","recommendation":"Address highest-risk warnings first: validate dynamic paths, constrain object key access, simplify/guard regex patterns; aim to reduce warnings materially.","pr_bucket_suggestion":"security-hardening","dependencies":[],"status":"CONFIRMED","consensus_score":3,"sources":[{"type":"canon","id":"CANON-0019","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0020","title":"Journal entry type definitions duplicated across client types and server schemas (single-source refactor)","category":"refactoring","severity":"S2","effort":"E2","confidence":"high","file":"types/journal.ts","files":["types/journal.ts","functions/src/schemas.ts"],"symbols":["JournalEntryType","journalEntrySchema"],"description":"Adding new entry types requires multi-file changes and risks client/server mismatch.","recommendation":"Extract shared constants (or generate TS types from Zod) so both client and functions import from one source.","pr_bucket_suggestion":"types-domain","dependencies":["CANON-0007"],"status":"CONFIRMED","consensus_score":3,"sources":[{"type":"canon","id":"CANON-0020","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0021","title":"Missing error.message null safety in TodayPage catch block","category":"code","severity":"S2","effort":"E0","confidence":"high","file":"components/notebook/pages/today-page.tsx","files":["components/notebook/pages/today-page.tsx"],"symbols":["handleSave"],"description":"If a non-Error is thrown, accessing error.message/stack can crash; catch is unknown.","recommendation":"Use getErrorMessage(error) helper to safely extract message.","pr_bucket_suggestion":"types-domain","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0021","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0022","title":"Unsafe localStorage JSON.parse in use-smart-prompts hook","category":"code","severity":"S2","effort":"E0","confidence":"high","file":"components/notebook/hooks/use-smart-prompts.ts","files":["components/notebook/hooks/use-smart-prompts.ts"],"symbols":["useSmartPrompts"],"description":"Corrupted localStorage can throw and crash the component.","recommendation":"Wrap JSON.parse in try/catch or use a safe parse utility with defaults.","pr_bucket_suggestion":"types-domain","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0022","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0023","title":"Duplicated DailyQuoteCard component exists in multiple directories (2 confirmed; possible 3rd variant)","category":"refactoring","severity":"S2","effort":"E1","confidence":"high","file":"components/notebook/features/daily-quote-card.tsx","files":["components/notebook/features/daily-quote-card.tsx","components/widgets/daily-quote-card.tsx","components/widgets/compact-daily-quote.tsx"],"symbols":["DailyQuoteCard","CompactDailyQuote"],"description":"Duplication increases maintenance burden; inconsistent exports/variants raise drift risk.","recommendation":"Consolidate to a single source of truth (auditor suggests keeping widgets version) and compose variants if needed.","pr_bucket_suggestion":"ui-primitives","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0023","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0024","title":"Inconsistent Firebase Functions import pattern (static vs dynamic imports)","category":"refactoring","severity":"S2","effort":"E1","confidence":"high","file":"lib/firestore-service.ts","files":["lib/firestore-service.ts","hooks/use-journal.ts","lib/auth/account-linking.ts","components/admin/jobs-tab.tsx","components/admin/errors-tab.tsx","components/admin/dashboard-tab.tsx"],"symbols":["getFunctions","httpsCallable"],"description":"Inconsistent patterns increase maintenance burden and make bundling/code-splitting intent unclear.","recommendation":"Standardize import strategy (e.g., static imports for client-side code; reserve dynamic imports for specific lazy routes if intentionally needed).","pr_bucket_suggestion":"firebase-access","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0024","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0025","title":"Inconsistent httpsCallable typing (missing generic request/response types)","category":"code","severity":"S2","effort":"E1","confidence":"high","file":"lib/firestore-service.ts","files":["lib/firestore-service.ts"],"symbols":["callCloudFunction"],"description":"Callable returns unknown, forcing casts and losing compile-time safety.","recommendation":"Add generic type parameters to callCloudFunction / httpsCallable usage.","pr_bucket_suggestion":"types-domain","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0025","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0026","title":"useJournal sets up its own auth listener instead of using shared auth context","category":"refactoring","severity":"S2","effort":"E1","confidence":"high","file":"hooks/use-journal.ts","files":["hooks/use-journal.ts","components/providers/auth-provider.tsx"],"symbols":["useJournal","auth.onAuthStateChanged"],"description":"Redundant subscriptions can cause state-sync issues and unnecessary listeners.","recommendation":"Refactor useJournal to consume user from auth context (or accept user as param) and remove internal onAuthStateChanged listener.","pr_bucket_suggestion":"boundaries","dependencies":["CANON-0006"],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0026","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0027","title":"Cloud Function integration test is skipped in firestore-service test suite","category":"code","severity":"S2","effort":"E2","confidence":"high","file":"tests/firestore-service.test.ts","files":["tests/firestore-service.test.ts"],"symbols":["saveDailyLog test"],"description":"Primary data save path is effectively untested; skip note indicates missing integration harness/emulator setup.","recommendation":"Add an integration test suite using Firebase emulator; optionally mock httpsCallable for unit coverage.","pr_bucket_suggestion":"tests-hardening","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0027","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0028","title":"Journal entry schema data is weakly typed (z.record unknown; per-type validation not enforced)","category":"code","severity":"S2","effort":"E2","confidence":"high","file":"functions/src/schemas.ts","files":["functions/src/schemas.ts"],"symbols":["journalEntrySchema"],"description":"Malformed entries can pass validation; intended per-type validation is not enforced.","recommendation":"Use a Zod discriminated union for per-entry-type data schemas.","pr_bucket_suggestion":"types-domain","dependencies":["CANON-0016"],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0028","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0029","title":"No tests for useJournal hook","category":"code","severity":"S2","effort":"E2","confidence":"high","file":"hooks/use-journal.ts","files":["hooks/use-journal.ts"],"symbols":["useJournal","addEntry","crumplePage"],"description":"Core journal interaction logic lacks dedicated tests; regressions can break journaling flows.","recommendation":"Add tests for useJournal with mocked Firebase/Cloud Functions covering auth changes, addEntry, and crumplePage.","pr_bucket_suggestion":"tests-hardening","dependencies":["CANON-0006"],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0029","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0030","title":"@ts-expect-error suppression comment in production code","category":"code","severity":"S3","effort":"E0","confidence":"high","file":"components/notebook/pages/resources-page.tsx","files":["components/notebook/pages/resources-page.tsx"],"symbols":["setGenderFilter"],"description":"Suppresses type checking and can hide real mismatches; should be replaced with proper typing or a type guard.","recommendation":"Fix type annotation or add explicit narrowing so the call is type-safe without suppression.","pr_bucket_suggestion":"types-domain","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0030","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0031","title":"Environment variables accessed directly in components (centralize in typed config)","category":"refactoring","severity":"S3","effort":"E0","confidence":"high","file":"app/layout.tsx","files":["app/layout.tsx"],"symbols":["process.env"],"description":"Harder to track and type-check configuration dependencies across components.","recommendation":"Move env access to a config module exporting typed constants.","pr_bucket_suggestion":"boundaries","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0031","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0032","title":"'any' types leaking into production code (needs tightening)","category":"code","severity":"S3","effort":"E1","confidence":"high","file":"lib/sentry.client.ts","files":["lib/sentry.client.ts","components/admin/meetings-tab.tsx","functions/src/admin.ts","tests/firestore-service.test.ts"],"symbols":["any"],"description":"Use of any reduces type safety; in production files it can mask real issues.","recommendation":"Replace production any with unknown + type guards or concrete types; allow any only in tests/mocks if necessary.","pr_bucket_suggestion":"types-domain","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0032","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0033","title":"Landing page forced to client component for top-level state","category":"refactoring","severity":"S3","effort":"E1","confidence":"high","file":"app/page.tsx","files":["app/page.tsx"],"symbols":["Home","useState"],"description":"Forces full landing page client rendering, potentially affecting FCP/bundle size.","recommendation":"Move stateful logic into a small client wrapper; keep app/page.tsx server-rendered where possible.","pr_bucket_suggestion":"boundaries","dependencies":[],"status":"CONFIRMED","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0033","file":"CANON-CODE.jsonl"}]}
{"original_id":"CANON-0035","title":"reCAPTCHA token missing does not block requests (logs but continues)","category":"security","severity":"S1","effort":"E1","confidence":"high","file":"functions/src/security-wrapper.ts","files":["functions/src/security-wrapper.ts"],"recommendation":"If recaptchaAction is configured for an endpoint, require a non-empty token and fail closed.; Allow bypass only in explicit dev/test modes via env flag (not implicit).","evidence":["Wrapper logs missing token but continues processing (Claude Opus evidence)."],"sources":[{"type":"canon","id":"CANON-0035","file":"CANON-SECURITY.jsonl"}]}
{"original_id":"CANON-0036","title":"Rate limiting is incomplete (no IP throttling, admin endpoints unthrottled, inconsistent 429-equivalent handling)","category":"security","severity":"S1","effort":"E2","confidence":"high","file":"functions/src/security-wrapper.ts","files":["functions/src/security-wrapper.ts","functions/src/firestore-rate-limiter.ts","functions/src/admin.ts"],"recommendation":"Add a secondary limiter keyed by IP (and/or App Check token/device) in addition to userId.; Wrap admin callables with the same centralized limiter policy (admin-tier limits).; Standardize limiter error mapping so rate-limit exceed always returns resource-exhausted (429-equivalent) with retry guidance.","evidence":["Admin callables have no limiter (both models).","Limiter keyed by userId only; no IP-based throttling (ChatGPT 5.2).","Limiter/wrapper mismatch can surface internal errors instead of stable resource-exhausted/429-equivalent (ChatGPT 5.2)."],"sources":[{"type":"canon","id":"CANON-0036","file":"CANON-SECURITY.jsonl"}]}
{"original_id":"CANON-0037","title":"Zod schemas missing .strict() (unknown fields accepted)","category":"security","severity":"S2","effort":"E0","confidence":"high","file":"functions/src/schemas.ts","files":["functions/src/schemas.ts"],"recommendation":"Add .strict() to request schemas.; Add tests asserting unknown fields are rejected.","evidence":["No .strict() usage reported by both models; unknown fields accepted."],"sources":[{"type":"canon","id":"CANON-0037","file":"CANON-SECURITY.jsonl"}]}
{"original_id":"CANON-0038","title":"Hardcoded fallback reCAPTCHA site key in server verification code (config integrity/rotation risk)","category":"security","severity":"S2","effort":"E1","confidence":"high","file":"functions/src/recaptcha-verify.ts","files":["functions/src/recaptcha-verify.ts"],"recommendation":"Remove hardcoded fallback; require env vars to be set.; Fail closed with a clear failed-precondition error if required config is missing.","evidence":["ChatGPT 5.2 reports a hardcoded fallback site key path in recaptcha verification."],"sources":[{"type":"canon","id":"CANON-0038","file":"CANON-SECURITY.jsonl"}]}
{"original_id":"CANON-0039","title":"Server-side journal entry type enum missing 'step-1-worksheet' (validation drift)","category":"security","severity":"S2","effort":"E1","confidence":"high","file":"functions/src/schemas.ts","files":["functions/src/schemas.ts"],"recommendation":"Establish a single source of truth for allowed types (shared package or generated types).; Add contract tests to ensure client/server types stay in sync.","evidence":["ChatGPT 5.2 reports server enum omits 'step-1-worksheet' while client emits it."],"sources":[{"type":"canon","id":"CANON-0039","file":"CANON-SECURITY.jsonl"}]}
{"original_id":"CANON-0040","title":"Permissive z.record(..., z.unknown()) allows arbitrary nested data in journal/inventory entries","category":"security","severity":"S2","effort":"E2","confidence":"high","file":"functions/src/schemas.ts","files":["functions/src/schemas.ts"],"recommendation":"Move to discriminated unions by entry type with per-type data schemas and size limits.; Add limits on string lengths/array sizes/nesting depth as appropriate.","evidence":["Schemas use permissive z.record(..., z.unknown()) for data fields (both models)."],"sources":[{"type":"canon","id":"CANON-0040","file":"CANON-SECURITY.jsonl"}]}
{"original_id":"CANON-0041","title":"Some admin-managed collections allow direct client writes without centralized schema/rate-limit protections","category":"security","severity":"S2","effort":"E1","confidence":"high","file":"firestore.rules","files":["firestore.rules","lib/db/library.ts"],"recommendation":"Prefer routing admin writes through callable/admin Functions that enforce schemas + throttles.; If direct writes remain, add strict client-side validation and tighten rules where feasible (field allowlists/length limits).","evidence":["ChatGPT 5.2: rules permit admin writes to some collections and client code writes directly (e.g., prayers)."],"sources":[{"type":"canon","id":"CANON-0041","file":"CANON-SECURITY.jsonl"}]}
{"original_id":"CANON-0042","title":"Console statements present; replace with structured logger and enforce no-console in production","category":"security","severity":"S2","effort":"E1","confidence":"high","files":[],"recommendation":"Replace console.* with centralized logger (with redaction).; Add ESLint no-console (error) and Next production removeConsole where applicable.; Require PR checks to fail on console usage outside logger module(s).","evidence":["Claude Opus counted 59 console statements across components; ChatGPT 5.2 identifies console usage in security-sensitive paths."],"sources":[{"type":"canon","id":"CANON-0042","file":"CANON-SECURITY.jsonl"}]}
{"original_id":"CANON-0043","title":"App Check disabled on Functions and client init disabled (tracked as risk-accepted hardening item)","category":"security","severity":"S3","effort":"E1","confidence":"high","file":"functions/src/index.ts","files":["functions/src/index.ts","lib/firebase.ts"],"recommendation":"(If you later choose to enforce) enable App Check on server wrappers + restore client init.; Add monitoring for App Check failures and volume anomalies.","evidence":["Both models: requireAppCheck:false on callables; client App Check initialization commented out."],"sources":[{"type":"canon","id":"CANON-0043","file":"CANON-SECURITY.jsonl"}]}
{"original_id":"CANON-0044","title":"useJournal creates redundant auth listener + potential memory leak from nested cleanup","category":"performance","severity":"S0","effort":"E1","confidence":"high","file":"hooks/use-journal.ts","files":["hooks/use-journal.ts","components/providers/auth-provider.tsx"],"symbols":["useJournal","onAuthStateChanged","onSnapshot"],"recommendation":"Remove auth listener from useJournal; consume user from useAuthCore() instead. Move onSnapshot unsubscribe to outer useEffect scope.","evidence":["hooks/use-journal.ts:178-241 - nested listener pattern","auth-provider.tsx already manages onAuthStateChanged","GitHub Copilot identified S0 memory leak potential"],"models_agreeing":5,"sources":[{"type":"canon","id":"CANON-0044","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0045","title":"Landing page forced to client-side rendering blocks SSR for LCP route","category":"performance","severity":"S1","effort":"E2","confidence":"high","file":"app/page.tsx","files":["app/page.tsx"],"symbols":["Home","NotebookShell","BookCover"],"recommendation":"Split into server component wrapper + client interactive parts. Move NotebookShell behind dynamic import.","evidence":["app/page.tsx:1 has 'use client'","Static background could be SSR","All 5 models identified this issue"],"models_agreeing":5,"sources":[{"type":"canon","id":"CANON-0045","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0046","title":"Excessive 'use client' directives prevent SSR optimization","category":"performance","severity":"S1","effort":"E2","confidence":"high","file":"app/page.tsx","files":["app/page.tsx","app/admin/page.tsx","app/meetings/all/page.tsx","app/journal/page.tsx"],"symbols":[],"recommendation":"Audit each 'use client' for necessity. Convert pages to server components with client children. Target: reduce to <50 client directives.","evidence":["grep count: 88-94 'use client' directives","All 4 major pages use 'use client'"],"models_agreeing":3,"sources":[{"type":"canon","id":"CANON-0046","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0047","title":"Static export disables Next.js image optimization","category":"performance","severity":"S1","effort":"E2","confidence":"high","file":"next.config.mjs","files":["next.config.mjs"],"symbols":[],"recommendation":"Implement static-friendly responsive image pipeline or switch to dynamic hosting.","evidence":["next.config.mjs:14 - images: { unoptimized: true }"],"models_agreeing":1,"sources":[{"type":"canon","id":"CANON-0047","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0048","title":"TodayPage re-subscribes on journalEntry change","category":"performance","severity":"S1","effort":"E0","confidence":"high","file":"components/notebook/pages/today-page.tsx","files":["components/notebook/pages/today-page.tsx"],"symbols":["useEffect","onSnapshot"],"recommendation":"Remove journalEntry from useEffect dependency array.","evidence":["today-page.tsx:352 - journalEntry in deps array"],"models_agreeing":1,"sources":[{"type":"canon","id":"CANON-0048","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0049","title":"Notebook module registry eagerly imports all pages","category":"performance","severity":"S1","effort":"E2","confidence":"high","file":"components/notebook/roadmap-modules.tsx","files":["components/notebook/roadmap-modules.tsx","components/notebook/pages/growth-page.tsx"],"symbols":["notebookModules","TodayPage","GrowthPage"],"recommendation":"Replace static imports with dynamic imports or React.lazy + Suspense per module.","evidence":["roadmap-modules.tsx:L2-7 imports all pages eagerly","Growth module pulls in heavy Step1WorksheetCard"],"models_agreeing":1,"sources":[{"type":"canon","id":"CANON-0049","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0050","title":"Sentry integration incomplete - no Web Vitals reporting","category":"performance","severity":"S2","effort":"E1","confidence":"high","file":"lib/sentry.client.ts","files":["lib/sentry.client.ts","app/layout.tsx","package.json"],"symbols":["initSentryClient","setSentryUser"],"recommendation":"Initialize Sentry in app entry, enable performance tracing, add Web Vitals reporting.","evidence":["lib/sentry.client.ts defines initSentryClient() but not referenced in app","No web-vitals package usage found","All 5 models noted this gap"],"models_agreeing":5,"sources":[{"type":"canon","id":"CANON-0050","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0051","title":"Duplicate DailyQuoteCard implementations + unbounded quotes fetch","category":"performance","severity":"S2","effort":"E1","confidence":"high","file":"components/widgets/daily-quote-card.tsx","files":["components/widgets/daily-quote-card.tsx","components/notebook/features/daily-quote-card.tsx","components/widgets/compact-daily-quote.tsx","lib/db/quotes.ts"],"symbols":["DailyQuoteCard","QuotesService.getAllQuotes"],"recommendation":"Consolidate to single DailyQuoteCard with 'variant' prop. Fetch single quote via targeted query instead of getAllQuotes().","evidence":["3 separate files with similar functionality","Both call QuotesService.getAllQuotes()","4/5 models identified this"],"models_agreeing":4,"sources":[{"type":"canon","id":"CANON-0051","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0052","title":"Celebration animations create 150+ DOM elements without reduced-motion support","category":"performance","severity":"S2","effort":"E1","confidence":"high","file":"components/celebrations/confetti-burst.tsx","files":["components/celebrations/confetti-burst.tsx","components/celebrations/firework-burst.tsx","components/celebrations/types.ts"],"symbols":["ConfettiBurst","FireworkBurst","PARTICLE_COUNTS"],"recommendation":"Gate animations behind prefers-reduced-motion, reduce particle counts on mobile, consider canvas-based effects.","evidence":["PARTICLE_COUNTS.high = 150","SPARKS_PER_FIREWORK = 24, FIREWORK_COUNT = 5"],"models_agreeing":4,"sources":[{"type":"canon","id":"CANON-0052","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0053","title":"No React.memo usage causes unnecessary re-renders in list components","category":"performance","severity":"S2","effort":"E1","confidence":"high","file":"components/journal/entry-card.tsx","files":["components/journal/entry-card.tsx","components/journal/entry-feed.tsx","components/journal/timeline.tsx"],"symbols":["EntryCard","EntryFeed","Timeline"],"recommendation":"Add React.memo to list item components (EntryCard, MeetingCard). Wrap with proper equality check including callback props.","evidence":["grep 'React.memo' found 0 results","entry-feed.tsx:133-140 creates new onClick on each render","64 useMemo/useCallback but 0 memo"],"models_agreeing":3,"sources":[{"type":"canon","id":"CANON-0053","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0054","title":"Hero background image bypasses Next.js image optimization","category":"performance","severity":"S2","effort":"E1","confidence":"high","file":"app/page.tsx","files":["app/page.tsx"],"symbols":["Home"],"recommendation":"Replace CSS background with Next.js <Image> component or add preload + responsive sizing.","evidence":["app/page.tsx:31 sets backgroundImage inline"],"models_agreeing":3,"sources":[{"type":"canon","id":"CANON-0054","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0055","title":"Large entry lists not virtualized - DOM grows linearly with data","category":"performance","severity":"S2","effort":"E2","confidence":"high","file":"components/journal/entry-feed.tsx","files":["components/journal/entry-feed.tsx","components/journal/timeline.tsx","app/meetings/all/page.tsx"],"symbols":["EntryFeed","Timeline","AllMeetingsPage"],"recommendation":"Implement virtual scrolling with react-window or @tanstack/virtual for lists exceeding 50 items.","evidence":["lib/constants.ts:70 - JOURNAL_MAX: 100","entry-feed.tsx maps all entries without virtualization"],"models_agreeing":3,"sources":[{"type":"canon","id":"CANON-0055","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0056","title":"Meeting map renders all markers without clustering","category":"performance","severity":"S2","effort":"E2","confidence":"high","file":"app/meetings/all/page.tsx","files":["app/meetings/all/page.tsx","components/maps/meeting-map.tsx"],"symbols":["MeetingMap","AllMeetingsPage"],"recommendation":"Add marker clustering (e.g., react-leaflet-cluster) or limit markers per zoom level.","evidence":["MeetingMap maps all validMeetings to Marker components","Initial fetch loads 100 meetings"],"models_agreeing":3,"sources":[{"type":"canon","id":"CANON-0056","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0057","title":"7 unused dependencies increasing bundle size","category":"performance","severity":"S2","effort":"E0","confidence":"high","file":"package.json","files":["package.json"],"symbols":["@hookform/resolvers","cmdk","react-day-picker","react-hook-form","react-resizable-panels","recharts","vaul"],"recommendation":"Remove unused dependencies.","evidence":["knip output: 7 Unused dependencies"],"models_agreeing":2,"sources":[{"type":"canon","id":"CANON-0057","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0058","title":"Console statements in production code","category":"performance","severity":"S2","effort":"E0","confidence":"high","file":"hooks/use-journal.ts","files":["hooks/use-journal.ts","components/notebook/pages/today-page.tsx","lib/db/meetings.ts"],"symbols":[],"recommendation":"Remove console.* or replace with logger utility. Add ESLint no-console rule.","evidence":["Found console.* in 13-29 files depending on search pattern"],"models_agreeing":2,"sources":[{"type":"canon","id":"CANON-0058","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0059","title":"Firebase queries lack consistent indexing and limits","category":"performance","severity":"S2","effort":"E1","confidence":"high","file":"lib/db/meetings.ts","files":["lib/db/meetings.ts","hooks/use-journal.ts"],"symbols":["getMeetingsByDay","useJournal"],"recommendation":"Add .limit() to all collection queries. Create Firebase composite indexes. Document in firestore.indexes.json.","evidence":["meetings.ts:86 orderBy commented out due to missing index","Client-side sorting used as workaround"],"models_agreeing":2,"sources":[{"type":"canon","id":"CANON-0059","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0060","title":"Admin CRUD table fetches entire collections without pagination","category":"performance","severity":"S2","effort":"E2","confidence":"high","file":"components/admin/admin-crud-table.tsx","files":["components/admin/admin-crud-table.tsx"],"symbols":["AdminCrudTable","getDocs","filteredItems"],"recommendation":"Add paginated queries with limit/startAfter and useMemo for filteredItems.","evidence":["AdminCrudTable:L51-55 uses getDocs without limit","filteredItems not memoized"],"models_agreeing":2,"sources":[{"type":"canon","id":"CANON-0060","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0061","title":"Step1WorksheetCard excessive complexity (804 lines)","category":"performance","severity":"S2","effort":"E3","confidence":"high","file":"components/growth/Step1WorksheetCard.tsx","files":["components/growth/Step1WorksheetCard.tsx"],"symbols":["Step1WorksheetCard","QuestionBlock"],"recommendation":"Decompose into smaller components (Concept1/2/3, Conclusion). Extract shared logic to custom hook useStep1Worksheet().","evidence":["File size: 804 lines","SonarQube flags CRITICAL complexity"],"models_agreeing":2,"sources":[{"type":"canon","id":"CANON-0061","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0062","title":"No route-level loading UI (loading.tsx) or Suspense boundaries","category":"performance","severity":"S2","effort":"E1","confidence":"high","file":"app/page.tsx","files":["app/page.tsx","app/journal/page.tsx","app/meetings/all/page.tsx"],"symbols":[],"recommendation":"Add app/**/loading.tsx for high-traffic routes. Place Suspense around dynamic imports.","evidence":["No app/**/loading.tsx files exist"],"models_agreeing":1,"sources":[{"type":"canon","id":"CANON-0062","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0063","title":"JournalHub eagerly imports all entry forms","category":"performance","severity":"S2","effort":"E2","confidence":"high","file":"components/journal/journal-hub.tsx","files":["components/journal/journal-hub.tsx"],"symbols":["JournalHub","DailyLogForm","GratitudeForm","MoodForm"],"recommendation":"Dynamically import each form when its tab is active; use Suspense fallbacks.","evidence":["journal-hub.tsx imports multiple forms at top-level"],"models_agreeing":1,"sources":[{"type":"canon","id":"CANON-0063","file":"CANON-PERF.jsonl"}]}
{"original_id":"CANON-0064","title":"47 CRITICAL cognitive complexity violations in scripts (19 functions)","category":"refactoring","severity":"S0","effort":"E3","confidence":"high","file":"scripts/assign-review-tier.js","files":["scripts/assign-review-tier.js","scripts/phase-complete-check.js","scripts/suggest-pattern-automation.js","scripts/check-pattern-compliance.js","scripts/validate-phase-completion.js","scripts/surface-lessons-learned.js","scripts/check-docs-light.js","scripts/check-review-needed.js"],"symbols":["assignReviewTier (complexity 38/15)","verifyDeliverable (complexity 27/15)","checkEscalationTriggers (complexity 27/15)"],"description":"SonarQube CRITICAL violations. Functions exceeding 15-point threshold are difficult to test, maintain, debug.","recommendation":"Extract nested conditionals into helper functions. Use early returns. Add test coverage before refactoring.","pr_bucket_suggestion":"misc","dependencies":[],"status":"NEW","consensus_score":3,"sources":[{"type":"canon","id":"CANON-0064","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0066","title":"Cloud Function error handling pattern duplicated 4-6x across service and hooks","category":"refactoring","severity":"S1","effort":"E1","confidence":"high","file":"lib/firestore-service.ts","files":["lib/firestore-service.ts","hooks/use-journal.ts"],"symbols":["saveDailyLog error handler","saveNotebookJournalEntry error handler","addEntry error handler","crumplePage error handler"],"description":"Same error code switch (resource-exhausted, invalid-argument, unauthenticated, failed-precondition) with user-friendly messages. Error message changes require 4+ updates.","recommendation":"Create handleCloudFunctionError(error) utility in lib/utils/callable-errors.ts. Use in all 4+ locations.","pr_bucket_suggestion":"firebase-access","dependencies":["CANON-0087"],"status":"NEW","consensus_score":5,"sources":[{"type":"canon","id":"CANON-0066","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0067","title":"Journal entry type definitions diverge between client types and server schemas","category":"refactoring","severity":"S1","effort":"E2","confidence":"high","file":"types/journal.ts","files":["types/journal.ts","functions/src/schemas.ts","functions/src/index.ts","lib/firestore-service.ts"],"symbols":["JournalEntryType","journalEntrySchema","JournalEntryData"],"description":"Type mismatch between client and server causes silent validation failures. Adding new entry types requires changes in 3 places.","recommendation":"Create shared source of truth in lib/types/journal-shared.ts. Generate types from Zod schemas where possible.","pr_bucket_suggestion":"types-domain","dependencies":[],"status":"NEW","consensus_score":4,"sources":[{"type":"canon","id":"CANON-0067","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0069","title":"App Check temporarily disabled across all Cloud Functions","category":"security","severity":"S1","effort":"E1","confidence":"high","file":"functions/src/index.ts","files":["functions/src/index.ts"],"symbols":["requireAppCheck: false"],"description":"Security feature disabled. Should be tracked and re-enabled when throttle clears.","recommendation":"Create tracking issue. Re-enable when throttle verified clear. Add monitoring.","pr_bucket_suggestion":"security-hardening","dependencies":[],"status":"TRACKED_ELSEWHERE","consensus_score":2,"sources":[{"type":"canon","id":"CANON-0069","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0071","title":"useJournal mixes domain logic with transport (httpsCallable + retry + recaptcha)","category":"refactoring","severity":"S1","effort":"E2","confidence":"high","file":"hooks/use-journal.ts","files":["hooks/use-journal.ts","lib/firestore-service.ts"],"symbols":["useJournal","addEntry","crumplePage","generateSearchableText"],"description":"Hook owns transport and domain shaping. Same responsibilities will be re-implemented in other features.","recommendation":"Create lib/services/journal-service.ts with saveEntry()/softDeleteEntry() using callSecureFunction. Keep hook focused on UI state.","pr_bucket_suggestion":"hooks-standardization","dependencies":["CANON-0076","CANON-0066"],"status":"NEW","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0071","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0072","title":"TodayPage is a god component mixing 4+ responsibilities","category":"refactoring","severity":"S1","effort":"E3","confidence":"high","file":"components/notebook/pages/today-page.tsx","files":["components/notebook/pages/today-page.tsx","lib/firestore-service.ts"],"symbols":["TodayPage","calculateWeeklyStats"],"description":"Large mixed-responsibility component. Small changes require deep context. Cognitive complexity hotspot.","recommendation":"Split into hooks: useDailyLogState, useDailyLogRealtime, useWeeklyStats. Move Firestore queries to service.","pr_bucket_suggestion":"boundaries","dependencies":["CANON-0075","CANON-0076"],"status":"NEW","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0072","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0073","title":"DailyQuoteCard component duplicated across 2-3 locations","category":"refactoring","severity":"S2","effort":"E1","confidence":"high","file":"components/notebook/features/daily-quote-card.tsx","files":["components/notebook/features/daily-quote-card.tsx","components/widgets/daily-quote-card.tsx","components/widgets/compact-daily-quote.tsx"],"symbols":["DailyQuoteCard (named export)","DailyQuoteCard (default export)","CompactDailyQuote"],"description":"Same fetch logic (QuotesService.getQuoteForToday) repeated with different styling. Feature changes must be applied 2-3 times.","recommendation":"Create useDailyQuote hook for fetch logic. Keep single DailyQuoteCard with variant prop. Delete features/ version.","pr_bucket_suggestion":"ui-primitives","dependencies":[],"status":"NEW","consensus_score":5,"sources":[{"type":"canon","id":"CANON-0073","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0074","title":"Critical paths have low test coverage (firestore-service 35.6%, account-linking 17.29%)","category":"refactoring","severity":"S2","effort":"E2","confidence":"high","file":"lib/firestore-service.ts","files":["lib/firestore-service.ts","lib/auth/account-linking.ts","lib/db/users.ts","lib/firebase.ts"],"symbols":["saveDailyLog","saveNotebookJournalEntry","linkAnonymousToEmailPassword","linkAnonymousToGoogle"],"description":"Security-critical paths with low coverage. Refactors risky without tests.","recommendation":"Add integration tests for Cloud Function callers. Add unit tests for account linking. Target 70%+ coverage.","pr_bucket_suggestion":"tests-hardening","dependencies":["CANON-0066"],"status":"NEW","consensus_score":4,"sources":[{"type":"canon","id":"CANON-0074","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0076","title":"reCAPTCHA token fetch/include pattern repeated 5x across codebase","category":"security","severity":"S2","effort":"E1","confidence":"high","file":"lib/firestore-service.ts","files":["lib/firestore-service.ts","hooks/use-journal.ts","lib/auth/account-linking.ts"],"symbols":["getRecaptchaToken"],"description":"Every Cloud Function call repeats same reCAPTCHA boilerplate. Easy to forget when adding new calls.","recommendation":"Create callSecureFunction wrapper that auto-injects reCAPTCHA token. Centralize retry logic.","pr_bucket_suggestion":"security-hardening","dependencies":["CANON-0066"],"status":"NEW","consensus_score":3,"sources":[{"type":"canon","id":"CANON-0076","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0077","title":"Firebase collection access scattered across 22+ files without type safety","category":"refactoring","severity":"S2","effort":"E2","confidence":"high","file":"lib/db/slogans.ts","files":["lib/db/slogans.ts","lib/db/glossary.ts","lib/db/quotes.ts","lib/db/library.ts","lib/db/meetings.ts","lib/db/sober-living.ts","hooks/use-journal.ts","components/notebook/pages/today-page.tsx","components/admin/admin-crud-table.tsx","components/growth/DailySloganWidget.tsx"],"symbols":["collection(db, 'slogans')","collection(db, 'glossary')","collection(db, 'daily_quotes')","collection(db, 'meetings')"],"description":"No type safety for collection names. Typo risk. Changes require grep-and-replace across codebase.","recommendation":"Create lib/firestore-collections.ts with typed collection helpers: collections.slogans(), collections.userJournal(uid), etc.","pr_bucket_suggestion":"firebase-access","dependencies":[],"status":"NEW","consensus_score":3,"sources":[{"type":"canon","id":"CANON-0077","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0078","title":"reCAPTCHA action strings duplicated as literals (no shared constants)","category":"security","severity":"S2","effort":"E1","confidence":"high","file":"functions/src/recaptcha-verify.ts","files":["functions/src/recaptcha-verify.ts","hooks/use-journal.ts","lib/firestore-service.ts","lib/auth/account-linking.ts"],"symbols":["RECAPTCHA_ACTIONS","getRecaptchaToken"],"description":"Action mismatch between client and server breaks verification. Hard to debug 'failed-precondition' errors.","recommendation":"Create lib/security/recaptcha-actions.ts with shared constants. Update all call sites.","pr_bucket_suggestion":"security-hardening","dependencies":[],"status":"NEW","consensus_score":2,"sources":[{"type":"canon","id":"CANON-0078","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0080","title":"CRUD service patterns repeated across lib/db modules","category":"refactoring","severity":"S2","effort":"E2","confidence":"high","file":"lib/db/quotes.ts","files":["lib/db/quotes.ts","lib/db/slogans.ts","lib/db/glossary.ts","lib/db/sober-living.ts","lib/db/library.ts","lib/db/meetings.ts"],"symbols":["QuotesService","SlogansService","GlossaryService","SoberLivingService","getAllQuickLinks","getAllPrayers"],"description":"Same Firestore CRUD pattern (getAll/add/update/delete) repeated with only collection names changing.","recommendation":"Create lib/db/firestore-crud.ts with generic CRUD factory. Refactor services to use it.","pr_bucket_suggestion":"firebase-access","dependencies":["CANON-0077"],"status":"NEW","consensus_score":2,"sources":[{"type":"canon","id":"CANON-0080","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0081","title":"Admin Cloud Function wiring duplicated across 5 admin tabs","category":"refactoring","severity":"S2","effort":"E1","confidence":"high","file":"components/admin/dashboard-tab.tsx","files":["components/admin/dashboard-tab.tsx","components/admin/users-tab.tsx","components/admin/errors-tab.tsx","components/admin/jobs-tab.tsx","components/admin/admin-crud-table.tsx"],"symbols":["DashboardTab","UsersTab","ErrorsTab","JobsTab","AdminCrudTable"],"description":"Duplicated Cloud Function wiring. Error handling, retries, auth assumptions can drift.","recommendation":"Create lib/admin/admin-functions.ts with typed wrappers (adminGetDashboardStats, adminSearchUsers, etc.)","pr_bucket_suggestion":"firebase-access","dependencies":["CANON-0076"],"status":"NEW","consensus_score":2,"sources":[{"type":"canon","id":"CANON-0081","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0082","title":"Dual-write pattern to inventory AND journal collections","category":"refactoring","severity":"S2","effort":"E2","confidence":"high","file":"components/growth/SpotCheckCard.tsx","files":["components/growth/SpotCheckCard.tsx","components/growth/GratitudeCard.tsx","components/growth/NightReviewCard.tsx"],"symbols":["saveInventoryEntry","saveNotebookJournalEntry"],"description":"Dual writes increase storage costs, create potential inconsistency if one fails. Inventory collection may be legacy.","recommendation":"Audit whether inventory_entries collection is still needed. Remove dual-write or consolidate via Cloud Function.","pr_bucket_suggestion":"firebase-access","dependencies":[],"status":"NEW","consensus_score":2,"sources":[{"type":"canon","id":"CANON-0082","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0083","title":"Deprecated API usage (31 instances) + Nested ternaries (41 instances)","category":"refactoring","severity":"S2","effort":"E2","confidence":"high","file":"multiple","files":["multiple"],"symbols":["deprecated APIs","nested ternary operators"],"description":"Deprecated APIs risk future breaking changes. Nested ternaries reduce readability.","recommendation":"Audit S1874 violations. Replace nested ternaries with if/else or early returns.","pr_bucket_suggestion":"misc","dependencies":[],"status":"NEW","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0083","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0084","title":"safeReadFile/safeWriteFile utilities duplicated across 3 scripts","category":"refactoring","severity":"S2","effort":"E1","confidence":"high","file":"scripts/archive-doc.js","files":["scripts/archive-doc.js","scripts/check-review-needed.js","scripts/update-readme-status.js"],"symbols":["safeReadFile","safeWriteFile"],"description":"Scripts are highest complexity area. Shared utilities reduce per-script branching.","recommendation":"Create scripts/lib/fs-safe.js. Update 3 scripts to import from it.","pr_bucket_suggestion":"misc","dependencies":[],"status":"NEW","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0084","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0085","title":"FirestoreAdapter exists but is unused (realtime boundary unclear)","category":"refactoring","severity":"S2","effort":"E2","confidence":"high","file":"lib/database/firestore-adapter.ts","files":["lib/database/firestore-adapter.ts","lib/database/database-interface.ts","components/notebook/pages/today-page.tsx","hooks/use-journal.ts","components/providers/profile-context.tsx"],"symbols":["FirestoreAdapter.subscribeToDailyLog"],"description":"Unclear boundaries. Some features use adapter, others embed Firestore details. Future migrations harder.","recommendation":"Decide boundary: expand FirestoreAdapter and use it everywhere, OR remove adapter and standardize subscription helpers.","pr_bucket_suggestion":"boundaries","dependencies":["CANON-0075"],"status":"NEW","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0085","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0086","title":"Searchable-text generation duplicated with inconsistent sanitization","category":"security","severity":"S2","effort":"E1","confidence":"high","file":"hooks/use-journal.ts","files":["hooks/use-journal.ts","scripts/migrate-to-journal.ts"],"symbols":["generateSearchableText"],"description":"Different sanitization rules can produce divergent search indexes or reintroduce stored XSS risks.","recommendation":"Extract shared searchable-text utility to lib/journal/searchable-text.ts. Ensure sanitization is consistent.","pr_bucket_suggestion":"security-hardening","dependencies":[],"status":"NEW","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0086","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0088","title":"Batch fix opportunities: 200+ ESLint auto-fixable issues","category":"refactoring","severity":"S3","effort":"E0","confidence":"high","file":"multiple","files":["multiple"],"symbols":["unused imports","optional chaining","Array.includes"],"description":"Low-hanging fruit that reduces SonarQube noise instantly.","recommendation":"Run npm run lint:fix. Commit auto-fixed changes before manual refactoring.","pr_bucket_suggestion":"misc","dependencies":[],"status":"NEW","consensus_score":2,"sources":[{"type":"canon","id":"CANON-0088","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0089","title":"Batch fix opportunities: 79 replaceAll() + 71 node: prefix modernizations","category":"refactoring","severity":"S3","effort":"E1","confidence":"high","file":"multiple","files":["multiple","scripts/*","functions/src/*"],"symbols":["replace(/x/g, y)","require('fs')"],"description":"ES2021+ provides cleaner methods. Modernization reduces lint noise.","recommendation":"Find/replace: replace(/pattern/g) to replaceAll(). require('fs') to require('node:fs').","pr_bucket_suggestion":"misc","dependencies":[],"status":"NEW","consensus_score":2,"sources":[{"type":"canon","id":"CANON-0089","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0090","title":"parseTime() meeting helper duplicated in two pages","category":"refactoring","severity":"S3","effort":"E0","confidence":"high","file":"app/meetings/all/page.tsx","files":["app/meetings/all/page.tsx","components/notebook/pages/resources-page.tsx"],"symbols":["parseTime"],"description":"Small helper duplication is a drift vector (edge cases like 'Noon', locale formats).","recommendation":"Extract to lib/utils/time.ts as parseMeetingTimeToMinutes(). Unit test it.","pr_bucket_suggestion":"misc","dependencies":[],"status":"NEW","consensus_score":1,"sources":[{"type":"canon","id":"CANON-0090","file":"CANON-REFACTOR.jsonl"}]}
{"original_id":"CANON-0091","title":"Broken relative links in review/output docs (wrong ../ depth)","category":"documentation","severity":"S1","effort":"E1","confidence":"high","file":"docs/reviews/2026-Q1/outputs/code-review/CODE_REVIEW_2026_Q1.md","files":["docs/reviews/2026-Q1/outputs/code-review/CODE_REVIEW_2026_Q1.md","docs/reviews/2026-Q1/PERFORMANCE_AUDIT_FINDINGS_2026_Q1.md","docs/AUDIT_TRACKER.md","docs/reviews/2026-Q1/PROCESS_AUDIT_PLAN_2026_Q1.md"],"description":"Multiple review output and findings documents use incorrect relative paths (one level off). Links from docs/reviews/2026-Q1/outputs/ need 4 levels up to reach docs/, but many use only 2-3 levels.","recommendation":"Adopt consistent rule: 'walk up to docs/ then down' for all docs/reviews/** files; Fix all relative links in CODE_REVIEW_2026_Q1.md, PERFORMANCE_AUDIT_FINDINGS_2026_Q1.md, AUDIT_TRACKER.md, PROCESS_AUDIT_PLAN_2026_Q1.md","evidence":["GitHub Copilot: CODE_PATTERNS.md wrong path","Codex: 69 broken links detected","Claude Sonnet 4.5: 82 broken links detected","Claude Code Opus 4.5: 12 tool-validated broken links","ChatGPT 5.2: 75 broken links detected"],"consensus_score":"5/5","sources":[{"type":"canon","id":"CANON-0091","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0092","title":"[X] placeholders remain in 2026-Q1 plan instances","category":"documentation","severity":"S1","effort":"E1","confidence":"high","file":"docs/reviews/2026-Q1/CODE_REVIEW_PLAN_2026_Q1.md","files":["docs/reviews/2026-Q1/CODE_REVIEW_PLAN_2026_Q1.md","docs/reviews/2026-Q1/SECURITY_AUDIT_PLAN_2026_Q1.md","docs/reviews/2026-Q1/PERFORMANCE_AUDIT_PLAN_2026_Q1.md","docs/reviews/2026-Q1/PROCESS_AUDIT_PLAN_2026_Q1.md"],"description":"Multiple 2026-Q1 plan instances still contain bracket placeholders like [X] (quarter markers Q[X], metric placeholders) that should have been replaced when instantiating from templates.","recommendation":"Replace all [X] placeholders with concrete Q1 values or TBD; Run grep -n '\\[X\\]' docs/reviews/2026-Q1/*_PLAN_2026_Q1.md to find all instances","evidence":["Claude Sonnet 4.5: 18 [X] placeholders in PERFORMANCE_AUDIT_PLAN","Claude Code Opus 4.5: 28 placeholder issues across plans","ChatGPT 5.2: placeholders in 4 plan files"],"consensus_score":"4/5","sources":[{"type":"canon","id":"CANON-0092","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0093","title":"DOCUMENTATION_INDEX.md orphaned and missing required sections","category":"documentation","severity":"S2","effort":"E1","confidence":"high","file":"DOCUMENTATION_INDEX.md","files":["DOCUMENTATION_INDEX.md","README.md"],"description":"DOCUMENTATION_INDEX.md is not referenced by any markdown file in the repo, and docs linter reports it missing required sections (Purpose/Overview and Version History) and missing Last Updated metadata.","recommendation":"Add prominent link to DOCUMENTATION_INDEX.md from README.md; Add missing sections: Purpose/Overview and Version History; Decide tier and align metadata accordingly","evidence":["Claude Code Opus 4.5: DOCUMENTATION_INDEX.md not referenced","ChatGPT 5.2: orphaned per link check + missing sections"],"consensus_score":"3/5","sources":[{"type":"canon","id":"CANON-0093","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0094","title":"Tier 2 docs missing required metadata (Document Version, Applies To)","category":"documentation","severity":"S2","effort":"E1","confidence":"high","file":"docs/ANTIGRAVITY_GUIDE.md","files":["docs/ANTIGRAVITY_GUIDE.md","docs/APPCHECK_SETUP.md","docs/INCIDENT_RESPONSE.md","docs/RECAPTCHA_REMOVAL_GUIDE.md","docs/SENTRY_INTEGRATION_GUIDE.md","docs/SERVER_SIDE_SECURITY.md","docs/TESTING_PLAN.md"],"description":"DOCUMENTATION_STANDARDS.md defines Tier 2 required metadata as including Document Version and Applies To, but multiple docs labeled Tier 2 omit these fields.","recommendation":"Add **Document Version:** X.Y and **Applies To:** ... to all Tier 2 docs; Or downgrade truly guide-style docs to Tier 5 with appropriate metadata","evidence":["Claude Code Opus 4.5: Tier 2 metadata missing in 7+ docs","ChatGPT 5.2: Tier 2 compliance issues in 8 files"],"consensus_score":"3/5","sources":[{"type":"canon","id":"CANON-0094","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0095","title":"Standards/templates contain live placeholder links and incorrect anchors","category":"documentation","severity":"S2","effort":"E0","confidence":"high","file":"docs/DOCUMENTATION_STANDARDS.md","files":["docs/DOCUMENTATION_STANDARDS.md","docs/templates/FOUNDATION_DOC_TEMPLATE.md","docs/templates/PLANNING_DOC_TEMPLATE.md","ROADMAP.md"],"description":"Several documentation 'example' links are written as live markdown links (not code fences), so they appear clickable and get treated as real by link checkers. DOCUMENTATION_STANDARDS references ROADMAP.md#dependencies which doesn't exist.","recommendation":"Wrap illustrative examples in fenced code blocks; Fix intended real links in templates (docs/templates/* -> ../../ROADMAP.md); Update or remove non-existent anchor references","evidence":["ChatGPT 5.2: Standards/templates with placeholder links and bad anchor"],"consensus_score":"2/5","sources":[{"type":"canon","id":"CANON-0095","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0096","title":"DOCUMENT_DEPENDENCIES.md claims SYNCED but has 30+ issues","category":"documentation","severity":"S2","effort":"E1","confidence":"high","file":"docs/DOCUMENT_DEPENDENCIES.md","files":["docs/DOCUMENT_DEPENDENCIES.md"],"description":"DOCUMENT_DEPENDENCIES.md declares 'Sync Status: SYNCED' in its header, but check-document-sync.js reports 30+ issues including broken links and missing files.","recommendation":"Run check-document-sync.js and fix all reported issues; Update Sync Status only after all checks pass","evidence":["Claude Code Opus 4.5: false SYNCED status with 30 issues"],"consensus_score":"2/5","sources":[{"type":"canon","id":"CANON-0096","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0097","title":"PR_REVIEW_PROMPT_TEMPLATE lacks required metadata and version history","category":"documentation","severity":"S2","effort":"E1","confidence":"high","file":"docs/PR_REVIEW_PROMPT_TEMPLATE.md","files":["docs/PR_REVIEW_PROMPT_TEMPLATE.md"],"description":"PR review prompt template includes Created and Purpose, but lacks Last Updated, Status, and Version History section.","recommendation":"Add **Last Updated:** YYYY-MM-DD and **Status:** to header; Add Version History section with minimal table; Consider relocating to docs/templates/","evidence":["ChatGPT 5.2: PR_REVIEW_PROMPT_TEMPLATE missing required metadata"],"consensus_score":"2/5","sources":[{"type":"canon","id":"CANON-0097","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0098","title":"CODE_PATTERNS.md referenced with incorrect path","category":"documentation","severity":"S2","effort":"E0","confidence":"high","file":"docs/agent_docs/CODE_PATTERNS.md","files":["docs/agent_docs/CODE_PATTERNS.md"],"description":"CODE_PATTERNS.md is referenced in some documents using incorrect relative path (wrong directory depth or missing docs/agent_docs prefix).","recommendation":"Search for all references to CODE_PATTERNS.md; Update to correct path: docs/agent_docs/CODE_PATTERNS.md","evidence":["GitHub Copilot: CODE_PATTERNS.md wrong path","Claude Code Opus 4.5: broken link to CODE_PATTERNS"],"consensus_score":"2/5","sources":[{"type":"canon","id":"CANON-0098","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0099","title":"Duplicate CODE_REVIEW_PLAN_2026_Q1.md exists in two locations","category":"documentation","severity":"S2","effort":"E0","confidence":"high","file":"docs/CODE_REVIEW_PLAN_2026_Q1.md","files":["docs/CODE_REVIEW_PLAN_2026_Q1.md","docs/reviews/2026-Q1/CODE_REVIEW_PLAN_2026_Q1.md"],"description":"CODE_REVIEW_PLAN_2026_Q1.md exists in both docs/ and docs/reviews/2026-Q1/, creating confusion about which is canonical.","recommendation":"Determine canonical location (recommend docs/reviews/2026-Q1/); Delete or archive the non-canonical copy; Update all references to point to canonical location","evidence":["Claude Code Opus 4.5: duplicate file in two locations"],"consensus_score":"2/5","sources":[{"type":"canon","id":"CANON-0099","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0100","title":"Archive docs contain significant link rot after archival/moves","category":"documentation","severity":"S3","effort":"E2","confidence":"high","file":"docs/archive/AI_HANDOFF-2026-01-02.md","files":["docs/archive/AI_HANDOFF-2026-01-02.md","docs/archive/consolidated-2025-12-19/ARCHIVE_INDEX.md","docs/archive/ARCHIVE_INDEX.md","docs/archive/completed-plans/EIGHT_PHASE_REFACTOR_PLAN.md"],"description":"Multiple archived documents contain broken links (e.g., linking to ./README.md, ./ROADMAP.md from within docs/archive/).","recommendation":"Option A: Exclude docs/archive/** from link checks; Option B: Update archive links to correct relative paths (../../README.md etc.)","evidence":["Claude Code Opus 4.5: archive link rot noted","ChatGPT 5.2: archive docs have significant link rot"],"consensus_score":"2/5","sources":[{"type":"canon","id":"CANON-0100","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0101","title":"Template date placeholders using literal YYYY-MM-DD format","category":"documentation","severity":"S3","effort":"E0","confidence":"high","file":"docs/templates/FOUNDATION_DOC_TEMPLATE.md","files":["docs/templates/FOUNDATION_DOC_TEMPLATE.md","docs/templates/PLANNING_DOC_TEMPLATE.md"],"description":"Templates contain date placeholders like YYYY-MM-DD or [Date] that should be replaced when instantiating but are sometimes copied literally.","recommendation":"Ensure all template instantiation replaces date placeholders with actual dates; Consider using different placeholder format that's more obviously wrong if not replaced (e.g., <REPLACE_WITH_DATE>)","evidence":["Claude Code Opus 4.5: template date placeholders noted"],"consensus_score":"2/5","sources":[{"type":"canon","id":"CANON-0101","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0102","title":"Template docs located outside docs/templates/ directory","category":"documentation","severity":"S3","effort":"E0","confidence":"high","file":"docs/PR_REVIEW_PROMPT_TEMPLATE.md","files":["docs/PR_REVIEW_PROMPT_TEMPLATE.md"],"description":"PR_REVIEW_PROMPT_TEMPLATE.md is a reusable template but is stored at docs/ rather than docs/templates/. Standards imply templates should live in docs/templates/.","recommendation":"Confirm if all templates should be under docs/templates/; If yes, move PR_REVIEW_PROMPT_TEMPLATE.md and update references","evidence":["ChatGPT 5.2: template location policy question"],"consensus_score":"2/5","sources":[{"type":"canon","id":"CANON-0102","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0103","title":"Test count mismatch between DEVELOPMENT.md and actual test suite","category":"documentation","severity":"S3","effort":"E0","confidence":"high","file":"docs/DEVELOPMENT.md","files":["docs/DEVELOPMENT.md"],"description":"DEVELOPMENT.md claims a specific number of tests (e.g., 10 tests) but actual test suite may have different count.","recommendation":"Run npm test and count actual tests; Update DEVELOPMENT.md with accurate count or remove specific number","evidence":["GitHub Copilot: test count mismatch finding"],"consensus_score":"1/5","sources":[{"type":"canon","id":"CANON-0103","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0104","title":"ROADMAP anchor links may be fragile due to emoji/punctuation in headings","category":"documentation","severity":"S3","effort":"E0","confidence":"high","file":"ROADMAP.md","files":["ROADMAP.md","ROADMAP_LOG.md"],"description":"Links to specific heading anchors (e.g., #m16---...) can break if heading text changes due to emoji/punctuation differences in GitHub slug algorithm.","recommendation":"Avoid over-specific anchors for frequently edited headings; Manually verify anchor behavior in GitHub-rendered view","evidence":["ChatGPT 5.2: fragile anchor links suspected"],"consensus_score":"1/5","sources":[{"type":"canon","id":"CANON-0104","file":"CANON-DOCS.jsonl"}]}
{"original_id":"CANON-0105","title":"Multiple CI quality gates configured as non-blocking (continue-on-error: true)","category":"process","severity":"S0","effort":"E2","confidence":"high","file":".github/workflows/ci.yml","files":[".github/workflows/ci.yml"],"description":"Prettier, unused deps check, pattern compliance, and docs checks have continue-on-error: true. Formatting drift, dependency issues, pattern violations, and doc issues can accumulate and ship.","recommendation":"Convert to diff-based blocking (changed files only) while tracking baseline; Add baseline trend reporting to CI logs; Burn down baseline violations over time, then remove continue-on-error","evidence":["GitHub Copilot: 4 quality gates non-blocking","Codex: CI gates non-blocking","Claude Sonnet 4.5: S0 severity - CI gates allow regressions","Claude Code Opus 4.5: S1 severity - 4 continue-on-error steps","ChatGPT 5.2: S2 severity - multiple non-blocking gates"],"consensus_score":"5/5","sources":[{"type":"canon","id":"CANON-0105","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"CANON-0106","title":"Automation scripts have critically low test coverage (2-7% of ~31 scripts)","category":"process","severity":"S1","effort":"E2","confidence":"high","file":"scripts/","files":["scripts/","tests/scripts/"],"description":"Only 2 test files exist for ~31 runnable scripts. Critical workflow scripts (update-readme-status, validate-phase-completion, check-docs-light, check-review-needed) lack tests.","recommendation":"Add tests for workflow-critical scripts first (update-readme-status.js, validate-phase-completion.js, check-docs-light.js); Create lightweight CLI test harness (spawn node, assert exit codes/output); Target 70%+ coverage for scripts/","evidence":["GitHub Copilot: scripts lack tests","Codex: 2/29 scripts have tests","Claude Sonnet 4.5: 6% coverage","Claude Code Opus 4.5: 2/29 scripts tested","ChatGPT 5.2: ~2 tests for ~31 scripts"],"consensus_score":"5/5","sources":[{"type":"canon","id":"CANON-0106","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"CANON-0107","title":"Missing security scanning in CI (npm audit, CodeQL, Dependabot)","category":"process","severity":"S1","effort":"E2","confidence":"high","file":".github/workflows/ci.yml","files":[".github/workflows/ci.yml",".github/dependabot.yml"],"description":"No workflow steps for npm audit, CodeQL static analysis, or Dependabot config. Vulnerable dependencies and security issues not automatically detected.","recommendation":"Add scheduled npm audit --production workflow; Enable GitHub CodeQL for JavaScript/TypeScript; Create .github/dependabot.yml for npm and GitHub Actions updates","evidence":["GitHub Copilot: npm audit missing","Claude Sonnet 4.5: security scanning gaps","Claude Code Opus 4.5: no npm audit in CI","ChatGPT 5.2: missing audit/CodeQL/Dependabot"],"consensus_score":"4/5","sources":[{"type":"canon","id":"CANON-0107","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"CANON-0108","title":"Deploy workflow calls gcloud without installing Google Cloud SDK","category":"process","severity":"S1","effort":"E1","confidence":"high","file":".github/workflows/deploy-firebase.yml","files":[".github/workflows/deploy-firebase.yml"],"description":"deploy-firebase.yml runs gcloud auth and gcloud config commands but has no setup-gcloud action. Can cause deploy failures on runners without gcloud pre-installed.","recommendation":"Add google-github-actions/setup-gcloud before gcloud commands; Or remove gcloud usage and rely on GOOGLE_APPLICATION_CREDENTIALS for firebase-tools auth; Add gcloud --version sanity check step","evidence":["GitHub Copilot: gcloud auth issues","Claude Code Opus 4.5: deploy workflow gcloud setup missing","ChatGPT 5.2: gcloud used without install step"],"consensus_score":"3/5","sources":[{"type":"canon","id":"CANON-0108","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"CANON-0109","title":"DEVELOPMENT.md workflow triggers don't match actual workflow YAML","category":"process","severity":"S2","effort":"E1","confidence":"high","file":"DEVELOPMENT.md","files":["DEVELOPMENT.md",".github/workflows/deploy-firebase.yml",".github/workflows/review-check.yml",".github/workflows/validate-plan.yml"],"description":"DEVELOPMENT.md documents workflows with incorrect triggers. deploy-firebase marked Manual/Release but triggers on push to main. review-check marked Scheduled/Manual but triggers on PR events.","recommendation":"Update DEVELOPMENT.md workflow table to match each workflow's on: block; Add docs check script that diffs documented vs actual triggers","evidence":["Codex: TRIGGERS.md outdated","Claude Sonnet 4.5: TRIGGERS.md documentation drift","Claude Code Opus 4.5: DEVELOPMENT.md workflow table stale","ChatGPT 5.2: DEVELOPMENT.md triggers don't match YAML"],"consensus_score":"4/5","sources":[{"type":"canon","id":"CANON-0109","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"CANON-0110","title":"Pre-commit hook runs full test suite causing slow commits (~50s+)","category":"process","severity":"S2","effort":"E1","confidence":"high","file":".husky/pre-commit","files":[".husky/pre-commit",".husky/pre-push"],"description":"Pre-commit runs npm test (full suite) plus lint/pattern checks. Pre-push also runs npm test. Duplicate testing slows developer workflow.","recommendation":"Move full npm test to pre-push only; Keep pre-commit to fast checks (lint, patterns on staged files); Consider running only changed-file tests in pre-commit","evidence":["GitHub Copilot: pre-commit runs full test suite","Codex: pre-commit slow due to tests","Claude Sonnet 4.5: pre-commit hook slow","ChatGPT 5.2: pre-commit full tests increases friction"],"consensus_score":"4/5","sources":[{"type":"canon","id":"CANON-0110","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"CANON-0111","title":"Pattern checker reports 93+ violations but CI check is non-blocking","category":"process","severity":"S2","effort":"E2","confidence":"high","file":"scripts/check-pattern-compliance.js","files":["scripts/check-pattern-compliance.js",".github/workflows/ci.yml"],"description":"Pattern checker finds 93 potential violations but CI step has continue-on-error: true. Pattern regressions can land on main.","recommendation":"Switch CI to block on pattern violations for changed files (diff-based); Allow baseline legacy files to pass until migrated; Add CI artifact summarizing violations trend","evidence":["Claude Sonnet 4.5: 93 violations allowed through","Claude Code Opus 4.5: pattern checker non-blocking with violations","ChatGPT 5.2: pattern scan reports 93 issues"],"consensus_score":"3/5","sources":[{"type":"canon","id":"CANON-0111","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"CANON-0112","title":"Firebase CLI version unpinned in deploy workflow","category":"process","severity":"S2","effort":"E0","confidence":"high","file":".github/workflows/deploy-firebase.yml","files":[".github/workflows/deploy-firebase.yml"],"description":"Deploy workflow installs firebase-tools via npm install -g firebase-tools without version pin. Upstream releases can change deploy behavior unexpectedly.","recommendation":"Pin firebase-tools: npm install -g firebase-tools@<known-good>; Document pinned version and update cadence in DEVELOPMENT.md","evidence":["GitHub Copilot: firebase-tools unpinned","Codex: firebase-tools version not locked","ChatGPT 5.2: firebase CLI unpinned"],"consensus_score":"3/5","sources":[{"type":"canon","id":"CANON-0112","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"CANON-0113","title":"Auto-label workflow has invalid if: expression syntax","category":"process","severity":"S2","effort":"E0","confidence":"high","file":".github/workflows/auto-label-review-tier.yml","files":[".github/workflows/auto-label-review-tier.yml"],"description":"Step uses if: steps.assign-tier.outputs.tier == '4' without required ${{ }} wrapper. Can cause workflow evaluation errors.","recommendation":"Change to if: ${{ steps.assign-tier.outputs.tier == '4' }}; Add actionlint check in CI for YAML syntax validation","evidence":["Claude Code Opus 4.5: conditional syntax issue","ChatGPT 5.2: invalid if expression"],"consensus_score":"2/5","sources":[{"type":"canon","id":"CANON-0113","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"CANON-0114","title":"DEVELOPMENT.md Husky section missing pattern compliance step","category":"process","severity":"S3","effort":"E0","confidence":"high","file":"DEVELOPMENT.md","files":["DEVELOPMENT.md",".husky/pre-commit"],"description":"DEVELOPMENT.md lists pre-commit as ESLint, Prettier, Tests but omits the blocking npm run patterns:check step.","recommendation":"Update DEVELOPMENT.md pre-commit table to include Pattern compliance; Keep tables aligned with .husky/* content","evidence":["Claude Code Opus 4.5: DEVELOPMENT.md missing patterns:check","ChatGPT 5.2: husky docs incomplete"],"consensus_score":"2/5","sources":[{"type":"canon","id":"CANON-0114","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"CANON-0115","title":"CI workflow lacks explicit permissions block (security hardening)","category":"process","severity":"S3","effort":"E0","confidence":"high","file":".github/workflows/ci.yml","files":[".github/workflows/ci.yml"],"description":"ci.yml has no permissions: block, relying on GitHub defaults. Explicitly setting minimal permissions is best practice.","recommendation":"Add permissions: { contents: read } at workflow level; Document required permissions per workflow in DEVELOPMENT.md","evidence":["Claude Code Opus 4.5: missing permissions block","ChatGPT 5.2: no explicit permissions"],"consensus_score":"2/5","sources":[{"type":"canon","id":"CANON-0115","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"CANON-0116","title":"Pattern checker produces false positives for controlled npm install fallbacks","category":"process","severity":"S3","effort":"E1","confidence":"high","file":"scripts/check-pattern-compliance.js","files":["scripts/check-pattern-compliance.js",".claude/hooks/session-start.sh"],"description":"Pattern checker flags npm install in automation even when it's documented fallback (prefers npm ci). Also emits MODULE_TYPELESS warning noise.","recommendation":"Refine pattern rules: allowlist documented fallback blocks or annotation comments; Consider adding type: module to package.json or suppressing warning","evidence":["Claude Sonnet 4.5: false positives in pattern checker","ChatGPT 5.2: pattern checker noise/false-positives"],"consensus_score":"2/5","sources":[{"type":"canon","id":"CANON-0116","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"CANON-0117","title":"Review trigger thresholds may cause alert fatigue for process changes","category":"process","severity":"S3","effort":"E1","confidence":"high","file":"scripts/check-review-needed.js","files":["scripts/check-review-needed.js"],"description":"Process category triggers review on ANY change in .github, .claude, .husky, or scripts/ (threshold=1). May cause frequent needs-review labels for minor edits.","recommendation":"If alert fatigue occurs, split into subcategories or require N files except for critical paths; Add override mechanism documented in REVIEW_POLICY","evidence":["Claude Code Opus 4.5: review trigger sensitivity","ChatGPT 5.2: thresholds may be too sensitive"],"consensus_score":"2/5","sources":[{"type":"canon","id":"CANON-0117","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"CANON-0118","title":"Deploy workflow secret handling may be brittle for multiline JSON","category":"process","severity":"S3","effort":"E1","confidence":"high","file":".github/workflows/deploy-firebase.yml","files":[".github/workflows/deploy-firebase.yml"],"description":"Workflow writes service account JSON via echo '...secret...' > file. Can be brittle if formatting/newlines differ across secret entry methods.","recommendation":"Prefer base64-encoding JSON secret and decode during workflow; Add validation step checking file is valid JSON before use","evidence":["ChatGPT 5.2: secret multiline handling concern"],"consensus_score":"1/5","sources":[{"type":"canon","id":"CANON-0118","file":"CANON-PROCESS.jsonl"}]}
{"original_id":"DEDUP-0001","title":"Re-enable App Check on Cloud Functions","category":"security","severity":"S0","effort":"E2","dependencies":["DEDUP-0003","DEDUP-0004"],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"DEDUP-0001","source":"backlog"}]}
{"original_id":"DEDUP-0002","title":"Close legacy journalEntries write path","category":"security","severity":"S0","effort":"E2","dependencies":[],"pr_bucket_suggestion":"PR2","sources":[{"type":"backlog","id":"DEDUP-0002","source":"backlog"}]}
{"original_id":"DEDUP-0003","title":"Make reCAPTCHA fail-closed","category":"security","severity":"S1","effort":"E1","dependencies":[],"pr_bucket_suggestion":"PR3","sources":[{"type":"backlog","id":"DEDUP-0003","source":"backlog"}]}
{"original_id":"DEDUP-0004","title":"Complete rate limiting (IP + admin)","category":"security","severity":"S1","effort":"E2","dependencies":["DEDUP-0003"],"pr_bucket_suggestion":"PR4","sources":[{"type":"backlog","id":"DEDUP-0004","source":"backlog"}]}
{"original_id":"DEDUP-0005","title":"Replace console.\\* with logger","category":"security","severity":"S1","effort":"E1","dependencies":[],"pr_bucket_suggestion":"PR8","sources":[{"type":"backlog","id":"DEDUP-0005","source":"backlog"}]}
{"original_id":"CANON-0005","title":"Restore client App Check init","category":"security","severity":"S1","effort":"E1","dependencies":["DEDUP-0001"],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0005","source":"backlog"}]}
{"original_id":"CANON-0010","title":"Admin-claim rules defense-in-depth","category":"security","severity":"S1","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0010","source":"backlog"}]}
{"original_id":"CANON-0014","title":"Verify reCAPTCHA coverage","category":"security","severity":"S1","effort":"E1","dependencies":["DEDUP-0003"],"pr_bucket_suggestion":"PR3","sources":[{"type":"backlog","id":"CANON-0014","source":"backlog"}]}
{"original_id":"CANON-0015","title":"Rate limit bypass mitigation","category":"security","severity":"S1","effort":"E2","dependencies":["DEDUP-0004"],"pr_bucket_suggestion":"PR4","sources":[{"type":"backlog","id":"CANON-0015","source":"backlog"}]}
{"original_id":"CANON-0016","title":"Audit localStorage for sensitive data","category":"security","severity":"S1","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0016","source":"backlog"}]}
{"original_id":"CANON-0019","title":"Address ESLint security warnings","category":"security","severity":"S2","effort":"E2","dependencies":[],"pr_bucket_suggestion":"PR-LINT-WARNINGS","sources":[{"type":"backlog","id":"CANON-0019","source":"backlog"}]}
{"original_id":"CANON-0038","title":"Remove hardcoded reCAPTCHA fallback","category":"security","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0038","source":"backlog"}]}
{"original_id":"CANON-0041","title":"Route admin writes through Functions","category":"security","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0041","source":"backlog"}]}
{"original_id":"DEDUP-0006","title":"Fix journal entry type mismatch","category":"code","severity":"S1","effort":"E0","dependencies":[],"pr_bucket_suggestion":"PR6","sources":[{"type":"backlog","id":"DEDUP-0006","source":"backlog"}]}
{"original_id":"CANON-0021","title":"Add error.message null safety","category":"code","severity":"S2","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0021","source":"backlog"}]}
{"original_id":"CANON-0022","title":"Safe localStorage JSON.parse","category":"code","severity":"S2","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0022","source":"backlog"}]}
{"original_id":"DEDUP-0013","title":"Add .strict() to Zod schemas","category":"code","severity":"S2","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"DEDUP-0013","source":"backlog"}]}
{"original_id":"CANON-0018","title":"Replace unsafe type assertions","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0018","source":"backlog"}]}
{"original_id":"CANON-0020","title":"Single source for journal types","category":"code","severity":"S2","effort":"E2","dependencies":["DEDUP-0006"],"pr_bucket_suggestion":"PR6","sources":[{"type":"backlog","id":"CANON-0020","source":"backlog"}]}
{"original_id":"CANON-0025","title":"Type httpsCallable generics","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0025","source":"backlog"}]}
{"original_id":"CANON-0030","title":"Fix @ts-expect-error suppression","category":"code","severity":"S3","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0030","source":"backlog"}]}
{"original_id":"CANON-0032","title":"Replace 'any' with proper types","category":"code","severity":"S3","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0032","source":"backlog"}]}
{"original_id":"DEDUP-0011","title":"Fix useJournal memory leak","category":"code","severity":"S0","effort":"E1","dependencies":[],"pr_bucket_suggestion":"PR1","sources":[{"type":"backlog","id":"DEDUP-0011","source":"backlog"}]}
{"original_id":"DEDUP-0007","title":"Extract error handling utility","category":"code","severity":"S1","effort":"E1","dependencies":[],"pr_bucket_suggestion":"PR7","sources":[{"type":"backlog","id":"DEDUP-0007","source":"backlog"}]}
{"original_id":"DEDUP-0008","title":"Remove deprecated saveNotebookJournalEntry","category":"code","severity":"S1","effort":"E2","dependencies":["DEDUP-0006"],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"DEDUP-0008","source":"backlog"}]}
{"original_id":"CANON-0071","title":"Separate domain/transport in useJournal","category":"code","severity":"S1","effort":"E2","dependencies":["DEDUP-0011"],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0071","source":"backlog"}]}
{"original_id":"CANON-0076","title":"Create callSecureFunction wrapper","category":"code","severity":"S2","effort":"E1","dependencies":["DEDUP-0003"],"pr_bucket_suggestion":"PR11","sources":[{"type":"backlog","id":"CANON-0076","source":"backlog"}]}
{"original_id":"CANON-0078","title":"Shared reCAPTCHA action constants","category":"code","severity":"S2","effort":"E1","dependencies":["CANON-0076"],"pr_bucket_suggestion":"PR11","sources":[{"type":"backlog","id":"CANON-0078","source":"backlog"}]}
{"original_id":"CANON-0079","title":"Extract useGrowthCardDialog hook","category":"code","severity":"S2","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0079","source":"backlog"}]}
{"original_id":"DEDUP-0012","title":"Enable SSR for landing page","category":"code","severity":"S1","effort":"E2","dependencies":[],"pr_bucket_suggestion":"PR13","sources":[{"type":"backlog","id":"DEDUP-0012","source":"backlog"}]}
{"original_id":"CANON-0046","title":"Reduce 'use client' directives","category":"code","severity":"S1","effort":"E2","dependencies":["DEDUP-0012"],"pr_bucket_suggestion":"PR14","sources":[{"type":"backlog","id":"CANON-0046","source":"backlog"}]}
{"original_id":"CANON-0072","title":"Split TodayPage god component","category":"code","severity":"S1","effort":"E3","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0072","source":"backlog"}]}
{"original_id":"CANON-0009","title":"Explicit client providers wrapper","category":"code","severity":"S1","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0009","source":"backlog"}]}
{"original_id":"CANON-0075","title":"Route Firebase through service layer","category":"code","severity":"S2","effort":"E2","dependencies":["CANON-0077"],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0075","source":"backlog"}]}
{"original_id":"CANON-0077","title":"Create typed collection helpers","category":"code","severity":"S2","effort":"E2","dependencies":[],"pr_bucket_suggestion":"PR12","sources":[{"type":"backlog","id":"CANON-0077","source":"backlog"}]}
{"original_id":"CANON-0085","title":"Clarify FirestoreAdapter boundary","category":"code","severity":"S2","effort":"E2","dependencies":["CANON-0075"],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0085","source":"backlog"}]}
{"original_id":"CANON-0082","title":"Audit inventory dual-write pattern","category":"code","severity":"S2","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0082","source":"backlog"}]}
{"original_id":"CANON-0047","title":"Implement image optimization","category":"code","severity":"S1","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0047","source":"backlog"}]}
{"original_id":"CANON-0048","title":"Fix TodayPage subscription bug","category":"code","severity":"S1","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0048","source":"backlog"}]}
{"original_id":"CANON-0049","title":"Lazy load notebook modules","category":"code","severity":"S1","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0049","source":"backlog"}]}
{"original_id":"CANON-0050","title":"Complete Sentry integration","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0050","source":"backlog"}]}
{"original_id":"CANON-0052","title":"Add reduced-motion to animations","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0052","source":"backlog"}]}
{"original_id":"CANON-0053","title":"Add React.memo to list components","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0053","source":"backlog"}]}
{"original_id":"CANON-0054","title":"Optimize hero background image","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0054","source":"backlog"}]}
{"original_id":"CANON-0055","title":"Add virtualization to large lists","category":"code","severity":"S2","effort":"E2","dependencies":[],"pr_bucket_suggestion":"PR15","sources":[{"type":"backlog","id":"CANON-0055","source":"backlog"}]}
{"original_id":"CANON-0056","title":"Add marker clustering to map","category":"code","severity":"S2","effort":"E2","dependencies":[],"pr_bucket_suggestion":"PR15","sources":[{"type":"backlog","id":"CANON-0056","source":"backlog"}]}
{"original_id":"CANON-0057","title":"Remove 7 unused dependencies","category":"code","severity":"S2","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0057","source":"backlog"}]}
{"original_id":"CANON-0059","title":"Add Firebase query indexes","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0059","source":"backlog"}]}
{"original_id":"CANON-0060","title":"Paginate admin CRUD table","category":"code","severity":"S2","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0060","source":"backlog"}]}
{"original_id":"CANON-0061","title":"Decompose Step1WorksheetCard","category":"code","severity":"S2","effort":"E3","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0061","source":"backlog"}]}
{"original_id":"CANON-0062","title":"Add loading.tsx files","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0062","source":"backlog"}]}
{"original_id":"CANON-0063","title":"Lazy load JournalHub forms","category":"code","severity":"S2","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0063","source":"backlog"}]}
{"original_id":"CANON-0011","title":"Add Cloud Function security tests","category":"code","severity":"S1","effort":"E2","dependencies":["DEDUP-0001"],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0011","source":"backlog"}]}
{"original_id":"CANON-0012","title":"Add Firestore rules emulator tests","category":"code","severity":"S1","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0012","source":"backlog"}]}
{"original_id":"CANON-0013","title":"Increase security file coverage","category":"code","severity":"S1","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0013","source":"backlog"}]}
{"original_id":"DEDUP-0014","title":"Reduce 47 CRITICAL complexity functions","category":"code","severity":"S0","effort":"E3","dependencies":["CANON-0068"],"pr_bucket_suggestion":"PR18","sources":[{"type":"backlog","id":"DEDUP-0014","source":"backlog"},{"type":"backlog","id":"CANON-0068","source":"backlog"},{"type":"canon","id":"CANON-0068","file":"CANON-REFACTOR.jsonl"}],"evidence":[],"files":["scripts/assign-review-tier.js","scripts/phase-complete-check.js","scripts/check-pattern-compliance.js"],"merged_from":["DEDUP-0014","CANON-0068"]}
{"original_id":"CANON-0106","title":"Add script test coverage (CI)","category":"code","severity":"S1","effort":"E2","dependencies":[],"pr_bucket_suggestion":"PR17","sources":[{"type":"backlog","id":"CANON-0106","source":"backlog"}]}
{"original_id":"CANON-0027","title":"Unskip Cloud Function test","category":"code","severity":"S2","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0027","source":"backlog"}]}
{"original_id":"CANON-0029","title":"Add useJournal hook tests","category":"code","severity":"S2","effort":"E2","dependencies":["DEDUP-0011"],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0029","source":"backlog"}]}
{"original_id":"CANON-0074","title":"Increase critical path coverage","category":"code","severity":"S2","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0074","source":"backlog"}]}
{"original_id":"DEDUP-0009","title":"Extract time rotation utilities","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"PR10","sources":[{"type":"backlog","id":"DEDUP-0009","source":"backlog"}]}
{"original_id":"DEDUP-0010","title":"Consolidate DailyQuoteCard","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"PR9","sources":[{"type":"backlog","id":"DEDUP-0010","source":"backlog"}]}
{"original_id":"CANON-0080","title":"Create CRUD factory","category":"code","severity":"S2","effort":"E2","dependencies":["CANON-0077"],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0080","source":"backlog"}]}
{"original_id":"CANON-0081","title":"Centralize admin function wrappers","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0081","source":"backlog"}]}
{"original_id":"CANON-0084","title":"Extract safeReadFile/safeWriteFile","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0084","source":"backlog"}]}
{"original_id":"CANON-0086","title":"Consolidate searchable-text generation","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0086","source":"backlog"}]}
{"original_id":"CANON-0083","title":"Fix deprecated APIs + nested ternaries","category":"code","severity":"S3","effort":"E2","dependencies":[],"pr_bucket_suggestion":"PR-BATCH-MANUAL","sources":[{"type":"backlog","id":"CANON-0083","source":"backlog"}]}
{"original_id":"CANON-0087","title":"Remove duplicate CloudFunctionError","category":"code","severity":"S3","effort":"E0","dependencies":[],"pr_bucket_suggestion":"PR7","sources":[{"type":"backlog","id":"CANON-0087","source":"backlog"}]}
{"original_id":"CANON-0088","title":"Run ESLint auto-fix","category":"code","severity":"S3","effort":"E0","dependencies":[],"pr_bucket_suggestion":"PR-BATCH-AUTO","sources":[{"type":"backlog","id":"CANON-0088","source":"backlog"}]}
{"original_id":"CANON-0089","title":"replaceAll + node: prefix batch","category":"code","severity":"S3","effort":"E1","dependencies":[],"pr_bucket_suggestion":"PR-BATCH-AUTO","sources":[{"type":"backlog","id":"CANON-0089","source":"backlog"}]}
{"original_id":"CANON-0090","title":"Extract parseTime helper","category":"code","severity":"S3","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0090","source":"backlog"}]}
{"original_id":"CANON-0091","title":"Fix broken relative links","category":"code","severity":"S1","effort":"E1","dependencies":[],"pr_bucket_suggestion":"PR16","sources":[{"type":"backlog","id":"CANON-0091","source":"backlog"}]}
{"original_id":"CANON-0092","title":"Replace [X] placeholders","category":"code","severity":"S1","effort":"E1","dependencies":[],"pr_bucket_suggestion":"PR16","sources":[{"type":"backlog","id":"CANON-0092","source":"backlog"}]}
{"original_id":"CANON-0093","title":"Add DOCUMENTATION_INDEX to README","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"PR16","sources":[{"type":"backlog","id":"CANON-0093","source":"backlog"}]}
{"original_id":"CANON-0094","title":"Add Tier 2 required metadata","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"PR16","sources":[{"type":"backlog","id":"CANON-0094","source":"backlog"}]}
{"original_id":"CANON-0095","title":"Fix standards placeholder links","category":"code","severity":"S2","effort":"E0","dependencies":[],"pr_bucket_suggestion":"PR16","sources":[{"type":"backlog","id":"CANON-0095","source":"backlog"}]}
{"original_id":"CANON-0096","title":"Update DOCUMENT_DEPENDENCIES sync","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0096","source":"backlog"}]}
{"original_id":"CANON-0097","title":"Add PR_REVIEW_PROMPT metadata","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0097","source":"backlog"}]}
{"original_id":"CANON-0098","title":"Fix CODE_PATTERNS.md path references","category":"code","severity":"S2","effort":"E0","dependencies":[],"pr_bucket_suggestion":"PR16","sources":[{"type":"backlog","id":"CANON-0098","source":"backlog"}]}
{"original_id":"CANON-0109","title":"Update DEVELOPMENT.md workflow docs","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0109","source":"backlog"}]}
{"original_id":"CANON-0100","title":"Fix archive link rot","category":"code","severity":"S3","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0100","source":"backlog"}]}
{"original_id":"CANON-0101","title":"Replace template date placeholders","category":"code","severity":"S3","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0101","source":"backlog"}]}
{"original_id":"CANON-0102","title":"Move PR template to docs/templates/","category":"code","severity":"S3","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0102","source":"backlog"}]}
{"original_id":"CANON-0103","title":"Update DEVELOPMENT.md test count","category":"code","severity":"S3","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0103","source":"backlog"}]}
{"original_id":"CANON-0104","title":"Document fragile anchor links","category":"code","severity":"S3","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0104","source":"backlog"}]}
{"original_id":"CANON-0114","title":"Update Husky docs for patterns:check","category":"code","severity":"S3","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0114","source":"backlog"}]}
{"original_id":"DEDUP-0015","title":"Convert CI gates to blocking","category":"code","severity":"S0","effort":"E2","dependencies":[],"pr_bucket_suggestion":"PR5","sources":[{"type":"backlog","id":"DEDUP-0015","source":"backlog"}]}
{"original_id":"CANON-0107","title":"Add npm audit + CodeQL + Dependabot","category":"code","severity":"S1","effort":"E2","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0107","source":"backlog"}]}
{"original_id":"CANON-0108","title":"Add gcloud setup to deploy workflow","category":"code","severity":"S1","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0108","source":"backlog"}]}
{"original_id":"CANON-0110","title":"Move full tests to pre-push only","category":"code","severity":"S2","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0110","source":"backlog"}]}
{"original_id":"CANON-0112","title":"Pin firebase-tools version","category":"code","severity":"S2","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0112","source":"backlog"}]}
{"original_id":"CANON-0113","title":"Fix auto-label workflow if syntax","category":"code","severity":"S2","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0113","source":"backlog"}]}
{"original_id":"CANON-0115","title":"Add explicit permissions block","category":"code","severity":"S3","effort":"E0","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0115","source":"backlog"}]}
{"original_id":"CANON-0118","title":"Improve deploy secret handling","category":"code","severity":"S3","effort":"E1","dependencies":[],"pr_bucket_suggestion":"-","sources":[{"type":"backlog","id":"CANON-0118","source":"backlog"}]}
{"original_id":"LEGACY-001","title":"Retrofit SSR-Safe localStorage","category":"code","severity":"S3","effort":"E1","dependencies":[],"sources":[{"type":"backlog","id":"LEGACY-001","source":"audit-backlog"}]}
{"original_id":"CANON-0101","title":"Missing \"Quick Start\" Sections","category":"code","severity":"S3","effort":"E2","dependencies":[],"sources":[{"type":"backlog","id":"CANON-0101","source":"audit-backlog"}]}
{"original_id":"CANON-0102","title":"Missing \"AI Instructions\" Sections","category":"code","severity":"S3","effort":"E1","dependencies":[],"sources":[{"type":"backlog","id":"CANON-0102","source":"audit-backlog"}]}
{"original_id":"CANON-0103","title":"Fix docs:check False Positives","category":"code","severity":"S2","effort":"E1","dependencies":[],"sources":[{"type":"backlog","id":"CANON-0103","source":"audit-backlog"}]}
{"original_id":"CANON-0104","title":"Add Missing Script Triggers to Session Start","category":"code","severity":"S2","effort":"E0","dependencies":[],"sources":[{"type":"backlog","id":"CANON-0104","source":"audit-backlog"}]}
{"original_id":"CANON-0105","title":"Add CANON Validation to CI Pipeline","category":"code","severity":"S2","effort":"E1","dependencies":[],"sources":[{"type":"backlog","id":"CANON-0105","source":"audit-backlog"}]}
{"original_id":"CANON-0106","title":"Add npm Commands for Undocumented Scripts","category":"code","severity":"S3","effort":"E0","dependencies":[],"sources":[{"type":"backlog","id":"CANON-0106","source":"audit-backlog"}]}
{"original_id":"CANON-0107","title":"Missing Security Headers","category":"code","severity":"S1","effort":"E0","dependencies":[],"sources":[{"type":"backlog","id":"CANON-0107","source":"audit-backlog"}]}
{"original_id":"CANON-0108","title":"No Firebase Storage Rules","category":"code","severity":"S2","effort":"E0","dependencies":[],"sources":[{"type":"backlog","id":"CANON-0108","source":"audit-backlog"}]}