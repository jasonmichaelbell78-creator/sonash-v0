{"master_id":"MASTER-0001","title":"5 failing tests in check-docs-light.test.ts","category":"code","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"CODE-001","date":"2026-01-17","category":"code"}],"files":["tests/scripts/check-docs-light.test.ts"],"status":"open","description":"5 tests failing in check-docs-light.test.ts: 'checks for required sections', 'validates internal links', 'checks Last Updated date', 'exits 0 when no errors found', 'exits 1 when errors found'. Tests appear to have issues with extractJSON parsing or script behavior changes.","recommendation":"Debug the check-docs-light.js script and update tests to match current behavior. Tests expect JSON output but may not be parsing correctly.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-001","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0002","title":"Debug console.log statements in production code","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"CODE-002","date":"2026-01-17","category":"code"},{"type":"single-session","id":"PERF-003","date":"2026-01-17","category":"performance"}],"files":[],"status":"open","description":"12 console.log/error statements in today-page.tsx used for debugging. While wrapped in NODE_ENV checks, these add noise and should use structured logging.","recommendation":"Replace debug console statements with the project's logger utility (lib/logger.ts) which provides structured logging and Sentry integration.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-002","merged_from":["CODE-002","PERF-003"],"roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-003","matched_tech_debt_item":"PERF-006"}
{"master_id":"MASTER-0003","title":"High cognitive complexity in adminSetUserPrivilege","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"CODE-003","date":"2026-01-17","category":"code"}],"files":["functions/src/admin.ts"],"status":"open","description":"SonarCloud reports cognitive complexity of 16 (threshold 15) for adminSetUserPrivilege function. Function handles privilege validation, security logging, and Firestore operations.","recommendation":"Extract privilege type validation into a separate helper function to reduce cognitive load.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-003","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-001","matched_tech_debt_item":null}
{"master_id":"MASTER-0004","title":"Very high cognitive complexity in adminListUsers","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"CODE-004","date":"2026-01-17","category":"code"}],"files":["functions/src/admin.ts"],"status":"open","description":"SonarCloud reports cognitive complexity of 34 (threshold 15) for adminListUsers function. Function handles pagination, cursor validation, sorting, and data transformation.","recommendation":"Break down into smaller functions: extractCursorValue(), buildUserQuery(), transformUserResults(). Each handles one concern.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-004","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-001","matched_tech_debt_item":null}
{"master_id":"MASTER-0005","title":"High cognitive complexity in UsersTab component","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"CODE-005","date":"2026-01-17","category":"code"}],"files":["components/admin/users-tab.tsx"],"status":"open","description":"SonarCloud reports cognitive complexity of 27 (threshold 15) for UsersTab function. Component manages pagination, search, detail drawer, editing, and privilege state.","recommendation":"Extract sub-components: UserSearchSection, UserDetailDrawer, PrivilegeEditor. Use custom hooks for state management.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-005","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-002","matched_tech_debt_item":null}
{"master_id":"MASTER-0006","title":"void operator usage flagged by SonarCloud","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"CODE-006","date":"2026-01-17","category":"code"}],"files":["components/admin/logs-tab.tsx"],"status":"open","description":"SonarCloud flags 'void refresh(() => active)' as code smell. The void operator is used to explicitly discard the Promise return value.","recommendation":"This is intentional to handle async functions in event handlers. Consider adding a comment explaining the pattern or using .catch() for explicit error handling.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-006","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0007","title":"No correlation/request ID tracing","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"CODE-007","date":"2026-01-17","category":"code"}],"files":["lib/logger.ts"],"status":"open","description":"Logger does not include correlation IDs or request tracing. Frontend-to-backend requests cannot be traced through logs.","recommendation":"Add correlation ID generation in frontend, pass through Cloud Function calls, and include in all log entries for end-to-end tracing.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-007","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0008","title":"@ts-expect-error suppression for type mismatch","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"CODE-008","date":"2026-01-17","category":"code"}],"files":["components/notebook/pages/resources-page.tsx"],"status":"open","description":"TypeScript error suppressed with @ts-expect-error comment. The setGenderFilter expects specific union type but receives broader string.","recommendation":"Cast the option value explicitly or narrow the type at the call site rather than suppressing the error.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-008","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"CODE-008"}
{"master_id":"MASTER-0009","title":"TODO comment for unimplemented feature","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"CODE-009","date":"2026-01-17","category":"code"}],"files":["lib/database/firestore-adapter.ts"],"status":"open","description":"TODO comment indicates FirestoreService doesn't support configurable limits yet.","recommendation":"Either implement configurable limits in FirestoreService or track as technical debt in TECHNICAL_DEBT.md.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-009","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0010","title":"TODO comment for user preferences feature","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"CODE-010","date":"2026-01-17","category":"code"}],"files":["components/notebook/features/quick-actions-fab.tsx"],"status":"open","description":"TODO comment for making action buttons customizable by user.","recommendation":"Track in ROADMAP.md or TECHNICAL_DEBT.md if this is a planned feature.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-010","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0012","title":"Nested component definition","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"CODE-012","date":"2026-01-17","category":"code"}],"files":["components/admin/admin-tabs.tsx"],"status":"open","description":"SonarCloud flags component definition inside parent component. This causes unnecessary re-renders and breaks React optimization.","recommendation":"Move the inner component outside the parent and pass data as props.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-012","roadmap_status":"already_tracked","matched_roadmap_item":"PERF-002","matched_tech_debt_item":null}
{"master_id":"MASTER-0015","title":"Missing critical security headers","category":"security","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"SEC-001","date":"2026-01-17","category":"security"}],"files":["firebase.json"],"status":"open","description":"Missing security headers: Content-Security-Policy (CSP), X-Frame-Options, X-Content-Type-Options, Strict-Transport-Security (HSTS), Referrer-Policy, Permissions-Policy. Only Cache-Control and COOP are configured.","recommendation":"Add comprehensive security headers to firebase.json hosting configuration. This was also flagged in audit-2026-01-13 (SEC-002). Priority fix.","dependencies":[],"pr_bucket":"security-hardening","original_id":"SEC-001","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"PERF-007"}
{"master_id":"MASTER-0016","title":"App Check disabled on Cloud Functions","category":"security","severity":"S1","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"SEC-002","date":"2026-01-17","category":"security"}],"files":["functions/src/index.ts"],"status":"open","description":"Firebase App Check is disabled (requireAppCheck: false) on all Cloud Functions. Comment says 'TEMPORARILY DISABLED - waiting for throttle to clear'. This removes bot protection layer.","recommendation":"Re-enable App Check once throttle period clears. This was flagged in audit-2026-01-13 (SEC-001). Check if throttle has cleared.","dependencies":[],"pr_bucket":"security-hardening","original_id":"SEC-002","roadmap_status":"already_tracked","matched_roadmap_item":"MASTER-0078","matched_tech_debt_item":"DOC-005"}
{"master_id":"MASTER-0017","title":"Hardcoded reCAPTCHA site key fallback","category":"security","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"SEC-003","date":"2026-01-17","category":"security"}],"files":["functions/src/recaptcha-verify.ts"],"status":"open","description":"Hardcoded reCAPTCHA site key as fallback: '6LdeazosAAAAAMDNCh1hTUDKh_UeS6xWY1-85B2O'. Makes key rotation difficult.","recommendation":"Remove hardcoded fallback. Fail early with clear error if RECAPTCHA_SITE_KEY env var is not set.","dependencies":[],"pr_bucket":"security-hardening","original_id":"SEC-003","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"SEC-003"}
{"master_id":"MASTER-0018","title":"SonarCloud: Potentially hard-coded password pattern","category":"security","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"SEC-004","date":"2026-01-17","category":"security"}],"files":["lib/utils/errors.ts"],"status":"open","description":"SonarCloud flags error message strings containing 'password' as potential hardcoded credentials. These are user-facing error messages, not actual credentials.","recommendation":"This is a FALSE POSITIVE. The strings are Firebase error code descriptions (e.g., 'auth/wrong-password': 'Incorrect password'). No action needed.","dependencies":[],"pr_bucket":"security-hardening","original_id":"SEC-004","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"SEC-004"}
{"master_id":"MASTER-0019","title":"OS command execution in CLI scripts","category":"security","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"SEC-005","date":"2026-01-17","category":"security"}],"files":["scripts/ai-review.js"],"status":"open","description":"SonarCloud flags execSync/spawnSync in CLI scripts. These execute git commands with file paths that could contain special characters. Scripts are developer-only tools.","recommendation":"Validate and sanitize file paths before passing to shell commands. Use array-based spawn instead of shell string interpolation where possible.","dependencies":[],"pr_bucket":"security-hardening","original_id":"SEC-005","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"SEC-005"}
{"master_id":"MASTER-0020","title":"ReDoS vulnerable regex patterns","category":"security","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"SEC-006","date":"2026-01-17","category":"security"}],"files":["functions/src/admin.ts"],"status":"open","description":"SonarCloud flags 33 regex patterns as vulnerable to ReDoS (super-linear runtime due to backtracking). Most are in CLI scripts but some are in production code (admin.ts, security-logger.ts, sentry.client.ts).","recommendation":"Review flagged regexes in production code. Use atomic groups or possessive quantifiers. For CLI scripts, input is bounded so risk is low.","dependencies":[],"pr_bucket":"security-hardening","original_id":"SEC-006","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-001","matched_tech_debt_item":null}
{"master_id":"MASTER-0021","title":"Math.random for visual effects","category":"security","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"SEC-007","date":"2026-01-17","category":"security"}],"files":["components/celebrations/confetti-burst.tsx"],"status":"open","description":"SonarCloud flags Math.random() usage in celebration components. These are for visual randomization (confetti colors, positions), not security purposes.","recommendation":"FALSE POSITIVE. Math.random is appropriate for visual effects. Document that these are non-security uses.","dependencies":[],"pr_bucket":"security-hardening","original_id":"SEC-007","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0022","title":"GitHub Actions using version tags instead of commit SHAs","category":"process","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"PROC-001","date":"2026-01-17","category":"process"},{"type":"single-session","id":"SEC-008","date":"2026-01-17","category":"security"}],"files":[],"status":"open","description":"5 workflows use actions/checkout@v4, actions/setup-node@v4, and tj-actions/changed-files@v46 instead of pinning to commit SHAs. Version tags can be moved, creating supply chain risk.","recommendation":"Pin all GitHub Actions to full commit SHAs. backlog-enforcement.yml already follows this pattern correctly.","dependencies":[],"pr_bucket":"process-automation","original_id":"PROC-001","merged_from":["PROC-001","SEC-008"],"roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0023","title":"Secrets expanded in run block","category":"security","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"SEC-009","date":"2026-01-17","category":"security"}],"files":[".github/workflows/deploy-firebase.yml"],"status":"open","description":"SonarCloud flags secret expansion in GitHub Actions run block. The secret is written to a temporary file with chmod 600.","recommendation":"Current implementation is reasonable - file is temporary and permissions are restricted. Consider using action inputs instead of shell expansion for extra safety.","dependencies":[],"pr_bucket":"security-hardening","original_id":"SEC-009","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0024","title":"process.env.NODE_ENV checks for debug info","category":"security","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"SEC-010","date":"2026-01-17","category":"security"}],"files":["components/providers/error-boundary.tsx"],"status":"open","description":"Components use process.env.NODE_ENV === 'development' to conditionally show debug info. This is correct Next.js pattern for dev-only features.","recommendation":"No action needed. This is the correct pattern for development-only debugging.","dependencies":[],"pr_bucket":"security-hardening","original_id":"SEC-010","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0025","title":"Agent config files present","category":"security","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"SEC-011","date":"2026-01-17","category":"security"}],"files":[".claude/settings.json"],"status":"open","description":".claude/ directory contains agent configurations, skills, and hooks. No obvious prompt injection patterns found in quick review.","recommendation":"Periodically review .claude/ configs for suspicious patterns. Current configs appear safe.","dependencies":[],"pr_bucket":"security-hardening","original_id":"SEC-011","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0026","title":"16 broken anchor links detected by docs:check","category":"documentation","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"DOC-001","date":"2026-01-17","category":"documentation"}],"files":["SESSION_CONTEXT.md"],"status":"open","description":"docs:check reports 16 broken anchor links across multiple files including SESSION_CONTEXT.md, ROADMAP.md, DOCUMENTATION_STANDARDS.md, and generated README files. These anchors reference non-existent headings.","recommendation":"Fix anchor references to match actual heading slugs or remove broken anchors.","dependencies":[],"pr_bucket":"documentation-sync","original_id":"DOC-001","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0027","title":"20 placeholder issues across 5 template instances","category":"documentation","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"DOC-002","date":"2026-01-17","category":"documentation"}],"files":["docs/reviews/2026-Q1/PERFORMANCE_AUDIT_PLAN_2026_Q1.md"],"status":"open","description":"docs:sync-check reports 20 placeholder issues: SECURITY_AUDIT_PLAN (2), PERFORMANCE_AUDIT_PLAN (8), REFACTORING_AUDIT_PLAN (2), DOCUMENTATION_AUDIT_PLAN (6), PROCESS_AUDIT_PLAN (2). Templates were not fully instantiated.","recommendation":"Replace all [X] and YYYY-MM-DD placeholders with actual values in 2026-Q1 plan files.","dependencies":[],"pr_bucket":"documentation-sync","original_id":"DOC-002","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0028","title":"99 files fail docs:check (313 errors, 177 warnings)","category":"documentation","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"DOC-003","date":"2026-01-17","category":"documentation"}],"files":["scripts/README.md"],"status":"open","description":"docs:check reports all 99 checked files have errors. Most common: missing document title (H1), missing Purpose/Overview section, missing Version History section, missing AI Instructions section.","recommendation":"Prioritize fixing core documentation files first. Consider updating DOCUMENTATION_STANDARDS.md to reflect realistic requirements for auto-generated files.","dependencies":[],"pr_bucket":"documentation-sync","original_id":"DOC-003","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0029","title":"TRIGGERS.md last updated 2026-01-02 (15 days stale)","category":"documentation","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"DOC-004","date":"2026-01-17","category":"documentation"}],"files":["docs/TRIGGERS.md"],"status":"open","description":"TRIGGERS.md was last updated 2026-01-02 but hooks have been updated multiple times since (pre-commit now has 8 checks, pre-push has 7). Document may be out of sync with actual trigger configuration.","recommendation":"Update TRIGGERS.md to reflect current hook counts and any new triggers added since 2026-01-02.","dependencies":[],"pr_bucket":"documentation-sync","original_id":"DOC-004","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"DOC-004"}
{"master_id":"MASTER-0030","title":"DOCUMENTATION_STANDARDS.md last updated 2026-01-01 (16 days stale)","category":"documentation","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"DOC-005","date":"2026-01-17","category":"documentation"}],"files":["docs/DOCUMENTATION_STANDARDS.md"],"status":"open","description":"DOCUMENTATION_STANDARDS.md version 1.2 was last updated 2026-01-01. Given 295 commits and significant doc changes since, standards may need refresh.","recommendation":"Review if documentation standards need updates based on lessons learned from recent audits.","dependencies":[],"pr_bucket":"documentation-sync","original_id":"DOC-005","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"DOC-005"}
{"master_id":"MASTER-0031","title":"DOCUMENT_DEPENDENCIES.md claims SYNCED but sync check reports 20 issues","category":"documentation","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"DOC-006","date":"2026-01-17","category":"documentation"}],"files":["docs/DOCUMENT_DEPENDENCIES.md"],"status":"open","description":"DOCUMENT_DEPENDENCIES.md header claims 'Sync Status: SYNCED' but docs:sync-check reports 20 issues. False sync status misleads maintainers.","recommendation":"Run docs:sync-check, fix all issues, then update sync status to reflect actual state.","dependencies":[],"pr_bucket":"documentation-sync","original_id":"DOC-006","roadmap_status":"already_tracked","matched_roadmap_item":"E11","matched_tech_debt_item":null}
{"master_id":"MASTER-0032","title":"15 recent commits touch docs but AUDIT_TRACKER shows only 5 categories audited today","category":"documentation","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"DOC-007","date":"2026-01-17","category":"documentation"}],"files":["docs/"],"status":"open","description":"git log shows 15 commits in past 7 days affecting markdown files. While code/security/performance/process/refactoring audits done today, documentation category was last audited 2026-01-10 (Multi-AI).","recommendation":"This audit addresses the gap. Continue monitoring doc changes between audits.","dependencies":[],"pr_bucket":"documentation-sync","original_id":"DOC-007","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0034","title":"PR_REVIEW_PROMPT_TEMPLATE.md lacks Last Updated and Version History (now archived)","category":"documentation","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"DOC-009","date":"2026-01-17","category":"documentation"}],"files":["docs/archive/2026-jan-deprecated/PR_REVIEW_PROMPT_TEMPLATE.md"],"status":"open","description":"CANON-0097 noted this template lacks Last Updated, Status, and Version History section. Now archived at docs/archive/2026-jan-deprecated/.","recommendation":"If template is still needed, restore with proper metadata. Otherwise, update CANON-0097 as resolved via archival.","dependencies":[],"pr_bucket":"documentation-sync","original_id":"DOC-009","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"DOC-009"}
{"master_id":"MASTER-0035","title":"DOCUMENTATION_INDEX.md orphaned - not referenced by any markdown file","category":"documentation","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"DOC-010","date":"2026-01-17","category":"documentation"}],"files":["DOCUMENTATION_INDEX.md"],"status":"open","description":"CANON-0093 noted DOCUMENTATION_INDEX.md is not linked from README.md or other navigation docs. Primary navigation artifact is undiscoverable.","recommendation":"Add prominent link to DOCUMENTATION_INDEX.md from README.md.","dependencies":[],"pr_bucket":"documentation-sync","original_id":"DOC-010","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"DOC-010"}
{"master_id":"MASTER-0036","title":"Large monolithic component (1117 lines) without code splitting","category":"performance","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"PERF-001","date":"2026-01-17","category":"performance"}],"files":["components/notebook/pages/today-page.tsx"],"status":"open","description":"TodayPage is 1117 lines with 15+ state variables, 12 console.log statements, and multiple useEffect hooks. No code splitting or lazy loading despite being heavily interactive.","recommendation":"Split into smaller sub-components: TodayPageHeader, CleanTimeSection, MoodCheckInSection, HaltCheckSection, WeeklyStatsSection. Use dynamic imports for optional sections.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"PERF-001","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-003","matched_tech_debt_item":"PERF-001"}
{"master_id":"MASTER-0037","title":"No React.memo on frequently re-rendered admin list (924 lines)","category":"performance","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"PERF-002","date":"2026-01-17","category":"performance"}],"files":["components/admin/users-tab.tsx"],"status":"open","description":"UsersTab is 924 lines with complex state (search, pagination, drawer, editing). Child components re-render on any state change. SonarCloud flagged cognitive complexity 27.","recommendation":"Extract UserListItem, UserSearchBar, UserDetailDrawer as memoized sub-components. Add React.memo with proper equality checks.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"PERF-002","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-002","matched_tech_debt_item":"PERF-002"}
{"master_id":"MASTER-0038","title":"30+ components with inline onClick arrow functions","category":"performance","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"PERF-004","date":"2026-01-17","category":"performance"}],"files":["components"],"status":"open","description":"Found 30+ components passing inline arrow functions to onClick props (onClick={() => ...). These create new function references on each render, potentially causing unnecessary child re-renders.","recommendation":"Extract handlers to useCallback where components are memoized or passed to child components.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"PERF-004","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"PERF-004"}
{"master_id":"MASTER-0039","title":"28 components with inline style objects","category":"performance","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"PERF-005","date":"2026-01-17","category":"performance"}],"files":["components"],"status":"open","description":"Found 28 components using style={{...}} inline objects which create new object references on each render, potentially causing unnecessary re-renders.","recommendation":"Move static styles to className (Tailwind) or extract to const objects outside component. Dynamic styles should use useMemo.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"PERF-005","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"PERF-005"}
{"master_id":"MASTER-0040","title":"Large chunk file (628KB) indicates code splitting opportunity","category":"performance","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"PERF-006","date":"2026-01-17","category":"performance"}],"files":[".next/static/chunks"],"status":"open","description":"Largest chunk is 628KB. Next largest chunks: 356KB, 280KB, 220KB, 188KB. Total static directory: 3.5MB.","recommendation":"Run bundle analyzer (npm run analyze) to identify which modules are in large chunks. Consider dynamic imports for heavy libraries like framer-motion (37 imports).","dependencies":[],"pr_bucket":"performance-optimization","original_id":"PERF-006","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"PERF-006"}
{"master_id":"MASTER-0041","title":"20+ uses of key={index} in list rendering","category":"performance","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"PERF-007","date":"2026-01-17","category":"performance"}],"files":["components"],"status":"open","description":"Found 20+ instances of key={index} or key={i} in .map() renders. Index keys cause inefficient reconciliation when list items are reordered, added, or removed.","recommendation":"Use unique stable IDs for keys (item.id, item.uid). Index keys acceptable only for truly static lists.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"PERF-007","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"PERF-007"}
{"master_id":"MASTER-0042","title":"setInterval without visibility check continues in background","category":"performance","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"PERF-008","date":"2026-01-17","category":"performance"}],"files":["components/widgets/meeting-countdown.tsx"],"status":"open","description":"meeting-countdown.tsx and compact-meeting-countdown.tsx run setInterval (60s/30s) even when tab is backgrounded, wasting resources.","recommendation":"Use Page Visibility API to pause intervals when document is hidden. Pattern already exists in today-page.tsx:488.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"PERF-008","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"PERF-008"}
{"master_id":"MASTER-0043","title":"getAllMeetings() deprecated but still available without limit","category":"performance","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"PERF-009","date":"2026-01-17","category":"performance"}],"files":["lib/db/meetings.ts"],"status":"open","description":"MeetingsService.getAllMeetings() fetches entire collection without limit. Marked deprecated but not removed. paginated version exists but may not be used everywhere.","recommendation":"Remove deprecated getAllMeetings or add deprecation warning. Audit call sites to ensure pagination is used.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"PERF-009","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"PERF-009"}
{"master_id":"MASTER-0047","title":"tj-actions/changed-files without CVE-pinned version","category":"process","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"PROC-002","date":"2026-01-17","category":"process"}],"files":[".github/workflows/docs-lint.yml"],"status":"open","description":"docs-lint.yml uses tj-actions/changed-files@v46 without SHA pin. ci.yml correctly pins to SHA for CVE-2025-30066 protection.","recommendation":"Update to pinned SHA like ci.yml does: tj-actions/changed-files@c65cd883420fd2eb864698a825fc4162dd94482c","dependencies":[],"pr_bucket":"process-automation","original_id":"PROC-002","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0048","title":"lint-staged using npx --no-install may fail if not in cache","category":"process","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"PROC-003","date":"2026-01-17","category":"process"}],"files":[".husky/pre-commit"],"status":"open","description":"Pre-commit hook uses 'npx --no-install lint-staged' which will fail if lint-staged isn't already cached. This is intentional security measure but causes the issue we've been experiencing.","recommendation":"Document workaround in DEVELOPMENT.md: run 'npm exec lint-staged' or 'npx lint-staged' once to cache the package.","dependencies":[],"pr_bucket":"process-automation","original_id":"PROC-003","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0049","title":"Multiple trap commands may override each other","category":"process","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"PROC-004","date":"2026-01-17","category":"process"}],"files":[".claude/hooks/session-start.sh"],"status":"open","description":"session-start.sh has trap at line 245 for PATTERN_ERR_TMP but earlier trap at line 42 for TEST_TMPFILE (in pre-commit). Only last trap per signal is active.","recommendation":"Consolidate trap handlers or use a cleanup function that handles multiple temp files.","dependencies":[],"pr_bucket":"process-automation","original_id":"PROC-004","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0050","title":"28 scripts have 715 console.log/error/warn calls without structured logging","category":"process","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"PROC-005","date":"2026-01-17","category":"process"}],"files":["scripts/"],"status":"open","description":"Scripts rely on console.* calls which mix errors with stdout, making programmatic parsing difficult. No centralized logging utility exists.","recommendation":"Create scripts/lib/logger.js with levels (debug, info, warn, error) and JSON output option. Gradually migrate high-traffic scripts.","dependencies":[],"pr_bucket":"process-automation","original_id":"PROC-005","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0051","title":"Script has minimal console output (1 call)","category":"process","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"PROC-006","date":"2026-01-17","category":"process"}],"files":["scripts/check-cross-doc-deps.js"],"status":"open","description":"check-cross-doc-deps.js has only 1 console call, suggesting minimal user feedback during execution.","recommendation":"Add progress indicators for longer operations.","dependencies":[],"pr_bucket":"process-automation","original_id":"PROC-006","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0052","title":"TRIGGERS.md last updated 2026-01-02 but hooks updated since","category":"process","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"PROC-007","date":"2026-01-17","category":"process"}],"files":["docs/TRIGGERS.md"],"status":"open","description":"TRIGGERS.md documents 68+ enforcement points but was last updated 2026-01-02. Pre-commit hook has 8 checks (documented) and pre-push has 7 checks. Document may be slightly stale.","recommendation":"Update TRIGGERS.md to reflect current hook counts and any changes since 2026-01-02.","dependencies":[],"pr_bucket":"process-automation","original_id":"PROC-007","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0053","title":"All 12 slash commands have frontmatter descriptions","category":"process","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"PROC-008","date":"2026-01-17","category":"process"}],"files":[".claude/commands/"],"status":"open","description":"All commands in .claude/commands/ have proper YAML frontmatter with descriptions. This is working as expected.","recommendation":"No action needed - this is a positive finding.","dependencies":[],"pr_bucket":"process-automation","original_id":"PROC-008","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0054","title":"Artifact upload without retention policy","category":"process","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"PROC-009","date":"2026-01-17","category":"process"}],"files":[".github/workflows/ci.yml"],"status":"open","description":"CI workflow uploads coverage artifacts but doesn't specify retention period. Default is 90 days which may accumulate storage.","recommendation":"Add retention-days: 7 to actions/upload-artifact@v4 for coverage artifacts.","dependencies":[],"pr_bucket":"process-automation","original_id":"PROC-009","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0055","title":"Git diff with @{u}...HEAD fails on new branches without upstream","category":"process","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"PROC-010","date":"2026-01-17","category":"process"}],"files":[".husky/pre-push"],"status":"open","description":"Pre-push hook line 48 uses @{u}...HEAD which fails silently on branches without upstream tracking. The hook handles this gracefully but could be clearer.","recommendation":"Add explicit message when no upstream is detected instead of 'No upstream or no JS/TS/JSON changes detected'.","dependencies":[],"pr_bucket":"process-automation","original_id":"PROC-010","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0056","title":"TodayPage god component (1117 lines, 14 useState, 10 useEffect, 24 imports)","category":"refactoring","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"REF-001","date":"2026-01-17","category":"refactoring"}],"files":["components/notebook/pages/today-page.tsx"],"status":"open","description":"TodayPage mixes 5+ responsibilities: persistence, realtime sync, analytics, UI state, localStorage recovery. Highest LOC in codebase with 14 useState hooks and 10 useEffect hooks creating complex state interdependencies.","recommendation":"Split into hooks: useDailyLogState, useDailyLogRealtime, useWeeklyStats. Move Firestore queries to service layer. Target <400 lines per component.","dependencies":[],"pr_bucket":"code-quality","original_id":"REF-001","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-003","matched_tech_debt_item":null}
{"master_id":"MASTER-0057","title":"UsersTab god component (924 lines, 21 useState, 3 useEffect)","category":"refactoring","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"REF-002","date":"2026-01-17","category":"refactoring"}],"files":["components/admin/users-tab.tsx"],"status":"open","description":"Admin users component with 924 lines, 21 useState hooks for managing search, pagination, drawer, editing states. Too many responsibilities in single component making it hard to maintain and test.","recommendation":"Extract UserListItem, UserSearchBar, UserDetailDrawer as separate components. Create useUserSearch and useUserDetail hooks.","dependencies":[],"pr_bucket":"code-quality","original_id":"REF-002","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-002","matched_tech_debt_item":null}
{"master_id":"MASTER-0058","title":"Step1WorksheetCard large component (845 lines) with nested conditionals","category":"refactoring","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"REF-003","date":"2026-01-17","category":"refactoring"}],"files":["components/growth/Step1WorksheetCard.tsx"],"status":"open","description":"Complex growth worksheet with 845 lines, large initialData object (34 fields), and deeply nested switch statements for question rendering.","recommendation":"Extract FormSection, QuestionBlock as separate components. Move FORM_SECTIONS constant to separate config file.","dependencies":[],"pr_bucket":"code-quality","original_id":"REF-003","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"CODE-008"}
{"master_id":"MASTER-0059","title":"ResourcesPage large component (728 lines) mixing meetings and sober homes","category":"refactoring","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"REF-004","date":"2026-01-17","category":"refactoring"}],"files":["components/notebook/pages/resources-page.tsx"],"status":"open","description":"Resources page handles two separate resource types (meetings, sober homes) with distinct data fetching, filtering, and display logic in single component.","recommendation":"Extract MeetingsSection and SoberHomesSection as separate components. Create useResourceFilters hook for shared filter state.","dependencies":[],"pr_bucket":"code-quality","original_id":"REF-004","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"CODE-008"}
{"master_id":"MASTER-0060","title":"Time-of-day rotation logic duplicated in quotes.ts and slogans.ts (80+ lines)","category":"refactoring","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"REF-005","date":"2026-01-17","category":"refactoring"},{"type":"canon","id":"CANON-0065","file":"CANON-REFACTOR.jsonl"}],"files":["lib/db/quotes.ts","lib/db/slogans.ts"],"status":"open","description":"getTimeOfDay() and getQuoteForNow()/getSloganForNow() contain identical complex rotation algorithms (time windows + day-of-year seed) duplicated between two files. Bug fixes must be applied twice.","recommendation":"Extract to lib/utils/content-rotation.ts with generic getTimeOfDay() and getRotatingContentForNow<T>() functions.","dependencies":[],"pr_bucket":"code-quality","original_id":"REF-005","merged_from":["REF-005","CANON-0065"],"roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0061","title":"reCAPTCHA token fetch pattern repeated 5x across codebase","category":"refactoring","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"REF-006","date":"2026-01-17","category":"refactoring"}],"files":["hooks/use-journal.ts"],"status":"open","description":"Same getRecaptchaToken() boilerplate repeated in firestore-service.ts (3x) and use-journal.ts (2x). Easy to forget when adding new Cloud Function calls.","recommendation":"Create callSecureFunction wrapper in lib/utils/callable-errors.ts that auto-injects reCAPTCHA token.","dependencies":[],"pr_bucket":"code-quality","original_id":"REF-006","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0062","title":"Growth card dialog/save pattern duplicated across 4 components","category":"refactoring","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"REF-007","date":"2026-01-17","category":"refactoring"},{"type":"canon","id":"CANON-0079","file":"CANON-REFACTOR.jsonl"}],"files":["components/growth/SpotCheckCard.tsx","components/growth/GratitudeCard.tsx","components/growth/NightReviewCard.tsx","components/growth/Step1WorksheetCard.tsx"],"status":"open","description":"isOpen/isSaving/handleSave state management pattern repeated in SpotCheckCard, GratitudeCard, NightReviewCard, Step1WorksheetCard.","recommendation":"Extract useGrowthCardDialog(saveConfig) hook that manages isOpen, isSaving, and provides handleSave.","dependencies":[],"pr_bucket":"code-quality","original_id":"REF-007","merged_from":["REF-007","CANON-0079"],"roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0063","title":"Direct Firebase SDK usage in 22+ files bypasses service layer","category":"refactoring","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"REF-008","date":"2026-01-17","category":"refactoring"},{"type":"canon","id":"CANON-0075","file":"CANON-REFACTOR.jsonl"}],"files":["hooks/use-journal.ts","components/notebook/pages/today-page.tsx","components/admin/admin-crud-table.tsx","components/growth/DailySloganWidget.tsx","components/providers/profile-context.tsx"],"status":"open","description":"Components and hooks import directly from firebase/firestore (collection, doc, onSnapshot, getDocs) instead of using service layer. SDK changes would require touching 22+ files.","recommendation":"Route all Firebase access through lib/firestore-service.ts or dedicated services. Components should only import from services.","dependencies":[],"pr_bucket":"code-quality","original_id":"REF-008","merged_from":["REF-008","CANON-0075"],"roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"REFAC-010"}
{"master_id":"MASTER-0064","title":"Deprecated saveNotebookJournalEntry still used in 6+ UI components","category":"refactoring","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0070","file":"CANON-REFACTOR.jsonl"},{"type":"single-session","id":"REF-009","date":"2026-01-17","category":"refactoring"}],"files":["lib/firestore-service.ts","components/growth/GratitudeCard.tsx","components/growth/SpotCheckCard.tsx","components/growth/NightReviewCard.tsx","components/growth/Step1WorksheetCard.tsx","components/notebook/pages/today-page.tsx"],"status":"NEW","description":"Two write paths create inconsistent metadata (tags/searchableText). Audit burden.","recommendation":"Migrate callers to useJournal.addEntry. Remove deprecated method.","dependencies":["CANON-0067"],"pr_bucket":"hooks-standardization","original_id":"CANON-0070","merged_from":["CANON-0070","REF-009"],"roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0065","title":"CloudFunctionError interface defined twice in same file","category":"refactoring","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"REF-010","date":"2026-01-17","category":"refactoring"},{"type":"canon","id":"CANON-0087","file":"CANON-REFACTOR.jsonl"}],"files":["lib/firestore-service.ts"],"status":"open","description":"CloudFunctionError interface is defined at both line 200-203 and line 423-426 in firestore-service.ts. Unnecessary duplication within same file.","recommendation":"Define once at module level or extract to lib/types/errors.ts","dependencies":[],"pr_bucket":"code-quality","original_id":"REF-010","merged_from":["REF-010","CANON-0087"],"roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0066","title":"2 tracked TODO markers in codebase","category":"refactoring","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"REF-011","date":"2026-01-17","category":"refactoring"}],"files":["components/notebook/features/quick-actions-fab.tsx"],"status":"open","description":"Found 2 TODO/FIXME markers: quick-actions-fab.tsx:12 (customizable action buttons) and firestore-adapter.ts:51 (configurable limits).","recommendation":"Convert to GitHub issues or resolve. TODOs without tracking risk being forgotten.","dependencies":[],"pr_bucket":"code-quality","original_id":"REF-011","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0068","title":"No npm run dev:offline script - requires 2 terminals for emulator dev","category":"engineering-productivity","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"EFFP-001","date":"2026-01-17","category":"engineering-productivity"}],"files":["package.json"],"status":"open","description":"Development with Firebase emulators requires manually running 'firebase emulators:start' in one terminal and 'npm run dev' in another. This friction reduces likelihood of offline testing.","recommendation":"Add 'dev:offline': 'concurrently \"firebase emulators:start\" \"npm run dev\"' to package.json scripts. Install concurrently as devDependency.","dependencies":[],"pr_bucket":"dx-improvements","original_id":"EFFP-001","roadmap_status":"already_tracked","matched_roadmap_item":"FB-002","matched_tech_debt_item":null}
{"master_id":"MASTER-0069","title":"No scripts/doctor.js for environment validation","category":"engineering-productivity","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"EFFP-002","date":"2026-01-17","category":"engineering-productivity"}],"files":["scripts/"],"status":"open","description":"No automated environment validation script exists. Developers must manually verify Node version, Firebase CLI, env vars, and other prerequisites. This causes 'works on my machine' issues.","recommendation":"Create scripts/doctor.js that checks: Node 18+, Firebase CLI installed, .env.local exists with required vars, functions/node_modules exists. Add 'doctor': 'node scripts/doctor.js' to package.json.","dependencies":[],"pr_bucket":"dx-improvements","original_id":"EFFP-002","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0070","title":"Setup requires multiple commands - no single bootstrap","category":"engineering-productivity","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"single-session","id":"EFFP-003","date":"2026-01-17","category":"engineering-productivity"}],"files":["package.json"],"status":"open","description":"New developer setup requires: git clone, npm install, cd functions && npm install, copy .env.local template, firebase login. No single 'npm run setup' command exists.","recommendation":"Add 'setup': 'npm install && cd functions && npm install && npm run doctor' to package.json. Consider adding .env.local.example template.","dependencies":[],"pr_bucket":"dx-improvements","original_id":"EFFP-003","roadmap_status":"already_tracked","matched_roadmap_item":"FB-002","matched_tech_debt_item":null}
{"master_id":"MASTER-0071","title":"No correlation IDs for request tracing (frontend to backend)","category":"engineering-productivity","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"EFFP-004","date":"2026-01-17","category":"engineering-productivity"}],"files":["lib/logger.ts"],"status":"open","description":"No correlation/request IDs are generated or passed from frontend to Cloud Functions. When debugging production issues, cannot trace a user's journey across client and server logs.","recommendation":"Generate UUID on client per request, pass as X-Correlation-Id header to Cloud Functions, include in all logger calls. Add correlationId to LogContext type.","dependencies":[],"pr_bucket":"dx-improvements","original_id":"EFFP-004","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0072","title":"8:1 ratio of console.log to structured logger calls (3111 vs 394)","category":"engineering-productivity","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"EFFP-005","date":"2026-01-17","category":"engineering-productivity"}],"files":["app/"],"status":"open","description":"Codebase has 3111 console.log statements vs 394 logger.* calls. console.log output is not captured by Sentry, not redacted for PII, and provides no structured context for debugging.","recommendation":"Replace console.log with logger.info/warn/error in production code paths. Keep console.log only for local debugging (remove before commit). Consider ESLint rule to warn on console.log.","dependencies":[],"pr_bucket":"dx-improvements","original_id":"EFFP-005","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0074","title":"No offline write queue - data loss when user goes offline","category":"engineering-productivity","severity":"S1","effort":"E3","priority_score":100,"sources":[{"type":"single-session","id":"EFFP-007","date":"2026-01-17","category":"engineering-productivity"}],"files":["hooks/use-journal.ts"],"status":"open","description":"Journal writes (addEntry, updateEntry) fail immediately when offline. No queue mechanism to hold writes and sync when back online. For a recovery app where users may have spotty connectivity, this causes data loss and frustration.","recommendation":"Implement IndexedDB-based write queue: 1) Queue writes locally when offline, 2) Sync on reconnection, 3) Handle conflicts with last-write-wins or prompt user. Consider using Firebase's built-in offline persistence first.","dependencies":[],"pr_bucket":"dx-improvements","original_id":"EFFP-007","roadmap_status":"already_tracked","matched_roadmap_item":"EFF-010","matched_tech_debt_item":null}
{"master_id":"MASTER-0075","title":"No Firebase persistence enabled - Firestore cache not persisted","category":"engineering-productivity","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"single-session","id":"EFFP-008","date":"2026-01-17","category":"engineering-productivity"}],"files":["lib/firebase.ts"],"status":"open","description":"enableIndexedDbPersistence or enableMultiTabIndexedDbPersistence is not called. Firestore data is only cached in memory, lost on page refresh. Users cannot view previously loaded data while offline.","recommendation":"Call enableIndexedDbPersistence(db) in Firebase initialization. Handle the 'failed-precondition' error for multi-tab scenarios. This is a quick win that enables offline reads with minimal code.","dependencies":[],"pr_bucket":"dx-improvements","original_id":"EFFP-008","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0076","title":"No service worker - no offline asset caching","category":"engineering-productivity","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"single-session","id":"EFFP-009","date":"2026-01-17","category":"engineering-productivity"}],"files":["public/"],"status":"open","description":"No service worker exists for caching static assets (JS, CSS, images). When offline, the app cannot load at all even though it's a PWA candidate with install-prompt component.","recommendation":"Add next-pwa or workbox-webpack-plugin to generate service worker. Configure precaching for app shell and runtime caching for API responses. Coordinate with Firebase persistence for full offline experience.","dependencies":[],"pr_bucket":"dx-improvements","original_id":"EFFP-009","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0078","title":"App Check disabled on all production Cloud Functions","category":"code","severity":"S0","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0001","file":"CANON-CODE.jsonl"}],"files":["functions/src/index.ts"],"status":"CONFIRMED","description":"S0: Bot/device attestation layer is disabled for callable endpoints, increasing abuse/spam risk and weakening defense-in-depth.","recommendation":"Re-enable App Check (requireAppCheck: true) across functions; add monitoring for App Check failures and ensure client App Check init is working.","dependencies":["CANON-0003"],"pr_bucket":"security-hardening","original_id":"CANON-0001","roadmap_status":"already_tracked","matched_roadmap_item":"MASTER-0078","matched_tech_debt_item":"DOC-005"}
{"master_id":"MASTER-0079","title":"Legacy journalEntries collection allows direct client writes (bypasses function security posture)","category":"code","severity":"S0","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0002","file":"CANON-CODE.jsonl"},{"type":"canon","id":"CANON-0034","file":"CANON-SECURITY.jsonl"}],"files":["firestore.rules"],"status":"CONFIRMED","description":"S0: Direct client writes bypass App Check / rate limiting / server-side validation, creating a high-risk security outlier vs other collections.","recommendation":"Migrate remaining data off legacy path and set allow write: if false (or route writes through Cloud Functions if still used).","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0002","merged_from":["CANON-0002","CANON-0034"],"roadmap_status":"already_tracked","matched_roadmap_item":"DEDUP-0002","matched_tech_debt_item":null}
{"master_id":"MASTER-0080","title":"Console.* usage in app components bypasses standardized logger/sanitization","category":"refactoring","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0003","file":"CANON-CODE.jsonl"}],"files":["lib/db/library.ts","lib/firestore-service.ts","components/notebook/journal-modal.tsx","components/notebook/pages/today-page.tsx","components/notebook/pages/library-page.tsx","lib/firebase.ts","components/growth/Step1WorksheetCard.tsx","components/admin/jobs-tab.tsx","components/admin/prayers-tab.tsx"],"status":"CONFIRMED","description":"Raw console logging can leak sensitive details, creates inconsistent observability, and violates the project's documented logger/sanitization intent.","recommendation":"Replace console.* with logger.* (or a client-safe wrapper), then enforce via lint rule (no-console with exceptions for logger implementation).","dependencies":["CANON-0023"],"pr_bucket":"security-hardening","original_id":"CANON-0003","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0081","title":"Cloud Function schema missing 'step-1-worksheet' journal entry type (validation drift / feature break)","category":"code","severity":"S1","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0004","file":"CANON-CODE.jsonl"}],"files":["functions/src/schemas.ts","types/journal.ts"],"status":"CONFIRMED","description":"Users can create Step 1 worksheet entries client-side that fail server validation, breaking saves at runtime.","recommendation":"Add 'step-1-worksheet' to journalEntrySchema type enum in functions/src/schemas.ts.","dependencies":[],"pr_bucket":"types-domain","original_id":"CANON-0004","roadmap_status":"already_tracked","matched_roadmap_item":"A2","matched_tech_debt_item":null}
{"master_id":"MASTER-0082","title":"Client App Check initialization is disabled/commented out","category":"code","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0005","file":"CANON-CODE.jsonl"}],"files":["lib/firebase.ts"],"status":"CONFIRMED","description":"Without client App Check init, tokens may not be sent, undermining verification and/or causing callable failures once functions enforce App Check.","recommendation":"Restore initializeAppCheck gated by configured site key; use debug tokens only in development.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0005","roadmap_status":"already_tracked","matched_roadmap_item":"A1","matched_tech_debt_item":null}
{"master_id":"MASTER-0083","title":"Cloud Function error handling duplicated (4 locations) + duplicate CloudFunctionError type definitions","category":"refactoring","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0006","file":"CANON-CODE.jsonl"}],"files":["lib/firestore-service.ts","hooks/use-journal.ts"],"status":"CONFIRMED","description":"Multiple copies of error mapping/code checks create drift risk and inconsistent user messaging; changes require editing several sites.","recommendation":"Extract CloudFunctionError type + handleCloudFunctionError() helper (likely in lib/utils/errors.ts) and use it in all locations.","dependencies":[],"pr_bucket":"hooks-standardization","original_id":"CANON-0006","roadmap_status":"already_tracked","matched_roadmap_item":"A2","matched_tech_debt_item":"REFAC-001"}
{"master_id":"MASTER-0084","title":"Critical logic divergence in journal saving (deprecated FirestoreService path bypasses hook business logic)","category":"refactoring","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0007","file":"CANON-CODE.jsonl"}],"files":["lib/firestore-service.ts","hooks/use-journal.ts","components/growth/Step1WorksheetCard.tsx","components/notebook/pages/today-page.tsx"],"status":"CONFIRMED","description":"Entries saved through the deprecated service miss searchable metadata, breaking search/filter for those entries.","recommendation":"Refactor Step1WorksheetCard and TodayPage to use useJournal.addEntry; remove deprecated saveNotebookJournalEntry from FirestoreService.","dependencies":[],"pr_bucket":"hooks-standardization","original_id":"CANON-0007","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0085","title":"reCAPTCHA verification is logged but not enforced when configured","category":"code","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0008","file":"CANON-CODE.jsonl"}],"files":["functions/src/security-wrapper.ts"],"status":"CONFIRMED","description":"Requests can bypass bot mitigation if missing tokens are allowed to proceed while only being logged.","recommendation":"When recaptchaAction is set, require a token (throw on missing/blank) unless an explicit opt-out is provided.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0008","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0086","title":"Server layout composes client providers; boundary should be explicit","category":"refactoring","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0009","file":"CANON-CODE.jsonl"}],"files":["app/layout.tsx"],"status":"CONFIRMED","description":"Boundary clarity and potential hydration/bundle concerns; explicit client-side providers wrapper is recommended.","recommendation":"Create app/providers.tsx ('use client') wrapping AuthProvider/CelebrationProvider/ErrorBoundary and import from layout.tsx.","dependencies":[],"pr_bucket":"boundaries","original_id":"CANON-0009","roadmap_status":"already_tracked","matched_roadmap_item":"A1","matched_tech_debt_item":null}
{"master_id":"MASTER-0087","title":"Admin-claim Firestore rule writes lack function-only defense-in-depth","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0010","file":"CANON-CODE.jsonl"}],"files":["firestore.rules"],"status":"CONFIRMED","description":"If admin claims are compromised/misconfigured, direct writes expand blast radius without server-side auditing/enforcement.","recommendation":"Add Cloud Function wrappers for admin mutations with server-side checks + audit logging; tighten rules to function-only where appropriate.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0010","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0088","title":"Missing automated tests for Cloud Function security layers (App Check / rate limiting / authz)","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0011","file":"CANON-CODE.jsonl"}],"files":["functions/src/index.ts","functions/src/security-wrapper.ts"],"status":"CONFIRMED","description":"Security regressions can ship undetected without tests covering enforcement layers.","recommendation":"Add tests covering unauth rejection, rate-limit behavior, App Check pass/fail, user-scope enforcement, and reCAPTCHA behavior.","dependencies":["CANON-0001","CANON-0002"],"pr_bucket":"tests-hardening","original_id":"CANON-0011","roadmap_status":"already_tracked","matched_roadmap_item":"A2","matched_tech_debt_item":"SEC-003"}
{"master_id":"MASTER-0089","title":"No integration tests for Firestore rules (emulator-based)","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0012","file":"CANON-CODE.jsonl"}],"files":["firestore.rules"],"status":"CONFIRMED","description":"Rules are a primary security boundary; regressions can become data exposure incidents without automated tests.","recommendation":"Set up Firebase emulator rule tests using @firebase/rules-unit-testing for key permission scenarios (including legacy collections).","dependencies":["CANON-0002","CANON-0008"],"pr_bucket":"tests-hardening","original_id":"CANON-0012","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0090","title":"Security-critical files have low test coverage (account-linking, firestore-service, recaptcha, users DB)","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0013","file":"CANON-CODE.jsonl"}],"files":["lib/auth/account-linking.ts","lib/firestore-service.ts","lib/recaptcha.ts","lib/db/users.ts"],"status":"CONFIRMED","description":"Low coverage in auth/data/recaptcha paths increases risk of undetected production regressions in security-sensitive user flows.","recommendation":"Add tests to raise coverage targets for these files; mock Cloud Functions where needed; add token generation unit coverage.","dependencies":[],"pr_bucket":"tests-hardening","original_id":"CANON-0013","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0091","title":"reCAPTCHA verification coverage may be incomplete when App Check is disabled (needs verification)","category":"code","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0014","file":"CANON-CODE.jsonl"}],"files":["functions/src/index.ts","functions/src/recaptcha-verify.ts"],"status":"SUSPECTED","description":"If server-side verification is not enforced independently, bot mitigation may be weaker than intended when App Check is off.","recommendation":"Verify server-side recaptchaToken validation paths; consider making reCAPTCHA mandatory (align with CANON-0004).","dependencies":["CANON-0004","CANON-0001"],"pr_bucket":"security-hardening","original_id":"CANON-0014","roadmap_status":"already_tracked","matched_roadmap_item":"MASTER-0078","matched_tech_debt_item":null}
{"master_id":"MASTER-0092","title":"Potential rate limit bypass via cycling anonymous accounts (needs threat-model validation)","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0015","file":"CANON-CODE.jsonl"}],"files":["components/providers/auth-context.tsx","lib/auth/account-linking.ts"],"status":"SUSPECTED","description":"If rate limiting is keyed only by userId, attackers might bypass limits by creating new anonymous sessions repeatedly.","recommendation":"Validate feasibility; if real, add secondary rate limiting keyed by device/IP or strengthen anonymous auth constraints.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0015","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0093","title":"Potential sensitive data in localStorage (needs audit)","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0016","file":"CANON-CODE.jsonl"}],"files":[],"status":"SUSPECTED","description":"If recovery/journal content is stored in localStorage, it persists unencrypted on-device and may raise privacy/compliance concerns.","recommendation":"Audit localStorage/sessionStorage usage; restrict to non-sensitive UI prefs; document policy.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0016","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0094","title":"Duplicated time-of-day rotation logic for quotes and slogans","category":"refactoring","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0017","file":"CANON-CODE.jsonl"}],"files":["lib/db/quotes.ts","lib/db/slogans.ts"],"status":"CONFIRMED","description":"Rotation changes risk diverging behavior and duplicating bug fixes.","recommendation":"Extract shared rotation utilities and reuse in both services; add unit tests for schedule/rotation paths.","dependencies":[],"pr_bucket":"ui-primitives","original_id":"CANON-0017","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0095","title":"Unsafe type assertions with 'as unknown as' (worksheet + related components)","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0018","file":"CANON-CODE.jsonl"}],"files":["components/growth/Step1WorksheetCard.tsx","components/journal/entry-detail-dialog.tsx","components/maps/meeting-map.tsx"],"status":"CONFIRMED","description":"Double casts bypass TypeScript safety; runtime crashes possible if data shape differs.","recommendation":"Add runtime validation (e.g., Zod parse) before casting; replace with type guards where applicable.","dependencies":["CANON-0007"],"pr_bucket":"types-domain","original_id":"CANON-0018","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0096","title":"ESLint security plugin warnings in scripts (unsafe regex / non-literal fs / object injection patterns)","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0019","file":"CANON-CODE.jsonl"}],"files":["scripts/check-review-needed.js","scripts/suggest-pattern-automation.js","scripts/validate-phase-completion.js","scripts/check-pattern-compliance.js","scripts/update-readme-status.js"],"status":"CONFIRMED","description":"Even if scripts run in trusted contexts, these patterns are repeatedly flagged and can become risky if reused; they also create noisy lint output.","recommendation":"Address highest-risk warnings first: validate dynamic paths, constrain object key access, simplify/guard regex patterns; aim to reduce warnings materially.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0019","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0097","title":"Journal entry type definitions duplicated across client types and server schemas (single-source refactor)","category":"refactoring","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0020","file":"CANON-CODE.jsonl"}],"files":["types/journal.ts","functions/src/schemas.ts"],"status":"CONFIRMED","description":"Adding new entry types requires multi-file changes and risks client/server mismatch.","recommendation":"Extract shared constants (or generate TS types from Zod) so both client and functions import from one source.","dependencies":["CANON-0007"],"pr_bucket":"types-domain","original_id":"CANON-0020","roadmap_status":"already_tracked","matched_roadmap_item":"A1","matched_tech_debt_item":null}
{"master_id":"MASTER-0098","title":"Missing error.message null safety in TodayPage catch block","category":"code","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0021","file":"CANON-CODE.jsonl"}],"files":["components/notebook/pages/today-page.tsx"],"status":"CONFIRMED","description":"If a non-Error is thrown, accessing error.message/stack can crash; catch is unknown.","recommendation":"Use getErrorMessage(error) helper to safely extract message.","dependencies":[],"pr_bucket":"types-domain","original_id":"CANON-0021","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-003","matched_tech_debt_item":null}
{"master_id":"MASTER-0099","title":"Unsafe localStorage JSON.parse in use-smart-prompts hook","category":"code","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0022","file":"CANON-CODE.jsonl"}],"files":["components/notebook/hooks/use-smart-prompts.ts"],"status":"CONFIRMED","description":"Corrupted localStorage can throw and crash the component.","recommendation":"Wrap JSON.parse in try/catch or use a safe parse utility with defaults.","dependencies":[],"pr_bucket":"types-domain","original_id":"CANON-0022","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0100","title":"Duplicated DailyQuoteCard component exists in multiple directories (2 confirmed; possible 3rd variant)","category":"refactoring","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0023","file":"CANON-CODE.jsonl"}],"files":["components/notebook/features/daily-quote-card.tsx","components/widgets/daily-quote-card.tsx","components/widgets/compact-daily-quote.tsx"],"status":"CONFIRMED","description":"Duplication increases maintenance burden; inconsistent exports/variants raise drift risk.","recommendation":"Consolidate to a single source of truth (auditor suggests keeping widgets version) and compose variants if needed.","dependencies":[],"pr_bucket":"ui-primitives","original_id":"CANON-0023","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0101","title":"Inconsistent Firebase Functions import pattern (static vs dynamic imports)","category":"refactoring","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0024","file":"CANON-CODE.jsonl"}],"files":["lib/firestore-service.ts","hooks/use-journal.ts","lib/auth/account-linking.ts","components/admin/jobs-tab.tsx","components/admin/errors-tab.tsx","components/admin/dashboard-tab.tsx"],"status":"CONFIRMED","description":"Inconsistent patterns increase maintenance burden and make bundling/code-splitting intent unclear.","recommendation":"Standardize import strategy (e.g., static imports for client-side code; reserve dynamic imports for specific lazy routes if intentionally needed).","dependencies":[],"pr_bucket":"firebase-access","original_id":"CANON-0024","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0102","title":"Inconsistent httpsCallable typing (missing generic request/response types)","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0025","file":"CANON-CODE.jsonl"}],"files":["lib/firestore-service.ts"],"status":"CONFIRMED","description":"Callable returns unknown, forcing casts and losing compile-time safety.","recommendation":"Add generic type parameters to callCloudFunction / httpsCallable usage.","dependencies":[],"pr_bucket":"types-domain","original_id":"CANON-0025","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0103","title":"useJournal sets up its own auth listener instead of using shared auth context","category":"refactoring","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0026","file":"CANON-CODE.jsonl"}],"files":["hooks/use-journal.ts","components/providers/auth-provider.tsx"],"status":"CONFIRMED","description":"Redundant subscriptions can cause state-sync issues and unnecessary listeners.","recommendation":"Refactor useJournal to consume user from auth context (or accept user as param) and remove internal onAuthStateChanged listener.","dependencies":["CANON-0006"],"pr_bucket":"boundaries","original_id":"CANON-0026","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0104","title":"Cloud Function integration test is skipped in firestore-service test suite","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0027","file":"CANON-CODE.jsonl"}],"files":["tests/firestore-service.test.ts"],"status":"CONFIRMED","description":"Primary data save path is effectively untested; skip note indicates missing integration harness/emulator setup.","recommendation":"Add an integration test suite using Firebase emulator; optionally mock httpsCallable for unit coverage.","dependencies":[],"pr_bucket":"tests-hardening","original_id":"CANON-0027","roadmap_status":"already_tracked","matched_roadmap_item":"A2","matched_tech_debt_item":null}
{"master_id":"MASTER-0105","title":"Journal entry schema data is weakly typed (z.record unknown; per-type validation not enforced)","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0028","file":"CANON-CODE.jsonl"}],"files":["functions/src/schemas.ts"],"status":"CONFIRMED","description":"Malformed entries can pass validation; intended per-type validation is not enforced.","recommendation":"Use a Zod discriminated union for per-entry-type data schemas.","dependencies":["CANON-0016"],"pr_bucket":"types-domain","original_id":"CANON-0028","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0106","title":"No tests for useJournal hook","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0029","file":"CANON-CODE.jsonl"}],"files":["hooks/use-journal.ts"],"status":"CONFIRMED","description":"Core journal interaction logic lacks dedicated tests; regressions can break journaling flows.","recommendation":"Add tests for useJournal with mocked Firebase/Cloud Functions covering auth changes, addEntry, and crumplePage.","dependencies":["CANON-0006"],"pr_bucket":"tests-hardening","original_id":"CANON-0029","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0107","title":"@ts-expect-error suppression comment in production code","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0030","file":"CANON-CODE.jsonl"}],"files":["components/notebook/pages/resources-page.tsx"],"status":"CONFIRMED","description":"Suppresses type checking and can hide real mismatches; should be replaced with proper typing or a type guard.","recommendation":"Fix type annotation or add explicit narrowing so the call is type-safe without suppression.","dependencies":[],"pr_bucket":"types-domain","original_id":"CANON-0030","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0108","title":"Environment variables accessed directly in components (centralize in typed config)","category":"refactoring","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0031","file":"CANON-CODE.jsonl"}],"files":["app/layout.tsx"],"status":"CONFIRMED","description":"Harder to track and type-check configuration dependencies across components.","recommendation":"Move env access to a config module exporting typed constants.","dependencies":[],"pr_bucket":"boundaries","original_id":"CANON-0031","roadmap_status":"already_tracked","matched_roadmap_item":"A1","matched_tech_debt_item":null}
{"master_id":"MASTER-0111","title":"reCAPTCHA token missing does not block requests (logs but continues)","category":"security","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0035","file":"CANON-SECURITY.jsonl"}],"files":["functions/src/security-wrapper.ts"],"status":"open","recommendation":"If recaptchaAction is configured for an endpoint, require a non-empty token and fail closed.; Allow bypass only in explicit dev/test modes via env flag (not implicit).","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0035","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0112","title":"Rate limiting is incomplete (no IP throttling, admin endpoints unthrottled, inconsistent 429-equivalent handling)","category":"security","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0036","file":"CANON-SECURITY.jsonl"}],"files":["functions/src/security-wrapper.ts","functions/src/firestore-rate-limiter.ts","functions/src/admin.ts"],"status":"open","recommendation":"Add a secondary limiter keyed by IP (and/or App Check token/device) in addition to userId.; Wrap admin callables with the same centralized limiter policy (admin-tier limits).; Standardize limiter error mapping so rate-limit exceed always returns resource-exhausted (429-equivalent) with retry guidance.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0036","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0113","title":"Zod schemas missing .strict() (unknown fields accepted)","category":"security","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0037","file":"CANON-SECURITY.jsonl"}],"files":["functions/src/schemas.ts"],"status":"open","recommendation":"Add .strict() to request schemas.; Add tests asserting unknown fields are rejected.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0037","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0114","title":"Hardcoded fallback reCAPTCHA site key in server verification code (config integrity/rotation risk)","category":"security","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0038","file":"CANON-SECURITY.jsonl"}],"files":["functions/src/recaptcha-verify.ts"],"status":"open","recommendation":"Remove hardcoded fallback; require env vars to be set.; Fail closed with a clear failed-precondition error if required config is missing.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0038","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"SEC-005"}
{"master_id":"MASTER-0115","title":"Server-side journal entry type enum missing 'step-1-worksheet' (validation drift)","category":"security","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0039","file":"CANON-SECURITY.jsonl"}],"files":["functions/src/schemas.ts"],"status":"open","recommendation":"Establish a single source of truth for allowed types (shared package or generated types).; Add contract tests to ensure client/server types stay in sync.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0039","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0116","title":"Permissive z.record(..., z.unknown()) allows arbitrary nested data in journal/inventory entries","category":"security","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0040","file":"CANON-SECURITY.jsonl"}],"files":["functions/src/schemas.ts"],"status":"open","recommendation":"Move to discriminated unions by entry type with per-type data schemas and size limits.; Add limits on string lengths/array sizes/nesting depth as appropriate.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0040","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0117","title":"Some admin-managed collections allow direct client writes without centralized schema/rate-limit protections","category":"security","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0041","file":"CANON-SECURITY.jsonl"}],"files":["firestore.rules","lib/db/library.ts"],"status":"open","recommendation":"Prefer routing admin writes through callable/admin Functions that enforce schemas + throttles.; If direct writes remain, add strict client-side validation and tighten rules where feasible (field allowlists/length limits).","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0041","roadmap_status":"already_tracked","matched_roadmap_item":"A1","matched_tech_debt_item":null}
{"master_id":"MASTER-0118","title":"Console statements present; replace with structured logger and enforce no-console in production","category":"security","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0042","file":"CANON-SECURITY.jsonl"}],"files":[],"status":"open","recommendation":"Replace console.* with centralized logger (with redaction).; Add ESLint no-console (error) and Next production removeConsole where applicable.; Require PR checks to fail on console usage outside logger module(s).","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0042","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0120","title":"useJournal creates redundant auth listener + potential memory leak from nested cleanup","category":"performance","severity":"S0","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0044","file":"CANON-PERF.jsonl"}],"files":["hooks/use-journal.ts","components/providers/auth-provider.tsx"],"status":"open","recommendation":"Remove auth listener from useJournal; consume user from useAuthCore() instead. Move onSnapshot unsubscribe to outer useEffect scope.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0044","roadmap_status":"already_tracked","matched_roadmap_item":"DEDUP-0011","matched_tech_debt_item":null}
{"master_id":"MASTER-0121","title":"Landing page forced to client-side rendering blocks SSR for LCP route","category":"performance","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0045","file":"CANON-PERF.jsonl"}],"files":["app/page.tsx"],"status":"open","recommendation":"Split into server component wrapper + client interactive parts. Move NotebookShell behind dynamic import.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0045","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0122","title":"Excessive 'use client' directives prevent SSR optimization","category":"performance","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0046","file":"CANON-PERF.jsonl"}],"files":["app/page.tsx","app/admin/page.tsx","app/meetings/all/page.tsx","app/journal/page.tsx"],"status":"open","recommendation":"Audit each 'use client' for necessity. Convert pages to server components with client children. Target: reduce to <50 client directives.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0046","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0123","title":"Static export disables Next.js image optimization","category":"performance","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0047","file":"CANON-PERF.jsonl"}],"files":["next.config.mjs"],"status":"open","recommendation":"Implement static-friendly responsive image pipeline or switch to dynamic hosting.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0047","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0124","title":"TodayPage re-subscribes on journalEntry change","category":"performance","severity":"S1","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0048","file":"CANON-PERF.jsonl"}],"files":["components/notebook/pages/today-page.tsx"],"status":"open","recommendation":"Remove journalEntry from useEffect dependency array.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0048","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-003","matched_tech_debt_item":null}
{"master_id":"MASTER-0125","title":"Notebook module registry eagerly imports all pages","category":"performance","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0049","file":"CANON-PERF.jsonl"}],"files":["components/notebook/roadmap-modules.tsx","components/notebook/pages/growth-page.tsx"],"status":"open","recommendation":"Replace static imports with dynamic imports or React.lazy + Suspense per module.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0049","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0126","title":"Sentry integration incomplete - no Web Vitals reporting","category":"performance","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0050","file":"CANON-PERF.jsonl"}],"files":["lib/sentry.client.ts","app/layout.tsx","package.json"],"status":"open","recommendation":"Initialize Sentry in app entry, enable performance tracing, add Web Vitals reporting.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0050","roadmap_status":"already_tracked","matched_roadmap_item":"A1","matched_tech_debt_item":null}
{"master_id":"MASTER-0127","title":"Duplicate DailyQuoteCard implementations + unbounded quotes fetch","category":"performance","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0051","file":"CANON-PERF.jsonl"}],"files":["components/widgets/daily-quote-card.tsx","components/notebook/features/daily-quote-card.tsx","components/widgets/compact-daily-quote.tsx","lib/db/quotes.ts"],"status":"open","recommendation":"Consolidate to single DailyQuoteCard with 'variant' prop. Fetch single quote via targeted query instead of getAllQuotes().","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0051","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0128","title":"Celebration animations create 150+ DOM elements without reduced-motion support","category":"performance","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0052","file":"CANON-PERF.jsonl"}],"files":["components/celebrations/confetti-burst.tsx","components/celebrations/firework-burst.tsx","components/celebrations/types.ts"],"status":"open","recommendation":"Gate animations behind prefers-reduced-motion, reduce particle counts on mobile, consider canvas-based effects.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0052","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0129","title":"No React.memo usage causes unnecessary re-renders in list components","category":"performance","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0053","file":"CANON-PERF.jsonl"}],"files":["components/journal/entry-card.tsx","components/journal/entry-feed.tsx","components/journal/timeline.tsx"],"status":"open","recommendation":"Add React.memo to list item components (EntryCard, MeetingCard). Wrap with proper equality check including callback props.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0053","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0130","title":"Hero background image bypasses Next.js image optimization","category":"performance","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0054","file":"CANON-PERF.jsonl"}],"files":["app/page.tsx"],"status":"open","recommendation":"Replace CSS background with Next.js <Image> component or add preload + responsive sizing.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0054","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0131","title":"Large entry lists not virtualized - DOM grows linearly with data","category":"performance","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0055","file":"CANON-PERF.jsonl"}],"files":["components/journal/entry-feed.tsx","components/journal/timeline.tsx","app/meetings/all/page.tsx"],"status":"open","recommendation":"Implement virtual scrolling with react-window or @tanstack/virtual for lists exceeding 50 items.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0055","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0132","title":"Meeting map renders all markers without clustering","category":"performance","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0056","file":"CANON-PERF.jsonl"}],"files":["app/meetings/all/page.tsx","components/maps/meeting-map.tsx"],"status":"open","recommendation":"Add marker clustering (e.g., react-leaflet-cluster) or limit markers per zoom level.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0056","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0133","title":"7 unused dependencies increasing bundle size","category":"performance","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0057","file":"CANON-PERF.jsonl"}],"files":["package.json"],"status":"open","recommendation":"Remove unused dependencies.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0057","roadmap_status":"already_tracked","matched_roadmap_item":"FB-002","matched_tech_debt_item":null}
{"master_id":"MASTER-0134","title":"Console statements in production code","category":"performance","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0058","file":"CANON-PERF.jsonl"}],"files":["hooks/use-journal.ts","components/notebook/pages/today-page.tsx","lib/db/meetings.ts"],"status":"open","recommendation":"Remove console.* or replace with logger utility. Add ESLint no-console rule.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0058","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0135","title":"Firebase queries lack consistent indexing and limits","category":"performance","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0059","file":"CANON-PERF.jsonl"}],"files":["lib/db/meetings.ts","hooks/use-journal.ts"],"status":"open","recommendation":"Add .limit() to all collection queries. Create Firebase composite indexes. Document in firestore.indexes.json.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0059","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0136","title":"Admin CRUD table fetches entire collections without pagination","category":"performance","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0060","file":"CANON-PERF.jsonl"}],"files":["components/admin/admin-crud-table.tsx"],"status":"open","recommendation":"Add paginated queries with limit/startAfter and useMemo for filteredItems.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0060","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"PERF-016"}
{"master_id":"MASTER-0138","title":"No route-level loading UI (loading.tsx) or Suspense boundaries","category":"performance","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0062","file":"CANON-PERF.jsonl"}],"files":["app/page.tsx","app/journal/page.tsx","app/meetings/all/page.tsx"],"status":"open","recommendation":"Add app/**/loading.tsx for high-traffic routes. Place Suspense around dynamic imports.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0062","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0139","title":"JournalHub eagerly imports all entry forms","category":"performance","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0063","file":"CANON-PERF.jsonl"}],"files":["components/journal/journal-hub.tsx"],"status":"open","recommendation":"Dynamically import each form when its tab is active; use Suspense fallbacks.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0063","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0140","title":"47 CRITICAL cognitive complexity violations in scripts (19 functions)","category":"refactoring","severity":"S0","effort":"E3","priority_score":100,"sources":[{"type":"canon","id":"CANON-0064","file":"CANON-REFACTOR.jsonl"}],"files":["scripts/assign-review-tier.js","scripts/phase-complete-check.js","scripts/suggest-pattern-automation.js","scripts/check-pattern-compliance.js","scripts/validate-phase-completion.js","scripts/surface-lessons-learned.js","scripts/check-docs-light.js","scripts/check-review-needed.js"],"status":"NEW","description":"SonarQube CRITICAL violations. Functions exceeding 15-point threshold are difficult to test, maintain, debug.","recommendation":"Extract nested conditionals into helper functions. Use early returns. Add test coverage before refactoring.","dependencies":[],"pr_bucket":"misc","original_id":"CANON-0064","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0141","title":"Cloud Function error handling pattern duplicated 4-6x across service and hooks","category":"refactoring","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0066","file":"CANON-REFACTOR.jsonl"}],"files":["lib/firestore-service.ts","hooks/use-journal.ts"],"status":"NEW","description":"Same error code switch (resource-exhausted, invalid-argument, unauthenticated, failed-precondition) with user-friendly messages. Error message changes require 4+ updates.","recommendation":"Create handleCloudFunctionError(error) utility in lib/utils/callable-errors.ts. Use in all 4+ locations.","dependencies":["CANON-0087"],"pr_bucket":"firebase-access","original_id":"CANON-0066","roadmap_status":"already_tracked","matched_roadmap_item":"A2","matched_tech_debt_item":"REFAC-001"}
{"master_id":"MASTER-0142","title":"Journal entry type definitions diverge between client types and server schemas","category":"refactoring","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0067","file":"CANON-REFACTOR.jsonl"}],"files":["types/journal.ts","functions/src/schemas.ts","functions/src/index.ts","lib/firestore-service.ts"],"status":"NEW","description":"Type mismatch between client and server causes silent validation failures. Adding new entry types requires changes in 3 places.","recommendation":"Create shared source of truth in lib/types/journal-shared.ts. Generate types from Zod schemas where possible.","dependencies":[],"pr_bucket":"types-domain","original_id":"CANON-0067","roadmap_status":"already_tracked","matched_roadmap_item":"A1","matched_tech_debt_item":null}
{"master_id":"MASTER-0143","title":"App Check temporarily disabled across all Cloud Functions","category":"security","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0069","file":"CANON-REFACTOR.jsonl"}],"files":["functions/src/index.ts"],"status":"TRACKED_ELSEWHERE","description":"Security feature disabled. Should be tracked and re-enabled when throttle clears.","recommendation":"Create tracking issue. Re-enable when throttle verified clear. Add monitoring.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0069","roadmap_status":"already_tracked","matched_roadmap_item":"MASTER-0078","matched_tech_debt_item":"DOC-005"}
{"master_id":"MASTER-0144","title":"useJournal mixes domain logic with transport (httpsCallable + retry + recaptcha)","category":"refactoring","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0071","file":"CANON-REFACTOR.jsonl"}],"files":["hooks/use-journal.ts","lib/firestore-service.ts"],"status":"NEW","description":"Hook owns transport and domain shaping. Same responsibilities will be re-implemented in other features.","recommendation":"Create lib/services/journal-service.ts with saveEntry()/softDeleteEntry() using callSecureFunction. Keep hook focused on UI state.","dependencies":["CANON-0076","CANON-0066"],"pr_bucket":"hooks-standardization","original_id":"CANON-0071","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0145","title":"TodayPage is a god component mixing 4+ responsibilities","category":"refactoring","severity":"S1","effort":"E3","priority_score":100,"sources":[{"type":"canon","id":"CANON-0072","file":"CANON-REFACTOR.jsonl"}],"files":["components/notebook/pages/today-page.tsx","lib/firestore-service.ts"],"status":"NEW","description":"Large mixed-responsibility component. Small changes require deep context. Cognitive complexity hotspot.","recommendation":"Split into hooks: useDailyLogState, useDailyLogRealtime, useWeeklyStats. Move Firestore queries to service.","dependencies":["CANON-0075","CANON-0076"],"pr_bucket":"boundaries","original_id":"CANON-0072","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-003","matched_tech_debt_item":null}
{"master_id":"MASTER-0146","title":"DailyQuoteCard component duplicated across 2-3 locations","category":"refactoring","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0073","file":"CANON-REFACTOR.jsonl"}],"files":["components/notebook/features/daily-quote-card.tsx","components/widgets/daily-quote-card.tsx","components/widgets/compact-daily-quote.tsx"],"status":"NEW","description":"Same fetch logic (QuotesService.getQuoteForToday) repeated with different styling. Feature changes must be applied 2-3 times.","recommendation":"Create useDailyQuote hook for fetch logic. Keep single DailyQuoteCard with variant prop. Delete features/ version.","dependencies":[],"pr_bucket":"ui-primitives","original_id":"CANON-0073","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0147","title":"Critical paths have low test coverage (firestore-service 35.6%, account-linking 17.29%)","category":"refactoring","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0074","file":"CANON-REFACTOR.jsonl"}],"files":["lib/firestore-service.ts","lib/auth/account-linking.ts","lib/db/users.ts","lib/firebase.ts"],"status":"NEW","description":"Security-critical paths with low coverage. Refactors risky without tests.","recommendation":"Add integration tests for Cloud Function callers. Add unit tests for account linking. Target 70%+ coverage.","dependencies":["CANON-0066"],"pr_bucket":"tests-hardening","original_id":"CANON-0074","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0148","title":"reCAPTCHA token fetch/include pattern repeated 5x across codebase","category":"security","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0076","file":"CANON-REFACTOR.jsonl"}],"files":["lib/firestore-service.ts","hooks/use-journal.ts","lib/auth/account-linking.ts"],"status":"NEW","description":"Every Cloud Function call repeats same reCAPTCHA boilerplate. Easy to forget when adding new calls.","recommendation":"Create callSecureFunction wrapper that auto-injects reCAPTCHA token. Centralize retry logic.","dependencies":["CANON-0066"],"pr_bucket":"security-hardening","original_id":"CANON-0076","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0149","title":"Firebase collection access scattered across 22+ files without type safety","category":"refactoring","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0077","file":"CANON-REFACTOR.jsonl"}],"files":["lib/db/slogans.ts","lib/db/glossary.ts","lib/db/quotes.ts","lib/db/library.ts","lib/db/meetings.ts","lib/db/sober-living.ts","hooks/use-journal.ts","components/notebook/pages/today-page.tsx","components/admin/admin-crud-table.tsx","components/growth/DailySloganWidget.tsx"],"status":"NEW","description":"No type safety for collection names. Typo risk. Changes require grep-and-replace across codebase.","recommendation":"Create lib/firestore-collections.ts with typed collection helpers: collections.slogans(), collections.userJournal(uid), etc.","dependencies":[],"pr_bucket":"firebase-access","original_id":"CANON-0077","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0150","title":"reCAPTCHA action strings duplicated as literals (no shared constants)","category":"security","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0078","file":"CANON-REFACTOR.jsonl"}],"files":["functions/src/recaptcha-verify.ts","hooks/use-journal.ts","lib/firestore-service.ts","lib/auth/account-linking.ts"],"status":"NEW","description":"Action mismatch between client and server breaks verification. Hard to debug 'failed-precondition' errors.","recommendation":"Create lib/security/recaptcha-actions.ts with shared constants. Update all call sites.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0078","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0151","title":"CRUD service patterns repeated across lib/db modules","category":"refactoring","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0080","file":"CANON-REFACTOR.jsonl"}],"files":["lib/db/quotes.ts","lib/db/slogans.ts","lib/db/glossary.ts","lib/db/sober-living.ts","lib/db/library.ts","lib/db/meetings.ts"],"status":"NEW","description":"Same Firestore CRUD pattern (getAll/add/update/delete) repeated with only collection names changing.","recommendation":"Create lib/db/firestore-crud.ts with generic CRUD factory. Refactor services to use it.","dependencies":["CANON-0077"],"pr_bucket":"firebase-access","original_id":"CANON-0080","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0152","title":"Admin Cloud Function wiring duplicated across 5 admin tabs","category":"refactoring","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0081","file":"CANON-REFACTOR.jsonl"}],"files":["components/admin/dashboard-tab.tsx","components/admin/users-tab.tsx","components/admin/errors-tab.tsx","components/admin/jobs-tab.tsx","components/admin/admin-crud-table.tsx"],"status":"NEW","description":"Duplicated Cloud Function wiring. Error handling, retries, auth assumptions can drift.","recommendation":"Create lib/admin/admin-functions.ts with typed wrappers (adminGetDashboardStats, adminSearchUsers, etc.)","dependencies":["CANON-0076"],"pr_bucket":"firebase-access","original_id":"CANON-0081","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-004","matched_tech_debt_item":"SEC-004"}
{"master_id":"MASTER-0153","title":"Dual-write pattern to inventory AND journal collections","category":"refactoring","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0082","file":"CANON-REFACTOR.jsonl"}],"files":["components/growth/SpotCheckCard.tsx","components/growth/GratitudeCard.tsx","components/growth/NightReviewCard.tsx"],"status":"NEW","description":"Dual writes increase storage costs, create potential inconsistency if one fails. Inventory collection may be legacy.","recommendation":"Audit whether inventory_entries collection is still needed. Remove dual-write or consolidate via Cloud Function.","dependencies":[],"pr_bucket":"firebase-access","original_id":"CANON-0082","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0154","title":"Deprecated API usage (31 instances) + Nested ternaries (41 instances)","category":"refactoring","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0083","file":"CANON-REFACTOR.jsonl"}],"files":["multiple"],"status":"NEW","description":"Deprecated APIs risk future breaking changes. Nested ternaries reduce readability.","recommendation":"Audit S1874 violations. Replace nested ternaries with if/else or early returns.","dependencies":[],"pr_bucket":"misc","original_id":"CANON-0083","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0155","title":"safeReadFile/safeWriteFile utilities duplicated across 3 scripts","category":"refactoring","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0084","file":"CANON-REFACTOR.jsonl"}],"files":["scripts/archive-doc.js","scripts/check-review-needed.js","scripts/update-readme-status.js"],"status":"NEW","description":"Scripts are highest complexity area. Shared utilities reduce per-script branching.","recommendation":"Create scripts/lib/fs-safe.js. Update 3 scripts to import from it.","dependencies":[],"pr_bucket":"misc","original_id":"CANON-0084","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0156","title":"FirestoreAdapter exists but is unused (realtime boundary unclear)","category":"refactoring","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0085","file":"CANON-REFACTOR.jsonl"}],"files":["lib/database/firestore-adapter.ts","lib/database/database-interface.ts","components/notebook/pages/today-page.tsx","hooks/use-journal.ts","components/providers/profile-context.tsx"],"status":"NEW","description":"Unclear boundaries. Some features use adapter, others embed Firestore details. Future migrations harder.","recommendation":"Decide boundary: expand FirestoreAdapter and use it everywhere, OR remove adapter and standardize subscription helpers.","dependencies":["CANON-0075"],"pr_bucket":"boundaries","original_id":"CANON-0085","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0157","title":"Searchable-text generation duplicated with inconsistent sanitization","category":"security","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0086","file":"CANON-REFACTOR.jsonl"}],"files":["hooks/use-journal.ts","scripts/migrate-to-journal.ts"],"status":"NEW","description":"Different sanitization rules can produce divergent search indexes or reintroduce stored XSS risks.","recommendation":"Extract shared searchable-text utility to lib/journal/searchable-text.ts. Ensure sanitization is consistent.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0086","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0158","title":"Batch fix opportunities: 200+ ESLint auto-fixable issues","category":"refactoring","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0088","file":"CANON-REFACTOR.jsonl"}],"files":["multiple"],"status":"NEW","description":"Low-hanging fruit that reduces SonarQube noise instantly.","recommendation":"Run npm run lint:fix. Commit auto-fixed changes before manual refactoring.","dependencies":[],"pr_bucket":"misc","original_id":"CANON-0088","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0160","title":"parseTime() meeting helper duplicated in two pages","category":"refactoring","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0090","file":"CANON-REFACTOR.jsonl"}],"files":["app/meetings/all/page.tsx","components/notebook/pages/resources-page.tsx"],"status":"NEW","description":"Small helper duplication is a drift vector (edge cases like 'Noon', locale formats).","recommendation":"Extract to lib/utils/time.ts as parseMeetingTimeToMinutes(). Unit test it.","dependencies":[],"pr_bucket":"misc","original_id":"CANON-0090","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0161","title":"Broken relative links in review/output docs (wrong ../ depth)","category":"documentation","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0091","file":"CANON-DOCS.jsonl"}],"files":["docs/reviews/2026-Q1/outputs/code-review/CODE_REVIEW_2026_Q1.md","docs/reviews/2026-Q1/PERFORMANCE_AUDIT_FINDINGS_2026_Q1.md","docs/AUDIT_TRACKER.md","docs/reviews/2026-Q1/PROCESS_AUDIT_PLAN_2026_Q1.md"],"status":"open","description":"Multiple review output and findings documents use incorrect relative paths (one level off). Links from docs/reviews/2026-Q1/outputs/ need 4 levels up to reach docs/, but many use only 2-3 levels.","recommendation":"Adopt consistent rule: 'walk up to docs/ then down' for all docs/reviews/** files; Fix all relative links in CODE_REVIEW_2026_Q1.md, PERFORMANCE_AUDIT_FINDINGS_2026_Q1.md, AUDIT_TRACKER.md, PROCESS_AUDIT_PLAN_2026_Q1.md","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0091","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0162","title":"[X] placeholders remain in 2026-Q1 plan instances","category":"documentation","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0092","file":"CANON-DOCS.jsonl"}],"files":["docs/reviews/2026-Q1/CODE_REVIEW_PLAN_2026_Q1.md","docs/reviews/2026-Q1/SECURITY_AUDIT_PLAN_2026_Q1.md","docs/reviews/2026-Q1/PERFORMANCE_AUDIT_PLAN_2026_Q1.md","docs/reviews/2026-Q1/PROCESS_AUDIT_PLAN_2026_Q1.md"],"status":"open","description":"Multiple 2026-Q1 plan instances still contain bracket placeholders like [X] (quarter markers Q[X], metric placeholders) that should have been replaced when instantiating from templates.","recommendation":"Replace all [X] placeholders with concrete Q1 values or TBD; Run grep -n '\\[X\\]' docs/reviews/2026-Q1/*_PLAN_2026_Q1.md to find all instances","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0092","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0163","title":"DOCUMENTATION_INDEX.md orphaned and missing required sections","category":"documentation","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0093","file":"CANON-DOCS.jsonl"}],"files":["DOCUMENTATION_INDEX.md","README.md"],"status":"open","description":"DOCUMENTATION_INDEX.md is not referenced by any markdown file in the repo, and docs linter reports it missing required sections (Purpose/Overview and Version History) and missing Last Updated metadata.","recommendation":"Add prominent link to DOCUMENTATION_INDEX.md from README.md; Add missing sections: Purpose/Overview and Version History; Decide tier and align metadata accordingly","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0093","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0164","title":"Tier 2 docs missing required metadata (Document Version, Applies To)","category":"documentation","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0094","file":"CANON-DOCS.jsonl"}],"files":["docs/ANTIGRAVITY_GUIDE.md","docs/APPCHECK_SETUP.md","docs/INCIDENT_RESPONSE.md","docs/RECAPTCHA_REMOVAL_GUIDE.md","docs/SENTRY_INTEGRATION_GUIDE.md","docs/SERVER_SIDE_SECURITY.md","docs/TESTING_PLAN.md"],"status":"open","description":"DOCUMENTATION_STANDARDS.md defines Tier 2 required metadata as including Document Version and Applies To, but multiple docs labeled Tier 2 omit these fields.","recommendation":"Add **Document Version:** X.Y and **Applies To:** ... to all Tier 2 docs; Or downgrade truly guide-style docs to Tier 5 with appropriate metadata","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0094","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0165","title":"Standards/templates contain live placeholder links and incorrect anchors","category":"documentation","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0095","file":"CANON-DOCS.jsonl"}],"files":["docs/DOCUMENTATION_STANDARDS.md","docs/templates/FOUNDATION_DOC_TEMPLATE.md","docs/templates/PLANNING_DOC_TEMPLATE.md","ROADMAP.md"],"status":"open","description":"Several documentation 'example' links are written as live markdown links (not code fences), so they appear clickable and get treated as real by link checkers. DOCUMENTATION_STANDARDS references ROADMAP.md#dependencies which doesn't exist.","recommendation":"Wrap illustrative examples in fenced code blocks; Fix intended real links in templates (docs/templates/* -> ../../ROADMAP.md); Update or remove non-existent anchor references","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0095","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0166","title":"DOCUMENT_DEPENDENCIES.md claims SYNCED but has 30+ issues","category":"documentation","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0096","file":"CANON-DOCS.jsonl"}],"files":["docs/DOCUMENT_DEPENDENCIES.md"],"status":"open","description":"DOCUMENT_DEPENDENCIES.md declares 'Sync Status: SYNCED' in its header, but check-document-sync.js reports 30+ issues including broken links and missing files.","recommendation":"Run check-document-sync.js and fix all reported issues; Update Sync Status only after all checks pass","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0096","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0167","title":"PR_REVIEW_PROMPT_TEMPLATE lacks required metadata and version history","category":"documentation","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0097","file":"CANON-DOCS.jsonl"}],"files":["docs/PR_REVIEW_PROMPT_TEMPLATE.md"],"status":"open","description":"PR review prompt template includes Created and Purpose, but lacks Last Updated, Status, and Version History section.","recommendation":"Add **Last Updated:** YYYY-MM-DD and **Status:** to header; Add Version History section with minimal table; Consider relocating to docs/templates/","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0097","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0168","title":"CODE_PATTERNS.md referenced with incorrect path","category":"documentation","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0098","file":"CANON-DOCS.jsonl"}],"files":["docs/agent_docs/CODE_PATTERNS.md"],"status":"open","description":"CODE_PATTERNS.md is referenced in some documents using incorrect relative path (wrong directory depth or missing docs/agent_docs prefix).","recommendation":"Search for all references to CODE_PATTERNS.md; Update to correct path: docs/agent_docs/CODE_PATTERNS.md","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0098","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0169","title":"Duplicate CODE_REVIEW_PLAN_2026_Q1.md exists in two locations","category":"documentation","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0099","file":"CANON-DOCS.jsonl"}],"files":["docs/CODE_REVIEW_PLAN_2026_Q1.md","docs/reviews/2026-Q1/CODE_REVIEW_PLAN_2026_Q1.md"],"status":"open","description":"CODE_REVIEW_PLAN_2026_Q1.md exists in both docs/ and docs/reviews/2026-Q1/, creating confusion about which is canonical.","recommendation":"Determine canonical location (recommend docs/reviews/2026-Q1/); Delete or archive the non-canonical copy; Update all references to point to canonical location","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0099","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0171","title":"Template date placeholders using literal YYYY-MM-DD format","category":"documentation","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0101","file":"CANON-DOCS.jsonl"}],"files":["docs/templates/FOUNDATION_DOC_TEMPLATE.md","docs/templates/PLANNING_DOC_TEMPLATE.md"],"status":"open","description":"Templates contain date placeholders like YYYY-MM-DD or [Date] that should be replaced when instantiating but are sometimes copied literally.","recommendation":"Ensure all template instantiation replaces date placeholders with actual dates; Consider using different placeholder format that's more obviously wrong if not replaced (e.g., <REPLACE_WITH_DATE>)","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0101","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0172","title":"Template docs located outside docs/templates/ directory","category":"documentation","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0102","file":"CANON-DOCS.jsonl"}],"files":["docs/PR_REVIEW_PROMPT_TEMPLATE.md"],"status":"open","description":"PR_REVIEW_PROMPT_TEMPLATE.md is a reusable template but is stored at docs/ rather than docs/templates/. Standards imply templates should live in docs/templates/.","recommendation":"Confirm if all templates should be under docs/templates/; If yes, move PR_REVIEW_PROMPT_TEMPLATE.md and update references","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0102","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0173","title":"Test count mismatch between DEVELOPMENT.md and actual test suite","category":"documentation","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0103","file":"CANON-DOCS.jsonl"}],"files":["docs/DEVELOPMENT.md"],"status":"open","description":"DEVELOPMENT.md claims a specific number of tests (e.g., 10 tests) but actual test suite may have different count.","recommendation":"Run npm test and count actual tests; Update DEVELOPMENT.md with accurate count or remove specific number","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0103","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0174","title":"ROADMAP anchor links may be fragile due to emoji/punctuation in headings","category":"documentation","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0104","file":"CANON-DOCS.jsonl"}],"files":["ROADMAP.md","ROADMAP_LOG.md"],"status":"open","description":"Links to specific heading anchors (e.g., #m16---...) can break if heading text changes due to emoji/punctuation differences in GitHub slug algorithm.","recommendation":"Avoid over-specific anchors for frequently edited headings; Manually verify anchor behavior in GitHub-rendered view","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0104","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0175","title":"Multiple CI quality gates configured as non-blocking (continue-on-error: true)","category":"process","severity":"S0","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0105","file":"CANON-PROCESS.jsonl"}],"files":[".github/workflows/ci.yml"],"status":"open","description":"Prettier, unused deps check, pattern compliance, and docs checks have continue-on-error: true. Formatting drift, dependency issues, pattern violations, and doc issues can accumulate and ship.","recommendation":"Convert to diff-based blocking (changed files only) while tracking baseline; Add baseline trend reporting to CI logs; Burn down baseline violations over time, then remove continue-on-error","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0105","roadmap_status":"already_tracked","matched_roadmap_item":"D4","matched_tech_debt_item":null}
{"master_id":"MASTER-0176","title":"Automation scripts have critically low test coverage (2-7% of ~31 scripts)","category":"process","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0106","file":"CANON-PROCESS.jsonl"}],"files":["scripts/","tests/scripts/"],"status":"open","description":"Only 2 test files exist for ~31 runnable scripts. Critical workflow scripts (update-readme-status, validate-phase-completion, check-docs-light, check-review-needed) lack tests.","recommendation":"Add tests for workflow-critical scripts first (update-readme-status.js, validate-phase-completion.js, check-docs-light.js); Create lightweight CLI test harness (spawn node, assert exit codes/output); Target 70%+ coverage for scripts/","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0106","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0177","title":"Missing security scanning in CI (npm audit, CodeQL, Dependabot)","category":"process","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0107","file":"CANON-PROCESS.jsonl"}],"files":[".github/workflows/ci.yml",".github/dependabot.yml"],"status":"open","description":"No workflow steps for npm audit, CodeQL static analysis, or Dependabot config. Vulnerable dependencies and security issues not automatically detected.","recommendation":"Add scheduled npm audit --production workflow; Enable GitHub CodeQL for JavaScript/TypeScript; Create .github/dependabot.yml for npm and GitHub Actions updates","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0107","roadmap_status":"already_tracked","matched_roadmap_item":"D5","matched_tech_debt_item":"SEC-003"}
{"master_id":"MASTER-0178","title":"Deploy workflow calls gcloud without installing Google Cloud SDK","category":"process","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0108","file":"CANON-PROCESS.jsonl"}],"files":[".github/workflows/deploy-firebase.yml"],"status":"open","description":"deploy-firebase.yml runs gcloud auth and gcloud config commands but has no setup-gcloud action. Can cause deploy failures on runners without gcloud pre-installed.","recommendation":"Add google-github-actions/setup-gcloud before gcloud commands; Or remove gcloud usage and rely on GOOGLE_APPLICATION_CREDENTIALS for firebase-tools auth; Add gcloud --version sanity check step","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0108","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0179","title":"DEVELOPMENT.md workflow triggers don't match actual workflow YAML","category":"process","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0109","file":"CANON-PROCESS.jsonl"}],"files":["DEVELOPMENT.md",".github/workflows/deploy-firebase.yml",".github/workflows/review-check.yml",".github/workflows/validate-plan.yml"],"status":"open","description":"DEVELOPMENT.md documents workflows with incorrect triggers. deploy-firebase marked Manual/Release but triggers on push to main. review-check marked Scheduled/Manual but triggers on PR events.","recommendation":"Update DEVELOPMENT.md workflow table to match each workflow's on: block; Add docs check script that diffs documented vs actual triggers","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0109","roadmap_status":"already_tracked","matched_roadmap_item":"D3","matched_tech_debt_item":null}
{"master_id":"MASTER-0180","title":"Pre-commit hook runs full test suite causing slow commits (~50s+)","category":"process","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"canon","id":"CANON-0110","file":"CANON-PROCESS.jsonl"}],"files":[".husky/pre-commit",".husky/pre-push"],"status":"open","description":"Pre-commit runs npm test (full suite) plus lint/pattern checks. Pre-push also runs npm test. Duplicate testing slows developer workflow.","recommendation":"Move full npm test to pre-push only; Keep pre-commit to fast checks (lint, patterns on staged files); Consider running only changed-file tests in pre-commit","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0110","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0181","title":"Pattern checker reports 93+ violations but CI check is non-blocking","category":"process","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"canon","id":"CANON-0111","file":"CANON-PROCESS.jsonl"}],"files":["scripts/check-pattern-compliance.js",".github/workflows/ci.yml"],"status":"open","description":"Pattern checker finds 93 potential violations but CI step has continue-on-error: true. Pattern regressions can land on main.","recommendation":"Switch CI to block on pattern violations for changed files (diff-based); Allow baseline legacy files to pass until migrated; Add CI artifact summarizing violations trend","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0111","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-005","matched_tech_debt_item":null}
{"master_id":"MASTER-0182","title":"Firebase CLI version unpinned in deploy workflow","category":"process","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0112","file":"CANON-PROCESS.jsonl"}],"files":[".github/workflows/deploy-firebase.yml"],"status":"open","description":"Deploy workflow installs firebase-tools via npm install -g firebase-tools without version pin. Upstream releases can change deploy behavior unexpectedly.","recommendation":"Pin firebase-tools: npm install -g firebase-tools@<known-good>; Document pinned version and update cadence in DEVELOPMENT.md","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0112","roadmap_status":"already_tracked","matched_roadmap_item":"D1","matched_tech_debt_item":null}
{"master_id":"MASTER-0183","title":"Auto-label workflow has invalid if: expression syntax","category":"process","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0113","file":"CANON-PROCESS.jsonl"}],"files":[".github/workflows/auto-label-review-tier.yml"],"status":"open","description":"Step uses if: steps.assign-tier.outputs.tier == '4' without required ${{ }} wrapper. Can cause workflow evaluation errors.","recommendation":"Change to if: ${{ steps.assign-tier.outputs.tier == '4' }}; Add actionlint check in CI for YAML syntax validation","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0113","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0184","title":"DEVELOPMENT.md Husky section missing pattern compliance step","category":"process","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0114","file":"CANON-PROCESS.jsonl"}],"files":["DEVELOPMENT.md",".husky/pre-commit"],"status":"open","description":"DEVELOPMENT.md lists pre-commit as ESLint, Prettier, Tests but omits the blocking npm run patterns:check step.","recommendation":"Update DEVELOPMENT.md pre-commit table to include Pattern compliance; Keep tables aligned with .husky/* content","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0114","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0185","title":"CI workflow lacks explicit permissions block (security hardening)","category":"process","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"canon","id":"CANON-0115","file":"CANON-PROCESS.jsonl"}],"files":[".github/workflows/ci.yml"],"status":"open","description":"ci.yml has no permissions: block, relying on GitHub defaults. Explicitly setting minimal permissions is best practice.","recommendation":"Add permissions: { contents: read } at workflow level; Document required permissions per workflow in DEVELOPMENT.md","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0115","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0189","title":"Re-enable App Check on Cloud Functions","category":"security","severity":"S0","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0001","source":"backlog"}],"files":[],"status":"open","dependencies":["DEDUP-0003","DEDUP-0004"],"pr_bucket":"security-hardening","original_id":"DEDUP-0001","roadmap_status":"already_tracked","matched_roadmap_item":"DEDUP-0001","matched_tech_debt_item":"DOC-005"}
{"master_id":"MASTER-0190","title":"Close legacy journalEntries write path","category":"security","severity":"S0","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0002","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR2","original_id":"DEDUP-0002","roadmap_status":"already_tracked","matched_roadmap_item":"DEDUP-0002","matched_tech_debt_item":null}
{"master_id":"MASTER-0191","title":"Make reCAPTCHA fail-closed","category":"security","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0003","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR3","original_id":"DEDUP-0003","roadmap_status":"already_tracked","matched_roadmap_item":"DEDUP-0003","matched_tech_debt_item":null}
{"master_id":"MASTER-0192","title":"Complete rate limiting (IP + admin)","category":"security","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0004","source":"backlog"}],"files":[],"status":"open","dependencies":["DEDUP-0003"],"pr_bucket":"PR4","original_id":"DEDUP-0004","roadmap_status":"already_tracked","matched_roadmap_item":"DEDUP-0004","matched_tech_debt_item":null}
{"master_id":"MASTER-0193","title":"Replace console.\\* with logger","category":"security","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0005","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR8","original_id":"DEDUP-0005","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0194","title":"Restore client App Check init","category":"security","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0005","source":"backlog"}],"files":[],"status":"open","dependencies":["DEDUP-0001"],"pr_bucket":"security-hardening","original_id":"CANON-0005","roadmap_status":"already_tracked","matched_roadmap_item":"A1","matched_tech_debt_item":null}
{"master_id":"MASTER-0195","title":"Admin-claim rules defense-in-depth","category":"security","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0010","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0010","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0196","title":"Verify reCAPTCHA coverage","category":"security","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0014","source":"backlog"}],"files":[],"status":"open","dependencies":["DEDUP-0003"],"pr_bucket":"PR3","original_id":"CANON-0014","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0197","title":"Rate limit bypass mitigation","category":"security","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0015","source":"backlog"}],"files":[],"status":"open","dependencies":["DEDUP-0004"],"pr_bucket":"PR4","original_id":"CANON-0015","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0198","title":"Audit localStorage for sensitive data","category":"security","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0016","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0016","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0199","title":"Address ESLint security warnings","category":"security","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0019","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR-LINT-WARNINGS","original_id":"CANON-0019","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0200","title":"Remove hardcoded reCAPTCHA fallback","category":"security","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0038","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0038","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"SEC-005"}
{"master_id":"MASTER-0201","title":"Route admin writes through Functions","category":"security","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0041","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0041","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0202","title":"Fix journal entry type mismatch","category":"code","severity":"S1","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0006","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR6","original_id":"DEDUP-0006","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0203","title":"Add error.message null safety","category":"code","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0021","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0021","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0204","title":"Safe localStorage JSON.parse","category":"code","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0022","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0022","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0205","title":"Add .strict() to Zod schemas","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0013","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"DEDUP-0013","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0206","title":"Replace unsafe type assertions","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0018","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0018","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0207","title":"Single source for journal types","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0020","source":"backlog"}],"files":[],"status":"open","dependencies":["DEDUP-0006"],"pr_bucket":"PR6","original_id":"CANON-0020","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0208","title":"Type httpsCallable generics","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0025","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0025","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0209","title":"Fix @ts-expect-error suppression","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0030","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0030","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0211","title":"Fix useJournal memory leak","category":"code","severity":"S0","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0011","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR1","original_id":"DEDUP-0011","roadmap_status":"already_tracked","matched_roadmap_item":"DEDUP-0011","matched_tech_debt_item":null}
{"master_id":"MASTER-0212","title":"Extract error handling utility","category":"code","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0007","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR7","original_id":"DEDUP-0007","roadmap_status":"already_tracked","matched_roadmap_item":"EFF-012","matched_tech_debt_item":"REFAC-001"}
{"master_id":"MASTER-0213","title":"Remove deprecated saveNotebookJournalEntry","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0008","source":"backlog"}],"files":[],"status":"open","dependencies":["DEDUP-0006"],"pr_bucket":"code-quality","original_id":"DEDUP-0008","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0214","title":"Separate domain/transport in useJournal","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0071","source":"backlog"}],"files":[],"status":"open","dependencies":["DEDUP-0011"],"pr_bucket":"code-quality","original_id":"CANON-0071","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0215","title":"Create callSecureFunction wrapper","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0076","source":"backlog"}],"files":[],"status":"open","dependencies":["DEDUP-0003"],"pr_bucket":"PR11","original_id":"CANON-0076","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0216","title":"Shared reCAPTCHA action constants","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0078","source":"backlog"}],"files":[],"status":"open","dependencies":["CANON-0076"],"pr_bucket":"PR11","original_id":"CANON-0078","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0217","title":"Extract useGrowthCardDialog hook","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0079","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0079","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0218","title":"Enable SSR for landing page","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0012","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR13","original_id":"DEDUP-0012","roadmap_status":"already_tracked","matched_roadmap_item":"DEDUP-0012","matched_tech_debt_item":null}
{"master_id":"MASTER-0219","title":"Reduce 'use client' directives","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0046","source":"backlog"}],"files":[],"status":"open","dependencies":["DEDUP-0012"],"pr_bucket":"PR14","original_id":"CANON-0046","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0220","title":"Split TodayPage god component","category":"code","severity":"S1","effort":"E3","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0072","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0072","roadmap_status":"already_tracked","matched_roadmap_item":"CANON-0072","matched_tech_debt_item":null}
{"master_id":"MASTER-0221","title":"Explicit client providers wrapper","category":"code","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0009","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0009","roadmap_status":"already_tracked","matched_roadmap_item":"A1","matched_tech_debt_item":null}
{"master_id":"MASTER-0222","title":"Route Firebase through service layer","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0075","source":"backlog"}],"files":[],"status":"open","dependencies":["CANON-0077"],"pr_bucket":"code-quality","original_id":"CANON-0075","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"REFAC-010"}
{"master_id":"MASTER-0223","title":"Create typed collection helpers","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0077","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR12","original_id":"CANON-0077","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0224","title":"Clarify FirestoreAdapter boundary","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0085","source":"backlog"}],"files":[],"status":"open","dependencies":["CANON-0075"],"pr_bucket":"code-quality","original_id":"CANON-0085","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0225","title":"Audit inventory dual-write pattern","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0082","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0082","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0226","title":"Implement image optimization","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0047","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0047","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0227","title":"Fix TodayPage subscription bug","category":"code","severity":"S1","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0048","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0048","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0228","title":"Lazy load notebook modules","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0049","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0049","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0229","title":"Complete Sentry integration","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0050","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0050","roadmap_status":"already_tracked","matched_roadmap_item":"A1","matched_tech_debt_item":null}
{"master_id":"MASTER-0230","title":"Add reduced-motion to animations","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0052","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0052","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0231","title":"Add React.memo to list components","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0053","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0053","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0232","title":"Optimize hero background image","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0054","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0054","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0233","title":"Add virtualization to large lists","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0055","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR15","original_id":"CANON-0055","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0234","title":"Add marker clustering to map","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0056","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR15","original_id":"CANON-0056","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0235","title":"Remove 7 unused dependencies","category":"code","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0057","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0057","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0236","title":"Add Firebase query indexes","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0059","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0059","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0237","title":"Paginate admin CRUD table","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0060","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0060","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"PERF-016"}
{"master_id":"MASTER-0239","title":"Add loading.tsx files","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0062","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0062","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0240","title":"Lazy load JournalHub forms","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0063","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0063","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0241","title":"Add Cloud Function security tests","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0011","source":"backlog"}],"files":[],"status":"open","dependencies":["DEDUP-0001"],"pr_bucket":"code-quality","original_id":"CANON-0011","roadmap_status":"already_tracked","matched_roadmap_item":"A2","matched_tech_debt_item":null}
{"master_id":"MASTER-0242","title":"Add Firestore rules emulator tests","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0012","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0012","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0243","title":"Increase security file coverage","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0013","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0013","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0244","title":"Reduce 47 CRITICAL complexity functions","category":"code","severity":"S0","effort":"E3","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0014","source":"backlog"},{"type":"backlog","id":"CANON-0068","source":"backlog"},{"type":"canon","id":"CANON-0068","file":"CANON-REFACTOR.jsonl"}],"files":["scripts/assign-review-tier.js","scripts/phase-complete-check.js","scripts/check-pattern-compliance.js"],"status":"open","dependencies":["CANON-0068"],"pr_bucket":"PR18","original_id":"DEDUP-0014","merged_from":["DEDUP-0014","CANON-0068"],"roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0245","title":"Add script test coverage (CI)","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0106","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR17","original_id":"CANON-0106","roadmap_status":"already_tracked","matched_roadmap_item":"D10","matched_tech_debt_item":null}
{"master_id":"MASTER-0246","title":"Unskip Cloud Function test","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0027","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0027","roadmap_status":"already_tracked","matched_roadmap_item":"A2","matched_tech_debt_item":null}
{"master_id":"MASTER-0247","title":"Add useJournal hook tests","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0029","source":"backlog"}],"files":[],"status":"open","dependencies":["DEDUP-0011"],"pr_bucket":"code-quality","original_id":"CANON-0029","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0248","title":"Increase critical path coverage","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0074","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0074","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0249","title":"Extract time rotation utilities","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0009","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR10","original_id":"DEDUP-0009","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0250","title":"Consolidate DailyQuoteCard","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0010","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR9","original_id":"DEDUP-0010","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0251","title":"Create CRUD factory","category":"code","severity":"S2","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0080","source":"backlog"}],"files":[],"status":"open","dependencies":["CANON-0077"],"pr_bucket":"code-quality","original_id":"CANON-0080","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0252","title":"Centralize admin function wrappers","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0081","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0081","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0253","title":"Extract safeReadFile/safeWriteFile","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0084","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0084","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0254","title":"Consolidate searchable-text generation","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0086","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0086","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0256","title":"Remove duplicate CloudFunctionError","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0087","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR7","original_id":"CANON-0087","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0257","title":"Run ESLint auto-fix","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0088","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR-BATCH-AUTO","original_id":"CANON-0088","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0259","title":"Extract parseTime helper","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0090","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0090","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0260","title":"Fix broken relative links","category":"code","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0091","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR16","original_id":"CANON-0091","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0261","title":"Replace [X] placeholders","category":"code","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0092","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR16","original_id":"CANON-0092","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0262","title":"Add DOCUMENTATION_INDEX to README","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0093","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR16","original_id":"CANON-0093","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0263","title":"Add Tier 2 required metadata","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0094","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR16","original_id":"CANON-0094","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0264","title":"Fix standards placeholder links","category":"code","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0095","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR16","original_id":"CANON-0095","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0265","title":"Update DOCUMENT_DEPENDENCIES sync","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0096","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0096","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0266","title":"Add PR_REVIEW_PROMPT metadata","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0097","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0097","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0267","title":"Fix CODE_PATTERNS.md path references","category":"code","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0098","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR16","original_id":"CANON-0098","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0268","title":"Update DEVELOPMENT.md workflow docs","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0109","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0109","roadmap_status":"already_tracked","matched_roadmap_item":"D3","matched_tech_debt_item":null}
{"master_id":"MASTER-0270","title":"Replace template date placeholders","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0101","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0101","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0271","title":"Move PR template to docs/templates/","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0102","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0102","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0272","title":"Update DEVELOPMENT.md test count","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0103","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0103","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0273","title":"Document fragile anchor links","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0104","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0104","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0274","title":"Update Husky docs for patterns:check","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0114","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0114","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0275","title":"Convert CI gates to blocking","category":"code","severity":"S0","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"DEDUP-0015","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR5","original_id":"DEDUP-0015","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0276","title":"Add npm audit + CodeQL + Dependabot","category":"code","severity":"S1","effort":"E2","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0107","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0107","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0277","title":"Add gcloud setup to deploy workflow","category":"code","severity":"S1","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0108","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0108","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0278","title":"Move full tests to pre-push only","category":"code","severity":"S2","effort":"E1","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0110","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0110","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0279","title":"Pin firebase-tools version","category":"code","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0112","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0112","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0280","title":"Fix auto-label workflow if syntax","category":"code","severity":"S2","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0113","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0113","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0281","title":"Add explicit permissions block","category":"code","severity":"S3","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"CANON-0115","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0115","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0283","title":"Item Name","category":"code","severity":"S1","effort":"E0","priority_score":100,"sources":[{"type":"backlog","id":"LEGACY-001","source":"audit-backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"LEGACY-001","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0011","title":"Useless assignment to hasMore variable","category":"code","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"single-session","id":"CODE-011","date":"2026-01-17","category":"code"}],"files":["functions/src/jobs.ts"],"status":"open","description":"SonarCloud reports useless assignment to variable 'hasMore'. Variable is assigned but may not be used after.","recommendation":"Remove the assignment or verify hasMore is actually used in the return value or subsequent logic.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-011","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0013","title":"Nested ternary operator","category":"code","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"single-session","id":"CODE-013","date":"2026-01-17","category":"code"}],"files":["components/admin/logs-tab.tsx"],"status":"open","description":"SonarCloud flags nested ternary operation which reduces readability.","recommendation":"Extract to a helper function or use if/else statements for clarity.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-013","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"CODE-013"}
{"master_id":"MASTER-0014","title":"Nested template literals (6 occurrences)","category":"code","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"single-session","id":"CODE-014","date":"2026-01-17","category":"code"}],"files":["functions/src/admin.ts"],"status":"open","description":"SonarCloud flags nested template literals at lines 1388-1393. These reduce code readability.","recommendation":"Extract nested expressions to variables before interpolation.","dependencies":[],"pr_bucket":"code-quality","original_id":"CODE-014","roadmap_status":"already_tracked","matched_roadmap_item":"M2.3-REF-001","matched_tech_debt_item":null}
{"master_id":"MASTER-0044","title":"Only 6 dynamic imports despite 101 client components","category":"performance","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"single-session","id":"PERF-010","date":"2026-01-17","category":"performance"}],"files":["components"],"status":"open","description":"Found only 6 dynamic() imports but 101 'use client' directives. Most components are bundled eagerly even if conditionally rendered.","recommendation":"Add dynamic imports for conditionally-rendered heavy components: modals, drawers, map components, admin panels.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"PERF-010","roadmap_status":"already_tracked","matched_roadmap_item":"A1","matched_tech_debt_item":"PERF-010"}
{"master_id":"MASTER-0045","title":"useMemo/useCallback usage is inconsistent","category":"performance","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"single-session","id":"PERF-011","date":"2026-01-17","category":"performance"}],"files":["components"],"status":"open","description":"Found 11 useMemo and 10 useCallback usages, but 0 React.memo. Without memo on child components, useCallback provides limited benefit.","recommendation":"Add React.memo to list item components and frequently re-rendered children before useCallback provides full benefit.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"PERF-011","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"PERF-011"}
{"master_id":"MASTER-0067","title":"4 linter suppressions in codebase (ts-ignore, ts-expect-error, eslint-disable)","category":"refactoring","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"single-session","id":"REF-012","date":"2026-01-17","category":"refactoring"}],"files":["lib/logger.ts"],"status":"open","description":"Found 4 linter suppressions: logger.ts:86 (eslint-disable no-control-regex), resources-page.tsx:444 (ts-expect-error), admin/page.tsx:47 (eslint-disable react-hooks), use-geolocation.ts:171 (eslint-disable exhaustive-deps).","recommendation":"Review each suppression for possible removal or proper typing solution.","dependencies":[],"pr_bucket":"code-quality","original_id":"REF-012","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0109","title":"'any' types leaking into production code (needs tightening)","category":"code","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"canon","id":"CANON-0032","file":"CANON-CODE.jsonl"}],"files":["lib/sentry.client.ts","components/admin/meetings-tab.tsx","functions/src/admin.ts","tests/firestore-service.test.ts"],"status":"CONFIRMED","description":"Use of any reduces type safety; in production files it can mask real issues.","recommendation":"Replace production any with unknown + type guards or concrete types; allow any only in tests/mocks if necessary.","dependencies":[],"pr_bucket":"types-domain","original_id":"CANON-0032","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0110","title":"Landing page forced to client component for top-level state","category":"refactoring","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"canon","id":"CANON-0033","file":"CANON-CODE.jsonl"}],"files":["app/page.tsx"],"status":"CONFIRMED","description":"Forces full landing page client rendering, potentially affecting FCP/bundle size.","recommendation":"Move stateful logic into a small client wrapper; keep app/page.tsx server-rendered where possible.","dependencies":[],"pr_bucket":"boundaries","original_id":"CANON-0033","roadmap_status":"already_tracked","matched_roadmap_item":"A1","matched_tech_debt_item":null}
{"master_id":"MASTER-0119","title":"App Check disabled on Functions and client init disabled (tracked as risk-accepted hardening item)","category":"security","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"canon","id":"CANON-0043","file":"CANON-SECURITY.jsonl"}],"files":["functions/src/index.ts","lib/firebase.ts"],"status":"open","recommendation":"(If you later choose to enforce) enable App Check on server wrappers + restore client init.; Add monitoring for App Check failures and volume anomalies.","dependencies":[],"pr_bucket":"security-hardening","original_id":"CANON-0043","roadmap_status":"already_tracked","matched_roadmap_item":"MASTER-0078","matched_tech_debt_item":null}
{"master_id":"MASTER-0159","title":"Batch fix opportunities: 79 replaceAll() + 71 node: prefix modernizations","category":"refactoring","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"canon","id":"CANON-0089","file":"CANON-REFACTOR.jsonl"}],"files":["multiple","scripts/*","functions/src/*"],"status":"NEW","description":"ES2021+ provides cleaner methods. Modernization reduces lint noise.","recommendation":"Find/replace: replace(/pattern/g) to replaceAll(). require('fs') to require('node:fs').","dependencies":[],"pr_bucket":"misc","original_id":"CANON-0089","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0186","title":"Pattern checker produces false positives for controlled npm install fallbacks","category":"process","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"canon","id":"CANON-0116","file":"CANON-PROCESS.jsonl"}],"files":["scripts/check-pattern-compliance.js",".claude/hooks/session-start.sh"],"status":"open","description":"Pattern checker flags npm install in automation even when it's documented fallback (prefers npm ci). Also emits MODULE_TYPELESS warning noise.","recommendation":"Refine pattern rules: allowlist documented fallback blocks or annotation comments; Consider adding type: module to package.json or suppressing warning","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0116","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0187","title":"Review trigger thresholds may cause alert fatigue for process changes","category":"process","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"canon","id":"CANON-0117","file":"CANON-PROCESS.jsonl"}],"files":["scripts/check-review-needed.js"],"status":"open","description":"Process category triggers review on ANY change in .github, .claude, .husky, or scripts/ (threshold=1). May cause frequent needs-review labels for minor edits.","recommendation":"If alert fatigue occurs, split into subcategories or require N files except for critical paths; Add override mechanism documented in REVIEW_POLICY","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0117","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0188","title":"Deploy workflow secret handling may be brittle for multiline JSON","category":"process","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"canon","id":"CANON-0118","file":"CANON-PROCESS.jsonl"}],"files":[".github/workflows/deploy-firebase.yml"],"status":"open","description":"Workflow writes service account JSON via echo '...secret...' > file. Can be brittle if formatting/newlines differ across secret entry methods.","recommendation":"Prefer base64-encoding JSON secret and decode during workflow; Add validation step checking file is valid JSON before use","dependencies":[],"pr_bucket":"process-automation","original_id":"CANON-0118","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0210","title":"Replace 'any' with proper types","category":"code","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"backlog","id":"CANON-0032","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0032","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0258","title":"replaceAll + node: prefix batch","category":"code","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"backlog","id":"CANON-0089","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR-BATCH-AUTO","original_id":"CANON-0089","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0282","title":"Improve deploy secret handling","category":"code","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"backlog","id":"CANON-0118","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0118","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0285","title":"Missing \"AI Instructions\" Sections","category":"code","severity":"S3","effort":"E1","priority_score":90,"sources":[{"type":"backlog","id":"CANON-0102","source":"audit-backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0102","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0137","title":"Step1WorksheetCard excessive complexity (804 lines)","category":"performance","severity":"S2","effort":"E3","priority_score":85,"sources":[{"type":"canon","id":"CANON-0061","file":"CANON-PERF.jsonl"}],"files":["components/growth/Step1WorksheetCard.tsx"],"status":"open","recommendation":"Decompose into smaller components (Concept1/2/3, Conclusion). Extract shared logic to custom hook useStep1Worksheet().","dependencies":[],"pr_bucket":"performance-optimization","original_id":"CANON-0061","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0238","title":"Decompose Step1WorksheetCard","category":"code","severity":"S2","effort":"E3","priority_score":85,"sources":[{"type":"backlog","id":"CANON-0061","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0061","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0073","title":"Error messages lack actionable fix hints - generic 'Please try again'","category":"engineering-productivity","severity":"S3","effort":"E1","priority_score":80,"sources":[{"type":"single-session","id":"EFFP-006","date":"2026-01-17","category":"engineering-productivity"}],"files":["components/"],"status":"open","description":"15+ error toast messages use generic 'Please try again' without actionable guidance. Users don't know if they should: wait, refresh, check network, or contact support.","recommendation":"Add context-specific hints: 'Check your internet connection', 'This may take a moment, please wait', 'If this persists, contact support'. Include error code for support reference.","dependencies":[],"pr_bucket":"dx-improvements","original_id":"EFFP-006","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0077","title":"OfflineIndicator is display-only - no sync status or retry mechanism","category":"engineering-productivity","severity":"S3","effort":"E1","priority_score":80,"sources":[{"type":"single-session","id":"EFFP-010","date":"2026-01-17","category":"engineering-productivity"}],"files":["components/status/offline-indicator.tsx"],"status":"open","description":"OfflineIndicator component shows online/offline status but provides no: pending write count, sync progress, or manual retry button. Users have no visibility into what's happening with their data.","recommendation":"Enhance OfflineIndicator to show: 1) Pending write count from queue, 2) Last successful sync time, 3) Manual 'Sync Now' button. Integrate with write queue from EFFP-007.","dependencies":[],"pr_bucket":"dx-improvements","original_id":"EFFP-010","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0033","title":"Archive docs contain significant link rot after moves","category":"documentation","severity":"S3","effort":"E2","priority_score":75,"sources":[{"type":"single-session","id":"DOC-008","date":"2026-01-17","category":"documentation"}],"files":["docs/archive/"],"status":"open","description":"CANON-0100 identified multiple archived documents with broken links (./README.md, ./ROADMAP.md from docs/archive/). This is expected for archived content but adds noise to link validation.","recommendation":"Option A: Exclude docs/archive/** from link checks. Option B: Update archive links to correct relative paths.","dependencies":[],"pr_bucket":"documentation-sync","original_id":"DOC-008","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0046","title":"Image optimization disabled (unoptimized: true)","category":"performance","severity":"S3","effort":"E2","priority_score":75,"sources":[{"type":"single-session","id":"PERF-012","date":"2026-01-17","category":"performance"}],"files":["next.config.mjs"],"status":"open","description":"Next.js image optimization is disabled via images: { unoptimized: true }. All images served at full resolution without WebP conversion or responsive sizing. CANON-0047 flagged this as S1.","recommendation":"Enable image optimization or implement static-friendly responsive pipeline. Consider using Cloudinary/Imgix for static export.","dependencies":[],"pr_bucket":"performance-optimization","original_id":"PERF-012","roadmap_status":"already_tracked","matched_roadmap_item":null,"matched_tech_debt_item":"PERF-012"}
{"master_id":"MASTER-0170","title":"Archive docs contain significant link rot after archival/moves","category":"documentation","severity":"S3","effort":"E2","priority_score":75,"sources":[{"type":"canon","id":"CANON-0100","file":"CANON-DOCS.jsonl"}],"files":["docs/archive/AI_HANDOFF-2026-01-02.md","docs/archive/consolidated-2025-12-19/ARCHIVE_INDEX.md","docs/archive/ARCHIVE_INDEX.md","docs/archive/completed-plans/EIGHT_PHASE_REFACTOR_PLAN.md"],"status":"open","description":"Multiple archived documents contain broken links (e.g., linking to ./README.md, ./ROADMAP.md from within docs/archive/).","recommendation":"Option A: Exclude docs/archive/** from link checks; Option B: Update archive links to correct relative paths (../../README.md etc.)","dependencies":[],"pr_bucket":"documentation-sync","original_id":"CANON-0100","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0255","title":"Fix deprecated APIs + nested ternaries","category":"code","severity":"S3","effort":"E2","priority_score":75,"sources":[{"type":"backlog","id":"CANON-0083","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"PR-BATCH-MANUAL","original_id":"CANON-0083","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0269","title":"Fix archive link rot","category":"code","severity":"S3","effort":"E2","priority_score":75,"sources":[{"type":"backlog","id":"CANON-0100","source":"backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0100","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}
{"master_id":"MASTER-0284","title":"Missing \"Quick Start\" Sections","category":"code","severity":"S3","effort":"E2","priority_score":75,"sources":[{"type":"backlog","id":"CANON-0101","source":"audit-backlog"}],"files":[],"status":"open","dependencies":[],"pr_bucket":"code-quality","original_id":"CANON-0101","roadmap_status":"net_new","matched_roadmap_item":null,"matched_tech_debt_item":null}