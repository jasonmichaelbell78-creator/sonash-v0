{"canonical_id":"CANON-P-001","category":"CI/CD","title":"Multiple CI quality gates configured as non-blocking (continue-on-error: true)","fingerprint":"CI/CD::.github/workflows/ci.yml::non_blocking_quality_gates","severity":"S0","effort":"E2","confidence":98,"consensus":"5/5","files":[".github/workflows/ci.yml"],"issue_details":{"description":"Prettier, unused deps check, pattern compliance, and docs checks have continue-on-error: true. Formatting drift, dependency issues, pattern violations, and doc issues can accumulate and ship.","impact":"Quality regressions escape to main branch. 93+ pattern violations currently pass CI. Increases tech debt and review burden.","examples":["ci.yml L30-35: Prettier check non-blocking","ci.yml L40-45: unused deps check non-blocking","ci.yml L47-52: pattern compliance non-blocking","ci.yml L54-59: docs check non-blocking"]},"remediation":{"steps":["Convert to diff-based blocking (changed files only) while tracking baseline","Add baseline trend reporting to CI logs","Burn down baseline violations over time, then remove continue-on-error"],"verification":["PR introducing pattern violation fails CI","Baseline violation count trends downward"]},"evidence":["GitHub Copilot: 4 quality gates non-blocking","Codex: CI gates non-blocking","Claude Sonnet 4.5: S0 severity - CI gates allow regressions","Claude Code Opus 4.5: S1 severity - 4 continue-on-error steps","ChatGPT 5.2: S2 severity - multiple non-blocking gates"]}
{"canonical_id":"CANON-P-002","category":"Scripts","title":"Automation scripts have critically low test coverage (2-7% of ~31 scripts)","fingerprint":"Scripts::scripts/::low_test_coverage","severity":"S1","effort":"E2","confidence":96,"consensus":"5/5","files":["scripts/","tests/scripts/"],"issue_details":{"description":"Only 2 test files exist for ~31 runnable scripts. Critical workflow scripts (update-readme-status, validate-phase-completion, check-docs-light, check-review-needed) lack tests.","impact":"High regression risk when modifying automation. Scripts used by CI can break silently. Refactoring is risky.","examples":["tests/scripts/phase-complete-check.test.ts exists","tests/scripts/surface-lessons-learned.test.ts exists","~29 other scripts have no tests"]},"remediation":{"steps":["Add tests for workflow-critical scripts first (update-readme-status.js, validate-phase-completion.js, check-docs-light.js)","Create lightweight CLI test harness (spawn node, assert exit codes/output)","Target 70%+ coverage for scripts/"],"verification":["CI runs script test suite","Coverage reporting shows improvement"]},"evidence":["GitHub Copilot: scripts lack tests","Codex: 2/29 scripts have tests","Claude Sonnet 4.5: 6% coverage","Claude Code Opus 4.5: 2/29 scripts tested","ChatGPT 5.2: ~2 tests for ~31 scripts"]}
{"canonical_id":"CANON-P-003","category":"CI/CD","title":"Missing security scanning in CI (npm audit, CodeQL, Dependabot)","fingerprint":"CI/CD::.github/workflows::missing_security_scans","severity":"S1","effort":"E2","confidence":94,"consensus":"4/5","files":[".github/workflows/ci.yml",".github/dependabot.yml"],"issue_details":{"description":"No workflow steps for npm audit, CodeQL static analysis, or Dependabot config. Vulnerable dependencies and security issues not automatically detected.","impact":"Increased risk of shipping vulnerable dependencies. Manual security reviews required.","examples":["No npm audit step in any workflow","No .github/dependabot.yml file","No CodeQL workflow configured"]},"remediation":{"steps":["Add scheduled npm audit --production workflow","Enable GitHub CodeQL for JavaScript/TypeScript","Create .github/dependabot.yml for npm and GitHub Actions updates"],"verification":["Security workflow runs on schedule","CodeQL alerts appear in Security tab","Dependabot creates update PRs"]},"evidence":["GitHub Copilot: npm audit missing","Claude Sonnet 4.5: security scanning gaps","Claude Code Opus 4.5: no npm audit in CI","ChatGPT 5.2: missing audit/CodeQL/Dependabot"]}
{"canonical_id":"CANON-P-004","category":"Hooks","title":"Pre-commit hook runs full test suite causing slow commits (~50s+)","fingerprint":"Hooks::.husky/pre-commit::slow_precommit_full_tests","severity":"S2","effort":"E1","confidence":92,"consensus":"4/5","files":[".husky/pre-commit",".husky/pre-push"],"issue_details":{"description":"Pre-commit runs npm test (full suite) plus lint/pattern checks. Pre-push also runs npm test. Duplicate testing slows developer workflow.","impact":"Developer velocity hit. Higher likelihood of --no-verify bypass. Commit friction especially for small changes.","examples":[".husky/pre-commit runs npm test (blocking)",".husky/pre-push also runs npm test (duplicate)"]},"remediation":{"steps":["Move full npm test to pre-push only","Keep pre-commit to fast checks (lint, patterns on staged files)","Consider running only changed-file tests in pre-commit"],"verification":["Pre-commit runtime under 10s on typical changes","Pre-push still blocks when tests fail"]},"evidence":["GitHub Copilot: pre-commit runs full test suite","Codex: pre-commit slow due to tests","Claude Sonnet 4.5: pre-commit hook slow","ChatGPT 5.2: pre-commit full tests increases friction"]}
{"canonical_id":"CANON-P-005","category":"Workflow Docs","title":"DEVELOPMENT.md workflow triggers don't match actual workflow YAML","fingerprint":"Workflow Docs::DEVELOPMENT.md::stale_workflow_trigger_docs","severity":"S2","effort":"E1","confidence":94,"consensus":"4/5","files":["DEVELOPMENT.md",".github/workflows/deploy-firebase.yml",".github/workflows/review-check.yml",".github/workflows/validate-plan.yml"],"issue_details":{"description":"DEVELOPMENT.md documents workflows with incorrect triggers. deploy-firebase marked Manual/Release but triggers on push to main. review-check marked Scheduled/Manual but triggers on PR events.","impact":"Onboarding confusion. Incorrect expectations about when automation runs. Risk of unintended deployments.","examples":["DEVELOPMENT.md says deploy-firebase.yml is Manual/Release, actual: push main + workflow_dispatch","DEVELOPMENT.md says review-check.yml is Scheduled/Manual, actual: pull_request opened/synchronize"]},"remediation":{"steps":["Update DEVELOPMENT.md workflow table to match each workflow's on: block","Add docs check script that diffs documented vs actual triggers"],"verification":["Spot-check each workflow against DEVELOPMENT.md row","Drift check passes in CI"]},"evidence":["Codex: TRIGGERS.md outdated","Claude Sonnet 4.5: TRIGGERS.md documentation drift","Claude Code Opus 4.5: DEVELOPMENT.md workflow table stale","ChatGPT 5.2: DEVELOPMENT.md triggers don't match YAML"]}
{"canonical_id":"CANON-P-006","category":"CI/CD","title":"Deploy workflow calls gcloud without installing Google Cloud SDK","fingerprint":"CI/CD::.github/workflows/deploy-firebase.yml::missing_gcloud_setup","severity":"S1","effort":"E1","confidence":85,"consensus":"3/5","files":[".github/workflows/deploy-firebase.yml"],"issue_details":{"description":"deploy-firebase.yml runs gcloud auth and gcloud config commands but has no setup-gcloud action. Can cause deploy failures on runners without gcloud pre-installed.","impact":"Main-branch deployments can fail at auth step. Blocks releases and requires manual recovery.","examples":["deploy-firebase.yml L62-65 executes gcloud commands without setup step"]},"remediation":{"steps":["Add google-github-actions/setup-gcloud before gcloud commands","Or remove gcloud usage and rely on GOOGLE_APPLICATION_CREDENTIALS for firebase-tools auth","Add gcloud --version sanity check step"],"verification":["Run workflow on test branch and confirm auth step succeeds","Firebase deploy succeeds end-to-end"]},"evidence":["GitHub Copilot: gcloud auth issues","Claude Code Opus 4.5: deploy workflow gcloud setup missing","ChatGPT 5.2: gcloud used without install step"]}
{"canonical_id":"CANON-P-007","category":"Pattern Checker","title":"Pattern checker reports 93+ violations but CI check is non-blocking","fingerprint":"Pattern Checker::scripts/check-pattern-compliance.js::violations_not_gated","severity":"S2","effort":"E2","confidence":90,"consensus":"3/5","files":["scripts/check-pattern-compliance.js",".github/workflows/ci.yml"],"issue_details":{"description":"Pattern checker finds 93 potential violations but CI step has continue-on-error: true. Pattern regressions can land on main.","impact":"Inconsistent enforcement between local hooks and CI. Anti-patterns accumulate.","examples":["Pattern checker output: Found 93 potential pattern violation(s)","ci.yml sets pattern compliance step to non-blocking"]},"remediation":{"steps":["Switch CI to block on pattern violations for changed files (diff-based)","Allow baseline legacy files to pass until migrated","Add CI artifact summarizing violations trend"],"verification":["PR with pattern violation fails CI (for changed files)","Baseline-only files don't block PRs"]},"evidence":["Claude Sonnet 4.5: 93 violations allowed through","Claude Code Opus 4.5: pattern checker non-blocking with violations","ChatGPT 5.2: pattern scan reports 93 issues"]}
{"canonical_id":"CANON-P-008","category":"CI/CD","title":"Firebase CLI version unpinned in deploy workflow","fingerprint":"CI/CD::.github/workflows/deploy-firebase.yml::unpinned_firebase_tools","severity":"S2","effort":"E0","confidence":88,"consensus":"3/5","files":[".github/workflows/deploy-firebase.yml"],"issue_details":{"description":"Deploy workflow installs firebase-tools via npm install -g firebase-tools without version pin. Upstream releases can change deploy behavior unexpectedly.","impact":"Deploy behavior can change unexpectedly. Breaking deploys or altered output from firebase-tools updates.","examples":["deploy-firebase.yml L24-25 installs firebase-tools with no version pin"]},"remediation":{"steps":["Pin firebase-tools: npm install -g firebase-tools@<known-good>","Document pinned version and update cadence in DEVELOPMENT.md"],"verification":["Re-run deploy on separate days and confirm consistent firebase-tools version","Add firebase --version log line"]},"evidence":["GitHub Copilot: firebase-tools unpinned","Codex: firebase-tools version not locked","ChatGPT 5.2: firebase CLI unpinned"]}
{"canonical_id":"CANON-P-009","category":"CI/CD","title":"Auto-label workflow has invalid if: expression syntax","fingerprint":"CI/CD::.github/workflows/auto-label-review-tier.yml::invalid_if_syntax","severity":"S2","effort":"E0","confidence":92,"consensus":"2/5","files":[".github/workflows/auto-label-review-tier.yml"],"issue_details":{"description":"Step uses if: steps.assign-tier.outputs.tier == '4' without required ${{ }} wrapper. Can cause workflow evaluation errors.","impact":"Tier-4 warning step may never run. Reduces reliability of review-tier automation.","examples":["auto-label-review-tier.yml L196: if: steps.assign-tier.outputs.tier == '4'"]},"remediation":{"steps":["Change to if: ${{ steps.assign-tier.outputs.tier == '4' }}","Add actionlint check in CI for YAML syntax validation"],"verification":["Open PR triggering Tier 4 and confirm warning step runs","actionlint reports no syntax errors"]},"evidence":["Claude Code Opus 4.5: conditional syntax issue","ChatGPT 5.2: invalid if expression"]}
{"canonical_id":"CANON-P-010","category":"Workflow Docs","title":"DEVELOPMENT.md Husky section missing pattern compliance step","fingerprint":"Workflow Docs::DEVELOPMENT.md::husky_docs_incomplete","severity":"S3","effort":"E0","confidence":90,"consensus":"2/5","files":["DEVELOPMENT.md",".husky/pre-commit"],"issue_details":{"description":"DEVELOPMENT.md lists pre-commit as ESLint, Prettier, Tests but omits the blocking npm run patterns:check step.","impact":"Surprise failures for contributors. Confusion about hook behavior.","examples":["DEVELOPMENT.md L492-499 omits pattern compliance",".husky/pre-commit includes blocking patterns:check"]},"remediation":{"steps":["Update DEVELOPMENT.md pre-commit table to include Pattern compliance","Keep tables aligned with .husky/* content"],"verification":["Doc tables match .husky/pre-commit and .husky/pre-push steps"]},"evidence":["Claude Code Opus 4.5: DEVELOPMENT.md missing patterns:check","ChatGPT 5.2: husky docs incomplete"]}
{"canonical_id":"CANON-P-011","category":"CI/CD","title":"CI workflow lacks explicit permissions block (security hardening)","fingerprint":"CI/CD::.github/workflows/ci.yml::missing_permissions_block","severity":"S3","effort":"E0","confidence":82,"consensus":"2/5","files":[".github/workflows/ci.yml"],"issue_details":{"description":"ci.yml has no permissions: block, relying on GitHub defaults. Explicitly setting minimal permissions is best practice.","impact":"Reduced security posture. Harder to reason about workflow capabilities.","examples":["ci.yml: no explicit permissions block"]},"remediation":{"steps":["Add permissions: { contents: read } at workflow level","Document required permissions per workflow in DEVELOPMENT.md"],"verification":["CI passes with restricted permissions","No steps require undocumented elevated permissions"]},"evidence":["Claude Code Opus 4.5: missing permissions block","ChatGPT 5.2: no explicit permissions"]}
{"canonical_id":"CANON-P-012","category":"Pattern Checker","title":"Pattern checker produces false positives for controlled npm install fallbacks","fingerprint":"Pattern Checker::scripts/check-pattern-compliance.js::signal_to_noise","severity":"S3","effort":"E1","confidence":75,"consensus":"2/5","files":["scripts/check-pattern-compliance.js",".claude/hooks/session-start.sh"],"issue_details":{"description":"Pattern checker flags npm install in automation even when it's documented fallback (prefers npm ci). Also emits MODULE_TYPELESS warning noise.","impact":"Alert fatigue reduces trust in checker. Real issues can be ignored.","examples":["Flags npm install in session-start.sh (documented fallback)","Node MODULE_TYPELESS warning at scan start"]},"remediation":{"steps":["Refine pattern rules: allowlist documented fallback blocks or annotation comments","Consider adding type: module to package.json or suppressing warning"],"verification":["Re-run pattern checker and confirm reduced false positives","No runtime regressions after module-type decision"]},"evidence":["Claude Sonnet 4.5: false positives in pattern checker","ChatGPT 5.2: pattern checker noise/false-positives"]}
{"canonical_id":"CANON-P-013","category":"Triggers","title":"Review trigger thresholds may cause alert fatigue for process changes","fingerprint":"Triggers::scripts/check-review-needed.js::threshold_calibration","severity":"S3","effort":"E1","confidence":50,"consensus":"2/5","files":["scripts/check-review-needed.js"],"issue_details":{"description":"Process category triggers review on ANY change in .github, .claude, .husky, or scripts/ (threshold=1). May cause frequent needs-review labels for minor edits.","impact":"If too frequent, contributors may ignore signal. Reduces effectiveness of review automation.","examples":["process threshold: files=1, broad filePattern"]},"remediation":{"steps":["If alert fatigue occurs, split into subcategories or require N files except for critical paths","Add override mechanism documented in REVIEW_POLICY"],"verification":["Observe PR label frequency over 2-4 weeks","Survey maintainers about signal quality"]},"evidence":["Claude Code Opus 4.5: review trigger sensitivity","ChatGPT 5.2: thresholds may be too sensitive"]}
{"canonical_id":"CANON-P-014","category":"CI/CD","title":"Deploy workflow secret handling may be brittle for multiline JSON","fingerprint":"CI/CD::.github/workflows/deploy-firebase.yml::secret_multiline_handling","severity":"S3","effort":"E1","confidence":45,"consensus":"1/5","files":[".github/workflows/deploy-firebase.yml"],"issue_details":{"description":"Workflow writes service account JSON via echo '...secret...' > file. Can be brittle if formatting/newlines differ across secret entry methods.","impact":"Intermittent auth failures depending on secret storage format.","examples":["deploy-firebase.yml L55-60 writes secret via echo"]},"remediation":{"steps":["Prefer base64-encoding JSON secret and decode during workflow","Add validation step checking file is valid JSON before use"],"verification":["Rotate secret and confirm deploy continues to work","Invalid JSON branch fails early with clear error"]},"evidence":["ChatGPT 5.2: secret multiline handling concern"]}
