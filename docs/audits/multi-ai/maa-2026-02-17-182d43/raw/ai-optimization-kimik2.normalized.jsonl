{"category":"ai-optimization","title":"SKILL.md file exceeds 500 lines with duplicated boilerplate","fingerprint":"ai-optimization::.claude/skills/audit-ai-optimization/SKILL.md::skill-bloat","severity":"S2","effort":"E2","confidence":85,"files":[".claude/skills/audit-ai-optimization/SKILL.md"],"why_it_matters":"The audit-ai-optimization SKILL.md is 632 lines (21.8KB), containing extensive duplicated boilerplate across sections. This wastes ~200 tokens per skill invocation and increases context window pressure. Similar patterns exist across 10+ audit skills.","suggested_fix":"Extract common sections (CRITICAL RETURN PROTOCOL, Persistence Rules, Stage templates) into a shared base file referenced by all audit skills. Target: reduce to <300 lines per skill.","acceptance_tests":["SKILL.md < 300 lines","Common sections referenced from shared base","No duplication of CRITICAL headers across audit skills"],"evidence":["File size: 632 lines (470 loc) ¬∑ 21.8 KB","Duplicated 'CRITICAL: Persistence Rules' section","Duplicated 'CRITICAL RETURN PROTOCOL' section","Stage template patterns repeated verbatim"]}
{"category":"ai-optimization","title":"Session-start hook is 505 lines with inline prompts >10 lines","fingerprint":"ai-optimization::.claude/hooks/session-start.js::hook-bloat","severity":"S2","effort":"E2","confidence":82,"files":[".claude/hooks/session-start.js"],"why_it_matters":"Session-start.js is 505 lines (16.7KB) and runs on EVERY session start. Large hooks on the critical path add latency and consume tokens before any user work begins. Contains verbose console output and inline formatting.","suggested_fix":"Move non-critical checks to PostToolUse hooks, extract verbose output to a separate debug module, use progressive disclosure (only show details on --verbose flag).","acceptance_tests":["Hook < 200 lines for critical path","Non-critical checks moved to lazy evaluation","Console output reduced by 50%"],"evidence":["505 lines (453 loc) ¬∑ 16.7 KB","console.log('üöÄ SessionStart Hook for sonash-v0') - verbose emoji output","Sequential execSync calls for version checks"]}
{"category":"ai-optimization","title":"Session-start hook uses execSync for version checks that could be cached","fingerprint":"ai-optimization::.claude/hooks/session-start.js::execsync-overhead","severity":"S1","effort":"E1","confidence":88,"files":[".claude/hooks/session-start.js"],"why_it_matters":"Hook spawns synchronous child processes for 'node -v' and 'npm -v' on every session start. Each execSync adds 50-200ms latency. Node.js versions rarely change within a session - this is wasteful.","suggested_fix":"Cache version info in .claude/state/versions.json with 1-hour TTL, or read from package.json engines field directly without spawning processes.","acceptance_tests":["No execSync for version-only checks","Version cache file exists in .claude/state/","Session start latency reduced by >100ms"],"evidence":["const nodeVersion = execSync('node -v', {encoding: 'utf8'}).trim();","const npmVersion = execSync('npm -v', {encoding: 'utf8'}).trim();","Lines 60-75: Sequential synchronous process spawning"]}
{"category":"ai-optimization","title":"Session-start hook performs sequential operations that could be parallelized","fingerprint":"ai-optimization::.claude/hooks/session-start.js::sequential-ops","severity":"S2","effort":"E2","confidence":80,"files":[".claude/hooks/session-start.js"],"why_it_matters":"Hook performs npm install, function builds, test compilation, and pattern checks sequentially. These are independent operations that could run in parallel, reducing session startup time by 30-50%.","suggested_fix":"Use Promise.all() for independent async operations, or execFile (async) instead of execSync for non-blocking operations.","acceptance_tests":["Independent operations use Promise.all()","Session start time < 50% of original","No regression in error handling"],"evidence":["Sequential pattern: execSync('npm install'), then execSync('npm run build:functions')","Lines 80-120: All operations are synchronous and sequential"]}
{"category":"ai-optimization","title":"Skills read entire large files when only headers/sections needed","fingerprint":"ai-optimization::.claude/skills/*/SKILL.md::full-file-read","severity":"S2","effort":"E2","confidence":78,"files":[".claude/skills/session-begin/",".claude/skills/audit-ai-optimization/SKILL.md"],"why_it_matters":"Skills appear to load full SKILL.md files (600+ lines) into context when only specific sections are needed for a given task. This wastes hundreds of tokens per skill invocation.","suggested_fix":"Implement section-based loading with markers (<!-- SECTION:quickref -->), read only required sections based on task parameters.","acceptance_tests":["Section markers in all SKILL.md files","Only required sections loaded per task","Token usage reduced by 30% for skill calls"],"evidence":["SKILL.md files average 400-600 lines","No section markers visible in audit-ai-optimization/SKILL.md","Progressive disclosure tiers mentioned but not enforced"]}
{"category":"ai-optimization","title":"10 audit skills share >50% identical structure without shared base","fingerprint":"ai-optimization::.claude/skills/audit-*/SKILL.md::skill-overlap","severity":"S2","effort":"E3","confidence":85,"files":[".claude/skills/audit-code/SKILL.md",".claude/skills/audit-documentation/SKILL.md",".claude/skills/audit-performance/SKILL.md",".claude/skills/audit-security/SKILL.md",".claude/skills/audit-refactoring/SKILL.md",".claude/skills/audit-process/SKILL.md",".claude/skills/audit-enhancements/SKILL.md",".claude/skills/audit-engineering-productivity/SKILL.md",".claude/skills/audit-health/SKILL.md"],"why_it_matters":"All 9 audit skills follow identical 3-stage parallel agent pattern with duplicated CRITICAL sections, persistence rules, and return protocols. This is maintenance overhead and bloats the skill index.","suggested_fix":"Create base audit skill template with common sections, use skill parameters to specify audit domain. Consolidate into /audit --domain=code|documentation|performance|security.","acceptance_tests":["Single base audit skill with domain parameter","9 individual skills reference base template","SKILL_INDEX.md updated to show parameterized usage"],"evidence":["SKILL_INDEX.md shows 9 separate audit skills","All audit skills have 'Stage 1/2/3' structure","All contain identical 'CRITICAL RETURN PROTOCOL' section"]}
{"category":"ai-optimization","title":"Filesystem MCP server configured but noted as unused","fingerprint":"ai-optimization::.mcp.json::unused-mcp-server","severity":"S3","effort":"E0","confidence":92,"files":[".mcp.json"],"why_it_matters":"The filesystem MCP server is configured but has an explicit note stating it 'duplicates native Read/Write/Glob tools' and is 'disabled since no skills reference mcp__filesystem__ tools'. This is dead configuration.","suggested_fix":"Remove the filesystem MCP server entry from .mcp.json since it's explicitly noted as unused and duplicates native capabilities.","acceptance_tests":["filesystem entry removed from .mcp.json","No skills reference mcp__filesystem__ tools","MCP config validation passes"],"evidence":["'_note': 'filesystem MCP duplicates native Read/Write/Glob tools ‚Äî disabled since no skills reference mcp__filesystem__ tools'","Server still configured with command/args despite being 'disabled'"]}
{"category":"ai-optimization","title":"State JSONL files growing without bounds - reviews.jsonl is 18.6KB","fingerprint":"ai-optimization::.claude/state/reviews.jsonl::unbounded-growth","severity":"S2","effort":"E2","confidence":80,"files":[".claude/state/reviews.jsonl",".claude/state/health-score-log.jsonl",".claude/state/hook-warnings-log.jsonl"],"why_it_matters":"reviews.jsonl is 18.6KB with 31 lines and growing with each PR. Without rotation or compaction, these files will exceed 100KB quickly, slowing down hook operations that read them.","suggested_fix":"Implement log rotation in compaction-handoff.js - archive entries older than 30 days to .claude/state/archive/, keep only last 50 entries in active file.","acceptance_tests":["Log rotation script runs daily","Archive directory contains dated backups","Active files stay under 50KB"],"evidence":["reviews.jsonl: 31 lines ¬∑ 18.6 KB","Last commit shows daily updates to state files","No rotation logic visible in compaction-handoff.js filename"]}
{"category":"ai-optimization","title":"Session-start hook produces verbose console output every session","fingerprint":"ai-optimization::.claude/hooks/session-start.js::verbose-output","severity":"S3","effort":"E0","confidence":90,"files":[".claude/hooks/session-start.js"],"why_it_matters":"Hook outputs decorative banners ('‚îÅ' repeated 66 times), emoji icons, and verbose section headers on EVERY session start. This adds ~20-30 lines of noise to every session with no functional value.","suggested_fix":"Replace verbose banners with single-line status, use --verbose flag for detailed output, remove decorative separators.","acceptance_tests":["Console output < 10 lines in normal mode","--verbose flag available for detailed output","No decorative banner characters"],"evidence":["console.log('‚îÅ'.repeat(66)) - decorative separator","console.log('üöÄ SessionStart Hook for sonash-v0') - emoji output","console.log('üìã Environment:') - verbose section headers"]}
{"category":"ai-optimization","title":"Hooks use string manipulation where JSON.parse should be used","fingerprint":"ai-optimization::.claude/hooks/*.js::fragile-parsing","severity":"S2","effort":"E1","confidence":75,"files":[".claude/hooks/state-utils.js",".claude/hooks/commit-tracker.js"],"why_it_matters":"Based on commit messages referencing 'fragile parsing patterns' and file names like 'state-utils.js', hooks likely use manual string splitting for JSONL/state file parsing instead of proper JSON.parse, risking corruption on edge cases.","suggested_fix":"Use JSON.parse() with try/catch for all JSON/JSONL parsing, use readline module for line-by-line JSONL processing instead of split('\\n').","acceptance_tests":["All JSON parsing uses JSON.parse()","JSONL files processed with readline or jsonl-parser","No manual string splitting on structured data"],"evidence":["Commit: 'Fix 8 fragile parsing patterns: resilient regex across 11 files'","File: state-utils.js likely handles state parsing","File: commit-tracker.js processes JSONL logs"]}
{"category":"ai-optimization","title":"Audit skill prompts may not consistently reference FALSE_POSITIVES.jsonl","fingerprint":"ai-optimization::.claude/skills/audit-ai-optimization/SKILL.md::missing-fp-exclusion","severity":"S2","effort":"E1","confidence":72,"files":[".claude/skills/audit-ai-optimization/SKILL.md"],"why_it_matters":"The FALSE_POSITIVES.jsonl file exists with 3 entries but audit skill prompts may not explicitly instruct agents to exclude these patterns, leading to duplicate findings and wasted verification effort.","suggested_fix":"Add explicit instruction to all audit skill prompts: 'Check docs/technical-debt/FALSE_POSITIVES.jsonl and exclude any findings matching these patterns.'","acceptance_tests":["All audit SKILL.md files reference FALSE_POSITIVES.jsonl","Agent prompts include FP exclusion instruction","No duplicate findings matching FP patterns"],"evidence":["FALSE_POSITIVES.jsonl exists with 3 verified false positive entries","Audit skill is 632 lines but FP reference not visible in preview","Finding DEBT-2598, DEBT-2615, DEBT-0107 are marked FALSE_POSITIVE"]}
{"category":"ai-optimization","title":"Shell script hooks may be redundant with Node.js versions","fingerprint":"ai-optimization::.claude/hooks/*.sh::redundant-shell-scripts","severity":"S3","effort":"E1","confidence":78,"files":[".claude/hooks/session-start.sh",".claude/hooks/analyze-user-request.sh",".claude/hooks/pattern-check.sh",".claude/hooks/check-mcp-servers.sh"],"why_it_matters":"Multiple .sh files exist alongside .js versions (session-start.sh + session-start.js). Based on commit messages, the project migrated to Node.js hooks for cross-platform compatibility. Shell versions may be orphaned.","suggested_fix":"Verify shell scripts are not referenced in .claude/settings.json or hooks.json, then archive to .claude/hooks/archive/ if truly unused.","acceptance_tests":["No .sh files referenced in settings.json","All hooks use Node.js versions exclusively","Shell scripts archived or deleted"],"evidence":["session-start.sh exists alongside session-start.js","Commit: 'Cross-platform replacement for session-start.sh'","analyze-user-request.sh + analyze-user-request.js pair exists"]}