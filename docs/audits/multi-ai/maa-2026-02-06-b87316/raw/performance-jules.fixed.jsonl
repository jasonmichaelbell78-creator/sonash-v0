{"category":"Rendering Performance","title":"Tab switching unmounts components causing redundant fetches","fingerprint":"Rendering::components/notebook/notebook-shell.tsx::unnecessary_unmount","severity":"S1","effort":"E1","confidence":100,"files":["components/notebook/notebook-shell.tsx"],"symbols":["NotebookShell","renderPage"],"performance_details":{"current_metric":"Full remount on tab switch","expected_improvement":"Instant tab switching, 0 redundant fetches","affected_metric":"render"},"optimization":{"description":"Prevent unmounting of active tabs by using CSS visibility toggling or a 'KeepAlive' pattern instead of conditional rendering.","code_example":"<div style={{ display: active ? 'block' : 'none' }}>...","verification":["Switch tabs and observe network panel - should see 0 new requests"]},"evidence":["components/notebook/notebook-shell.tsx:180"],"line":180,"why_it_matters":"Tab switching unmounts components causing redundant fetches","suggested_fix":"Review and address this finding","acceptance_tests":["Verify fix applied correctly"]}
{"category":"Rendering Performance","title":"High-frequency re-renders during typing in RecoveryNotepad","fingerprint":"Rendering::components/notebook/pages/today-page.tsx::typing_rerender","severity":"S2","effort":"E1","confidence":95,"files":["components/notebook/pages/today-page.tsx"],"symbols":["TodayPage","RecoveryNotepad"],"performance_details":{"current_metric":"Re-render per keystroke","expected_improvement":"Re-render only on debounce","affected_metric":"INP"},"optimization":{"description":"Isolate the notepad state into the child component or separate component, and only bubble up changes on blur or debounce.","verification":["React DevTools Profiler: Type in notepad, observe parent render count"]},"evidence":["components/notebook/pages/today-page.tsx:350"],"line":350,"why_it_matters":"High-frequency re-renders during typing in RecoveryNotepad","suggested_fix":"Review and address this finding","acceptance_tests":["Verify fix applied correctly"]}
{"category":"Data Fetching & Caching","title":"Multiple disjoint fetches for daily logs","fingerprint":"Data Fetching::components/notebook/pages/today-page.tsx::redundant_fetch","severity":"S2","effort":"E2","confidence":100,"files":["components/notebook/pages/today-page.tsx","components/notebook/visualizations/mood-sparkline.tsx"],"symbols":["TodayPage","MoodSparkline"],"performance_details":{"current_metric":"3 separate Firestore reads on load","expected_improvement":"1 consolidated read","affected_metric":"bundle"},"optimization":{"description":"Consolidate getHistory, calculateWeeklyStats (last 7 days), and onSnapshot (today) into a single context provider or hook that shares the data.","verification":["Network tab: Count firestore network requests on page load"]},"evidence":["components/notebook/pages/today-page.tsx:550","components/notebook/visualizations/mood-sparkline.tsx:20"],"line":550,"why_it_matters":"Multiple disjoint fetches for daily logs","suggested_fix":"Review and address this finding","acceptance_tests":["Verify fix applied correctly"]}
{"category":"Core Web Vitals","title":"Image optimization disabled globally","fingerprint":"Core Web Vitals::next.config.mjs::unoptimized_images","severity":"S1","effort":"E1","confidence":100,"files":["next.config.mjs"],"symbols":["nextConfig"],"performance_details":{"current_metric":"unoptimized: true","expected_improvement":"Reduced LCP and bandwidth","affected_metric":"LCP"},"optimization":{"description":"Remove unoptimized: true and configure a custom image loader compatible with Firebase Hosting (e.g., using Cloudinary or specialized Firebase loader).","verification":["Inspect image headers for WebP/AVIF format"]},"evidence":["next.config.mjs:15"],"line":15,"why_it_matters":"Image optimization disabled globally","suggested_fix":"Review and address this finding","acceptance_tests":["Verify fix applied correctly"]}
{"category":"Offline Support","title":"Writes rely on Cloud Functions, failing when offline","fingerprint":"Offline Support::lib/firestore-service.ts::cloud_function_write","severity":"S1","effort":"E3","confidence":100,"files":["lib/firestore-service.ts"],"symbols":["saveDailyLog","retryCloudFunction"],"performance_details":{"current_metric":"Fails when offline","expected_improvement":"Queued local writes","affected_metric":"Offline Support"},"optimization":{"description":"Implement an offline queue using IndexedDB or Redux Persist. Store actions locally when offline and replay them when online. Alternatively, switch to direct Firestore writes with robust security rules for better offline support.","verification":["Disconnect network, try saving, verify queue size > 0"]},"evidence":["lib/firestore-service.ts:180"],"line":180,"why_it_matters":"Writes rely on Cloud Functions, failing when offline","suggested_fix":"Review and address this finding","acceptance_tests":["Verify fix applied correctly"]}
{"category":"Core Web Vitals","title":"Large background image loads unoptimized","fingerprint":"Core Web Vitals::app/page.tsx::lcp_background","severity":"S2","effort":"E0","confidence":90,"files":["app/page.tsx"],"symbols":["Home"],"performance_details":{"current_metric":"Full JPEG load","expected_improvement":"Optimized WebP/AVIF","affected_metric":"LCP"},"optimization":{"description":"Optimize wood-table.jpg and serve via next/image (once enabled) or use a smaller placeholder/CSS gradient for immediate paint.","verification":["Lighthouse LCP score"]},"evidence":["app/page.tsx:25"],"line":25,"why_it_matters":"Large background image loads unoptimized","suggested_fix":"Review and address this finding","acceptance_tests":["Verify fix applied correctly"]}
{"category":"AI Performance Patterns","title":"Client-side filtering of daily logs","fingerprint":"AI Performance Patterns::components/notebook/pages/today-page.tsx::client_filter","severity":"S3","effort":"E1","confidence":85,"files":["components/notebook/pages/today-page.tsx"],"symbols":["calculateWeeklyStats"],"performance_details":{"current_metric":"JS-based filtering","expected_improvement":"Database-level filtering","affected_metric":"memory"},"optimization":{"description":"Refine the Firestore query to return exactly the needed data range, avoiding potential over-fetching if the query is not precise enough.","verification":["Check Firestore query constraints"]},"evidence":["components/notebook/pages/today-page.tsx:600"],"line":600,"why_it_matters":"Client-side filtering of daily logs","suggested_fix":"Review and address this finding","acceptance_tests":["Verify fix applied correctly"]}