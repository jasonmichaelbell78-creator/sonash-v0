{"category":"process","title":"69 TODO/FIXME comments in automation code indicate incomplete work","fingerprint":"process::automation/*::incomplete-todos","severity":"S2","effort":"E1","confidence":100,"files":[".github/workflows/*.yml",".claude/hooks/*.js","scripts/*.js"],"line":1,"description":"69 TODO, FIXME, XXX, or HACK comments found across GitHub workflows, Claude hooks, and standalone scripts. Indicates incomplete implementation, deferred error handling, or temporary workarounds.","evidence":["grep -r 'TODO|FIXME|XXX|HACK' across automation code -> 69 matches","Common in session-start.js (516 lines), agent-trigger-enforcer.js (308 lines)"],"remediation":{"steps":["Categorize TODOs by severity","File TDMS issues for S0/S1 items","Remove or implement S2/S3 items","Establish policy: No TODO >30 days in automation code"],"verification":["After cleanup: grep count <10","No TODO older than 30 days"]}}
{"category":"process","title":"2,020 console statements in scripts/ - potential unstructured logging","fingerprint":"process::scripts/*.js::console-logging","severity":"S2","effort":"E1","confidence":90,"files":["scripts/*.js"],"line":1,"description":"2,020 console.log/error/warn statements in scripts/. Average 23 per script. Suggests inconsistent logging patterns, missing structured logging, difficulty parsing logs.","evidence":["grep console.log/error/warn in scripts/ -> 2,020 matches","Average 23 console statements per script","No evidence of structured logger imports"],"remediation":{"steps":["Check if scripts/lib/ has logger module","Create scripts/lib/logger.js with log levels if not","Migrate critical scripts to structured logger","Add lint rule to warn on direct console.log in scripts/"],"verification":["Logger module created or identified","Top 20 scripts migrated"]}}
{"category":"process","title":"Large Claude hooks exceed 500 lines - session-start.js at 516 lines","fingerprint":"process::.claude/hooks/session-start.js::hook-complexity","severity":"S1","effort":"E2","confidence":100,"files":[".claude/hooks/session-start.js",".claude/hooks/stop-serena-dashboard.js",".claude/hooks/agent-trigger-enforcer.js",".claude/hooks/audit-s0s1-validator.js"],"line":1,"description":"4 Claude hooks exceed 300 lines: session-start.js (516), stop-serena-dashboard.js (391), agent-trigger-enforcer.js (308), audit-s0s1-validator.js (308). Large hooks are harder to understand, debug, test, and impact performance. Recommended max: 200 lines.","evidence":["session-start.js: 516 lines","stop-serena-dashboard.js: 391 lines","agent-trigger-enforcer.js: 308 lines","audit-s0s1-validator.js: 308 lines"],"remediation":{"steps":["Extract common functions to scripts/lib/hook-helpers.js","Refactor session-start.js: extract MCP check, dependency install, pattern check logic","Target: all hooks <300 lines"],"verification":["All hooks <300 lines","session-start.js <250 lines"]}}
{"category":"process","title":"Inconsistent fs module usage - 46 scripts use sync fs, 0 use fs/promises","fingerprint":"process::scripts/*.js::fs-sync-vs-async","severity":"S2","effort":"E1","confidence":100,"files":["scripts/*.js"],"line":1,"description":"All 46 scripts using filesystem operations use synchronous fs methods instead of async fs/promises. While acceptable for CLI scripts, creates inconsistency and missed parallel I/O opportunities in complex scripts.","evidence":["0 scripts use fs/promises","46 scripts use synchronous fs","All use readFileSync, writeFileSync, existsSync, statSync"],"remediation":{"steps":["Document policy: sync for simple scripts, async for complex/long-running","Migrate complex scripts (>300 lines) to fs/promises","No mixing sync and async in same script"],"verification":["scripts/README.md documents fs usage policy"]}}
{"category":"process","title":"Try-catch block mismatch - 491 try blocks vs 433 catch blocks","fingerprint":"process::scripts/*.js::try-catch-mismatch","severity":"S1","effort":"E1","confidence":85,"files":["scripts/*.js"],"line":1,"description":"Found 491 try blocks but only 433 catch blocks (58-block difference). Suggests unclosed try blocks, try without catch, or false positives from grep. Needs manual verification.","evidence":["grep 'try.*{' scripts/ -> 491 matches","grep 'catch.*{' scripts/ -> 433 matches","Difference: 58 potential missing catch blocks"],"remediation":{"steps":["Manual verification of top 10 largest scripts","Use ESLint rule 'no-unsafe-finally'","Add catch blocks with proper error logging using sanitize-error.js"],"verification":["ESLint configured to check try-catch pairing","Manual audit confirms all try blocks have catch/finally"]}}
{"category":"process","title":"Exit code inconsistency - 71 exit(0) vs 208 exit(1) calls","fingerprint":"process::scripts/*.js::exit-code-inconsistency","severity":"S2","effort":"E1","confidence":100,"files":["scripts/*.js"],"line":1,"description":"Scripts use process.exit(1) 3x more than process.exit(0) (208 vs 71). Missing explicit success exits, inconsistent exit code patterns. Best practice: always explicit exit codes.","evidence":["process.exit(0) -> 71 matches","process.exit(1) -> 208 matches","Ratio: 2.9x more failure exits than success exits"],"remediation":{"steps":["Audit top 20 scripts for exit code patterns","Add explicit process.exit(0) at end of successful execution","Document exit code conventions in scripts/README.md"],"verification":["scripts/README.md documents exit code conventions"]}}
{"category":"process","title":"SonarCloud automation duplication - 1 workflow + 7 scripts","fingerprint":"process::sonarcloud::automation-overlap","severity":"S2","effort":"E1","confidence":100,"files":[".github/workflows/sonarcloud.yml","scripts/debt/sync-sonarcloud.js","scripts/eval/eval-sonarcloud-report.js","scripts/generate-detailed-sonar-report.js","scripts/mcp/sonarcloud-server.js","scripts/verify-sonar-phase.js"],"line":1,"description":"SonarCloud integration has 1 GitHub workflow and 7 separate scripts. Potential for duplication of API calls, inconsistent data processing, unclear canonical source. Needs consolidation or clear separation of concerns.","evidence":["1 workflow: sonarcloud.yml","7 scripts: sync-sonarcloud.js, 3x eval-sonarcloud-*.js, generate-detailed-sonar-report.js, sonarcloud-server.js, verify-sonar-phase.js"],"remediation":{"steps":["Document SonarCloud automation architecture","Extract common API logic to scripts/lib/sonarcloud-api.js if duplication found","Add README explaining each script's purpose"],"verification":["Architecture documented","Each script has clear non-overlapping purpose"]}}
{"category":"process","title":"MCP servers configuration file missing or empty","fingerprint":"process::.claude/mcp-servers.json::missing-config","severity":"S1","effort":"E0","confidence":100,"files":[".claude/mcp-servers.json"],"line":1,"description":"MCP servers configuration file (.claude/mcp-servers.json) is missing or empty despite 5 servers being active. Config may be in .mcp.json instead or generated dynamically.","evidence":["cat .claude/mcp-servers.json -> no output","Session start hook reports 5 active MCP servers","Expected: JSON config with server definitions"],"remediation":{"steps":["Verify if .mcp.json is the canonical config","Document which file is the MCP config source of truth","Create .claude/mcp-servers.json if needed"],"verification":["MCP configuration file exists and is documented"]}}
{"category":"process","title":"No scheduled trigger for SonarCloud workflow","fingerprint":"process::.github/workflows/sonarcloud.yml::no-schedule","severity":"S3","effort":"E0","confidence":100,"files":[".github/workflows/sonarcloud.yml"],"line":1,"description":"SonarCloud workflow has no scheduled trigger. Runs only on manual trigger or push. Weekly schedule would ensure baseline health monitoring.","evidence":["No schedule: trigger in sonarcloud.yml","Workflow runs only on push/workflow_dispatch"],"remediation":{"steps":["Add weekly cron schedule: '0 9 * * 1'"],"verification":["Workflow file has schedule trigger"]}}
{"category":"process","title":"Shebang inconsistency across hooks and scripts","fingerprint":"process::hooks-scripts::shebang-inconsistency","severity":"S3","effort":"E0","confidence":100,"files":[".claude/hooks/*.sh","scripts/*.sh"],"line":1,"description":"Mixed shebang usage: 6 shell scripts use #!/bin/bash, no Node scripts use shebangs. Inconsistent bash vs sh. Minor portability concern.","evidence":["6 files with #!/bin/bash","0 files with #!/usr/bin/env node","All .js files called via 'node script.js'"],"remediation":{"steps":["Document shebang policy in DEVELOPMENT.md","Standardize shell shebangs to #!/usr/bin/env bash"],"verification":["All shell scripts use consistent shebang"]}}
{"category":"process","title":"Test environment variables duplicated in package.json scripts","fingerprint":"process::package.json::test-env-duplication","severity":"S2","effort":"E0","confidence":100,"files":["package.json"],"line":10,"description":"Test env vars (7 NEXT_PUBLIC_FIREBASE_* vars) duplicated across test and test:coverage npm scripts. If Firebase config changes, both must be updated.","evidence":["test script has 7 env vars","test:coverage duplicates same 7 env vars"],"remediation":{"steps":["Create .env.test file","Update scripts to use dotenv-cli"],"verification":["npm run test and test:coverage work with .env.test"]}}
{"category":"process","title":"Potential dead npm scripts - never called from other scripts or CI","fingerprint":"process::package.json::dead-scripts","severity":"S2","effort":"E1","confidence":40,"files":["package.json"],"line":1,"description":"SUSPECTED: 130 npm scripts defined. Some may be rarely/never used (dead code). Examples: learning:category, learning:since, override:list, lighthouse:desktop. Needs usage analysis.","evidence":["130 total npm scripts","Many specialized variants (learning:analyze, learning:dashboard, etc.)","Suspect low usage for some diagnostic/one-time scripts"],"remediation":{"steps":["Create audit script to search for each npm script usage","Mark scripts with 0 references as potentially dead","Survey team for manual usage"],"verification":["Usage report generated","Dead scripts removed or documented"]}}
{"category":"process","title":"Potential duplicate functionality across skills and hooks","fingerprint":"process::.claude::skill-hook-overlap","severity":"S2","effort":"E2","confidence":35,"files":[".claude/skills/",".claude/hooks/"],"line":1,"description":"SUSPECTED: 55 skills and 33 hooks may overlap. Example: session-start hook vs session-begin skill. Needs investigation to determine if intentional (different triggers) or duplication.","evidence":["55 skills + 33 hooks = 88 automation units","Naming overlap: session-start (hook) vs session-begin (skill)","Audit functionality in both hooks and skills"],"remediation":{"steps":["Create inventory of all 88 hooks+skills with purpose","Identify overlaps and determine if intentional","Extract shared logic to scripts/lib/ if duplicated"],"verification":["Inventory created","Overlaps justified or removed"]}}
{"category":"process","title":"No doctor/diagnostic script for quick health check","fingerprint":"process::scripts::missing-doctor-script","severity":"S3","effort":"E1","confidence":50,"files":["scripts/"],"line":1,"description":"SUSPECTED: No single npm run doctor or npm run health script. Developer must run multiple scripts. May exist under different name.","evidence":["No doctor, health, check-all, or validate-all script in npm scripts","Individual check scripts exist: lint, test, patterns:check, docs:check"],"remediation":{"steps":["Create npm run doctor: 'npm run lint && npm run test && npm run patterns:check && npm run docs:check && npm run deps:circular && npm run format:check'"],"verification":["npm run doctor exists and runs all critical checks"]}}
