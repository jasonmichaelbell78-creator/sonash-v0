{"category":"process","title":"Broken Circular Dependency Check","fingerprint":"process::package.json::broken_script","severity":"S1","effort":"E1","confidence":100,"files":["package.json"],"line":95,"description":"The deps:circular script fails because madge is not found in the path. This indicates a broken quality gate in CI.","evidence":["sh: 1: madge: not found","deps:circular uses madge --circular --extensions ts,tsx,js,jsx lib/ components/ app/"],"remediation":{"steps":["Update script to use npx madge or ensure madge is installed in the environment/CI."],"verification":["npm run deps:circular"]}}
{"category":"process","title":"Broken Unused Dependency Check","fingerprint":"process::knip::config_error","severity":"S1","effort":"E1","confidence":100,"files":["package.json","eslint.config.mjs"],"line":96,"description":"The deps:unused script (knip) fails to run due to module resolution errors with eslint.config.mjs. This breaks dead code detection.","evidence":["ERROR: Error loading /app/eslint.config.mjs","Reason: Cannot find module '@eslint/js'"],"remediation":{"steps":["Ensure npm install runs correctly in CI/Dev environment to install @eslint/js.","Verify knip configuration compatibility with flat ESLint config."],"verification":["npm run deps:unused"]}}
{"category":"process","title":"Missing MCP Server Configuration","fingerprint":"process::.claude/mcp-servers.json::missing_file","severity":"S2","effort":"E1","confidence":100,"files":[".claude/mcp-servers.json"],"line":0,"description":"The .claude/mcp-servers.json file is missing, but referenced in documentation and expected for MCP functionality. A template exists.","evidence":["File not found: .claude/mcp-servers.json","Found: mcp.global-template.json"],"remediation":{"steps":["Copy .claude/mcp.global-template.json to .claude/mcp-servers.json and configure as needed."],"verification":["ls -la .claude/mcp-servers.json"]}}
{"category":"process","title":"Redundant Hook Scripts","fingerprint":"process::.claude/hooks::duplication","severity":"S3","effort":"E1","confidence":100,"files":[".claude/hooks/analyze-user-request.sh",".claude/hooks/analyze-user-request.js"],"line":1,"description":"Multiple hooks have dual .sh and .js versions (e.g., analyze-user-request). Documentation states .sh are wrappers, but this adds maintenance overhead and potential confusion if environments differ.","evidence":["-rwxrwxr-x analyze-user-request.sh","-rw-rw-r-- analyze-user-request.js"],"remediation":{"steps":["Standardize on .js hooks since Node.js is required for the project anyway.","Remove .sh wrappers if not strictly required by legacy CLI constraints."],"verification":["ls .claude/hooks/"]}}
{"category":"process","title":"Monolithic Script Bloat","fingerprint":"process::scripts::bloat","severity":"S2","effort":"E3","confidence":100,"files":["scripts/aggregate-audit-findings.js","scripts/analyze-learning-effectiveness.js","scripts/check-review-needed.js"],"line":1,"description":"Several scripts are excessively large (>1000 lines), making them hard to maintain and test. aggregate-audit-findings.js is ~1900 lines.","evidence":["1934 scripts/aggregate-audit-findings.js","1271 scripts/analyze-learning-effectiveness.js"],"remediation":{"steps":["Refactor these scripts into smaller modules in scripts/lib/.","Add unit tests for the extracted logic."],"verification":["wc -l scripts/*.js"]}}
{"category":"process","title":"Test Runner Inconsistency","fingerprint":"process::testing::inconsistency","severity":"S3","effort":"E2","confidence":90,"files":["package.json"],"line":8,"description":"The project uses node --test in package.json scripts, but prompt/documentation mentions Vitest. This creates confusion about the testing strategy.","evidence":["test script uses node --test","Prompt/documentation mentions Vitest"],"remediation":{"steps":["Decide on a single test runner (Vitest recommended for React/Next.js).","Migrate node --test scripts to Vitest or update documentation."],"verification":["npm test"]}}
{"category":"process","title":"Orphaned Scripts","fingerprint":"process::scripts::dead_code","severity":"S3","effort":"E1","confidence":80,"files":["scripts/add-false-positive.js","scripts/generate-detailed-sonar-report.js"],"line":1,"description":"Several scripts in scripts/ are not referenced in package.json and may be unused dead code.","evidence":["scripts/add-false-positive.js exists but not in package.json scripts"],"remediation":{"steps":["Audit unreferenced scripts.","Add to package.json if useful, or delete if obsolete."],"verification":["ls scripts/"]}}
{"category":"process","title":"Redundant Sanitization Wrappers","fingerprint":"process::scripts/lib::wrapper","severity":"S3","effort":"E1","confidence":40,"files":["scripts/lib/sanitize-error.ts"],"line":1,"description":"sanitize-error.ts appears to be a thin wrapper around sanitize-error.js. This might be a transition artifact or unnecessary complexity.","evidence":["import sanitizeErrorModule from './sanitize-error.js';"],"remediation":{"steps":["Use the TS version directly or the JS version directly, avoid wrapping."],"verification":["Check usage in codebase"]}}
