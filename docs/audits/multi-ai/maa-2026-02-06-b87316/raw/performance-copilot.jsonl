{"category":"Bundle Size","title":"Tabs Array Recreated on Every Render","fingerprint":"Rendering::notebook-shell.tsx::array_recreation","severity":"S2","effort":"E0","confidence":95,"files":["components/notebook/notebook-shell.tsx"],"line":146,"symbols":["NotebookShell","tabs"],"performance_details":{"current_metric":"Array with 7 items recreated every render","expected_improvement":"Eliminate 6-10 unnecessary renders per second","affected_metric":"render"},"optimization":{"description":"Wrap tabs array creation in useMemo to prevent recreation on every render","code_example":"const tabs = useMemo(() => notebookModules.map((module) => ({\n  id: module.id,\n  label: module.label,\n  color: module.color,\n  planned: moduleIsStubbed(module),\n})), []);","verification":["Use React DevTools Profiler to measure render count","Verify tabs array reference stays stable"]},"evidence":["notebook-shell.tsx:146-151 - tabs created in component body"],"notes":"Quick win - 5 minute fix"}
{"category":"Bundle Size","title":"Framer Motion Overuse - Heavy Animation Library","fingerprint":"Bundle::package.json::framer_motion_size","severity":"S1","effort":"E2","confidence":90,"files":["package.json","components/notebook/sticky-note.tsx","components/celebrations/success-pulse.tsx","components/ui/empty-state.tsx","components/journal/entry-menu.tsx","components/journal/floating-pen.tsx","components/notebook/bookmark-ribbon.tsx","components/widgets/daily-quote-card.tsx"],"line":92,"symbols":["framer-motion"],"performance_details":{"current_metric":"~45KB gzipped for simple animations","expected_improvement":"Reduce bundle by 30-40KB using CSS animations","affected_metric":"bundle"},"optimization":{"description":"Replace framer-motion with CSS transitions for simple fade/scale animations. Keep for complex 3D transforms in notebook-shell.","code_example":"// Before (framer-motion):\n<motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} />\n\n// After (CSS):\n<div className=\"animate-fade-in\" /> // with @keyframes in CSS","verification":["Run npx @next/bundle-analyzer","Measure bundle size before/after","Test animation smoothness"]},"evidence":["10+ components import framer-motion for simple animations","sticky-note.tsx:15 - simple scale animation","floating-pen.tsx:14 - scale/rotate on hover","daily-quote-card.tsx:3 - fade-in animation"]}
{"category":"Rendering","title":"Lined Paper Divs Created in Render","fingerprint":"Rendering::notebook-shell.tsx::dom_array_creation","severity":"S2","effort":"E1","confidence":100,"files":["components/notebook/notebook-shell.tsx"],"line":245,"symbols":["NotebookShell"],"performance_details":{"current_metric":"25 DOM elements created every render","expected_improvement":"Zero re-renders for static decorations","affected_metric":"render"},"optimization":{"description":"Replace JavaScript-generated lines with CSS repeating-linear-gradient","code_example":"// CSS approach:\n.notebook-lines {\n  background-image: repeating-linear-gradient(\n    to bottom,\n    transparent 0px,\n    transparent 21px,\n    rgba(186, 230, 253, 0.3) 22px\n  );\n}","verification":["Use React DevTools to verify DOM count reduction","Measure render performance"]},"evidence":["notebook-shell.tsx:244-251 - [...Array(25)].map creates new array + 25 divs per render"]}
{"category":"Rendering","title":"Touch Handlers Recreated on Every Render","fingerprint":"Rendering::notebook-shell.tsx::inline_handlers","severity":"S2","effort":"E0","confidence":95,"files":["components/notebook/notebook-shell.tsx"],"line":262,"symbols":["NotebookShell"],"performance_details":{"current_metric":"3 touch handlers recreated every render","expected_improvement":"Stable function references, reduced re-renders","affected_metric":"INP"},"optimization":{"description":"Wrap touch handlers in useCallback to prevent recreation","code_example":"const handleTouchStart = useCallback((e: TouchEvent) => {\n  setTouchEnd(null);\n  setTouchStart(e.targetTouches[0].clientX);\n}, []);","verification":["Verify function reference stability with React DevTools","Test touch gestures still work"]},"evidence":["notebook-shell.tsx:262-270 - inline arrow functions in onTouchStart, onTouchMove, onTouchEnd"]}
{"category":"Rendering","title":"AccountSecuritySection Not Memoized","fingerprint":"Rendering::notebook-shell.tsx::missing_memo","severity":"S2","effort":"E0","confidence":90,"files":["components/notebook/notebook-shell.tsx"],"line":49,"symbols":["AccountSecuritySection"],"performance_details":{"current_metric":"Re-renders on every notebook shell update","expected_improvement":"Eliminate unnecessary re-renders when props unchanged","affected_metric":"render"},"optimization":{"description":"Wrap component in React.memo","verification":["Use React DevTools Profiler to verify render count","Test conditional rendering still works"]},"evidence":["notebook-shell.tsx:49-98 - functional component without memo"]}
{"category":"Rendering","title":"Admin Page Entire Page Marked as Client Component","fingerprint":"Bundle::app/admin/page.tsx::client_boundary","severity":"S1","effort":"E1","confidence":85,"files":["app/admin/page.tsx","app/dev/page.tsx"],"line":1,"symbols":["AdminPage","DevPage"],"performance_details":{"current_metric":"Entire page bundle sent to client","expected_improvement":"Reduce initial JS by extracting server-renderable parts","affected_metric":"bundle"},"optimization":{"description":"Split into server layout + client components for auth/interactive parts only","verification":["Check bundle size reduction","Verify SSR HTML includes static markup"]},"evidence":["app/admin/page.tsx:1 'use client' directive","app/dev/page.tsx:1 same pattern"]}
{"category":"Core Web Vitals","title":"Notebook Animation Delays Interactivity","fingerprint":"CoreWebVitals::notebook-shell.tsx::animation_blocking","severity":"S1","effort":"E1","confidence":80,"files":["components/notebook/notebook-shell.tsx"],"line":189,"symbols":["NotebookShell"],"performance_details":{"current_metric":"500ms animation blocks First Input Delay","expected_improvement":"Immediate interactivity with progressive enhancement","affected_metric":"INP"},"optimization":{"description":"Make animation non-blocking by using CSS transforms and will-change","verification":["Measure INP with Lighthouse","Test interactivity during animation"]},"evidence":["notebook-shell.tsx:189-195 - motion.div with 500ms duration transition"]}
{"category":"Offline Support","title":"No Offline Detection or Sync Queue","fingerprint":"Offline::global::no_offline_support","severity":"S1","effort":"E3","confidence":100,"files":["lib/firebase.ts","hooks/use-journal.ts"],"line":1,"symbols":["N/A"],"performance_details":{"current_metric":"No offline capability - data loss on network failure","expected_improvement":"Graceful offline mode with sync queue","affected_metric":"memory"},"optimization":{"description":"Implement offline detection, IndexedDB cache, and sync queue for writes","verification":["Test offline mode in DevTools","Verify data syncs on reconnect","Check for duplicate writes"]},"evidence":["No navigator.onLine usage found","No IndexedDB or localStorage sync queue","Firebase SDK handles some offline but app doesn't manage UI state"]}
