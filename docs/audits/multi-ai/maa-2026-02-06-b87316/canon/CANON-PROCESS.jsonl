{"category":"process","title":"Large Claude hooks exceed 500 lines - session-start.js at 516 lines","fingerprint":"process::.claude/hooks/session-start.js::hook-complexity","severity":"S1","effort":"E2","confidence":100,"files":[".claude/hooks/session-start.js",".claude/hooks/stop-serena-dashboard.js",".claude/hooks/agent-trigger-enforcer.js",".claude/hooks/audit-s0s1-validator.js"],"line":1,"description":"4 Claude hooks exceed 300 lines: session-start.js (516), stop-serena-dashboard.js (391), agent-trigger-enforcer.js (308), audit-s0s1-validator.js (308). Large hooks are harder to understand, debug, test, and impact performance. Recommended max: 200 lines.","evidence":["session-start.js: 516 lines","stop-serena-dashboard.js: 391 lines","agent-trigger-enforcer.js: 308 lines","audit-s0s1-validator.js: 308 lines"],"remediation":{"steps":["Extract common functions to scripts/lib/hook-helpers.js","Refactor session-start.js: extract MCP check, dependency install, pattern check logic","Target: all hooks <300 lines"],"verification":["All hooks <300 lines","session-start.js <250 lines"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::.claude/hooks/session-start.js::hook-complexity"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0001","status":"CONFIRMED"}
{"category":"process","title":"PostToolUse Write/Edit/MultiEdit hooks are 90% copy-pasted — extract shared hook list","fingerprint":"hooks::settings.json::hook_duplication","severity":"S1","effort":"E1","confidence":100,"files":[".claude/settings.json"],"line":33,"description":"In settings.json, PostToolUse matcher blocks for Write (lines 36-87), Edit (lines 91-137), and MultiEdit (lines 141-187) share 8 identical hooks. Only the first hook differs. This is ~150 lines of copy-paste that must be kept in sync. Any hook addition requires 3 edits.","evidence":["settings.json lines 36-87: Write hooks (10 hooks)","settings.json lines 91-137: Edit hooks (9 hooks, same 8 shared)","settings.json lines 141-187: MultiEdit hooks (9 hooks, same 8 shared)","audit-s0s1-validator.js only in Write, not Edit/MultiEdit"],"remediation":{"steps":["Document shared hook list in a comment at top of settings.json","Create validation script that checks Write/Edit/MultiEdit hooks are in sync","Add CI check for hook drift"],"verification":["CI catches drift between Write/Edit/MultiEdit hook lists"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"hooks::settings.json::hook_duplication"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0002","status":"CONFIRMED"}
{"category":"process","title":"Firebase Functions use Node 20 but CI uses Node 22 — version mismatch","fingerprint":"ci::ci.yml::node_version_mismatch","severity":"S1","effort":"E0","confidence":100,"files":[".github/workflows/ci.yml","functions/package.json"],"line":21,"description":"CI uses Node 22 (ci.yml:21) but functions/package.json specifies engines.node: '20'. CI tests run on different Node version than Firebase Functions deploy runtime. Could mask Node 20-specific issues.","evidence":["ci.yml:21 — node-version: '22'","functions/package.json:14 — engines.node: '20'"],"remediation":{"steps":["Upgrade functions to Node 22 if Firebase supports it","Or add separate CI job for functions/ using Node 20","Or change CI to Node 20"],"verification":["functions/package.json engines.node matches CI node-version"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"ci::ci.yml::node_version_mismatch"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0003","status":"CONFIRMED"}
{"category":"process","title":"Broken Circular Dependency Check","fingerprint":"process::package.json::broken_script","severity":"S1","effort":"E1","confidence":100,"files":["package.json"],"line":95,"description":"The deps:circular script fails because madge is not found in the path. This indicates a broken quality gate in CI.","evidence":["sh: 1: madge: not found","deps:circular uses madge --circular --extensions ts,tsx,js,jsx lib/ components/ app/"],"remediation":{"steps":["Update script to use npx madge or ensure madge is installed in the environment/CI."],"verification":["npm run deps:circular"]},"sources":[{"source":"jules","file":"process-jules.jsonl","original_fingerprint":"process::package.json::broken_script"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0004","status":"CONFIRMED"}
{"category":"process","title":"Broken Unused Dependency Check","fingerprint":"process::knip::config_error","severity":"S1","effort":"E1","confidence":100,"files":["package.json","eslint.config.mjs"],"line":96,"description":"The deps:unused script (knip) fails to run due to module resolution errors with eslint.config.mjs. This breaks dead code detection.","evidence":["ERROR: Error loading /app/eslint.config.mjs","Reason: Cannot find module '@eslint/js'"],"remediation":{"steps":["Ensure npm install runs correctly in CI/Dev environment to install @eslint/js.","Verify knip configuration compatibility with flat ESLint config."],"verification":["npm run deps:unused"]},"sources":[{"source":"jules","file":"process-jules.jsonl","original_fingerprint":"process::knip::config_error"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0005","status":"CONFIRMED"}
{"category":"process","title":"MCP servers configuration file missing or empty","fingerprint":"process::.claude/mcp-servers.json::missing-config","severity":"S1","effort":"E0","confidence":85,"files":[".claude/mcp-servers.json"],"line":1,"description":"MCP servers configuration file (.claude/mcp-servers.json) is missing or empty despite 5 servers being active. Config may be in .mcp.json instead or generated dynamically.","evidence":["cat .claude/mcp-servers.json -> no output","Session start hook reports 5 active MCP servers","Expected: JSON config with server definitions"],"remediation":{"steps":["Verify if .mcp.json is the canonical config","Document which file is the MCP config source of truth","Create .claude/mcp-servers.json if needed"],"verification":["MCP configuration file exists and is documented"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::.claude/mcp-servers.json::missing-config"}],"verified":false,"consensus_score":1.5,"canonical_id":"CANON-0006","status":"SUSPECTED"}
{"category":"process","title":"Try-catch block mismatch - 491 try blocks vs 433 catch blocks","fingerprint":"process::scripts/*.js::try-catch-mismatch","severity":"S1","effort":"E1","confidence":70,"files":["scripts/*.js"],"line":1,"description":"Found 491 try blocks but only 433 catch blocks (58-block difference). Suggests unclosed try blocks, try without catch, or false positives from grep. Needs manual verification.","evidence":["grep 'try.*{' scripts/ -> 491 matches","grep 'catch.*{' scripts/ -> 433 matches","Difference: 58 potential missing catch blocks"],"remediation":{"steps":["Manual verification of top 10 largest scripts","Use ESLint rule 'no-unsafe-finally'","Add catch blocks with proper error logging using sanitize-error.js"],"verification":["ESLint configured to check try-catch pairing","Manual audit confirms all try blocks have catch/finally"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::scripts/*.js::try-catch-mismatch"}],"verified":false,"consensus_score":1,"canonical_id":"CANON-0007","status":"SUSPECTED"}
{"category":"process","title":"Install/build can fail due to missing local file dependency (@dataconnect/generated)","fingerprint":"npm-scripts::package.json::missing-local-file-dependency","severity":"S0","effort":"E1","confidence":95,"files":["package.json"],"line":76,"description":"package.json declares a local file dependency @dataconnect/generated: file:src/dataconnect-generated, but src/ (and that target directory) does not exist in this repo snapshot. This will break npm ci/npm install in CI and for contributors unless the folder is generated/checked out via another mechanism.","evidence":["package.json:76-78 '@dataconnect/generated': 'file:src/dataconnect-generated'","repo check: test -d src/dataconnect-generated -> MISSING","ls -la src -> (no src dir)"],"remediation":{"steps":["Decide source-of-truth for the generated package: commit it, generate it in a preinstall/prepare step, or remove the dependency if unused.","If generation is intended: add a deterministic script and ensure CI runs it before npm ci.","Document the generation requirement in DEVELOPMENT.md."],"verification":["Run npm ci on a clean checkout.","Run CI workflow to confirm install step succeeds."]},"sources":[{"source":"chatgpt","file":"process-chatgpt.jsonl","original_fingerprint":"npm-scripts::package.json::missing-local-file-dependency"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0008","status":"CONFIRMED"}
{"category":"process","title":"DEVELOPMENT.md is stale vs actual pre-push gate (docs say it runs tests; hook no longer does)","fingerprint":"husky::DEVELOPMENT.md::pre-push-docs-out-of-sync","severity":"S2","effort":"E0","confidence":92,"files":["DEVELOPMENT.md",".husky/pre-push"],"line":584,"description":"Developer documentation claims .husky/pre-push runs npm test, but the actual hook explicitly states tests were removed and does not run them. This creates process confusion and undermines trust in the documented gates.","evidence":["DEVELOPMENT.md:582-588 shows pre-push table with 'Tests | npm test | YES - blocks push'",".husky/pre-push:6-14 shows tests were removed: 'Removed duplicate test run - saves 50-60s per push'"],"remediation":{"steps":["Update DEVELOPMENT.md pre-push table to match current .husky/pre-push steps.","Add a short note explaining where tests run now (pre-commit conditional + CI always)."],"verification":["Confirm DEVELOPMENT.md table matches .husky/pre-push contents."]},"sources":[{"source":"chatgpt","file":"process-chatgpt.jsonl","original_fingerprint":"husky::DEVELOPMENT.md::pre-push-docs-out-of-sync"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0009","status":"CONFIRMED"}
{"category":"process","title":"GitHub Actions supply-chain pinning is inconsistent (some workflows pinned to SHAs, others float on tags)","fingerprint":"github-actions::.github/workflows::inconsistent-action-pinning","severity":"S2","effort":"E1","confidence":90,"files":[".github/workflows/backlog-enforcement.yml",".github/workflows/ci.yml"],"line":18,"description":"Some workflows pin critical actions to full commit SHAs (good), while others use floating tags (e.g., @v4). This inconsistency makes the security posture uneven and complicates policy enforcement/review.","evidence":["backlog-enforcement.yml:18 uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2","ci.yml:16 uses: actions/checkout@v4"],"remediation":{"steps":["Define a repo policy: pin all third-party actions to SHAs.","Batch-update workflows to pinned SHAs, keeping version comments for readability."],"verification":["Add a workflow/job that reports zero unpinned uses: entries."]},"sources":[{"source":"chatgpt","file":"process-chatgpt.jsonl","original_fingerprint":"github-actions::.github/workflows::inconsistent-action-pinning"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0010","status":"CONFIRMED"}
{"category":"process","title":"Multiple TypeScript scripts in scripts/ are not wired to any npm script","fingerprint":"standalone-scripts::scripts/*.ts::unreachable-ts-scripts","severity":"S2","effort":"E1","confidence":88,"files":["package.json","scripts/seed-real-data.ts","scripts/enrich-addresses.ts","scripts/migrate-addresses.ts","scripts/seed-sober-living-data.ts"],"line":1,"description":"14 .ts scripts in scripts/ but no npm script invokes them and there is no visible TS execution path (tsx, ts-node, or build step). Dead code risk and ambiguity about supported golden path for data ops/migrations.","evidence":["scripts/ contains TS scripts: seed-real-data.ts, enrich-addresses.ts, migrate-addresses.ts, seed-sober-living-data.ts (14 total)","package.json scripts are all node scripts/*.js, none reference TS files"],"remediation":{"steps":["Decide which TS scripts are needed and archive the rest.","If TS scripts should be supported: add tsx runner and wire npm scripts.","If legacy: convert to .js (ESM) or remove."],"verification":["npm run --list confirms all operational scripts are reachable."]},"sources":[{"source":"chatgpt","file":"process-chatgpt.jsonl","original_fingerprint":"standalone-scripts::scripts/*.ts::unreachable-ts-scripts"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0011","status":"CONFIRMED"}
{"category":"process","title":"MCP server configuration sources are fragmented (.mcp.json vs .claude templates)","fingerprint":"mcp::.mcp.json::.claude-mcp-templates::config-source-ambiguity","severity":"S2","effort":"E1","confidence":85,"files":[".mcp.json",".claude/mcp.global-template.json",".claude/settings.json",".claude/hooks/check-mcp-servers.js"],"line":33,"description":"Claude SessionStart checks .mcp.json for MCP server availability, but the repo also contains .claude/mcp.global-template.json and multiple template/global settings files. Without a single canonical config location, teams risk editing the wrong file.","evidence":[".claude/hooks/check-mcp-servers.js:33-36 checks .mcp.json",".claude/settings.json includes MCP toggles","Repo contains .mcp.json, .mcp.json.example, .claude/mcp.global-template.json"],"remediation":{"steps":["Declare one canonical MCP config file (likely .mcp.json) and demote templates.","Document the config lifecycle in docs/guides/mcp.md."],"verification":["Run check-mcp-servers.js and confirm it matches documented config path."]},"sources":[{"source":"chatgpt","file":"process-chatgpt.jsonl","original_fingerprint":"mcp::.mcp.json::.claude-mcp-templates::config-source-ambiguity"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0012","status":"CONFIRMED"}
{"category":"process","title":"SonarCloud automation duplication - 1 workflow + 7 scripts","fingerprint":"process::sonarcloud::automation-overlap","severity":"S2","effort":"E1","confidence":100,"files":[".github/workflows/sonarcloud.yml","scripts/debt/sync-sonarcloud.js","scripts/eval/eval-sonarcloud-report.js","scripts/generate-detailed-sonar-report.js","scripts/mcp/sonarcloud-server.js","scripts/verify-sonar-phase.js"],"line":1,"description":"SonarCloud integration has 1 GitHub workflow and 7 separate scripts. Potential for duplication of API calls, inconsistent data processing, unclear canonical source. Needs consolidation or clear separation of concerns.","evidence":["1 workflow: sonarcloud.yml","7 scripts: sync-sonarcloud.js, 3x eval-sonarcloud-*.js, generate-detailed-sonar-report.js, sonarcloud-server.js, verify-sonar-phase.js"],"remediation":{"steps":["Document SonarCloud automation architecture","Extract common API logic to scripts/lib/sonarcloud-api.js if duplication found","Add README explaining each script's purpose"],"verification":["Architecture documented","Each script has clear non-overlapping purpose"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::sonarcloud::automation-overlap"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0013","status":"CONFIRMED"}
{"category":"process","title":"Test environment variables duplicated in package.json scripts","fingerprint":"process::package.json::test-env-duplication","severity":"S2","effort":"E0","confidence":100,"files":["package.json"],"line":10,"description":"Test env vars (7 NEXT_PUBLIC_FIREBASE_* vars) duplicated across test and test:coverage npm scripts. If Firebase config changes, both must be updated.","evidence":["test script has 7 env vars","test:coverage duplicates same 7 env vars"],"remediation":{"steps":["Create .env.test file","Update scripts to use dotenv-cli"],"verification":["npm run test and test:coverage work with .env.test"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::package.json::test-env-duplication"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0014","status":"CONFIRMED"}
{"category":"process","title":"Duplicate analyze-user-request: .sh and .js versions both exist, only .js is wired","fingerprint":"hooks::analyze-user-request.sh::dead_code","severity":"S2","effort":"E0","confidence":95,"files":[".claude/hooks/analyze-user-request.sh",".claude/hooks/analyze-user-request.js",".claude/settings.json"],"line":240,"description":"Both analyze-user-request.sh (4KB) and analyze-user-request.js (5KB) exist in .claude/hooks/. Settings.json only wires the .js version. The .sh is dead code. Similarly, session-start.sh and check-mcp-servers.sh exist alongside .js replacements.","evidence":["settings.json:240 wires analyze-user-request.js","analyze-user-request.js:3 says 'Cross-platform replacement for analyze-user-request.sh'","Both files exist in .claude/hooks/"],"remediation":{"steps":["Delete .claude/hooks/analyze-user-request.sh","Delete .claude/hooks/session-start.sh","Delete .claude/hooks/check-mcp-servers.sh"],"verification":["No settings.json entries reference .sh files"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"hooks::analyze-user-request.sh::dead_code"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0015","status":"CONFIRMED"}
{"category":"process","title":"Pre-commit hook is 281 lines with 13 checks — high latency risk","fingerprint":"hooks::pre-commit::bloat","severity":"S2","effort":"E2","confidence":90,"files":[".husky/pre-commit"],"line":1,"description":"Pre-commit hook runs 13 sequential checks: ESLint, lint-staged, pattern compliance, tests, CANON validation, skill validation, cross-doc deps, doc index staleness, doc headers, learning reminder, audit S0/S1, agent compliance, and debt validation. At 281 lines, likely takes 30-90 seconds per commit. No parallelization.","evidence":[".husky/pre-commit: 281 lines","13 distinct check blocks, each invoking npm run or node scripts/","No parallel execution (all sequential)"],"remediation":{"steps":["Profile actual pre-commit timing","Replace npm run with direct node invocations where possible","Consider parallel execution for independent checks","Move non-blocking checks to post-commit hook"],"verification":["Time pre-commit before and after optimization"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"hooks::pre-commit::bloat"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0016","status":"CONFIRMED"}
{"category":"process","title":"Pattern compliance checked in BOTH pre-commit and pre-push — redundant","fingerprint":"hooks::pre-push::duplicate_pattern_check","severity":"S2","effort":"E0","confidence":100,"files":[".husky/pre-commit",".husky/pre-push"],"line":34,"description":"Pattern compliance (npm run patterns:check) runs as a BLOCKING check in both pre-commit (line 34) AND pre-push (line 26). Since pre-commit already blocks on failure, the pre-push check is redundant.","evidence":[".husky/pre-commit:34-42 — patterns:check blocking",".husky/pre-push:25-35 — patterns:check blocking (same command)"],"remediation":{"steps":["Remove patterns:check from pre-push","Keep CI workflow check as backup gate"],"verification":["CI still runs pattern compliance","Pre-commit still blocks on pattern violations"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"hooks::pre-push::duplicate_pattern_check"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0017","status":"CONFIRMED"}
{"category":"process","title":"CI workflow has 18 steps in lint-typecheck-test job — long serial pipeline","fingerprint":"ci::ci.yml::serial_pipeline","severity":"S2","effort":"E2","confidence":85,"files":[".github/workflows/ci.yml"],"line":10,"description":"CI lint-typecheck-test job runs 18 steps serially. Many are independent and could run in parallel jobs (ESLint, Prettier, circular deps, type check). Estimated 5-10 min CI times.","evidence":["ci.yml:10-131 — single job with 18 steps","No matrix or parallel job strategy","Steps like ESLint, Prettier, circular deps, type check are independent"],"remediation":{"steps":["Split into parallel jobs: lint+format, type-check, tests, pattern-checks, debt-validation","Use needs: dependency graph","Share node_modules via cache"],"verification":["CI total time decreases","All checks still run and gate PRs"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"ci::ci.yml::serial_pipeline"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0018","status":"CONFIRMED"}
{"category":"process","title":"Oversized scripts: aggregate-audit-findings.js (63KB), check-pattern-compliance.js (45KB)","fingerprint":"scripts::aggregate-audit-findings.js::oversized_scripts","severity":"S2","effort":"E2","confidence":95,"files":["scripts/aggregate-audit-findings.js","scripts/check-pattern-compliance.js","scripts/analyze-learning-effectiveness.js","scripts/check-review-needed.js","scripts/validate-audit.js"],"line":1,"description":"Multiple scripts exceed 30KB: aggregate-audit-findings.js (63KB), analyze-learning-effectiveness.js (47KB), check-pattern-compliance.js (45KB), check-review-needed.js (40KB), validate-audit.js (30KB). Unmaintainable monoliths that likely don't use scripts/lib/ shared utilities.","evidence":["scripts/aggregate-audit-findings.js: 63,430 bytes","scripts/analyze-learning-effectiveness.js: 47,047 bytes","scripts/check-pattern-compliance.js: 45,605 bytes","scripts/check-review-needed.js: 40,692 bytes","scripts/validate-audit.js: 30,816 bytes"],"remediation":{"steps":["Extract common JSONL parsing, file traversal, reporting utilities to scripts/lib/","Break large scripts into modules","Target <500 lines per script file"],"verification":["Largest script < 20KB","scripts/lib/ contains shared utilities"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"scripts::aggregate-audit-findings.js::oversized_scripts"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0019","status":"CONFIRMED"}
{"category":"process","title":"enrichment_failures.json is committed data artifact in scripts/","fingerprint":"scripts::enrichment_failures.json::committed_data","severity":"S2","effort":"E0","confidence":95,"files":["scripts/enrichment_failures.json"],"line":1,"description":"scripts/enrichment_failures.json (6KB) is a data artifact from one-time geocoding enrichment. Should not be version controlled.","evidence":["scripts/enrichment_failures.json: 6,185 bytes","scripts/enrich-addresses.ts: related enrichment script","scripts/retry-failures.ts: retry script referencing failures"],"remediation":{"steps":["Add to .gitignore","Remove from git tracking: git rm --cached scripts/enrichment_failures.json"],"verification":["File not tracked by git"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"scripts::enrichment_failures.json::committed_data"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0020","status":"CONFIRMED"}
{"category":"process","title":"session-start.sh is 15KB — extremely large and dead code","fingerprint":"hooks::session-start.sh::oversized_hook","severity":"S2","effort":"E1","confidence":95,"files":[".claude/hooks/session-start.sh"],"line":1,"description":"session-start.sh is 15,166 bytes (~400+ lines) and is dead code since settings.json wires session-start.js instead. Includes dependency caching, hash computation, npm install, Functions build, test compilation.","evidence":[".claude/hooks/session-start.sh: 15,166 bytes","settings.json:10 — wires session-start.js, not session-start.sh"],"remediation":{"steps":["Delete session-start.sh (dead code)","If session-start.js is similarly large, extract build logic to scripts/setup-session.js"],"verification":["Session hooks are <100 lines"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"hooks::session-start.sh::oversized_hook"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0021","status":"CONFIRMED"}
{"category":"process","title":"Monolithic Script Bloat","fingerprint":"process::scripts::bloat","severity":"S2","effort":"E3","confidence":100,"files":["scripts/aggregate-audit-findings.js","scripts/analyze-learning-effectiveness.js","scripts/check-review-needed.js"],"line":1,"description":"Several scripts are excessively large (>1000 lines), making them hard to maintain and test. aggregate-audit-findings.js is ~1900 lines.","evidence":["1934 scripts/aggregate-audit-findings.js","1271 scripts/analyze-learning-effectiveness.js"],"remediation":{"steps":["Refactor these scripts into smaller modules in scripts/lib/.","Add unit tests for the extracted logic."],"verification":["wc -l scripts/*.js"]},"sources":[{"source":"jules","file":"process-jules.jsonl","original_fingerprint":"process::scripts::bloat"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0022","status":"CONFIRMED"}
{"category":"process","title":"69 TODO/FIXME comments in automation code indicate incomplete work","fingerprint":"process::automation/*::incomplete-todos","severity":"S2","effort":"E1","confidence":85,"files":[".github/workflows/*.yml",".claude/hooks/*.js","scripts/*.js"],"line":1,"description":"69 TODO, FIXME, XXX, or HACK comments found across GitHub workflows, Claude hooks, and standalone scripts. Indicates incomplete implementation, deferred error handling, or temporary workarounds.","evidence":["grep -r 'TODO|FIXME|XXX|HACK' across automation code -> 69 matches","Common in session-start.js (516 lines), agent-trigger-enforcer.js (308 lines)"],"remediation":{"steps":["Categorize TODOs by severity","File TDMS issues for S0/S1 items","Remove or implement S2/S3 items","Establish policy: No TODO >30 days in automation code"],"verification":["After cleanup: grep count <10","No TODO older than 30 days"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::automation/*::incomplete-todos"}],"verified":false,"consensus_score":1.5,"canonical_id":"CANON-0023","status":"SUSPECTED"}
{"category":"process","title":"Inconsistent fs module usage - 46 scripts use sync fs, 0 use fs/promises","fingerprint":"process::scripts/*.js::fs-sync-vs-async","severity":"S2","effort":"E1","confidence":85,"files":["scripts/*.js"],"line":1,"description":"All 46 scripts using filesystem operations use synchronous fs methods instead of async fs/promises. While acceptable for CLI scripts, creates inconsistency and missed parallel I/O opportunities in complex scripts.","evidence":["0 scripts use fs/promises","46 scripts use synchronous fs","All use readFileSync, writeFileSync, existsSync, statSync"],"remediation":{"steps":["Document policy: sync for simple scripts, async for complex/long-running","Migrate complex scripts (>300 lines) to fs/promises","No mixing sync and async in same script"],"verification":["scripts/README.md documents fs usage policy"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::scripts/*.js::fs-sync-vs-async"}],"verified":false,"consensus_score":1.5,"canonical_id":"CANON-0024","status":"SUSPECTED"}
{"category":"process","title":"Exit code inconsistency - 71 exit(0) vs 208 exit(1) calls","fingerprint":"process::scripts/*.js::exit-code-inconsistency","severity":"S2","effort":"E1","confidence":85,"files":["scripts/*.js"],"line":1,"description":"Scripts use process.exit(1) 3x more than process.exit(0) (208 vs 71). Missing explicit success exits, inconsistent exit code patterns. Best practice: always explicit exit codes.","evidence":["process.exit(0) -> 71 matches","process.exit(1) -> 208 matches","Ratio: 2.9x more failure exits than success exits"],"remediation":{"steps":["Audit top 20 scripts for exit code patterns","Add explicit process.exit(0) at end of successful execution","Document exit code conventions in scripts/README.md"],"verification":["scripts/README.md documents exit code conventions"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::scripts/*.js::exit-code-inconsistency"}],"verified":false,"consensus_score":1.5,"canonical_id":"CANON-0025","status":"SUSPECTED"}
{"category":"process","title":"Potential dead npm scripts - never called from other scripts or CI","fingerprint":"process::package.json::dead-scripts","severity":"S2","effort":"E1","confidence":40,"files":["package.json"],"line":1,"description":"SUSPECTED: 130 npm scripts defined. Some may be rarely/never used (dead code). Examples: learning:category, learning:since, override:list, lighthouse:desktop. Needs usage analysis.","evidence":["130 total npm scripts","Many specialized variants (learning:analyze, learning:dashboard, etc.)","Suspect low usage for some diagnostic/one-time scripts"],"remediation":{"steps":["Create audit script to search for each npm script usage","Mark scripts with 0 references as potentially dead","Survey team for manual usage"],"verification":["Usage report generated","Dead scripts removed or documented"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::package.json::dead-scripts"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0026","status":"SUSPECTED"}
{"category":"process","title":"Potential duplicate functionality across skills and hooks","fingerprint":"process::.claude::skill-hook-overlap","severity":"S2","effort":"E2","confidence":35,"files":[".claude/skills/",".claude/hooks/"],"line":1,"description":"SUSPECTED: 55 skills and 33 hooks may overlap. Example: session-start hook vs session-begin skill. Needs investigation to determine if intentional (different triggers) or duplication.","evidence":["55 skills + 33 hooks = 88 automation units","Naming overlap: session-start (hook) vs session-begin (skill)","Audit functionality in both hooks and skills"],"remediation":{"steps":["Create inventory of all 88 hooks+skills with purpose","Identify overlaps and determine if intentional","Extract shared logic to scripts/lib/ if duplicated"],"verification":["Inventory created","Overlaps justified or removed"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::.claude::skill-hook-overlap"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0027","status":"SUSPECTED"}
{"category":"process","title":"Audit S0/S1 validator missing on Edit/MultiEdit hooks","fingerprint":"process::settings.json::audit-validator-missing-on-edit","severity":"S2","effort":"E1","confidence":75,"files":[".claude/settings.json"],"line":35,"description":"The PostToolUse hook config runs audit-s0s1-validator.js only for Write events, so editing audit JSONL files can bypass S0/S1 validation.","evidence":["audit-s0s1-validator.js present in Write hooks","audit-s0s1-validator.js absent from Edit and MultiEdit hooks"],"remediation":{"steps":["Add audit-s0s1-validator.js to the Edit and MultiEdit PostToolUse hook lists.","Optionally scope it to docs/audits/**/.jsonl to reduce unnecessary runs."],"verification":["Edit an audit JSONL file and confirm the validator runs"]},"sources":[{"source":"codex","file":"process-codex.jsonl","original_fingerprint":"process::settings.json::audit-validator-missing-on-edit"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0028","status":"SUSPECTED"}
{"category":"process","title":"check-edit-requirements.sh may be dead code like analyze-user-request.sh","fingerprint":"hooks::check-edit-requirements.sh::suspected_dead","severity":"S2","effort":"E0","confidence":35,"files":[".claude/hooks/check-edit-requirements.sh"],"line":1,"description":"SUSPECTED: check-edit-requirements.sh exists alongside check-edit-requirements.js. If .js version is wired in settings.json, the .sh is dead code.","evidence":["settings.json:94 references .claude/hooks/check-edit-requirements.js","check-edit-requirements.sh exists in .claude/hooks/"],"remediation":{"steps":["Verify check-edit-requirements.js exists","If yes, delete check-edit-requirements.sh"],"verification":["ls .claude/hooks/check-edit-requirements.*"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"hooks::check-edit-requirements.sh::suspected_dead"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0029","status":"SUSPECTED"}
{"category":"process","title":"scripts/lib/ may be underutilized — large scripts not importing shared code","fingerprint":"scripts::lib::underutilization","severity":"S2","effort":"E1","confidence":30,"files":["scripts/lib/"],"line":1,"description":"SUSPECTED: scripts/lib/ has 4 library files but the 5 largest scripts (63KB, 47KB, 45KB, 40KB, 30KB) may not import from lib/. Shared library pattern established but potentially not adopted.","evidence":["scripts/lib/ contains 4 files","5 scripts exceed 30KB"],"remediation":{"steps":["Check if large scripts import from scripts/lib/","If not, extract common patterns to lib/"],"verification":["grep -r 'scripts/lib' scripts/*.js | wc -l"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"scripts::lib::underutilization"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0030","status":"SUSPECTED"}
{"category":"process","title":"Firebase Functions may not have unit tests in CI","fingerprint":"ci::ci.yml::functions_test_gap","severity":"S2","effort":"E1","confidence":30,"files":[".github/workflows/ci.yml","functions/package.json"],"line":114,"description":"SUSPECTED: CI runs root npm run test:coverage but functions/package.json has no test script despite having firebase-functions-test as devDependency. Functions tests may not run in CI.","evidence":["ci.yml:114-115 — runs root npm run test:coverage","functions/package.json has no 'test' script","functions/package.json has firebase-functions-test as devDependency"],"remediation":{"steps":["Add test script to functions/package.json","Add CI step: cd functions && npm test"],"verification":["Functions have test coverage in CI"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"ci::ci.yml::functions_test_gap"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0031","status":"SUSPECTED"}
{"category":"process","title":"Missing MCP Server Configuration","fingerprint":"process::.claude/mcp-servers.json::missing_file","severity":"S2","effort":"E1","confidence":85,"files":[".claude/mcp-servers.json"],"line":0,"description":"The .claude/mcp-servers.json file is missing, but referenced in documentation and expected for MCP functionality. A template exists.","evidence":["File not found: .claude/mcp-servers.json","Found: mcp.global-template.json"],"remediation":{"steps":["Copy .claude/mcp.global-template.json to .claude/mcp-servers.json and configure as needed."],"verification":["ls -la .claude/mcp-servers.json"]},"sources":[{"source":"jules","file":"process-jules.jsonl","original_fingerprint":"process::.claude/mcp-servers.json::missing_file"}],"verified":false,"consensus_score":1.5,"canonical_id":"CANON-0032","status":"SUSPECTED"}
{"category":"process","title":"2,020 console statements in scripts/ - potential unstructured logging","fingerprint":"process::scripts/*.js::console-logging","severity":"S2","effort":"E1","confidence":75,"files":["scripts/*.js"],"line":1,"description":"2,020 console.log/error/warn statements in scripts/. Average 23 per script. Suggests inconsistent logging patterns, missing structured logging, difficulty parsing logs.","evidence":["grep console.log/error/warn in scripts/ -> 2,020 matches","Average 23 console statements per script","No evidence of structured logger imports"],"remediation":{"steps":["Check if scripts/lib/ has logger module","Create scripts/lib/logger.js with log levels if not","Migrate critical scripts to structured logger","Add lint rule to warn on direct console.log in scripts/"],"verification":["Logger module created or identified","Top 20 scripts migrated"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::scripts/*.js::console-logging"}],"verified":false,"consensus_score":1,"canonical_id":"CANON-0033","status":"SUSPECTED"}
{"category":"process","title":"Dead/orphaned Claude hook script retained after cross-platform migration (analyze-user-request.sh)","fingerprint":"claude-hooks::.claude/hooks/analyze-user-request.sh::orphaned-hook-script","severity":"S3","effort":"E0","confidence":95,"files":[".claude/hooks/analyze-user-request.sh",".claude/hooks/analyze-user-request.js",".claude/settings.json"],"line":1,"description":"The repo keeps both the legacy shell hook and the JS replacement, but settings execute the JS version. Retaining the unused shell hook increases maintenance surface and risks future divergence/confusion.","evidence":[".claude/hooks/analyze-user-request.js:5-7 'Cross-platform replacement for analyze-user-request.sh'",".claude/settings.json:240 uses node .claude/hooks/analyze-user-request.js","Both files exist in .claude/hooks/"],"remediation":{"steps":["Remove .claude/hooks/analyze-user-request.sh or move to archive."],"verification":["Search for references to analyze-user-request.sh (should be none)."]},"sources":[{"source":"chatgpt","file":"process-chatgpt.jsonl","original_fingerprint":"claude-hooks::.claude/hooks/analyze-user-request.sh::orphaned-hook-script"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0034","status":"CONFIRMED"}
{"category":"process","title":"Husky pre-commit uses npx --no-install lint-staged, which can skip formatting in fresh environments","fingerprint":"husky::.husky/pre-commit::npx-no-install-friction","severity":"S3","effort":"E0","confidence":80,"files":[".husky/pre-commit"],"line":22,"description":"The pre-commit hook uses npx --no-install lint-staged (good for supply-chain safety), but will skip when devDependencies aren't installed. Should be documented as part of golden-path setup.","evidence":[".husky/pre-commit:20-35 shows npx --no-install lint-staged with fallback warning"],"remediation":{"steps":["In DEVELOPMENT.md setup, add note that lint-staged runs only after npm ci.","Optionally add npm run setup bootstrap script."],"verification":["Fresh clone: npm ci then commit confirms lint-staged runs."]},"sources":[{"source":"chatgpt","file":"process-chatgpt.jsonl","original_fingerprint":"husky::.husky/pre-commit::npx-no-install-friction"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0035","status":"CONFIRMED"}
{"category":"process","title":"No scheduled trigger for SonarCloud workflow","fingerprint":"process::.github/workflows/sonarcloud.yml::no-schedule","severity":"S3","effort":"E0","confidence":100,"files":[".github/workflows/sonarcloud.yml"],"line":1,"description":"SonarCloud workflow has no scheduled trigger. Runs only on manual trigger or push. Weekly schedule would ensure baseline health monitoring.","evidence":["No schedule: trigger in sonarcloud.yml","Workflow runs only on push/workflow_dispatch"],"remediation":{"steps":["Add weekly cron schedule: '0 9 * * 1'"],"verification":["Workflow file has schedule trigger"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::.github/workflows/sonarcloud.yml::no-schedule"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0036","status":"CONFIRMED"}
{"category":"process","title":"Pre-commit skips lint-staged when node_modules missing","fingerprint":"process::pre-commit::lint-staged-skipped","severity":"S3","effort":"E0","confidence":80,"files":[".husky/pre-commit"],"line":18,"description":"The pre-commit hook skips lint-staged when the devDependency is not installed, so auto-formatting does not run on fresh clones without node_modules.","evidence":["pre-commit checks npm list lint-staged and skips if not found","Prints warning but does not block commit"],"remediation":{"steps":["Document a one-time bootstrap command (npm ci) in DEVELOPMENT.md/CONTRIBUTING.","Optionally fall back to npm exec lint-staged when node_modules are absent."],"verification":["Clone repo without node_modules and run a commit to verify"]},"sources":[{"source":"codex","file":"process-codex.jsonl","original_fingerprint":"process::pre-commit::lint-staged-skipped"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0037","status":"CONFIRMED"}
{"category":"process","title":"ESLint inconsistency: root uses warn for unused-vars, functions/ uses error","fingerprint":"lint::eslint.config.mjs::severity_mismatch","severity":"S3","effort":"E0","confidence":100,"files":["eslint.config.mjs","functions/eslint.config.mjs"],"line":38,"description":"Root eslint.config.mjs sets @typescript-eslint/no-unused-vars to warn with argsIgnorePattern + varsIgnorePattern. Functions eslint.config.mjs sets it to error with only argsIgnorePattern. Functions config also lacks the security plugin that root has.","evidence":["eslint.config.mjs:38-41 — warn, argsIgnorePattern + varsIgnorePattern","functions/eslint.config.mjs:19 — error, argsIgnorePattern only","Root has eslint-plugin-security, functions/ does not"],"remediation":{"steps":["Add varsIgnorePattern to functions/eslint.config.mjs","Add eslint-plugin-security to functions/","Document intentional differences"],"verification":["cd functions && npm run lint passes","Both configs handle unused vars consistently"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"lint::eslint.config.mjs::severity_mismatch"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0038","status":"CONFIRMED"}
{"category":"process","title":"3 disabled MCP servers referenced in settings.json but not in .mcp.json","fingerprint":"mcp::settings.json::disabled_servers_referenced","severity":"S3","effort":"E0","confidence":85,"files":[".claude/settings.json",".mcp.json"],"line":3,"description":"settings.json disables 3 MCP servers: rube, serena, nextjs-devtools. But .mcp.json only defines 5 servers (filesystem, playwright, memory, git, sonarcloud). The disabled servers don't exist in .mcp.json — dead configuration.","evidence":["settings.json:3 — disabledMcpjsonServers: [rube, serena, nextjs-devtools]",".mcp.json defines: filesystem, playwright, memory, git, sonarcloud"],"remediation":{"steps":["Remove rube, serena, nextjs-devtools from disabledMcpjsonServers"],"verification":["disabledMcpjsonServers only references servers in .mcp.json"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"mcp::settings.json::disabled_servers_referenced"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0039","status":"CONFIRMED"}
{"category":"process","title":"AskUserQuestion and Task matchers use explicit case variants instead of (?i) flag","fingerprint":"hooks::settings.json::askuserquestion_matcher","severity":"S3","effort":"E0","confidence":100,"files":[".claude/settings.json"],"line":210,"description":"AskUserQuestion PostToolUse matcher uses explicit case variants (askuserquestion|AskUserQuestion|ASKUSERQUESTION) instead of the (?i) flag used by Write/Edit matchers. Mixed-case variants like askUserQuestion would not match. Same issue with Task matcher on line 220.","evidence":["settings.json:210 — explicit case variants for AskUserQuestion","settings.json:220 — explicit case variants for Task","settings.json:35 — '^(?i)write' (correct pattern)","settings.json:90 — '^(?i)edit' (correct pattern)"],"remediation":{"steps":["Change AskUserQuestion matcher to use (?i) flag","Change Task matcher to use (?i) flag"],"verification":["All PostToolUse matchers use (?i) flag consistently"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"hooks::settings.json::askuserquestion_matcher"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0040","status":"CONFIRMED"}
{"category":"process","title":"Multiple one-time migration scripts still in scripts/ directory","fingerprint":"scripts::migrate-*.ts::dead_migration_scripts","severity":"S3","effort":"E1","confidence":80,"files":["scripts/migrate-addresses.ts","scripts/migrate-library-content.ts","scripts/migrate-meetings-dayindex.ts","scripts/migrate-to-journal.ts","scripts/seed-meetings.ts","scripts/seed-real-data.ts","scripts/seed-sober-living-data.ts"],"line":1,"description":"7+ migration and seed scripts (migrate-*.ts, seed-*.ts) appear to be one-time operations. Should be archived to scripts/archive/.","evidence":["scripts/migrate-addresses.ts, migrate-library-content.ts, migrate-meetings-dayindex.ts, migrate-to-journal.ts","scripts/seed-meetings.ts, seed-real-data.ts, seed-sober-living-data.ts"],"remediation":{"steps":["Create scripts/archive/ directory","Move completed migration scripts there"],"verification":["scripts/ contains only active scripts"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"scripts::migrate-*.ts::dead_migration_scripts"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0041","status":"CONFIRMED"}
{"category":"process","title":"Redundant Hook Scripts","fingerprint":"process::.claude/hooks::duplication","severity":"S3","effort":"E1","confidence":100,"files":[".claude/hooks/analyze-user-request.sh",".claude/hooks/analyze-user-request.js"],"line":1,"description":"Multiple hooks have dual .sh and .js versions (e.g., analyze-user-request). Documentation states .sh are wrappers, but this adds maintenance overhead and potential confusion if environments differ.","evidence":["-rwxrwxr-x analyze-user-request.sh","-rw-rw-r-- analyze-user-request.js"],"remediation":{"steps":["Standardize on .js hooks since Node.js is required for the project anyway.","Remove .sh wrappers if not strictly required by legacy CLI constraints."],"verification":["ls .claude/hooks/"]},"sources":[{"source":"jules","file":"process-jules.jsonl","original_fingerprint":"process::.claude/hooks::duplication"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0042","status":"CONFIRMED"}
{"category":"process","title":"Test Runner Inconsistency","fingerprint":"process::testing::inconsistency","severity":"S3","effort":"E2","confidence":90,"files":["package.json"],"line":8,"description":"The project uses node --test in package.json scripts, but prompt/documentation mentions Vitest. This creates confusion about the testing strategy.","evidence":["test script uses node --test","Prompt/documentation mentions Vitest"],"remediation":{"steps":["Decide on a single test runner (Vitest recommended for React/Next.js).","Migrate node --test scripts to Vitest or update documentation."],"verification":["npm test"]},"sources":[{"source":"jules","file":"process-jules.jsonl","original_fingerprint":"process::testing::inconsistency"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0043","status":"CONFIRMED"}
{"category":"process","title":"Orphaned Scripts","fingerprint":"process::scripts::dead_code","severity":"S3","effort":"E1","confidence":80,"files":["scripts/add-false-positive.js","scripts/generate-detailed-sonar-report.js"],"line":1,"description":"Several scripts in scripts/ are not referenced in package.json and may be unused dead code.","evidence":["scripts/add-false-positive.js exists but not in package.json scripts"],"remediation":{"steps":["Audit unreferenced scripts.","Add to package.json if useful, or delete if obsolete."],"verification":["ls scripts/"]},"sources":[{"source":"jules","file":"process-jules.jsonl","original_fingerprint":"process::scripts::dead_code"}],"verified":true,"consensus_score":2,"canonical_id":"CANON-0044","status":"CONFIRMED"}
{"category":"process","title":"Potential duplication/overlap across documentation-related workflows and scripts","fingerprint":"ci-cd::docs-automation::potential-redundant-docs-gates","severity":"S3","effort":"E1","confidence":40,"files":[".github/workflows/docs-lint.yml",".github/workflows/ci.yml","package.json"],"line":1,"description":"SUSPECTED: Multiple doc gates across CI (docs-lint workflow + CI job's docs:check). Unclear whether layered intentionally or redundant.","evidence":["Multiple doc-related commands: npm run docs:check in ci.yml and dedicated docs-lint.yml workflow"],"remediation":{"steps":["Measure CI durations for docs-only PRs and confirm whether both provide distinct value.","If redundant, consolidate into one workflow."],"verification":["Compare CI runs on docs-only PRs before/after changes."]},"sources":[{"source":"chatgpt","file":"process-chatgpt.jsonl","original_fingerprint":"ci-cd::docs-automation::potential-redundant-docs-gates"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0045","status":"SUSPECTED"}
{"category":"process","title":"Shebang inconsistency across hooks and scripts","fingerprint":"process::hooks-scripts::shebang-inconsistency","severity":"S3","effort":"E0","confidence":85,"files":[".claude/hooks/*.sh","scripts/*.sh"],"line":1,"description":"Mixed shebang usage: 6 shell scripts use #!/bin/bash, no Node scripts use shebangs. Inconsistent bash vs sh. Minor portability concern.","evidence":["6 files with #!/bin/bash","0 files with #!/usr/bin/env node","All .js files called via 'node script.js'"],"remediation":{"steps":["Document shebang policy in DEVELOPMENT.md","Standardize shell shebangs to #!/usr/bin/env bash"],"verification":["All shell scripts use consistent shebang"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::hooks-scripts::shebang-inconsistency"}],"verified":false,"consensus_score":1.5,"canonical_id":"CANON-0046","status":"SUSPECTED"}
{"category":"process","title":"No doctor/diagnostic script for quick health check","fingerprint":"process::scripts::missing-doctor-script","severity":"S3","effort":"E1","confidence":50,"files":["scripts/"],"line":1,"description":"SUSPECTED: No single npm run doctor or npm run health script. Developer must run multiple scripts. May exist under different name.","evidence":["No doctor, health, check-all, or validate-all script in npm scripts","Individual check scripts exist: lint, test, patterns:check, docs:check"],"remediation":{"steps":["Create npm run doctor: 'npm run lint && npm run test && npm run patterns:check && npm run docs:check && npm run deps:circular && npm run format:check'"],"verification":["npm run doctor exists and runs all critical checks"]},"sources":[{"source":"claude-code","file":"process-claude-code.jsonl","original_fingerprint":"process::scripts::missing-doctor-script"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0047","status":"SUSPECTED"}
{"category":"process","title":"Shell hook wrappers appear unused by Claude settings","fingerprint":"process::hooks::unused-shell-wrappers","severity":"S3","effort":"E1","confidence":55,"files":[".claude/settings.json",".claude/hooks/analyze-user-request.sh"],"line":239,"description":"Claude hook configuration invokes JavaScript hooks but shell wrapper variants remain; if the CLI no longer references the .sh wrappers, this is redundant and can drift.","evidence":["settings.json wires analyze-user-request.js, not .sh","analyze-user-request.sh still exists in .claude/hooks/"],"remediation":{"steps":["Confirm whether any environments still call the .sh wrappers.","If unused, remove the .sh wrappers or mark them as deprecated in HOOKS.md."],"verification":["rg -n '.sh' .claude/settings.json"]},"sources":[{"source":"codex","file":"process-codex.jsonl","original_fingerprint":"process::hooks::unused-shell-wrappers"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0048","status":"SUSPECTED"}
{"category":"process","title":"lint-staged only runs Prettier (no ESLint auto-fix)","fingerprint":"process::package.json::lint-staged-prettier-only","severity":"S3","effort":"E1","confidence":70,"files":["package.json"],"line":72,"description":"lint-staged is configured to run only Prettier, leaving ESLint auto-fixable issues unresolved during pre-commit.","evidence":["lint-staged config: '.{js,jsx,ts,tsx,json,css,md}': 'prettier --write'"],"remediation":{"steps":["Extend lint-staged to run eslint --fix on JS/TS files before Prettier.","Keep Prettier for non-code files (json/css/md) to avoid conflicts."],"verification":["npx --no-install lint-staged --debug"]},"sources":[{"source":"codex","file":"process-codex.jsonl","original_fingerprint":"process::package.json::lint-staged-prettier-only"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0049","status":"SUSPECTED"}
{"category":"process","title":"MCP servers are defined only in template config","fingerprint":"process::mcp::missing-mcp-json","severity":"S3","effort":"E1","confidence":65,"files":[".claude/hooks/check-mcp-servers.js","mcp.json.example"],"line":33,"description":"The SessionStart MCP availability check requires .mcp.json, but the repo only ships mcp.json.example. Without a real .mcp.json, MCP inventory will report no servers configured.","evidence":["check-mcp-servers.js looks for .mcp.json","Only mcp.json.example exists in repo"],"remediation":{"steps":["Document setup steps to copy mcp.json.example to .mcp.json and fill secrets."],"verification":["Create .mcp.json and confirm SessionStart reports available MCP servers"]},"sources":[{"source":"codex","file":"process-codex.jsonl","original_fingerprint":"process::mcp::missing-mcp-json"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0050","status":"SUSPECTED"}
{"category":"process","title":"CI workflow docs-lint.yml and specialized workflows may be infrequently triggered","fingerprint":"ci::docs-lint.yml::coverage_gap","severity":"S3","effort":"E0","confidence":70,"files":[".github/workflows/docs-lint.yml",".github/workflows/backlog-enforcement.yml",".github/workflows/resolve-debt.yml"],"line":1,"description":"Several specialized workflows (docs-lint, backlog-enforcement, resolve-debt, auto-label-review-tier) may run infrequently. 10 workflows is a lot for a single-developer project — maintenance burden concern.","evidence":["docs-lint.yml: 5,761 bytes","backlog-enforcement.yml: 5,450 bytes","resolve-debt.yml: 3,748 bytes","10 total workflows"],"remediation":{"steps":["Review workflow run history","Consolidate docs-lint into main CI workflow","Consider manual/dispatch-only for resolve-debt and backlog-enforcement"],"verification":["Each workflow has run in last 30 days or is consolidated"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"ci::docs-lint.yml::coverage_gap"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0051","status":"SUSPECTED"}
{"category":"process","title":"stop-serena-dashboard.js hook runs on every SessionStart but Serena is disabled","fingerprint":"hooks::stop-serena-dashboard.js::disabled_server","severity":"S3","effort":"E0","confidence":35,"files":[".claude/settings.json",".claude/hooks/stop-serena-dashboard.js"],"line":25,"description":"SUSPECTED: stop-serena-dashboard.js runs on every SessionStart with 10s timeout, but Serena is in disabledMcpjsonServers. Wasted time if Serena is never running.","evidence":["settings.json:25-29 — stop-serena-dashboard.js on SessionStart","settings.json:3 — serena in disabledMcpjsonServers","timeout: 10000"],"remediation":{"steps":["Remove from SessionStart hooks or make conditional on Serena being enabled"],"verification":["SessionStart hooks don't reference disabled MCP servers"]},"sources":[{"source":"copilot","file":"process-copilot.jsonl","original_fingerprint":"hooks::stop-serena-dashboard.js::disabled_server"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0052","status":"SUSPECTED"}
{"category":"process","title":"Redundant Sanitization Wrappers","fingerprint":"process::scripts/lib::wrapper","severity":"S3","effort":"E1","confidence":40,"files":["scripts/lib/sanitize-error.ts"],"line":1,"description":"sanitize-error.ts appears to be a thin wrapper around sanitize-error.js. This might be a transition artifact or unnecessary complexity.","evidence":["import sanitizeErrorModule from './sanitize-error.js';"],"remediation":{"steps":["Use the TS version directly or the JS version directly, avoid wrapping."],"verification":["Check usage in codebase"]},"sources":[{"source":"jules","file":"process-jules.jsonl","original_fingerprint":"process::scripts/lib::wrapper"}],"verified":true,"consensus_score":1.5,"canonical_id":"CANON-0053","status":"SUSPECTED"}