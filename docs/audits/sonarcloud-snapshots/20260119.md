# SonarCloud Analysis Snapshot

**Date**: 2026-01-19T02:05:00Z **Branch**: main **Triggered By**: Manual
workflow dispatch

---

## Quality Gate Status: ERROR

| Metric                     | Status | Value | Threshold |
| -------------------------- | ------ | ----- | --------- |
| new_reliability_rating     | ERROR  | 3 (C) | 1 (A)     |
| new_security_rating        | OK     | 1 (A) | 1 (A)     |
| new_maintainability_rating | OK     | 1 (A) | 1 (A)     |
| new_coverage               | ERROR  | 0.0%  | 80%       |
| new_duplicated_lines       | OK     | 0.9%  | 3%        |
| new_security_hotspots      | ERROR  | 0.0%  | 100%      |

---

## Summary

| Category          | Count |
| ----------------- | ----- |
| CRITICAL Issues   | 93    |
| BLOCKER Issues    | 0     |
| Security Hotspots | 109   |

---

## CRITICAL Issues (93 total)

### Rule S3776: Cognitive Complexity (55 issues)

Functions exceeding cognitive complexity threshold of 15.

| File                                                | Line | Complexity | Effort  |
| --------------------------------------------------- | ---- | ---------- | ------- |
| scripts/aggregate-audit-findings.js                 | 677  | 87         | 1h17min |
| scripts/generate-documentation-index.js             | 558  | 56         | 46min   |
| scripts/check-docs-light.js                         | 525  | 55         | 45min   |
| components/notebook/pages/resources-page.tsx        | 40   | 48         | 38min   |
| functions/src/jobs.ts                               | 653  | 42         | 32min   |
| components/admin/users-tab.tsx                      | 96   | 41         | 31min   |
| components/settings/settings-page.tsx               | 103  | 41         | 31min   |
| functions/src/security-wrapper.ts                   | 106  | 39         | 29min   |
| scripts/check-backlog-health.js                     | 103  | 39         | 29min   |
| scripts/validate-canon-schema.js                    | 80   | 37         | 27min   |
| scripts/enrich-addresses.ts                         | 15   | 36         | 26min   |
| components/notebook/pages/history-page.tsx          | 50   | 35         | 25min   |
| scripts/security-check.js                           | 301  | 35         | 25min   |
| functions/src/admin.ts                              | 2182 | 34         | 24min   |
| functions/src/jobs.ts                               | 196  | 34         | 24min   |
| scripts/run-consolidation.js                        | 147  | 34         | 24min   |
| scripts/validate-audit.js                           | 211  | 34         | 24min   |
| components/admin/dashboard-tab.tsx                  | 94   | 32         | 22min   |
| scripts/log-session-activity.js                     | 239  | 32         | 22min   |
| scripts/aggregate-audit-findings.js                 | 322  | 29         | 19min   |
| scripts/generate-documentation-index.js             | 141  | 29         | 19min   |
| scripts/update-readme-status.js                     | 327  | 29         | 19min   |
| scripts/validate-canon-schema.js                    | 235  | 29         | 19min   |
| functions/src/admin.ts                              | 616  | 28         | 18min   |
| scripts/check-document-sync.js                      | 382  | 28         | 18min   |
| functions/src/admin.ts                              | 2576 | 27         | 17min   |
| scripts/archive-doc.js                              | 473  | 27         | 17min   |
| scripts/phase-complete-check.js                     | 133  | 27         | 17min   |
| scripts/retry-failures.ts                           | 12   | 27         | 17min   |
| scripts/suggest-pattern-automation.js               | 107  | 27         | 17min   |
| scripts/check-pattern-compliance.js                 | 557  | 26         | 16min   |
| scripts/migrate-to-journal.ts                       | 33   | 26         | 16min   |
| scripts/validate-audit.js                           | 443  | 26         | 16min   |
| scripts/check-review-needed.js                      | 862  | 25         | 15min   |
| scripts/phase-complete-check.js                     | 232  | 25         | 15min   |
| scripts/validate-audit.js                           | 163  | 25         | 15min   |
| scripts/verify-skill-usage.js                       | 191  | 25         | 15min   |
| scripts/archive-doc.js                              | 321  | 24         | 14min   |
| scripts/check-docs-light.js                         | 90   | 24         | 14min   |
| components/notebook/pages/today-page.tsx            | 651  | 18         | 8min    |
| components/widgets/compact-meeting-countdown.tsx    | 121  | 23         | 13min   |
| functions/src/admin.ts                              | 2747 | 22         | 12min   |
| scripts/assign-review-tier.js                       | 354  | 22         | 12min   |
| scripts/check-cross-doc-deps.js                     | 206  | 22         | 12min   |
| scripts/phase-complete-check.js                     | 363  | 22         | 12min   |
| scripts/run-consolidation.js                        | 412  | 22         | 12min   |
| scripts/validate-skill-config.js                    | 98   | 22         | 12min   |
| scripts/generate-documentation-index.js             | 360  | 21         | 11min   |
| scripts/normalize-canon-ids.js                      | 188  | 21         | 11min   |
| scripts/check-pattern-compliance.js                 | 482  | 21         | 11min   |
| lib/db/meetings.ts                                  | 21   | 20         | 10min   |
| components/growth/NightReviewCard.tsx               | 75   | 20         | 10min   |
| scripts/check-triggers.js                           | 259  | 20         | 10min   |
| scripts/surface-lessons-learned.js                  | 80   | 20         | 10min   |
| scripts/validate-phase-completion.js                | 32   | 20         | 10min   |
| functions/src/admin.ts                              | 2073 | 16         | 6min    |
| functions/src/admin.ts                              | 2440 | 19         | 9min    |
| scripts/check-docs-light.js                         | 306  | 19         | 9min    |
| scripts/check-document-sync.js                      | 200  | 19         | 9min    |
| components/notebook/features/clean-time-display.tsx | 29   | 18         | 8min    |
| functions/src/index.ts                              | 486  | 18         | 8min    |
| scripts/migrate-meetings-dayindex.ts                | 29   | 18         | 8min    |
| components/dev/lighthouse-tab.tsx                   | 81   | 17         | 7min    |
| components/widgets/compact-meeting-countdown.tsx    | 69   | 17         | 7min    |
| scripts/generate-documentation-index.js             | 279  | 17         | 7min    |
| scripts/check-docs-light.js                         | 389  | 17         | 7min    |
| app/meetings/all/page.tsx                           | 62   | 17         | 7min    |
| components/admin/admin-crud-table.tsx               | 92   | 16         | 6min    |
| scripts/add-false-positive.js                       | 139  | 16         | 6min    |
| scripts/aggregate-audit-findings.js                 | 180  | 16         | 6min    |
| scripts/assign-review-tier.js                       | 178  | 16         | 6min    |
| scripts/check-document-sync.js                      | 304  | 16         | 6min    |
| scripts/check-review-needed.js                      | 254  | 16         | 6min    |
| scripts/migrate-to-journal.ts                       | 198  | 16         | 6min    |
| scripts/update-readme-status.js                     | 151  | 16         | 6min    |

### Rule S3735: Remove void operator (12 issues)

| File                             | Line | Effort |
| -------------------------------- | ---- | ------ |
| components/admin/links-tab.tsx   | 79   | 5min   |
| components/admin/links-tab.tsx   | 127  | 5min   |
| components/admin/links-tab.tsx   | 141  | 5min   |
| components/admin/links-tab.tsx   | 153  | 5min   |
| components/admin/logs-tab.tsx    | 287  | 5min   |
| components/admin/logs-tab.tsx    | 291  | 5min   |
| components/admin/logs-tab.tsx    | 338  | 5min   |
| components/admin/prayers-tab.tsx | 75   | 5min   |
| components/admin/prayers-tab.tsx | 121  | 5min   |
| components/admin/prayers-tab.tsx | 135  | 5min   |
| components/admin/prayers-tab.tsx | 147  | 5min   |
| lib/hooks/use-tab-refresh.ts     | 67   | 5min   |

### Rule S2004: Nested functions > 4 levels (2 issues)

| File                                     | Line | Effort |
| ---------------------------------------- | ---- | ------ |
| hooks/use-daily-quote.ts                 | 159  | 20min  |
| components/notebook/pages/today-page.tsx | 337  | 20min  |

### Rule S6861: Exporting mutable let bindings (3 issues)

| File            | Line | Effort |
| --------------- | ---- | ------ |
| lib/firebase.ts | 137  | 5min   |
| lib/firebase.ts | 138  | 5min   |
| lib/firebase.ts | 139  | 5min   |

### Rule S131: Missing default case in switch (1 issue)

| File                           | Line | Effort |
| ------------------------------ | ---- | ------ |
| .claude/hooks/pattern-check.sh | 36   | 5min   |

---

## Security Hotspots (109 total)

### HIGH Probability (12 issues)

#### S2068: Hard-coded passwords (2 issues)

| File                | Line | Category |
| ------------------- | ---- | -------- |
| lib/utils/errors.ts | 69   | auth     |
| lib/utils/errors.ts | 71   | auth     |

#### S4721: Command injection (10 issues)

| File                                | Line | Category          |
| ----------------------------------- | ---- | ----------------- |
| scripts/ai-review.js                | 222  | command-injection |
| scripts/ai-review.js                | 227  | command-injection |
| scripts/check-pattern-compliance.js | 463  | command-injection |
| scripts/check-pattern-compliance.js | 463  | command-injection |
| scripts/check-review-needed.js      | 234  | command-injection |
| scripts/phase-complete-check.js     | 437  | command-injection |
| scripts/security-check.js           | 189  | command-injection |
| scripts/security-check.js           | 189  | command-injection |
| scripts/security-check.js           | 189  | command-injection |
| scripts/retry-failures.ts           | 113  | command-injection |

### MEDIUM Probability (45 issues)

#### S5852: Regex DoS vulnerability (34 issues)

| File                                  | Line |
| ------------------------------------- | ---- |
| scripts/add-false-positive.js         | 69   |
| scripts/ai-review.js                  | 160  |
| scripts/archive-doc.js                | 228  |
| scripts/archive-doc.js                | 229  |
| scripts/archive-doc.js                | 230  |
| scripts/archive-doc.js                | 231  |
| scripts/check-docs-light.js           | 148  |
| scripts/check-docs-light.js           | 173  |
| scripts/check-docs-light.js           | 188  |
| scripts/check-docs-light.js           | 244  |
| scripts/check-document-sync.js        | 71   |
| scripts/check-pattern-compliance.js   | 89   |
| scripts/check-pattern-compliance.js   | 98   |
| scripts/check-pattern-compliance.js   | 181  |
| scripts/check-pattern-compliance.js   | 208  |
| scripts/check-pattern-compliance.js   | 298  |
| scripts/check-triggers.js             | 206  |
| scripts/phase-complete-check.js       | 306  |
| scripts/security-check.js             | 90   |
| scripts/suggest-pattern-automation.js | 49   |
| scripts/suggest-pattern-automation.js | 126  |
| scripts/surface-lessons-learned.js    | 157  |
| scripts/update-readme-status.js       | 159  |
| scripts/update-readme-status.js       | 165  |
| scripts/update-readme-status.js       | 218  |
| scripts/validate-audit.js             | 126  |
| scripts/validate-skill-config.js      | 126  |
| app/meetings/all/page.tsx             | 42   |
| functions/src/admin.ts                | 143  |
| functions/src/security-logger.ts      | 392  |
| hooks/use-journal.ts                  | 76   |
| lib/sentry.client.ts                  | 48   |
| scripts/seed-meetings.ts              | 78   |

#### S2245: Weak cryptography - Math.random() (11 issues)

| File                                       | Lines                |
| ------------------------------------------ | -------------------- |
| components/celebrations/confetti-burst.tsx | 39-47 (10 instances) |
| components/celebrations/firework-burst.tsx | 39-47 (5 instances)  |

### LOW Probability (52 issues)

#### S7637: Use full commit SHA for GitHub Actions (2 issues)

| File                                         | Line |
| -------------------------------------------- | ---- |
| .github/workflows/auto-label-review-tier.yml | 29   |
| .github/workflows/docs-lint.yml              | 36   |

#### S7636: Avoid expanding secrets in run block (1 issue)

| File                                  | Line |
| ------------------------------------- | ---- |
| .github/workflows/deploy-firebase.yml | 58   |

#### S4790: Weak hash algorithm (1 issue)

| File                           | Line |
| ------------------------------ | ---- |
| .claude/hooks/session-start.sh | 71   |

#### S6505: Missing --ignore-scripts in npm install (21 issues)

| File                                                        | Line                         |
| ----------------------------------------------------------- | ---------------------------- |
| .claude/skills/artifacts-builder/scripts/bundle-artifact.sh | 21                           |
| .claude/skills/artifacts-builder/scripts/init-artifact.sh   | 36, 69, 74, 78, 79, 272, 273 |
| .github/workflows/backlog-enforcement.yml                   | 27, 107                      |
| .github/workflows/ci.yml                                    | 25, 121                      |
| .github/workflows/deploy-firebase.yml                       | 31, 34, 49                   |
| .github/workflows/docs-lint.yml                             | 32                           |
| .github/workflows/review-check.yml                          | 29                           |
| .github/workflows/sync-readme.yml                           | 34                           |
| .github/workflows/validate-plan.yml                         | 28                           |

#### S5604: Geolocation usage (1 issue)

| File                     | Line |
| ------------------------ | ---- |
| hooks/use-geolocation.ts | 104  |

#### S4036: PATH variable concerns (26 issues)

Various scripts using execSync with PATH concerns.

---

## Issues Checklist

### Batch 1: Quick Wins - void operator (12 issues, ~1hr)

- [ ] components/admin/links-tab.tsx:79,127,141,153
- [ ] components/admin/logs-tab.tsx:287,291,338
- [ ] components/admin/prayers-tab.tsx:75,121,135,147
- [ ] lib/hooks/use-tab-refresh.ts:67

### Batch 2: Quick Wins - mutable exports (3 issues, ~15min)

- [ ] lib/firebase.ts:137,138,139 - Convert let to const with lazy init

### Batch 3: Quick Wins - shell/misc (2 issues, ~10min)

- [ ] .claude/hooks/pattern-check.sh:36 - Add default case
- [ ] hooks/use-daily-quote.ts:159 - Reduce nesting

### Batch 4: Component Complexity (10 issues, ~3hr)

- [ ] components/notebook/pages/resources-page.tsx:40 (48 → 15)
- [ ] components/admin/users-tab.tsx:96 (41 → 15)
- [ ] components/settings/settings-page.tsx:103 (41 → 15)
- [ ] components/notebook/pages/history-page.tsx:50 (35 → 15)
- [ ] components/admin/dashboard-tab.tsx:94 (32 → 15)
- [ ] components/notebook/pages/today-page.tsx:337,651
- [ ] components/widgets/compact-meeting-countdown.tsx:69,121
- [ ] components/growth/NightReviewCard.tsx:75

### Batch 5: Functions Complexity (8 issues, ~4hr)

- [ ] functions/src/jobs.ts:653 (42 → 15)
- [ ] functions/src/security-wrapper.ts:106 (39 → 15)
- [ ] functions/src/jobs.ts:196 (34 → 15)
- [ ] functions/src/admin.ts:2182 (34 → 15)
- [ ] functions/src/admin.ts:616 (28 → 15)
- [ ] functions/src/admin.ts:2576 (27 → 15)
- [ ] functions/src/admin.ts:2747 (22 → 15)
- [ ] functions/src/admin.ts:2073,2440 (16-19 → 15)

### Batch 6: Scripts Complexity - High Priority (15 issues, ~6hr)

- [ ] scripts/aggregate-audit-findings.js:677 (87 → 15)
- [ ] scripts/generate-documentation-index.js:558 (56 → 15)
- [ ] scripts/check-docs-light.js:525 (55 → 15)
- [ ] scripts/check-backlog-health.js:103 (39 → 15)
- [ ] scripts/validate-canon-schema.js:80 (37 → 15)
- [ ] scripts/security-check.js:301 (35 → 15)
- [ ] scripts/run-consolidation.js:147 (34 → 15)
- [ ] scripts/validate-audit.js:211 (34 → 15)
- [ ] scripts/log-session-activity.js:239 (32 → 15)
- [ ] scripts/aggregate-audit-findings.js:322 (29 → 15)
- [ ] scripts/generate-documentation-index.js:141 (29 → 15)
- [ ] scripts/update-readme-status.js:327 (29 → 15)
- [ ] scripts/validate-canon-schema.js:235 (29 → 15)
- [ ] scripts/archive-doc.js:473 (27 → 15)
- [ ] scripts/phase-complete-check.js:133 (27 → 15)

### Batch 7: Scripts Complexity - Medium Priority (20 issues, ~4hr)

Remaining script complexity issues with effort 6-17min each.

### Batch 8: Security Hotspots - HIGH (12 issues, ~2hr)

- [ ] lib/utils/errors.ts:69,71 - Review hard-coded password patterns
- [ ] scripts/ai-review.js:222,227 - Sanitize command inputs
- [ ] scripts/check-pattern-compliance.js:463 - Sanitize command inputs
- [ ] scripts/check-review-needed.js:234 - Sanitize command inputs
- [ ] scripts/phase-complete-check.js:437 - Sanitize command inputs
- [ ] scripts/security-check.js:189 - Sanitize command inputs
- [ ] scripts/retry-failures.ts:113 - Sanitize command inputs

### Batch 9: Security Hotspots - MEDIUM Regex (34 issues, ~3hr)

Review and fix regex patterns vulnerable to ReDoS.

### Batch 10: Security Hotspots - LOW (52 issues, ~2hr)

- [ ] Pin GitHub Actions to full SHAs
- [ ] Add --ignore-scripts to npm install commands
- [ ] Review PATH variable usage in scripts

---

## Estimated Total Effort

| Category             | Issues  | Estimated Time |
| -------------------- | ------- | -------------- |
| Quick Wins           | 17      | 1.5hr          |
| Component Complexity | 10      | 3hr            |
| Functions Complexity | 8       | 4hr            |
| Scripts Complexity   | 35      | 10hr           |
| Security HIGH        | 12      | 2hr            |
| Security MEDIUM      | 45      | 3hr            |
| Security LOW         | 52      | 2hr            |
| **TOTAL**            | **202** | **~25.5hr**    |

---

## Dashboard Links

- Overview:
  https://sonarcloud.io/project/overview?id=jasonmichaelbell78-creator_sonash-v0
- Issues:
  https://sonarcloud.io/project/issues?id=jasonmichaelbell78-creator_sonash-v0
- Security Hotspots:
  https://sonarcloud.io/project/security_hotspots?id=jasonmichaelbell78-creator_sonash-v0
