{"id":"SYST-2026-02-19-D20-001","domain":20,"domain_name":"Final Report & Cross-Cutting","check_id":"20.3","severity":"S2","effort":"E3","category":"architecture","title":"Cross-cutting pattern: validation and security boundary gaps span 6 domains","description":"A recurring pattern of validation gaps at system boundaries appears across domains 7, 8, 9, 11, 19, and 22. Domain 7 found Cloud Functions missing App Check enforcement. Domain 8 found no Content-Security-Policy header. Domain 9 found no field-level validation in Firestore rules. Domain 11 found missing reCAPTCHA on sign-in/sign-up. Domain 19 found non-transactional migration without idempotency. Domain 22 found inconsistent PII redaction between loggers. These share a common root cause: security controls are implemented in some layers but not uniformly across all boundaries.","recommendation":"Address as a systemic initiative: create a security boundary checklist and audit all entry points (client API calls, Cloud Functions, Firestore rules, auth flows) for consistent validation depth.","file":"functions/src/security-wrapper.ts","line":1,"evidence":"D07-001: App Check enforceAppCheck disabled in production\nD08-002: No Content-Security-Policy header\nD09-002: No field-level validation in admin-writable Firestore rules\nD11-003: Sign-in/sign-up lack reCAPTCHA protection\nD19-002: Migration lacks idempotency tracking\nD22-001: Dual-logger SENSITIVE_KEYS mismatch (9 vs 16 keys)","suggested_fix":"Create a SECURITY_BOUNDARIES.md checklist documenting all entry points and required validation at each layer. Use this as a gate for PRs touching security-sensitive code. Address the 6 domain-specific findings as a coordinated sprint rather than individual fixes.","status":"accepted","suggestion_text":"Accept at S2. Treating these as independent findings misses the systemic pattern. Addressing as a unit (shared validation strategy) is more efficient than 6 separate fixes.","counter_argument":"Each domain finding has different context and fix complexity. A systemic initiative may over-engineer the solution. The individual fixes are straightforward and can be done incrementally.","related_findings":["D07-001","D08-002","D09-002","D11-003","D19-002","D22-001"],"detected_at":"2026-02-19T17:40:00Z","reviewed_at":"2026-02-19T17:45:00Z"}
{"id":"SYST-2026-02-19-D20-002","domain":20,"domain_name":"Final Report & Cross-Cutting","check_id":"20.3","severity":"S2","effort":"E2","category":"observability","title":"Cross-cutting pattern: incomplete observability pipeline — gaps in monitoring, backups, and offline resilience","description":"Multiple domains reveal a pattern of incomplete operational readiness: Domain 15 found no service worker despite PWA manifest and install prompt. Domain 15 also found no Firestore offline persistence. Domain 19 found no automated backup strategy. Domain 22 found no source map upload for production debugging. These share a common theme: the app has good application-level code quality but lacks operational infrastructure for resilience, recovery, and production debugging.","recommendation":"Create an operational readiness checklist covering: backups, offline support, source maps, monitoring alerts, and disaster recovery. Prioritize based on user impact.","file":"public/manifest.json","line":1,"evidence":"D15-001: No service worker — PWA installable but broken offline\nD15-002: No Firestore offline persistence despite offline indicator\nD19-001: No automated Firestore backup/export strategy\nD22-002: No source map upload — production stack traces minified","suggested_fix":"Phase 1 (E1): Enable source map upload and Firestore offline persistence. Phase 2 (E2): Configure Firestore daily exports. Phase 3 (E3): Implement service worker with Workbox/Serwist for offline app shell.","status":"accepted","suggestion_text":"Accept at S2. The operational gaps are individually S2 but collectively represent a pattern of deferred operational work. Addressing as a themed sprint is more efficient.","counter_argument":"The app is in active development and operational hardening is expected to come later. These are nice-to-have improvements, not bugs. The app works correctly when online.","related_findings":["D15-001","D15-002","D19-001","D22-002"],"detected_at":"2026-02-19T17:40:00Z","reviewed_at":"2026-02-19T17:45:00Z"}
