{"id":"SYST-2026-02-19-D10-001","domain":10,"domain_name":"Environment & Config","check_id":"10.1","severity":"S2","effort":"E1","category":"security","title":".env.production tracked in git with Firebase config and Sentry DSN","description":".env.production is committed to the repository containing NEXT_PUBLIC_FIREBASE_API_KEY, NEXT_PUBLIC_FIREBASE_APPCHECK_RECAPTCHA_SITE_KEY, and NEXT_PUBLIC_SENTRY_DSN. While Firebase client config is designed to be public, tracking a .env.production file normalizes the pattern of committing env files and makes it easy to accidentally add secrets in the future.","recommendation":"Move .env.production values to CI vars/secrets and remove file from git tracking.","file":".env.production","line":1,"evidence":"git ls-files .env.production → tracked\nContains: NEXT_PUBLIC_FIREBASE_API_KEY=AIzaSy..., NEXT_PUBLIC_FIREBASE_APPCHECK_RECAPTCHA_SITE_KEY=6Lde..., NEXT_PUBLIC_SENTRY_DSN=https://f585...","suggested_fix":"Move all values to GitHub Actions vars (already configured in deploy-firebase.yml lines 52-57). Remove .env.production from git tracking. For local builds, use .env.local (gitignored) or document that CI/CD is the source of truth for production values.","status":"accepted","suggestion_text":"Accept at S2. The values are technically public-by-design, but the pattern is risky. Moving to CI-only prevents accidental secret commits.","counter_argument":"Firebase client config IS public (visible in compiled JS). The .env.production file is a convenience for local production builds. The CI workflow already has these as vars/secrets as backup.","related_findings":["D10-002","D10-003"],"detected_at":"2026-02-19T14:05:00Z","reviewed_at":"2026-02-19T14:08:00Z"}
{"id":"SYST-2026-02-19-D10-002","domain":10,"domain_name":"Environment & Config","check_id":"10.3","severity":"S2","effort":"E0","category":"security","title":".gitignore pattern doesn't cover .env.production","description":".gitignore has '.env*.local' pattern which covers .env.local but .env.production does not match this glob. The file is intentionally tracked but should have an explicit decision comment in .gitignore explaining why.","recommendation":"Add .env.production to .gitignore or add an explicit comment explaining why it is tracked.","file":".gitignore","line":34,"evidence":".gitignore:34 → .env*.local\nThis covers: .env.local, .env.development.local, .env.test.local\nDoes NOT cover: .env.production (tracked in git)","suggested_fix":"Either: (A) Add .env.production to .gitignore and move values to CI-only, or (B) Add an explicit comment: '# .env.production intentionally tracked — contains only NEXT_PUBLIC values (no secrets)'","status":"accepted","suggestion_text":"Accept at S2. The gitignore gap creates a blind spot. Either exclude the file or document why it's tracked.","counter_argument":"The .env.production file is intentionally tracked — it contains only NEXT_PUBLIC values needed for builds. Adding it to .gitignore would break local production builds without additional documentation.","related_findings":["D10-001"],"detected_at":"2026-02-19T14:05:00Z","reviewed_at":"2026-02-19T14:08:00Z"}
{"id":"SYST-2026-02-19-D10-003","domain":10,"domain_name":"Environment & Config","check_id":"10.6","severity":"S3","effort":"E0","category":"security","title":"Sentry DSN committed in .env.production","description":"NEXT_PUBLIC_SENTRY_DSN is hardcoded in .env.production (committed to git). While Sentry DSNs are semi-public (they end up in client-side JavaScript anyway), best practice is to source from CI environment only to maintain separation of config from code.","file":".env.production","line":20,"evidence":".env.production:20 → NEXT_PUBLIC_SENTRY_DSN=https://f585a8353ec50d104e5484fedca6c2f2@o4510530873589760.ingest.us.sentry.io/4510711416094720","suggested_fix":"Move to GitHub Actions variable (add NEXT_PUBLIC_SENTRY_DSN to vars in deploy workflow). Remove from .env.production.","status":"accepted","suggestion_text":"Accept at S3. DSN is semi-public but separating config from code is a good hygiene practice.","counter_argument":"Sentry DSN is designed to be public — it's embedded in the production JavaScript bundle. The DSN only allows sending events, not reading them. Removing from .env.production adds friction for no security benefit.","related_findings":["D10-001","D22-001"],"detected_at":"2026-02-19T14:05:00Z","reviewed_at":"2026-02-19T14:08:00Z"}
