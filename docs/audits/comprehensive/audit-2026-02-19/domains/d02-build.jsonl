{"id":"COMP-2026-02-19-D02-001","domain":2,"domain_name":"Build & Compilation","check_id":"2.3","severity":"S2","effort":"E1","category":"performance","title":"Total bundle size 15.5MB — 8.2MB from unoptimized images","description":"The out/ directory is 15.5MB. Top 4 files are images (2.7MB PNG, 2.1MB PNG, 2.0MB PNG, 1.4MB JPEG) totaling 8.2MB. These are unoptimized PNGs that could be compressed to WebP/AVIF.","file":"out/images/","line":0,"evidence":"2725 KB images/gemini-generated-image-n61yzln61yzln61y.png\n2129 KB images/notebook-cover-transparent.png\n1965 KB images/notebook-cover-blank.png\n1389 KB images/gemini-generated-image-gj5efogj5efogj5e.jpeg","suggested_fix":"Convert PNGs to WebP (60-80% size reduction). Use sharp or squoosh CLI to batch convert.","status":"accepted","suggestion_text":"Accept at S2. 8.2MB of images on a PWA is significant for mobile users on slow connections. WebP conversion is a quick win.","counter_argument":"Images are loaded lazily and cached. Users on first load will wait, but subsequent visits use cache. Image optimization is a nice-to-have, not blocking.","related_findings":[],"detected_at":"2026-02-19T01:40:00Z"}
{"id":"COMP-2026-02-19-D02-002","domain":2,"domain_name":"Build & Compilation","check_id":"2.3","severity":"S2","effort":"E1","category":"performance","title":"JS chunk at 625KB — likely contains heavy library (Leaflet or charting)","description":"Largest JS chunk is 625KB (_next/static/chunks/9d44679c11cfa7b4.js). This is likely a heavy library bundled without code splitting. Second largest is 357KB.","file":"out/_next/static/chunks/9d44679c11cfa7b4.js","line":0,"evidence":"625 KB _next/static/chunks/9d44679c11cfa7b4.js\n357 KB _next/static/chunks/8043a15616e02fa5.js","suggested_fix":"Identify the library in the chunk (likely Leaflet, chart.js, or Sentry). Use next/dynamic to lazy-load.","status":"accepted","suggestion_text":"Accept at S2. 625KB is above the 500KB threshold. Dynamic import would load this only when needed.","counter_argument":"If the chunk is used on the main page (/journal), lazy loading would just delay the inevitable. Profile actual usage first.","related_findings":[],"detected_at":"2026-02-19T01:40:00Z"}
{"id":"COMP-2026-02-19-D02-003","domain":2,"domain_name":"Build & Compilation","check_id":"2.5","severity":"S2","effort":"E0","category":"security","title":"Source map file present in production build output","description":"One .js.map file found in out/_next/static/chunks/. Source maps in production expose original source code to anyone inspecting the deployed site.","file":"out/_next/static/chunks/a6dad97d9634a72d.js.map","line":0,"evidence":"1 source map: out/_next/static/chunks/a6dad97d9634a72d.js.map","suggested_fix":"Add productionBrowserSourceMaps: false to next.config.mjs (default is false, but verify). Or exclude .map files from Firebase hosting deploy.","status":"accepted","suggestion_text":"Accept at S2. Source maps expose original code. For a privacy-focused recovery app, this is an information disclosure risk.","counter_argument":"Only 1 file. May be a Sentry integration artifact (Sentry needs source maps for error tracking). Verify if this is intentionally uploaded to Sentry and should NOT be in the public output.","related_findings":[],"detected_at":"2026-02-19T01:40:00Z"}
{"id":"COMP-2026-02-19-D02-004","domain":2,"domain_name":"Build & Compilation","check_id":"2.4","severity":"S3","effort":"E0","category":"config","title":"images.unoptimized: true — expected for static export but limits performance","description":"next.config.mjs sets images.unoptimized: true. Required for output: 'export' since Next.js Image optimization needs a server. All images served as-is without resizing or format conversion.","file":"next.config.mjs","line":15,"evidence":"images: { unoptimized: true }","suggested_fix":"Pre-optimize images at build time using a script (sharp, squoosh). This gives the benefits of optimization without needing a server.","status":"accepted","suggestion_text":"Accept at S3. Known trade-off for static export. Pre-optimization at build time is the mitigation.","counter_argument":"Next.js Image component still handles lazy loading and sizing even when unoptimized. The main loss is format conversion (WebP/AVIF).","related_findings":["COMP-2026-02-19-D02-001"],"detected_at":"2026-02-19T01:40:00Z"}
