{"title":"ARCHITECTURE.md Firestore rules diagram contradicts actual if-false rules","description":"ARCHITECTURE.md shows stale Firestore rules permitting direct client writes to journal — contradicts actual 'if false' rules. DEBT-1444 captures general staleness; COMP-002 is specifically about the rules diagram.","severity":"S1","effort":"E2","category":"documentation","file":"ARCHITECTURE.md","line":210,"source_id":"audit:comprehensive-2026-02-22:COMP-002","recommendation":"Update ARCHITECTURE.md Section 4 to show allow create, update: if false with Cloud Functions explanation"}
{"title":"TodayPage stale referenceDate after midnight — not covered by existing DEBT","description":"1,138-line component with 42 hooks. COMP-003 includes the stale referenceDate after midnight — not covered by any DEBT entry. The keystroke re-subscription is tracked in DEBT-0063 and DEBT-3158 but the stale midnight date is genuinely new.","severity":"S1","effort":"E3","category":"code-quality","file":"components/notebook/pages/today-page.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-003","recommendation":"Fix referenceDate with midnight refresh timer; extract useHaltCheck, useWeeklyStats, useMilestoneCheck, useAutoSave hooks"}
{"title":"Support circle contacts are hardcoded demo data; Call/Text/Directions buttons non-functional","description":"Support circle contacts are hardcoded demo data; Call/Text/Directions buttons have no onClick handlers. DEBT entries for the file are superficial SonarCloud noise (array-index keys, new Array()), not the functional bug.","severity":"S1","effort":"E2","category":"enhancements","file":"components/notebook/pages/support-page.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-007","recommendation":"Implement Firestore CRUD for contacts; wire href=tel:, href=sms:, href=https://maps.google.com/..."}
{"title":"Onboarding promises data export/deletion that don't exist — GDPR/CCPA risk","description":"Onboarding screen explicitly promises 'Export or delete your data anytime from Settings.' Neither data export nor account deletion exists in Settings. GDPR/CCPA risk.","severity":"S1","effort":"E2","category":"enhancements","file":"components/onboarding/onboarding-wizard.tsx","line":419,"source_id":"audit:comprehensive-2026-02-22:COMP-008","recommendation":"Add Cloud Function for JSON data export; add account deletion flow with confirmation modal"}
{"title":"Tab navigation keyboard inaccessible — no role=tablist, aria-selected, keyboard nav","description":"Tab ribbon has no role=tablist, no role=tab, no aria-selected, no aria-label — keyboard inaccessible. DEBT-0773 is SonarCloud noise (read-only props); full accessibility overhaul (ARIA roles, keyboard nav) not captured.","severity":"S1","effort":"E1","category":"enhancements","file":"components/notebook/tab-navigation.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-012","recommendation":"Add role/aria attributes; wrap container with role=tablist aria-label=Notebook sections; implement keyboard arrow-key navigation"}
{"title":"No crisis/SOS emergency button in recovery app — resources buried 3 taps deep","description":"No crisis/emergency SOS button — crisis resources buried 3 taps deep in a recovery app. No DEBT entry covers this feature gap.","severity":"S1","effort":"E2","category":"enhancements","file":"components/notebook/pages/today-page.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-013","recommendation":"Add persistent crisis button on Today page linking to 988 / SAMHSA / Nashville Crisis Line"}
{"title":"check-pattern-compliance.js god script — 1917 lines, eslint-disable complexity","description":"Most-changed file in codebase (125 commits/90d) has eslint-disable complexity and no structural decomposition. 72 DEBT entries on this file are mostly SonarCloud noise. The extract-to-JSON-config structural fix is not captured.","severity":"S1","effort":"E3","category":"refactoring","file":"scripts/check-pattern-compliance.js","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-016","recommendation":"Extract pattern config to scripts/config/anti-patterns.json; split reporter + graduation tracker"}
{"title":"Playwright installed but zero E2E tests — no config, no test files, no npm scripts","description":"Playwright installed as devDependency but zero config, zero test files, zero npm scripts for E2E. DEBT-2141 mentions 'no visual regression testing' but the full E2E gap is not captured.","severity":"S1","effort":"E3","category":"process","file":"playwright.config.ts","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-017","recommendation":"Create playwright.config.ts, add 3-5 smoke tests for login + entry creation + data load"}
{"title":"Deploy workflow has no needs: dependency on CI — can deploy before tests pass","description":"Deploy workflow has no needs: dependency on CI — deployment can complete before tests pass. DEBT-2098 covers post-deploy validation; this is about the missing needs: lint-typecheck-test pre-deploy gate.","severity":"S1","effort":"E1","category":"process","file":".github/workflows/deploy-firebase.yml","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-018","recommendation":"Add needs: lint-typecheck-test to the deploy job"}
{"title":"Session-start hook 7 blocking synchronous subprocess calls — 3-8 min cold start","description":"7 blocking synchronous subprocess calls at session start cause 3-8 min cold start. DEBT-1938 mentions 2-5s latency for hooks in general; COMP-020 identifies 7 specific blocking calls and async solutions.","severity":"S1","effort":"E2","category":"ai-optimization","file":".claude/hooks/session-start.js","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-020","recommendation":"Move npm install/build async; gate test compile on file hash; make pattern check non-blocking"}
{"title":"8 skills exceed 500 lines; 9 audit skills with unclear differentiation","description":"8 skills exceed 500 lines; 9 audit skills with unclear differentiation; /audit-comprehensive subsumes all. DEBT entries for skill files are broken-link findings in SKILL.md, not the oversized/redundant skill structural problem.","severity":"S1","effort":"E2","category":"ai-optimization","file":".claude/skills/","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-021","recommendation":"Split oversized skills into thin entry + referenced sub-docs; make domain skills internal modules"}
{"title":"aggregate-audit-findings.js god script — 25+ functions, no decomposition","description":"God script with 25+ functions including Levenshtein dedup, scoring, PR bucketing — no explicit complexity guard. DEBT-1141 is a trivial parseInt finding; the decomposition finding is new.","severity":"S2","effort":"E3","category":"refactoring","file":"scripts/aggregate-audit-findings.js","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-022","recommendation":"Split into pipeline stages: parse, normalize, dedup, score, generate"}
{"title":"Cloud Functions structure in ARCHITECTURE.md shows non-existent subdirectories","description":"Cloud Functions structure in ARCHITECTURE.md shows non-existent journal/, admin/, utils/ subdirectories — actual structure is flat 8-file directory. No DEBT entry captures this specific inaccuracy.","severity":"S2","effort":"E2","category":"documentation","file":"ARCHITECTURE.md","line":479,"source_id":"audit:comprehensive-2026-02-22:COMP-024","recommendation":"Replace with actual flat structure: index.ts, admin.ts, firestore-rate-limiter.ts, schemas.ts, security-logger.ts, security-wrapper.ts, jobs.ts, recaptcha-verify.ts"}
{"title":"Test pipeline requires 3 compilation steps — 10-20s overhead; Vitest migration needed","description":"Test pipeline requires 3 compilation steps (tsc + tsc-alias + node --test), 10-20s overhead; inconsistent with pattern tests using Vitest. DEBT-1931 covers test rebuilds TypeScript but not the Vitest migration fix.","severity":"S2","effort":"E1","category":"engineering-productivity","file":"package.json","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-026","recommendation":"Migrate to Vitest (already used for pattern tests) — eliminates compile step entirely"}
{"title":"Large Text preference saves to Firestore but is never read — dead setting","description":"Large Text preference toggle saves to Firestore but is never read by any component — dead setting. No DEBT entry found.","severity":"S2","effort":"E2","category":"enhancements","file":"components/settings/settings-page.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-028","recommendation":"Read profile.preferences.largeText in root layout; apply text-lg or CSS class conditionally"}
{"title":"README test count stale: 89/91 vs actual 293/294","description":"Test count '89/91 passing' is stale — actual is 293/294. No DEBT entry matches.","severity":"S2","effort":"E0","category":"documentation","file":"README.md","line":111,"source_id":"audit:comprehensive-2026-02-22:COMP-030","recommendation":"Update README test status line"}
{"title":"README agent/skill counts wrong: 24/23 vs actual 25/59","description":"Agent/skill counts wrong: '24 agents / 23 skills' vs actual 25/59. No DEBT entry matches.","severity":"S2","effort":"E0","category":"documentation","file":"README.md","line":117,"source_id":"audit:comprehensive-2026-02-22:COMP-031","recommendation":"Update counts; consider auto-generation via npm run docs:update-readme"}
{"title":"README Growth tab marked Planned/feature-flagged but fully implemented","description":"Growth tab marked 'Planned/feature-flagged' but fully implemented. No DEBT entry matches.","severity":"S2","effort":"E1","category":"documentation","file":"README.md","line":239,"source_id":"audit:comprehensive-2026-02-22:COMP-032","recommendation":"Update Roadmap Module Mapping table to show Growth as Available"}
{"title":"DEVELOPMENT.md lib/ structure shows only 3 entries — missing 5 subdirectories","description":"lib/ structure shows only 3 entries — missing contexts/, db/, hooks/, types/, utils/. DEBT-1787 is about missing TOC; not about the wrong lib/ structure listing.","severity":"S2","effort":"E1","category":"documentation","file":"DEVELOPMENT.md","line":169,"source_id":"audit:comprehensive-2026-02-22:COMP-033","recommendation":"Update project structure section with all 8 lib/ subdirectories"}
{"title":"Duplicate claude.md is byte-for-byte copy of CLAUDE.md — wastes 1600 tokens/session","description":"Duplicate files — claude.md is byte-for-byte copy of CLAUDE.md, wasting ~1,600 tokens/session. The duplicate-file issue itself is not tracked as open.","severity":"S2","effort":"E1","category":"documentation","file":"claude.md","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-034","recommendation":"Delete claude.md; update all references to uppercase CLAUDE.md"}
{"title":"DOCUMENTATION_STANDARDS.md references non-existent MULTI_AI_REVIEW_COORDINATOR.md","description":"References non-existent MULTI_AI_REVIEW_COORDINATOR.md. DEBT entries for broken links don't specifically name this file.","severity":"S2","effort":"E0","category":"documentation","file":"docs/DOCUMENTATION_STANDARDS.md","line":178,"source_id":"audit:comprehensive-2026-02-22:COMP-035","recommendation":"Remove entry or replace with docs/audits/multi-ai/COORDINATOR.md"}
{"title":"ROADMAP.md Last Updated uses session number not date — 29+ sessions stale","description":"Last Updated: Session #151 — 29+ sessions stale; uses session number not date. DEBT-1438 covers COMMAND_REFERENCE.md version format inconsistency, not ROADMAP.md's session-numbered Last Updated.","severity":"S2","effort":"E0","category":"documentation","file":"ROADMAP.md","line":6,"source_id":"audit:comprehensive-2026-02-22:COMP-036","recommendation":"Replace with date 2026-02-22; switch to date-based versioning"}
{"title":"framer-motion imported directly in 36 non-lazy client components — 130KB gzipped eager","description":"framer-motion imported directly in 36 non-lazy client components (~130 KB gzipped loaded eagerly). No open DEBT tracks the framer-motion eager-load specifically.","severity":"S2","effort":"E1","category":"performance","file":"lib/firebase.ts","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-038","recommendation":"Extract animation wrappers to dynamic-imported AnimatedWrapper; use CSS transitions for simple animations"}
{"title":"wood-table.jpg LCP image not preloaded — browser can't prioritize","description":"wood-table.jpg set via CSS backgroundImage — browser can't preload it; no <link rel=preload>.","severity":"S2","effort":"E0","category":"performance","file":"app/layout.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-039","recommendation":"Add <link rel=preload as=image href=/images/wood-table.jpg> in app/layout.tsx"}
{"title":"3 PNG images 2.0-2.8 MB served uncompressed — WebP conversion needed","description":"3 PNG images: 2.0 MB, 2.2 MB, 2.8 MB served uncompressed. DEBT-3140 covers total bundle size but does not prescribe the WebP conversion fix specifically. Actionable resolution steps not in DEBT-3140.","severity":"S2","effort":"E1","category":"performance","file":"public/images/","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-040","recommendation":"Convert to WebP at 80% quality; delete unused gemini-generated-image-*.png"}
{"title":"MoodSparkline fires separate 30-doc Firestore read on every Today page visit","description":"MoodSparkline fires a separate 30-doc Firestore read on every Today page visit. Only DEBT-0372 (array-index keys) hits the file — no entry for the redundant read issue.","severity":"S2","effort":"E1","category":"performance","file":"components/notebook/visualizations/mood-sparkline.tsx","line":16,"source_id":"audit:comprehensive-2026-02-22:COMP-043","recommendation":"Pass history as prop from today-page.tsx; or cache in sessionStorage"}
{"title":"Preview deploy channel commented out — no PR-level staging environment","description":"Preview deploy channel commented out — no PR-level staging environment. DEBT-1891 is related but distinct.","severity":"S2","effort":"E2","category":"process","file":".github/workflows/deploy-firebase.yml","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-049","recommendation":"Configure GitHub repo vars and re-enable; or remove dead preview-deploy job"}
{"title":"181 ESLint warning baseline — warning noise masks real issues","description":"181 ESLint warning baseline — warning noise masks real issues. DEBT-0781 and DEBT-1866 cover pattern-check false-positives, not the ESLint warning count itself.","severity":"S2","effort":"E1","category":"engineering-productivity","file":"","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-050","recommendation":"Add per-line eslint-disable with justification on confirmed false positives; target 0-warning baseline"}
{"title":"PostToolUse hooks fire on every Read/Write/Edit/Bash — 18s/session overhead","description":"PostToolUse hooks fire on every Read/Write/Edit/Bash — estimated 18s/session cumulative overhead. DEBT-1938 mentions session hook latency generally; COMP-051 identifies specific hooks and merging/caching fixes.","severity":"S2","effort":"E2","category":"ai-optimization","file":".claude/settings.json","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-051","recommendation":"Merge commit-tracker + commit-failure-reporter; cache config in post-write-validator; make post-read-handler opt-in"}
{"title":"Dev server uses webpack by default — no Turbopack flag","description":"Dev server uses webpack by default — no Turbopack flag on a large TypeScript project. No DEBT entry found.","severity":"S2","effort":"E1","category":"engineering-productivity","file":"package.json","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-052","recommendation":"Change next dev to next dev --turbopack; test compatibility with Leaflet, Framer Motion"}
{"title":"AI_WORKFLOW.md 874 lines mandated reading every session — 7600 tokens overhead","description":"AI_WORKFLOW.md (874 lines / ~7,600 tokens) mandated reading every session. Most content only needed for doc-update sessions. No DEBT covers the mandatory-read token overhead or the split-into-quick-start fix.","severity":"S2","effort":"E2","category":"ai-optimization","file":"AI_WORKFLOW.md","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-053","recommendation":"Split into 50-line Quick Start + on-demand reference; remove Read at session start mandate"}
{"title":".claude/state/ and .claude/tmp/ unbounded growth — 76KB + 283KB stale files","description":"76 KB agent-research-results.md with no rotation; 283 KB stale audit JSON in .claude/tmp/; stale in_progress multi-ai-audit session state. DEBT-2538 covers state JSONL files; no DEBT covers agent-research-results.md cap or .claude/tmp/ cleanup.","severity":"S2","effort":"E1","category":"ai-optimization","file":".claude/state/","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-054","recommendation":"Implement 20 KB cap on agent-research-results; delete .claude/tmp/audit-result*.json; mark stale session as abandoned"}
{"title":"settings.local.json 250+ permission entries — unreadable and unauditable","description":"250+ permission entries including multi-line commit messages — unreadable and unauditable. DEBT-2256-2259 cover specific MCP-related stale permissions, not the overall 250+ entry bloat problem.","severity":"S2","effort":"E2","category":"ai-optimization","file":".claude/settings.local.json","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-055","recommendation":"Remove one-time commit approvals; keep only pattern-based entries; document rotation policy"}
{"title":"getFunctions() + httpsCallable pattern repeated 28 times across admin layer","description":"getFunctions() + httpsCallable pattern repeated 28 times across 8 admin tab files. No DEBT entry found for this specific refactoring.","severity":"S2","effort":"E2","category":"refactoring","file":"components/admin/admin-crud-table.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-056","recommendation":"Create lib/utils/admin-caller.ts typed callAdminFunction<TInput, TOutput>() helper"}
{"title":"links-tab.tsx and prayers-tab.tsx ~90% code duplication","description":"~90% code duplication between two CRUD tab files. No DEBT entry found.","severity":"S2","effort":"E2","category":"refactoring","file":"components/admin/links-tab.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-057","recommendation":"Create generic AdminContentTab HOC or useAdminCrud hook parameterized by entity config"}
{"title":"window.confirm() used for 10 destructive actions — non-styleable, blocks UI","description":"window.confirm() used for 10 destructive actions across admin — non-styleable, blocks UI thread. DEBT-2164 covers copy quality, not the window.confirm() replacement.","severity":"S2","effort":"E2","category":"refactoring","file":"","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-058","recommendation":"Create reusable ConfirmationDialog using existing components/ui/dialog.tsx"}
{"title":"Sign-in modal lacks role=dialog, aria-modal, focus trap — screen reader inaccessible","description":"Modal lacks role=dialog, aria-modal, aria-labelledby, focus trap. DEBT-3183 covers reCAPTCHA protection missing; no DEBT covers the ARIA/focus-trap accessibility gap.","severity":"S2","effort":"E2","category":"enhancements","file":"components/auth/sign-in-modal.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-059","recommendation":"Add dialog semantics; add close button aria-label; implement focus trap"}
{"title":"No data export or account deletion despite onboarding promise","description":"No data export or account deletion despite onboarding promise. Duplicate angle to COMP-008.","severity":"S2","effort":"E2","category":"enhancements","file":"components/settings/settings-page.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-060","recommendation":"Cloud Function for JSON export; account deletion with Firestore purge"}
{"title":"No noscript fallback — JavaScript-disabled users see blank page","description":"No <noscript> fallback — JavaScript-disabled users see blank page. No DEBT entry found.","severity":"S2","effort":"E1","category":"enhancements","file":"app/layout.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-061","recommendation":"Add basic <noscript> message"}
{"title":"Only 7-day mood sparkline — no 30/90-day history visualization","description":"Only 7-day mood sparkline — no 30/90-day history visualization. No DEBT entry found.","severity":"S2","effort":"E2","category":"enhancements","file":"components/notebook/visualizations/mood-sparkline.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-062","recommendation":"Implement mood trend charts on History tab; use cached daily_logs data"}
{"title":"Fixed notebook width 340px/800px breaks at 428-767px viewport range","description":"Fixed notebook width 340px/800px breaks at 428-767px viewport range (tablets, landscape phones). No DEBT entry found.","severity":"S2","effort":"E2","category":"enhancements","file":"components/notebook/notebook-shell.tsx","line":200,"source_id":"audit:comprehensive-2026-02-22:COMP-063","recommendation":"Replace hard breakpoint with fluid responsive width using container queries or clamp()"}
{"title":"Tap to set clean date has cursor-pointer but no onClick handler","description":"'Tap to set clean date' has cursor-pointer but no onClick handler — clicking does nothing. No DEBT entry found.","severity":"S2","effort":"E1","category":"enhancements","file":"components/notebook/pages/today-page.tsx","line":877,"source_id":"audit:comprehensive-2026-02-22:COMP-064","recommendation":"Wire to navigate to Settings clean-date input"}
{"title":"Share meeting button toasts success without calling clipboard.writeText()","description":"Share meeting button toasts 'Link copied!' but never calls navigator.clipboard.writeText(). No DEBT entry found.","severity":"S2","effort":"E0","category":"enhancements","file":"components/notebook/pages/resources-page.tsx","line":497,"source_id":"audit:comprehensive-2026-02-22:COMP-065","recommendation":"Add navigator.clipboard.writeText(shareUrl) before toast.success()"}
{"title":"No Forgot password flow — email users have no recovery path","description":"No 'Forgot password?' flow — email users who forget password have no recovery path. No DEBT entry found.","severity":"S2","effort":"E1","category":"enhancements","file":"components/auth/sign-in-modal.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-066","recommendation":"Add sendPasswordResetEmail() link in sign-in form"}
{"title":"WCAG 2.1 AA contrast unverified — amber-on-amber may fail 4.5:1 ratio","description":"WCAG 2.1 AA contrast unverified — text-amber-900/60 on bg-amber-50 may fail 4.5:1 ratio. No DEBT entry found.","severity":"S2","effort":"E1","category":"enhancements","file":"","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-067","recommendation":"Run Axe/Lighthouse contrast audit; fix failing combinations"}
{"title":"No skip-to-content link — keyboard users must tab through entire nav","description":"No skip-to-content link — keyboard users must tab through entire nav on every page. No DEBT entry found.","severity":"S2","effort":"E1","category":"enhancements","file":"app/layout.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-068","recommendation":"Add visually-hidden skip link as first focusable element"}
{"title":"Step 4 Inventory and Step 8 List buttons are motion.button with no onClick","description":"Step 4 Inventory and Step 8 List buttons are motion.button elements with no onClick — appear interactive but do nothing. No DEBT entry found.","severity":"S2","effort":"E1","category":"enhancements","file":"components/growth/growth-page.tsx","line":88,"source_id":"audit:comprehensive-2026-02-22:COMP-069","recommendation":"Wire to feature or add Coming Soon visual indicator"}
{"title":"History tab hard-limited to 7 days — older entries invisible","description":"History tab hard-limited to 7 days; older entries exist in Firestore but are invisible. No DEBT entry found.","severity":"S2","effort":"E1","category":"enhancements","file":"components/notebook/pages/history-page.tsx","line":131,"source_id":"audit:comprehensive-2026-02-22:COMP-070","recommendation":"Implement Load more pagination or date-picker on History tab"}
{"title":"gsd-planner.md and gsd-debugger.md ~125K tokens per 4-agent wave","description":"gsd-planner.md (1,476 lines), gsd-debugger.md (1,300 lines) — ~125,000 tokens per concurrent wave of 4 GSD agents. No DEBT entry found.","severity":"S2","effort":"E2","category":"ai-optimization","file":".claude/agents/global/gsd-planner.md","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-071","recommendation":"Extract shared gsd-base.md; use @file references; target max 400 lines per agent"}
{"title":"security-engineer.md contains irrelevant Terraform/HCL examples — 20K token waste","description":"security-engineer.md (985 lines) contains Terraform/HCL examples irrelevant to Firebase project — inflates invocations by ~20,000 tokens. No DEBT entry found.","severity":"S2","effort":"E1","category":"ai-optimization","file":".claude/agents/security-engineer.md","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-072","recommendation":"Trim to 80 lines of project-relevant content; consolidate into security-auditor.md"}
{"title":"VALIDATION_FAILURE severity mapped to INFO — attack probing invisible","description":"VALIDATION_FAILURE severity mapped to INFO — not persisted to Firestore security_logs; attack probing invisible in admin panel. No DEBT entry found.","severity":"S2","effort":"E1","category":"security","file":"functions/src/security-logger.ts","line":371,"source_id":"audit:comprehensive-2026-02-22:COMP-074","recommendation":"Change to WARNING severity in SEVERITY_MAP"}
{"title":"NotebookShell SVG data URL recomputed every render","description":"NotebookShell mixes animation + tab + modal state; spine SVG data URL recomputed every render. DEBT-3188 covers book-cover.tsx; no DEBT covers notebook-shell.tsx. Same anti-pattern, different component.","severity":"S2","effort":"E2","category":"performance","file":"components/notebook/notebook-shell.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-075","recommendation":"Memoize spine texture as module-level const; use useReducer for direction + activeTab"}
{"title":"Onboarding progress dots are div elements with no accessible labels","description":"Onboarding progress dots are <div> elements with no accessible labels — step position unannounced to screen readers. No DEBT entry found.","severity":"S2","effort":"E1","category":"enhancements","file":"components/onboarding/onboarding-wizard.tsx","line":187,"source_id":"audit:comprehensive-2026-02-22:COMP-076","recommendation":"Convert to <button> or add aria-label=Step X of 5"}
{"title":"No CHANGELOG, no versioning strategy, no release tagging","description":"No CHANGELOG, no versioning strategy, no release tagging. DEBT-2029 is about commit message validation hook — related workflow area but different issue.","severity":"S2","effort":"E2","category":"process","file":"package.json","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-077","recommendation":"Add release-please-action workflow for automatic changelog and release tags"}
{"title":"356-line FORM_SECTIONS config embedded in Step1WorksheetCard component","description":"356-line FORM_SECTIONS config embedded in component file — pure data with no React dependencies. No DEBT specifically covers extracting the config.","severity":"S2","effort":"E2","category":"refactoring","file":"components/growth/Step1WorksheetCard.tsx","line":124,"source_id":"audit:comprehensive-2026-02-22:COMP-078","recommendation":"Extract to components/growth/step1-worksheet-config.ts"}
{"title":"Stale // ... existing metadata ... comment — code-generation artifact","description":"Stale '// ... existing metadata ...' comment — code-generation artifact in layout. No DEBT entry found.","severity":"S3","effort":"E0","category":"code-quality","file":"app/layout.tsx","line":66,"source_id":"audit:comprehensive-2026-02-22:COMP-081","recommendation":"Remove the comment"}
{"title":"_checkInSteps computed via useMemo but never consumed — wasted computation","description":"_checkInSteps computed via useMemo but never consumed — wasted computation. No DEBT entry found.","severity":"S3","effort":"E0","category":"code-quality","file":"components/notebook/pages/today-page.tsx","line":332,"source_id":"audit:comprehensive-2026-02-22:COMP-082","recommendation":"Remove the useMemo or render via CheckInProgress component"}
{"title":"Missing use client directive in entry-wizard.tsx","description":"Missing 'use client' directive — uses useState + event handlers but not self-declaring. No DEBT entry found.","severity":"S3","effort":"E0","category":"code-quality","file":"components/journal/entry-wizard.tsx","line":1,"source_id":"audit:comprehensive-2026-02-22:COMP-083","recommendation":"Add 'use client' as first line"}
{"title":"meeting-countdown.tsx is dead code — superseded by CompactMeetingCountdown, never imported","description":"Dead code — superseded by CompactMeetingCountdown, not imported anywhere. DEBT-0454 (setInterval issue) and DEBT-3159 (hardcoded placeholder) are code quality issues in the file but don't identify it as dead/delete-worthy. Stronger claim that supersedes these.","severity":"S3","effort":"E0","category":"code-quality","file":"components/widgets/meeting-countdown.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-084","recommendation":"Delete file after confirming zero imports; closes DEBT-0454 and DEBT-3159"}
{"title":"Three underscore-prefixed dead functions in resources-page.tsx","description":"Three underscore-prefixed dead functions (_loadMoreMeetings, _availableNeighborhoods, _handleTimeJump) never called. No DEBT entry found.","severity":"S3","effort":"E1","category":"refactoring","file":"components/notebook/pages/resources-page.tsx","line":596,"source_id":"audit:comprehensive-2026-02-22:COMP-089","recommendation":"Remove all three dead functions"}
{"title":"Local isSameDay reimplemented — date-fns already imported","description":"Local isSameDay reimplemented — date-fns (already imported) exports this function. No DEBT entry found.","severity":"S3","effort":"E0","category":"refactoring","file":"components/notebook/pages/resources-page.tsx","line":78,"source_id":"audit:comprehensive-2026-02-22:COMP-090","recommendation":"Remove local implementation; import { isSameDay } from 'date-fns'"}
{"title":"Debug console.log in today-page.tsx dev guard — specific lines not in existing DEBT","description":"Debug console.log('Attempting to save:') in dev guard at lines 639/665. DEBT-0436 covers debug logs broadly but doesn't pinpoint these specific lines.","severity":"S3","effort":"E0","category":"code-quality","file":"components/notebook/pages/today-page.tsx","line":639,"source_id":"audit:comprehensive-2026-02-22:COMP-092","recommendation":"Remove 3-line debug block; production logger.info 3 lines above is sufficient"}
{"title":"_appCheck exported but always undefined in lib/firebase.ts","description":"let _appCheck: AppCheck | undefined declared and exported but always undefined — silently returns undefined. No DEBT entry found.","severity":"S3","effort":"E1","category":"refactoring","file":"lib/firebase.ts","line":40,"source_id":"audit:comprehensive-2026-02-22:COMP-093","recommendation":"Remove once App Check re-enabled (COMP-001)"}
{"title":"Two parallel error utilities — merge errors.ts and callable-errors.ts","description":"Two parallel error utilities; errors.ts consumed only by storage.ts. DEBT-0843 covers console statements in callable-errors.ts but not the merge refactor. Different root-cause framing.","severity":"S3","effort":"E2","category":"refactoring","file":"lib/utils/errors.ts","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-094","recommendation":"Merge into lib/utils/error-utils.ts"}
{"title":"Admin password reset returns distinct No user found — user enumeration","description":"Admin password reset returns distinct 'No user found' error — user enumeration in admin panel. No DEBT entry found.","severity":"S3","effort":"E1","category":"security","file":"functions/src/admin.ts","line":3374,"source_id":"audit:comprehensive-2026-02-22:COMP-095","recommendation":"Return generic 'If user exists, reset sent' response; always call Firebase API"}
{"title":"Missing COEP header — document intentional absence due to reCAPTCHA","description":"Missing Cross-Origin-Embedder-Policy header. DEBT-0088 covers missing security headers generally but may not include COEP. This documents the intentional COEP absence due to reCAPTCHA iframe incompatibility.","severity":"S3","effort":"E1","category":"security","file":"firebase.json","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-096","recommendation":"Document intentional COEP absence; note reCAPTCHA iframe incompatibility"}
{"title":"Rate limit document IDs contain raw Firebase UID and IP — should be hashed","description":"Rate limit document IDs contain raw Firebase UID and raw IP address — hashed in logs but not in doc IDs. DEBT-3169 covers console.warn leaking un-hashed UID which is related but different vector.","severity":"S3","effort":"E1","category":"security","file":"functions/src/firestore-rate-limiter.ts","line":39,"source_id":"audit:comprehensive-2026-02-22:COMP-098","recommendation":"Hash UID and IP before using as document IDs (SHA-256 truncated)"}
{"title":"Mobile block via user-agent — security theater; needs clarifying comment","description":"Mobile block via user-agent string — security theater; real security is Firebase admin claim check. No DEBT entry found.","severity":"S3","effort":"E0","category":"security","file":"app/admin/page.tsx","line":36,"source_id":"audit:comprehensive-2026-02-22:COMP-099","recommendation":"Add code comment: UX only — security enforced at line 68 via Firebase admin claim"}
{"title":"searchUsersByNickname prefix query has no input length validation","description":"searchUsersByNickname prefix query has no input length validation. No DEBT entry found.","severity":"S3","effort":"E1","category":"security","file":"functions/src/admin.ts","line":286,"source_id":"audit:comprehensive-2026-02-22:COMP-100","recommendation":"Add z.string().min(1).max(100).trim() to input schema"}
{"title":"Hook log file .git/hook-output.log grows unboundedly","description":"Hook log file .git/hook-output.log grows unboundedly with every commit. DEBT-2538 covers .claude/state/reviews.jsonl. Same unbounded log growth pattern, different file.","severity":"S3","effort":"E0","category":"process","file":".husky/pre-commit","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-102","recommendation":"Add tail -n 500 rotation at top of hook before exec redirect"}
{"title":"require_skip_reason() function duplicated verbatim in pre-commit and pre-push","description":"require_skip_reason() function (40+ lines) duplicated verbatim in both hook files. No DEBT entry found.","severity":"S3","effort":"E1","category":"process","file":".husky/pre-commit","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-103","recommendation":"Extract to .husky/lib/skip-reason-guard.sh; source in both hooks"}
{"title":"96-101 npm scripts with no grouping, no help, no discoverability","description":"No npm run help, no grouping, no discoverability for 96-101 npm scripts. No DEBT entry found.","severity":"S3","effort":"E1","category":"engineering-productivity","file":"package.json","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-105","recommendation":"Add npm run help script; add Common Scripts Quick Reference to README"}
{"title":"next dev without --turbopack flag","description":"next dev without --turbopack — webpack used on large TypeScript project. Identical fix to COMP-052.","severity":"S3","effort":"E1","category":"engineering-productivity","file":"package.json","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-106","recommendation":"Change to next dev --turbopack; test compatibility"}
{"title":"3-step test compilation adds 10-20s overhead — full Vitest migration needed","description":"3-step test compilation (tsc + tsc-alias + node --test) adds 10-20s overhead — inconsistent: pattern tests already use Vitest. DEBT-1931 covers TypeScript rebuild overhead; COMP-107 proposes full Vitest migration.","severity":"S3","effort":"E3","category":"engineering-productivity","file":"package.json","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-107","recommendation":"Migrate all tests to Vitest; eliminate tsc to dist-tests compile step"}
{"title":"No type-check npm script alias — DEVELOPMENT.md references it but doesn't exist","description":"No type-check npm script alias. DEVELOPMENT.md references npm run type-check but it doesn't exist. No DEBT entry found.","severity":"S3","effort":"E0","category":"engineering-productivity","file":"package.json","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-108","recommendation":"Add type-check: tsc --noEmit to package.json scripts"}
{"title":"nul Windows artifact file committed to repo","description":"nul file (Windows artifact from redirecting to NUL) committed to repo. No DEBT entry found.","severity":"S3","effort":"E0","category":"engineering-productivity","file":"nul","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-109","recommendation":"Delete nul; add to .gitignore"}
{"title":"tsconfig.json incremental: true with noEmit: true — redundant","description":"incremental: true with noEmit: true — incremental build info not used; redundant with Next.js internal compilation. No DEBT entry found.","severity":"S3","effort":"E0","category":"engineering-productivity","file":"tsconfig.json","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-110","recommendation":"Remove incremental: true"}
{"title":"No i18n infrastructure — all strings hardcoded in English","description":"No i18n infrastructure — all strings hardcoded in English; Nashville has ~15% Spanish-speaking population. No DEBT entry found.","severity":"S3","effort":"E3","category":"enhancements","file":"","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-111","recommendation":"Install next-intl; extract strings to locale files"}
{"title":"Journal lock screen component exists but is never imported or rendered","description":"Journal lock screen component exists but is never imported or rendered. No DEBT entry found.","severity":"S3","effort":"E2","category":"enhancements","file":"components/journal/lock-screen.tsx","line":0,"source_id":"audit:comprehensive-2026-02-22:COMP-112","recommendation":"Wire to journal flow or delete if deferred"}
{"title":"Swipe navigation has no visual affordance — only hint is small footer text","description":"Swipe navigation has no visual affordance — only hint is small footer text. No DEBT entry found.","severity":"S3","effort":"E1","category":"enhancements","file":"components/notebook/notebook-shell.tsx","line":1132,"source_id":"audit:comprehensive-2026-02-22:COMP-113","recommendation":"Add subtle swipe indicator animation or onboarding tooltip"}
