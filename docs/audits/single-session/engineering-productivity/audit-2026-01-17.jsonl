{"id":"EFFP-001","category":"GoldenPath","severity":"S2","effort":"E0","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"package.json","line":5,"title":"No npm run dev:offline script - requires 2 terminals for emulator dev","description":"Development with Firebase emulators requires manually running 'firebase emulators:start' in one terminal and 'npm run dev' in another. This friction reduces likelihood of offline testing.","recommendation":"Add 'dev:offline': 'concurrently \"firebase emulators:start\" \"npm run dev\"' to package.json scripts. Install concurrently as devDependency.","evidence":["grep 'dev:offline' package.json returns no matches","DEVELOPMENT.md lines 79-85 show 2-terminal workflow","EFF-001 from 2026-01-13 audit still unresolved"],"cross_ref":"EFF-001","roi":"HIGH","effort_estimate":"30 minutes"}
{"id":"EFFP-002","category":"GoldenPath","severity":"S2","effort":"E1","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"scripts/","line":0,"title":"No scripts/doctor.js for environment validation","description":"No automated environment validation script exists. Developers must manually verify Node version, Firebase CLI, env vars, and other prerequisites. This causes 'works on my machine' issues.","recommendation":"Create scripts/doctor.js that checks: Node 18+, Firebase CLI installed, .env.local exists with required vars, functions/node_modules exists. Add 'doctor': 'node scripts/doctor.js' to package.json.","evidence":["ls scripts/doctor.js returns 'No such file'","package.json has no 'doctor' script","EFF-003 from 2026-01-13 audit still unresolved"],"cross_ref":"EFF-003","roi":"HIGH","effort_estimate":"1 hour"}
{"id":"EFFP-003","category":"GoldenPath","severity":"S3","effort":"E0","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"package.json","line":5,"title":"Setup requires multiple commands - no single bootstrap","description":"New developer setup requires: git clone, npm install, cd functions && npm install, copy .env.local template, firebase login. No single 'npm run setup' command exists.","recommendation":"Add 'setup': 'npm install && cd functions && npm install && npm run doctor' to package.json. Consider adding .env.local.example template.","evidence":["DEVELOPMENT.md:42-46 shows multi-step setup","package.json has no 'setup' script"],"cross_ref":"MANUAL_ONLY","roi":"MEDIUM","effort_estimate":"30 minutes"}
{"id":"EFFP-004","category":"Debugging","severity":"S1","effort":"E2","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"lib/logger.ts","line":1,"title":"No correlation IDs for request tracing (frontend to backend)","description":"No correlation/request IDs are generated or passed from frontend to Cloud Functions. When debugging production issues, cannot trace a user's journey across client and server logs.","recommendation":"Generate UUID on client per request, pass as X-Correlation-Id header to Cloud Functions, include in all logger calls. Add correlationId to LogContext type.","evidence":["grep 'correlationId|requestId|traceId' returns only node_modules hits","lib/logger.ts has no correlation ID support","EFF-006 from 2026-01-13 audit still unresolved"],"cross_ref":"EFF-006","roi":"HIGH","effort_estimate":"4 hours"}
{"id":"EFFP-005","category":"Debugging","severity":"S2","effort":"E2","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"app/","line":0,"title":"8:1 ratio of console.log to structured logger calls (3111 vs 394)","description":"Codebase has 3111 console.log statements vs 394 logger.* calls. console.log output is not captured by Sentry, not redacted for PII, and provides no structured context for debugging.","recommendation":"Replace console.log with logger.info/warn/error in production code paths. Keep console.log only for local debugging (remove before commit). Consider ESLint rule to warn on console.log.","evidence":["grep -c 'console.log' returns 3111","grep -c 'logger\\.' returns 394","Ratio: 7.9:1"],"cross_ref":"MANUAL_ONLY","roi":"MEDIUM","effort_estimate":"8+ hours (incremental)"}
{"id":"EFFP-006","category":"Debugging","severity":"S3","effort":"E1","confidence":"MEDIUM","verified":"MANUAL_ONLY","file":"components/","line":0,"title":"Error messages lack actionable fix hints - generic 'Please try again'","description":"15+ error toast messages use generic 'Please try again' without actionable guidance. Users don't know if they should: wait, refresh, check network, or contact support.","recommendation":"Add context-specific hints: 'Check your internet connection', 'This may take a moment, please wait', 'If this persists, contact support'. Include error code for support reference.","evidence":["grep 'Please try again' returns 15+ matches","components/admin/users-tab.tsx has 6 instances","components/growth/*.tsx has 4 instances"],"cross_ref":"MANUAL_ONLY","roi":"LOW","effort_estimate":"2 hours"}
{"id":"EFFP-007","category":"Offline","severity":"S1","effort":"E3","confidence":"HIGH","verified":"DUAL_PASS_CONFIRMED","file":"hooks/use-journal.ts","line":319,"title":"No offline write queue - data loss when user goes offline","description":"Journal writes (addEntry, updateEntry) fail immediately when offline. No queue mechanism to hold writes and sync when back online. For a recovery app where users may have spotty connectivity, this causes data loss and frustration.","recommendation":"Implement IndexedDB-based write queue: 1) Queue writes locally when offline, 2) Sync on reconnection, 3) Handle conflicts with last-write-wins or prompt user. Consider using Firebase's built-in offline persistence first.","evidence":["hooks/use-journal.ts:319-340 calls httpsCallable directly with no offline handling","grep 'offlineQueue|writeQueue|pendingWrites' returns no app code matches","BOT-001 from 2026-01-13 audit identifies this as top bottleneck"],"cross_ref":"EFF-010","roi":"CRITICAL","effort_estimate":"16+ hours"}
{"id":"EFFP-008","category":"Offline","severity":"S1","effort":"E1","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"lib/firebase.ts","line":1,"title":"No Firebase persistence enabled - Firestore cache not persisted","description":"enableIndexedDbPersistence or enableMultiTabIndexedDbPersistence is not called. Firestore data is only cached in memory, lost on page refresh. Users cannot view previously loaded data while offline.","recommendation":"Call enableIndexedDbPersistence(db) in Firebase initialization. Handle the 'failed-precondition' error for multi-tab scenarios. This is a quick win that enables offline reads with minimal code.","evidence":["grep 'enablePersistence|enableIndexedDbPersistence' returns no matches outside node_modules","lib/firebase.ts does not enable persistence"],"cross_ref":"MANUAL_ONLY","roi":"HIGH","effort_estimate":"1 hour"}
{"id":"EFFP-009","category":"Offline","severity":"S2","effort":"E2","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"public/","line":0,"title":"No service worker - no offline asset caching","description":"No service worker exists for caching static assets (JS, CSS, images). When offline, the app cannot load at all even though it's a PWA candidate with install-prompt component.","recommendation":"Add next-pwa or workbox-webpack-plugin to generate service worker. Configure precaching for app shell and runtime caching for API responses. Coordinate with Firebase persistence for full offline experience.","evidence":["ls public/sw.js returns 'No such file'","components/pwa/install-prompt.tsx exists but no SW to install","next.config.js has no PWA configuration"],"cross_ref":"MANUAL_ONLY","roi":"MEDIUM","effort_estimate":"4 hours"}
{"id":"EFFP-010","category":"Offline","severity":"S3","effort":"E1","confidence":"MEDIUM","verified":"MANUAL_ONLY","file":"components/status/offline-indicator.tsx","line":7,"title":"OfflineIndicator is display-only - no sync status or retry mechanism","description":"OfflineIndicator component shows online/offline status but provides no: pending write count, sync progress, or manual retry button. Users have no visibility into what's happening with their data.","recommendation":"Enhance OfflineIndicator to show: 1) Pending write count from queue, 2) Last successful sync time, 3) Manual 'Sync Now' button. Integrate with write queue from EFFP-007.","evidence":["components/status/offline-indicator.tsx only checks navigator.onLine","No integration with any sync/queue system","Component is imported in today-page.tsx but is passive"],"cross_ref":"MANUAL_ONLY","roi":"LOW","effort_estimate":"2 hours (after EFFP-007)"}
