{"id":"CODE-001","category":"Hygiene","severity":"S2","effort":"E1","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"components/notebook/pages/today-page.tsx","line":594,"title":"Debug console logs in production component","description":"12+ debug console.log statements in single file, creating noisy debug output even when properly gated to development mode","recommendation":"Use centralized logger utility with debug level or create dedicated debug utility with feature flag control","evidence":["console.log(\"ðŸ’¾ Attempting to save:\", saveData);","console.log(\"ðŸ“Š Weekly Stats Debug:\", {...});"],"cross_ref":"grep"}
{"id":"CODE-002","category":"Hygiene","severity":"S3","effort":"E0","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"components/notebook/pages/today-page.tsx","line":305,"title":"Underscore-prefixed unused variables","description":"Multiple variables with underscore prefix indicating intentionally unused values, including computed useMemo that is never consumed","recommendation":"Remove truly unused code or add comments explaining retention for future features","evidence":["const _checkInSteps = useMemo(() => {...}, [...]);","export default function GrowthPage({ onNavigate: _onNavigate }: GrowthPageProps)"],"cross_ref":"grep"}
{"id":"CODE-003","category":"Hygiene","severity":"S3","effort":"E0","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"components/notebook/features/quick-actions-fab.tsx","line":12,"title":"TODO comments without issue references","description":"2 TODO comments found without issue tracker references. Per FALSE_POSITIVES.jsonl FP-006, TODOs should reference issue numbers","recommendation":"Create GitHub issues and add references, or document in TECHNICAL_DEBT.md","evidence":["// TODO: Make action buttons customizable by user","// TODO: Pass limit to FirestoreService when it supports configurable limits"],"cross_ref":"grep"}
{"id":"CODE-004","category":"Types","severity":"S3","effort":"E1","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"tests/firestore-service.test.ts","line":18,"title":"Any type usage in test files","description":"Test files use any type extensively for mocking, reducing type safety and potentially hiding type mismatches between mocks and real implementations","recommendation":"Create proper mock types that match actual interfaces for better test reliability","evidence":["/* eslint-disable @typescript-eslint/no-explicit-any */","let todayLog: any;","const service = createFirestoreService(mockDeps() as any);"],"cross_ref":"eslint"}
{"id":"CODE-005","category":"Types","severity":"S2","effort":"E1","confidence":"MEDIUM","verified":"DUAL_PASS_CONFIRMED","file":"components/notebook/pages/today-page.tsx","line":505,"title":"Callback parameter typed as any","description":"The docSnap parameter is typed as any instead of the proper Firestore DocumentSnapshot type in main component file","recommendation":"Import and use correct Firestore type: (docSnap: DocumentSnapshot, isMounted: boolean)","evidence":["const handleSnapshotUpdate = useCallback((docSnap: any, isMounted: boolean) => {"],"cross_ref":"typescript"}
{"id":"CODE-006","category":"Framework","severity":"S2","effort":"E2","confidence":"MEDIUM","verified":"MANUAL_ONLY","file":"components/","line":0,"title":"Missing React.Suspense for code splitting","description":"Codebase does not utilize React lazy() and Suspense for code splitting. With 100+ components, main bundle likely includes all component code upfront","recommendation":"Implement lazy-loading for heavy components like admin tabs, notebook pages, and maps component","evidence":["Grep for Suspense|lazy found only non-React uses"],"cross_ref":"MANUAL_ONLY"}
{"id":"CODE-007","category":"Framework","severity":"S2","effort":"E1","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"hooks/use-geolocation.ts","line":171,"title":"ESLint rule suppression for exhaustive deps","description":"3 instances of suppressed exhaustive-deps warnings which can hide bugs from missing dependencies","recommendation":"Review each case and document rationale if suppression is intentional","evidence":["}, []); // eslint-disable-line react-hooks/exhaustive-deps"],"cross_ref":"eslint"}
{"id":"CODE-008","category":"Framework","severity":"S1","effort":"E2","confidence":"MEDIUM","verified":"DUAL_PASS_CONFIRMED","file":"components/notebook/pages/today-page.tsx","line":1,"title":"Large component file (1179 lines)","description":"Single component with 15+ useState hooks, 10+ useRef hooks, 9 useEffect hooks, 6+ useCallback definitions, and multiple inline sub-components making it difficult to test, maintain, and understand","recommendation":"Extract concerns into separate files: today-page-hooks.ts, today-page-components/, today-page-utils.ts","evidence":["File has 1179 lines (wc -l)","15+ useState declarations (grep -c useState)","9 useEffect declarations (grep -c useEffect)"],"cross_ref":"wc_grep","verification_steps":{"first_pass":{"method":"tool_output","evidence_collected":["wc -l: 1179 lines","grep -c useState: 15+ matches","grep -c useEffect: 9 matches"]},"second_pass":{"method":"contextual_review","confirmed":true,"notes":"Re-read file structure, confirmed excessive complexity with multiple inline sub-components"},"tool_confirmation":{"tool":"NONE","reference":"wc -l and grep used for metrics, no ESLint rule for file size"}}}
{"id":"CODE-009","category":"Testing","severity":"S2","effort":"E3","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"tests/","line":0,"title":"No component tests","description":"Test files exist only for utilities and services. No React component tests found (no .test.tsx files for components)","recommendation":"Prioritize component tests for critical user flows, complex conditional rendering, and error boundary behavior","evidence":["19 test files found, all .test.ts","No .test.tsx files for components"],"cross_ref":"glob"}
{"id":"CODE-010","category":"Security","severity":"S3","effort":"E1","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"lib/utils/callable-errors.ts","line":182,"title":"Console statements in error paths","description":"Error details including message and details logged to console in development mode. error.details could potentially contain sensitive data","recommendation":"Review what data flows through error.details and ensure no PII can leak. Consider using sanitized logger utility","evidence":["console.error(\"Error details:\", { code: error.code, message: error.message, details: error.details });"],"cross_ref":"grep"}
{"id":"CODE-011","category":"AICode","severity":"S2","effort":"E1","confidence":"MEDIUM","verified":"MANUAL_ONLY","file":"components/admin/","line":0,"title":"Potential copy-paste code blocks in admin tabs","description":"Multiple admin tab files follow nearly identical patterns with same state management, refresh hooks, and error handling that could be abstracted","recommendation":"Extend AdminCrudTable abstraction or create useAdminTab hook that encapsulates common patterns","evidence":["Similar structure across quotes-tab.tsx, glossary-tab.tsx, slogans-tab.tsx"],"cross_ref":"MANUAL_ONLY"}
{"id":"CODE-012","category":"AICode","severity":"S2","effort":"E1","confidence":"MEDIUM","verified":"DUAL_PASS_CONFIRMED","file":"components/notebook/pages/today-page.tsx","line":698,"title":"Complex nested logic without early returns","description":"calculateWeeklyStats function has 90+ lines of deeply nested logic with multiple console.log statements and inline data transformation","recommendation":"Extract into custom hook useWeeklyStats for better separation of concerns","evidence":["async function calculateWeeklyStats() { if (!user) return; try { // 90+ lines } catch }"],"cross_ref":"MANUAL_ONLY"}
{"id":"CODE-013","category":"Debugging","severity":"S2","effort":"E2","confidence":"MEDIUM","verified":"MANUAL_ONLY","file":"lib/firestore-service.ts","line":0,"title":"Missing correlation IDs for request tracing","description":"Cloud function calls do not include correlation IDs for tracing requests from frontend to backend, making it difficult to correlate client errors with Cloud function logs and Sentry events. Downgraded from S1: no tool validation available for architectural patterns.","recommendation":"Add correlation ID system: generate ID in client, pass with requests, include in all log entries","evidence":["No correlationId in payload objects","No correlationId in logger calls"],"cross_ref":"MANUAL_ONLY"}
{"id":"CODE-014","category":"Debugging","severity":"S2","effort":"E1","confidence":"MEDIUM","verified":"MANUAL_ONLY","file":"various","line":0,"title":"Inconsistent error context across components","description":"Error logging is inconsistent: some use logger.error() with context, some use console.error() in development, some toast errors without logging","recommendation":"Standardize on logger.error() with consistent context: component, action, userId (masked), errorType","evidence":["Mixed use of logger.error and console.error","Inconsistent context objects in log calls"],"cross_ref":"MANUAL_ONLY"}
