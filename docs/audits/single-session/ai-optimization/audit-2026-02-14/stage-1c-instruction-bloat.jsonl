{"category":"ai-optimization","title":"doc-optimizer SKILL.md has duplicated CRITICAL RETURN PROTOCOL across 13 agent prompts","fingerprint":"ai-optimization::.claude/skills/doc-optimizer/SKILL.md::duplicated-return-protocol","severity":"S2","effort":"E2","confidence":85,"files":[".claude/skills/doc-optimizer/SKILL.md"],"why_it_matters":"58KB SKILL.md with ~800+ lines; each of 13 agent prompts repeats the same CRITICAL RETURN PROTOCOL boilerplate, adding ~400 lines of duplication that increases token cost when the skill is loaded","suggested_fix":"Extract the CRITICAL RETURN PROTOCOL to a shared section at the top of the skill and reference it from each agent prompt, or create an external template file","acceptance_tests":["doc-optimizer SKILL.md under 500 lines","CRITICAL RETURN PROTOCOL appears once, not 13 times"]}
{"category":"ai-optimization","title":"Audit skills share >50% boilerplate content without shared base","fingerprint":"ai-optimization::.claude/skills/audit-*/SKILL.md::shared-boilerplate-duplication","severity":"S2","effort":"E2","confidence":80,"files":[".claude/skills/audit-comprehensive/SKILL.md",".claude/skills/audit-code/SKILL.md",".claude/skills/audit-security/SKILL.md",".claude/skills/audit-ai-optimization/SKILL.md",".claude/skills/audit-performance/SKILL.md"],"why_it_matters":"Each audit skill independently defines Persistence Rules, Stage Structure, Output Format, and checkpoint logic â€” over 50% shared content across 9 audit skills totaling ~4000 duplicated lines","suggested_fix":"Create .claude/skills/audit-shared-base.md with common sections (persistence rules, output format, checkpoints, TDMS integration) and reference it from each audit SKILL.md","acceptance_tests":["Shared base file exists","Each audit SKILL.md references shared base instead of duplicating","Total audit skill lines reduced by >30%"]}
{"category":"ai-optimization","title":"pattern-check.js has inline pattern definitions that could be external config","fingerprint":"ai-optimization::.claude/hooks/pattern-check.js::inline-patterns-config","severity":"S3","effort":"E1","confidence":75,"files":[".claude/hooks/pattern-check.js"],"why_it_matters":"520-line hook with 10 security patterns defined inline as regex+message objects; moving to external JSON config would make patterns easier to maintain and reduce hook complexity","suggested_fix":"Extract INLINE_PATTERNS array to scripts/config/patterns.json and import it in the hook","acceptance_tests":["pattern-check.js under 200 lines","patterns.json exists with all 10 patterns","Hook still passes npm run patterns:check"]}
{"category":"ai-optimization","title":"session-start.js outputs ~45 lines of prose per session start","fingerprint":"ai-optimization::.claude/hooks/session-start.js::verbose-session-output","severity":"S3","effort":"E1","confidence":70,"files":[".claude/hooks/session-start.js"],"why_it_matters":"864-line hook outputs ~3-4KB of diagnostic text per session start including emoji-heavy checklist; while reasonable for diagnostics, the last ~200 lines are pure text output that could be condensed","suggested_fix":"Condense checklist output to a summary table format; move detailed checklist to on-demand --verbose flag","acceptance_tests":["SessionStart output under 30 lines in default mode","--verbose flag shows full checklist"]}
