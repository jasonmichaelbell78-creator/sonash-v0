{"category":"ai-optimization","title":"TECHNICAL_DEBT_MANAGEMENT_SYSTEM_PLAN.md marked COMPLETE but still in active plans/","fingerprint":"ai-optimization::docs/plans/TECHNICAL_DEBT_MANAGEMENT_SYSTEM_PLAN.md::completed-plan-not-archived","severity":"S3","effort":"E0","confidence":85,"files":["docs/plans/TECHNICAL_DEBT_MANAGEMENT_SYSTEM_PLAN.md"],"why_it_matters":"Completed plan marked as 'COMPLETE - All 18 Phases Implemented' remains in active docs/plans/ directory instead of docs/archive/completed-plans/, adding clutter to active planning docs","suggested_fix":"Move to docs/archive/completed-plans/ and update any cross-references","acceptance_tests":["File exists in docs/archive/completed-plans/","File no longer in docs/plans/","No broken cross-references"]}
{"category":"ai-optimization","title":"SESSION_HISTORY.md and SESSION_DECISIONS.md not in DOCUMENTATION_INDEX.md","fingerprint":"ai-optimization::docs/SESSION_HISTORY.md::missing-from-doc-index","severity":"S3","effort":"E0","confidence":80,"files":["docs/SESSION_HISTORY.md","docs/SESSION_DECISIONS.md","DOCUMENTATION_INDEX.md"],"why_it_matters":"Two active documentation files exist in docs/ but are not tracked in the documentation index, making them invisible to automated doc tooling and cross-reference checks","suggested_fix":"Run npm run docs:index to regenerate DOCUMENTATION_INDEX.md, or add entries manually","acceptance_tests":["Both files appear in DOCUMENTATION_INDEX.md","npm run docs:index shows no missing files"]}
{"category":"ai-optimization","title":"session-start.js outputs 40+ decorative lines with emoji and redundant checklist per session","fingerprint":"ai-optimization::.claude/hooks/session-start.js::verbose-decorative-output","severity":"S2","effort":"E1","confidence":90,"files":[".claude/hooks/session-start.js"],"why_it_matters":"~50-100 tokens per session consumed by decorative borders, emoji, and redundant status messages. Lines 482-505 output a 25-line SESSION CHECKLIST that duplicates session-begin SKILL.md content. Total ~50 lines of stdout context injection per session.","suggested_fix":"Move SESSION CHECKLIST output to stderr (user-visible but not context-injected). Consolidate to a single summary table; move verbose details behind --verbose flag. Keep only actionable warnings on stdout.","acceptance_tests":["SessionStart output under 20 lines default on stdout","SESSION CHECKLIST text is on stderr not stdout","--verbose shows full output","Total stdout from session-start.js under 10 lines when no issues"]}
{"category":"ai-optimization","title":"Multi-line regex with greedy [\\s\\S]*? quantifier in auto-save-context.js","fingerprint":"ai-optimization::.claude/hooks/auto-save-context.js::greedy-multiline-regex","severity":"S2","effort":"E1","confidence":80,"files":[".claude/hooks/auto-save-context.js"],"why_it_matters":"Line 126 uses [\\s\\S]*? for multi-line markdown section matching - potential ReDoS on crafted input; should use line-by-line parsing per two-strikes rule","suggested_fix":"Replace regex with line-split parsing: split on \\n, find section start, scan until next ## or ---","acceptance_tests":["No [\\s\\S]*? patterns in hook","Section parsing still works correctly","FIX_TEMPLATES Template 21 pattern applied"]}
{"category":"ai-optimization","title":"JSONL line counting pattern repeated 5x without abstraction","fingerprint":"ai-optimization::scripts::duplicated-jsonl-line-count","severity":"S3","effort":"E0","confidence":85,"files":[".claude/hooks/session-start.js"],"why_it_matters":".trim().split('\\n').filter(Boolean).length pattern repeated 5 times across hooks/scripts; a shared helper would reduce duplication and ensure consistent behavior","suggested_fix":"Extract to scripts/lib/count-jsonl-lines.js helper and import in all 5 locations","acceptance_tests":["Helper function exists","All 5 call sites use the helper","npm run patterns:check passes"]}
{"category":"ai-optimization","title":"String concatenation for file paths instead of path.join","fingerprint":"ai-optimization::scripts/archive-doc.js::string-path-concat","severity":"S3","effort":"E0","confidence":75,"files":["scripts/archive-doc.js"],"why_it_matters":"Using filePath + '.tmp' and filePath + '.bak' instead of path operations; while unlikely to break on consistent OS, violates cross-platform safety patterns","suggested_fix":"Replace with path-based operations or template literals with documented intent","acceptance_tests":["No string concatenation for path construction","path.join used for temp file paths"]}
{"category":"ai-optimization","title":"Fragile markdown field parsing regex repeated across 3+ scripts","fingerprint":"ai-optimization::scripts::duplicated-markdown-field-regex","severity":"S2","effort":"E1","confidence":80,"files":[".claude/hooks/commit-tracker.js",".claude/hooks/auto-save-context.js"],"why_it_matters":"Patterns like /Current Session Count(er)?.*:(\\d+)/i appear in 3+ scripts with slight variations; fragile to markdown formatting changes and duplicated maintenance burden","suggested_fix":"Extract to scripts/lib/parse-markdown-field.js with parseMarkdownField(content, fieldName) helper","acceptance_tests":["Shared helper exists","All call sites use the helper","Markdown field parsing consistent across scripts"]}
{"category":"ai-optimization","title":"Hooks output decorative error messages instead of machine-readable format","fingerprint":"ai-optimization::.claude/hooks::decorative-error-output","severity":"S3","effort":"E2","confidence":70,"files":[".claude/hooks/auto-save-context.js",".claude/hooks/commit-tracker.js",".claude/hooks/large-context-warning.js"],"why_it_matters":"Hook console.error blocks use 5-12 line decorative formatting with borders and emoji for errors that are only machine-consumed; wastes tokens in conversation context","suggested_fix":"Use structured JSON stderr output for hook errors; reserve decorative output for user-facing messages only","acceptance_tests":["Hook errors output as single-line JSON to stderr","No multi-line decorative error blocks in hooks"]}
{"category":"ai-optimization","title":"Unused fields in commit-log.jsonl state file","fingerprint":"ai-optimization::.claude/state/commit-log.jsonl::unused-fields","severity":"S3","effort":"E0","confidence":70,"files":[".claude/state/commit-log.jsonl",".claude/hooks/commit-tracker.js"],"why_it_matters":"authorDate and author fields in commit-log.jsonl entries are often null or unused by any consumer script; removing could reduce file size by 15-20%","suggested_fix":"Remove unused fields from commit-tracker.js output; verify no script reads these fields","acceptance_tests":["No authorDate/author fields in new commit-log entries","No script references these fields","File size reduced"]}
{"category":"ai-optimization","title":"doc-optimizer SKILL.md has duplicated CRITICAL RETURN PROTOCOL across 13 agent prompts","fingerprint":"ai-optimization::.claude/skills/doc-optimizer/SKILL.md::duplicated-return-protocol","severity":"S2","effort":"E2","confidence":85,"files":[".claude/skills/doc-optimizer/SKILL.md"],"why_it_matters":"58KB SKILL.md with ~800+ lines; each of 13 agent prompts repeats the same CRITICAL RETURN PROTOCOL boilerplate, adding ~400 lines of duplication that increases token cost when the skill is loaded","suggested_fix":"Extract the CRITICAL RETURN PROTOCOL to a shared section at the top of the skill and reference it from each agent prompt, or create an external template file","acceptance_tests":["doc-optimizer SKILL.md under 500 lines","CRITICAL RETURN PROTOCOL appears once, not 13 times"]}
{"category":"ai-optimization","title":"Audit skills share >50% boilerplate content without shared base","fingerprint":"ai-optimization::.claude/skills/audit-*/SKILL.md::shared-boilerplate-duplication","severity":"S2","effort":"E2","confidence":80,"files":[".claude/skills/audit-comprehensive/SKILL.md",".claude/skills/audit-code/SKILL.md",".claude/skills/audit-security/SKILL.md",".claude/skills/audit-ai-optimization/SKILL.md",".claude/skills/audit-performance/SKILL.md"],"why_it_matters":"Each audit skill independently defines Persistence Rules, Stage Structure, Output Format, and checkpoint logic - over 50% shared content across 9 audit skills totaling ~4000 duplicated lines","suggested_fix":"Create .claude/skills/audit-shared-base.md with common sections (persistence rules, output format, checkpoints, TDMS integration) and reference it from each audit SKILL.md","acceptance_tests":["Shared base file exists","Each audit SKILL.md references shared base instead of duplicating","Total audit skill lines reduced by >30%"]}
{"category":"ai-optimization","title":"pattern-check.js has inline pattern definitions that could be external config","fingerprint":"ai-optimization::.claude/hooks/pattern-check.js::inline-patterns-config","severity":"S3","effort":"E1","confidence":75,"files":[".claude/hooks/pattern-check.js"],"why_it_matters":"520-line hook with 10 security patterns defined inline as regex+message objects; moving to external JSON config would make patterns easier to maintain and reduce hook complexity","suggested_fix":"Extract INLINE_PATTERNS array to scripts/config/patterns.json and import it in the hook","acceptance_tests":["pattern-check.js under 200 lines","patterns.json exists with all 10 patterns","Hook still passes npm run patterns:check"]}
{"category":"ai-optimization","title":"SessionStart: session-start.js spawns 6+ sequential execSync subprocesses","fingerprint":"ai-optimization::session-start.js::sequential-execsync","severity":"S2","effort":"E2","confidence":95,"files":[".claude/hooks/session-start.js"],"why_it_matters":"SessionStart is on the critical path for every new session. session-start.js calls execSync sequentially for: node -v, npm -v, npm ci (root), npm ci (functions), npm run build (functions), npm run test:build, node scripts/check-pattern-compliance.js, node scripts/run-consolidation.js. Total hook time can exceed 30-60 seconds.","suggested_fix":"Parallelize independent operations using Promise.all with child_process.exec (async). npm ci root and npm ci functions are independent. Build steps that depend on install can be chained but run concurrently with unrelated checks.","acceptance_tests":["SessionStart completes in under 15 seconds when no installs are needed","Independent checks (pattern-compliance, consolidation, TDMS) run in parallel"]}
{"category":"ai-optimization","title":"SessionStart: check-remote-session-context.js runs git fetch on every session start","fingerprint":"ai-optimization::check-remote-session-context.js::git-fetch-critical-path","severity":"S2","effort":"E1","confidence":90,"files":[".claude/hooks/check-remote-session-context.js"],"why_it_matters":"git fetch --quiet origin runs synchronously on SessionStart critical path. Network latency can add 2-10+ seconds to every session startup. The hook then iterates up to 10 remote branches calling git show for each, adding further latency with multiple sequential execFileSync calls.","suggested_fix":"Move git fetch to a background/async operation or cache the result. Only re-fetch if last fetch was more than N minutes ago.","acceptance_tests":["SessionStart does not block on network I/O for remote branch checking","git fetch result is cached with a TTL of at least 5 minutes"]}
{"category":"ai-optimization","title":"SessionStart: stop-serena-dashboard.js spawns PowerShell subprocesses for process discovery","fingerprint":"ai-optimization::stop-serena-dashboard.js::powershell-subprocess-overhead","severity":"S3","effort":"E1","confidence":85,"files":[".claude/hooks/stop-serena-dashboard.js"],"why_it_matters":"On Windows, this hook spawns PowerShell twice plus taskkill. PowerShell startup alone adds 500-2000ms. This runs on every SessionStart even when no Serena dashboard is running.","suggested_fix":"Use a lighter-weight check first: try to connect to port 24282 with Node.js net.createConnection() which takes ~5ms if nothing is listening. Only spawn PowerShell if something is actually listening.","acceptance_tests":["When no process is on port 24282, hook completes in under 50ms","PowerShell is only spawned when a listening process is confirmed"]}
{"category":"ai-optimization","title":"PostToolUse Write: 10 sequential hook processes spawned per Write operation","fingerprint":"ai-optimization::posttooluse-write::10-sequential-hooks","severity":"S1","effort":"E2","confidence":95,"files":[".claude/settings.json"],"why_it_matters":"Every Write tool call spawns 10 separate Node.js processes sequentially. Node.js cold start is ~30-50ms each, so minimum overhead is 300-500ms per Write even when all hooks bail out early. This is the most frequently triggered hook chain. For sessions with 50+ writes, this adds 25-50 seconds of cumulative delay.","suggested_fix":"Consolidate into a single unified PostToolUse hook that runs all checks in-process. Each current hook does simple regex/string matching on file paths and content -- no reason to spawn separate processes. A single entry point could import check functions and run them sequentially in one process, saving ~9 process spawns per Write.","acceptance_tests":["PostToolUse Write hooks complete in under 100ms total for non-matching files","Only 1 Node.js process is spawned instead of 10","All validation checks still run (consolidated, not removed)"]}
{"category":"ai-optimization","title":"PostToolUse Edit: 9 sequential hook processes spawned per Edit operation","fingerprint":"ai-optimization::posttooluse-edit::9-sequential-hooks","severity":"S1","effort":"E2","confidence":95,"files":[".claude/settings.json"],"why_it_matters":"Every Edit tool call spawns 9 separate Node.js processes. Same overhead as Write hooks minus audit-s0s1-validator. Edit is the most common tool used during coding sessions.","suggested_fix":"Same consolidation as Write hooks. Create a unified post-tool-use.js that accepts CLAUDE_TOOL as a parameter and runs all applicable checks in a single process. Share the file content read across checks to avoid redundant fs.readFileSync calls.","acceptance_tests":["PostToolUse Edit hooks complete in under 100ms total for non-matching files","Only 1 Node.js process is spawned instead of 9"]}
{"category":"ai-optimization","title":"PostToolUse Read: 3 hooks with redundant file reads and state tracking","fingerprint":"ai-optimization::posttooluse-read::redundant-state-tracking","severity":"S2","effort":"E1","confidence":85,"files":[".claude/hooks/large-context-warning.js",".claude/hooks/auto-save-context.js",".claude/hooks/compaction-handoff.js"],"why_it_matters":"On every Read operation, 3 separate processes spawn. All three read .context-tracking-state.json independently. Combined with per-process overhead, this multiplies I/O waste. For the first 15-20 reads in a session (before any threshold is hit), all 3 hooks do nothing but return 'ok'.","suggested_fix":"Consolidate into a single context-monitor.js hook that handles all tracking, warnings, auto-save, and handoff preparation in one process spawn. This reduces per-Read overhead from 3 process spawns to 1, and shares state file reads.","acceptance_tests":["Read operations trigger 1 PostToolUse hook instead of 3","Context tracking state is read only once per Read operation","Per-Read hook latency is under 100ms"]}
{"category":"ai-optimization","title":"compaction-handoff.js uses execSync (shell) instead of execFileSync for git commands","fingerprint":"ai-optimization::compaction-handoff.js::execsync-shell-overhead","severity":"S2","effort":"E0","confidence":95,"files":[".claude/hooks/compaction-handoff.js"],"why_it_matters":"compaction-handoff.js gitExec() uses execSync (which spawns a shell) instead of execFileSync (which calls git directly). Shell spawn adds ~20-50ms overhead per call. The function is called 5 times. This is both a performance issue and a security issue (shell injection risk via crafted branch names).","suggested_fix":"Change execSync to execFileSync with array arguments, matching the pattern already used in commit-tracker.js and pre-compaction-save.js.","acceptance_tests":["compaction-handoff.js uses execFileSync instead of execSync for all git commands","No shell is spawned for git operations"]}
{"category":"ai-optimization","title":"agent-trigger-enforcer.js loads external config via require() on every invocation","fingerprint":"ai-optimization::agent-trigger-enforcer.js::require-config-overhead","severity":"S3","effort":"E1","confidence":80,"files":[".claude/hooks/agent-trigger-enforcer.js","scripts/config/load-config.js"],"why_it_matters":"agent-trigger-enforcer.js calls loadConfigWithRegex('agent-triggers') which reads and parses a JSON file from disk, then recursively converts regex descriptor objects to RegExp instances. This happens on every Write, Edit, and MultiEdit operation.","suggested_fix":"Cache the parsed config in-memory by using require() for the JSON file instead of fs.readFileSync, or add a module-level cache with a file mtime check.","acceptance_tests":["Agent trigger config is loaded from disk at most once per hook process invocation","Config parsing overhead is less than 5ms"]}
{"category":"ai-optimization","title":"Duplicate file content reads across PostToolUse hooks","fingerprint":"ai-optimization::posttooluse::duplicate-file-reads","severity":"S2","effort":"E1","confidence":90,"files":[".claude/hooks/firestore-write-block.js",".claude/hooks/app-check-validator.js",".claude/hooks/typescript-strict-check.js",".claude/hooks/repository-pattern-check.js",".claude/hooks/test-mocking-validator.js",".claude/hooks/component-size-check.js",".claude/hooks/pattern-check.js"],"why_it_matters":"When the Edit tool is used, up to 7 hooks independently call fs.readFileSync on the same target file. For a 500-line TypeScript component file, this means 7 separate disk reads of the same content.","suggested_fix":"In a consolidated hook, read the file once and pass the content to all check functions.","acceptance_tests":["Target file is read from disk at most once across all PostToolUse checks","File content is shared across check functions in unified hook"]}
{"category":"ai-optimization","title":"large-context-warning.js reads entire file just to count lines","fingerprint":"ai-optimization::large-context-warning.js::full-file-read-for-line-count","severity":"S3","effort":"E0","confidence":85,"files":[".claude/hooks/large-context-warning.js"],"why_it_matters":"large-context-warning.js reads the entire file content with fs.readFileSync then splits by newline to count lines. For large files (the exact ones this hook is designed to warn about), this can be slow and memory-intensive.","suggested_fix":"Use fs.statSync to get file size and estimate line count, or use a streaming approach with fs.createReadStream to count newlines without loading the entire file into memory.","acceptance_tests":["Line counting for files over 100KB uses streaming or size estimation","Hook does not load entire file into memory for line counting"]}
{"category":"ai-optimization","title":"check-edit-requirements.js and check-write-requirements.js are superseded but still present","fingerprint":"ai-optimization::orphaned-hooks::check-edit-write-requirements","severity":"S3","effort":"E0","confidence":90,"files":[".claude/hooks/check-edit-requirements.js",".claude/hooks/check-write-requirements.js"],"why_it_matters":"check-requirements.js was created as a unified replacement. The old files are still present on disk but are not referenced in settings.json hooks configuration. They add confusion and maintenance burden.","suggested_fix":"Delete check-edit-requirements.js and check-write-requirements.js since they are fully superseded by check-requirements.js.","acceptance_tests":["check-edit-requirements.js and check-write-requirements.js are removed","No hook configuration references the deleted files","check-requirements.js handles all Write/Edit/MultiEdit cases"]}
{"category":"ai-optimization","title":"UserPromptSubmit: 4 hooks run on every user message including heavy regex matching","fingerprint":"ai-optimization::userpromptsubmit::4-hooks-every-message","severity":"S2","effort":"E1","confidence":85,"files":[".claude/hooks/alerts-reminder.js",".claude/hooks/analyze-user-request.js",".claude/hooks/session-end-reminder.js",".claude/hooks/plan-mode-suggestion.js"],"why_it_matters":"Every user message triggers 4 separate Node.js process spawns. analyze-user-request.js constructs multiple RegExp objects dynamically per invocation. plan-mode-suggestion.js tests 20+ regex patterns. alerts-reminder.js reads 4 separate JSON files. Total overhead is ~200-400ms per user message.","suggested_fix":"Consolidate into a single user-prompt-handler.js. Read all necessary state files once. Run all pattern matching in a single pass.","acceptance_tests":["UserPromptSubmit hooks complete in under 80ms total","Only 1 Node.js process is spawned for UserPromptSubmit"]}
{"category":"ai-optimization","title":"pre-compaction-save.js calls 7 git subprocess operations sequentially","fingerprint":"ai-optimization::pre-compaction-save.js::7-sequential-git-calls","severity":"S3","effort":"E1","confidence":80,"files":[".claude/hooks/pre-compaction-save.js"],"why_it_matters":"pre-compaction-save.js gatherGitContext() calls execFileSync 7 times sequentially. Each spawns a separate git process. While PreCompact is less frequent than PostToolUse, it adds unnecessary latency during compaction.","suggested_fix":"Combine git commands where possible. Use git status --porcelain=v2 to get staged, unstaged, and untracked files in a single call. This reduces 7 calls to approximately 3.","acceptance_tests":["Git context gathering uses no more than 4 subprocess calls","git status --porcelain replaces separate diff and ls-files calls"]}
{"category":"ai-optimization","title":"commit-tracker.js spawns 4 git subprocesses on commit detection","fingerprint":"ai-optimization::commit-tracker.js::4-git-subprocesses","severity":"S3","effort":"E1","confidence":80,"files":[".claude/hooks/commit-tracker.js"],"why_it_matters":"When a commit is detected, commit-tracker.js calls gitExec 4 times: rev-parse HEAD, git log --format, rev-parse --abbrev-ref HEAD, and diff-tree.","suggested_fix":"Combine rev-parse HEAD and rev-parse --abbrev-ref HEAD into a single call using git log --format with ref names. This reduces from 4 to 2 git calls.","acceptance_tests":["Commit tracking uses no more than 3 git subprocess calls","rev-parse calls are combined into the log format string"]}
{"category":"ai-optimization","title":"pattern-check.js calls fs.realpathSync twice (file and project dir)","fingerprint":"ai-optimization::pattern-check.js::double-realpathsync","severity":"S3","effort":"E0","confidence":75,"files":[".claude/hooks/pattern-check.js"],"why_it_matters":"pattern-check.js calls fs.realpathSync on both the target file path and the project directory on every invocation. The project directory never changes within a session, so resolving it every time is wasteful.","suggested_fix":"Cache the resolved project directory path at module load time.","acceptance_tests":["Project directory realpathSync result is cached","Only the target file path is resolved per invocation"]}
{"category":"ai-optimization","title":"alerts-reminder.js reads 4 JSON files synchronously on every user prompt","fingerprint":"ai-optimization::alerts-reminder.js::4-file-reads-every-prompt","severity":"S3","effort":"E1","confidence":80,"files":[".claude/hooks/alerts-reminder.js"],"why_it_matters":"alerts-reminder.js reads up to 4 files on every UserPromptSubmit: pending-alerts.json, alerts-acknowledged.json, .context-tracking-state.json, and pending-mcp-save.json. This happens on every single user message, even when there are no pending alerts.","suggested_fix":"Add a fast-path check: if pending-alerts.json does not exist (the common case), skip all subsequent file reads.","acceptance_tests":["When no pending-alerts.json exists, hook completes in under 5ms with zero file reads","File reads are skipped when alerts file is absent"]}
{"category":"ai-optimization","title":"Skill overlap: sonarcloud-sprint is superseded by sonarcloud","fingerprint":"ai-optimization::.claude/skills/sonarcloud-sprint/SKILL.md::superseded-by-sonarcloud","severity":"S2","effort":"E1","confidence":95,"files":[".claude/skills/sonarcloud-sprint/SKILL.md",".claude/skills/sonarcloud/SKILL.md"],"why_it_matters":"sonarcloud skill explicitly states it consolidates sonarcloud-sprint, yet both still exist as separate skills. Users may invoke the older skill and miss newer capabilities.","suggested_fix":"Delete .claude/skills/sonarcloud-sprint/ directory and update SKILL_INDEX.md to list /sonarcloud with all modes","acceptance_tests":["sonarcloud-sprint directory removed","SKILL_INDEX.md lists /sonarcloud with --sprint flag documented"]}
{"category":"ai-optimization","title":"Skill overlap: code-reviewer listed in two SKILL_INDEX categories","fingerprint":"ai-optimization::.claude/skills/SKILL_INDEX.md::code-reviewer-duplicate-listing","severity":"S3","effort":"E0","confidence":100,"files":[".claude/skills/SKILL_INDEX.md"],"why_it_matters":"code-reviewer appears in both 'Audit & Code Quality' and 'Project Specific' categories in SKILL_INDEX.md, inflating skill count.","suggested_fix":"Remove duplicate listing from 'Project Specific' category. Keep only in 'Audit & Code Quality'.","acceptance_tests":["code-reviewer appears exactly once in SKILL_INDEX.md","Total skill count updated to reflect actual unique count"]}
{"category":"ai-optimization","title":"Skill overlap: senior-fullstack listed in two SKILL_INDEX categories","fingerprint":"ai-optimization::.claude/skills/SKILL_INDEX.md::senior-fullstack-duplicate-listing","severity":"S3","effort":"E0","confidence":100,"files":[".claude/skills/SKILL_INDEX.md"],"why_it_matters":"senior-fullstack appears in both 'Development Roles' and 'Data & Analysis' categories. Inflates count and confuses discovery.","suggested_fix":"Remove duplicate listing from 'Data & Analysis' category","acceptance_tests":["senior-fullstack appears exactly once in SKILL_INDEX.md"]}
{"category":"ai-optimization","title":"Skill overlap: frontend-design vs senior-frontend have overlapping scope","fingerprint":"ai-optimization::.claude/skills/frontend-design/SKILL.md::overlaps-senior-frontend","severity":"S3","effort":"E2","confidence":75,"files":[".claude/skills/frontend-design/SKILL.md",".claude/skills/senior-frontend/SKILL.md"],"why_it_matters":"frontend-design builds 'production-grade frontend interfaces' while senior-frontend covers 'frontend development with React, Next.js, Tailwind'. Both handle frontend component creation.","suggested_fix":"Consolidate: make frontend-design the design-focused skill and senior-frontend the engineering skill. Add explicit cross-references.","acceptance_tests":["Each skill's description clearly states when to use it vs the other","No overlapping trigger patterns in CLAUDE.md Section 6"]}
{"category":"ai-optimization","title":"Skill overlap: ui-design-system vs ux-researcher-designer vs frontend-design form a 3-way overlap","fingerprint":"ai-optimization::.claude/skills/ui-design-system/SKILL.md::3-way-design-overlap","severity":"S2","effort":"E2","confidence":80,"files":[".claude/skills/ui-design-system/SKILL.md",".claude/skills/ux-researcher-designer/SKILL.md",".claude/skills/frontend-design/SKILL.md"],"why_it_matters":"Three skills cover design work with unclear boundaries. A 'build a settings page' request could trigger any of them.","suggested_fix":"Create a decision tree in SKILL_INDEX.md: research/personas -> ux-researcher-designer, design system/tokens -> ui-design-system, building actual UI -> frontend-design.","acceptance_tests":["SKILL_INDEX.md has decision tree for design skills","Each design skill references the others with clear boundary statements"]}
{"category":"ai-optimization","title":"Skill overlap: senior-qa vs webapp-testing vs test-suite cover testing domain","fingerprint":"ai-optimization::.claude/skills/senior-qa/SKILL.md::testing-skill-overlap","severity":"S3","effort":"E2","confidence":70,"files":[".claude/skills/senior-qa/SKILL.md",".claude/skills/webapp-testing/SKILL.md",".claude/skills/test-suite/SKILL.md"],"why_it_matters":"Three skills cover testing: senior-qa (strategy), webapp-testing (Playwright), test-suite (multi-phase Playwright). webapp-testing and test-suite both use Playwright.","suggested_fix":"Merge webapp-testing into test-suite as its browser interaction backend. Keep senior-qa for strategy/coverage.","acceptance_tests":["webapp-testing functionality available via test-suite","senior-qa clearly scoped to strategy, not execution"]}
{"category":"ai-optimization","title":"Skill overlap: checkpoint vs save-context both preserve session state","fingerprint":"ai-optimization::.claude/skills/checkpoint/SKILL.md::overlaps-save-context","severity":"S3","effort":"E1","confidence":80,"files":[".claude/skills/checkpoint/SKILL.md",".claude/skills/save-context/SKILL.md"],"why_it_matters":"checkpoint saves state to SESSION_CONTEXT.md while save-context saves to MCP memory. Both aim to preserve session state for recovery.","suggested_fix":"Merge into single /checkpoint skill with --mcp flag for memory persistence.","acceptance_tests":["Single skill handles both persistence targets","Help text explains when to use --mcp flag"]}
{"category":"ai-optimization","title":"Skill overlap: docs-sync vs docs-update both handle documentation maintenance","fingerprint":"ai-optimization::.claude/skills/docs-sync/SKILL.md::overlaps-docs-update","severity":"S3","effort":"E1","confidence":75,"files":[".claude/skills/docs-sync/SKILL.md",".claude/skills/docs-update/SKILL.md"],"why_it_matters":"docs-sync validates template-instance synchronization while docs-update updates DOCUMENTATION_INDEX.md and cross-references. Both trigger on doc changes.","suggested_fix":"Merge into single /docs-maintain skill.","acceptance_tests":["Single command handles all doc maintenance","Pre-commit hook calls the unified skill"]}
{"category":"ai-optimization","title":"Orphaned skill: find-skills not in SKILL_INDEX.md","fingerprint":"ai-optimization::.claude/skills/find-skills/SKILL.md::orphaned-from-index","severity":"S2","effort":"E0","confidence":100,"files":[".claude/skills/find-skills/SKILL.md",".claude/skills/SKILL_INDEX.md"],"why_it_matters":"find-skills exists in filesystem but is not listed in SKILL_INDEX.md. The skill helps users find installable skills - ironic that it itself is unfindable.","suggested_fix":"Add find-skills to the Infrastructure & Setup category in SKILL_INDEX.md","acceptance_tests":["find-skills listed in SKILL_INDEX.md","Total skill count updated"]}
{"category":"ai-optimization","title":"Orphaned skill: pre-commit-fixer not in SKILL_INDEX.md","fingerprint":"ai-optimization::.claude/skills/pre-commit-fixer/SKILL.md::orphaned-from-index","severity":"S2","effort":"E0","confidence":100,"files":[".claude/skills/pre-commit-fixer/SKILL.md",".claude/skills/SKILL_INDEX.md"],"why_it_matters":"pre-commit-fixer automates fix-commit-retry cycles but is not listed in SKILL_INDEX.md.","suggested_fix":"Add pre-commit-fixer to Infrastructure & Setup or Audit & Code Quality in SKILL_INDEX.md","acceptance_tests":["pre-commit-fixer listed in SKILL_INDEX.md"]}
{"category":"ai-optimization","title":"Orphaned skill: task-next not in SKILL_INDEX.md","fingerprint":"ai-optimization::.claude/skills/task-next/SKILL.md::orphaned-from-index","severity":"S2","effort":"E0","confidence":100,"files":[".claude/skills/task-next/SKILL.md",".claude/skills/SKILL_INDEX.md"],"why_it_matters":"task-next provides dependency-aware task selection from ROADMAP.md but is not listed in SKILL_INDEX.md.","suggested_fix":"Add task-next to Planning category in SKILL_INDEX.md","acceptance_tests":["task-next listed in SKILL_INDEX.md"]}
{"category":"ai-optimization","title":"Orphaned skill: multi-ai-audit not in SKILL_INDEX.md","fingerprint":"ai-optimization::.claude/skills/multi-ai-audit/SKILL.md::orphaned-from-index","severity":"S2","effort":"E0","confidence":100,"files":[".claude/skills/multi-ai-audit/SKILL.md",".claude/skills/SKILL_INDEX.md"],"why_it_matters":"multi-ai-audit orchestrates multi-AI consensus audits but is not listed in SKILL_INDEX.md.","suggested_fix":"Add multi-ai-audit to Audit & Code Quality category in SKILL_INDEX.md","acceptance_tests":["multi-ai-audit listed in SKILL_INDEX.md"]}
{"category":"ai-optimization","title":"Orphaned skill: add-debt not in SKILL_INDEX.md","fingerprint":"ai-optimization::.claude/skills/add-debt/SKILL.md::orphaned-from-index","severity":"S2","effort":"E0","confidence":100,"files":[".claude/skills/add-debt/SKILL.md",".claude/skills/SKILL_INDEX.md"],"why_it_matters":"add-debt provides TDMS intake workflow but is not listed in SKILL_INDEX.md.","suggested_fix":"Add add-debt to Project Specific category in SKILL_INDEX.md","acceptance_tests":["add-debt listed in SKILL_INDEX.md"]}
{"category":"ai-optimization","title":"Orphaned skill: verify-technical-debt not in SKILL_INDEX.md","fingerprint":"ai-optimization::.claude/skills/verify-technical-debt/SKILL.md::orphaned-from-index","severity":"S2","effort":"E0","confidence":100,"files":[".claude/skills/verify-technical-debt/SKILL.md",".claude/skills/SKILL_INDEX.md"],"why_it_matters":"verify-technical-debt triages and classifies debt items but is not listed in SKILL_INDEX.md.","suggested_fix":"Add verify-technical-debt to Project Specific category in SKILL_INDEX.md","acceptance_tests":["verify-technical-debt listed in SKILL_INDEX.md"]}
{"category":"ai-optimization","title":"Orphaned skill: pr-retro not in SKILL_INDEX.md","fingerprint":"ai-optimization::.claude/skills/pr-retro/SKILL.md::orphaned-from-index","severity":"S2","effort":"E0","confidence":100,"files":[".claude/skills/pr-retro/SKILL.md",".claude/skills/SKILL_INDEX.md"],"why_it_matters":"pr-retro provides PR review retrospective analysis but is not listed in SKILL_INDEX.md.","suggested_fix":"Add pr-retro to Project Specific category in SKILL_INDEX.md","acceptance_tests":["pr-retro listed in SKILL_INDEX.md"]}
{"category":"ai-optimization","title":"Orphaned skill: sonarcloud not in SKILL_INDEX.md (only sonarcloud-sprint listed)","fingerprint":"ai-optimization::.claude/skills/sonarcloud/SKILL.md::orphaned-from-index","severity":"S2","effort":"E0","confidence":100,"files":[".claude/skills/sonarcloud/SKILL.md",".claude/skills/SKILL_INDEX.md"],"why_it_matters":"The unified sonarcloud skill supersedes sonarcloud-sprint but the index still lists only sonarcloud-sprint.","suggested_fix":"Replace sonarcloud-sprint with sonarcloud in SKILL_INDEX.md","acceptance_tests":["sonarcloud listed in SKILL_INDEX.md","sonarcloud-sprint removed from index"]}
{"category":"ai-optimization","title":"Orphaned skill: test-suite not in SKILL_INDEX.md","fingerprint":"ai-optimization::.claude/skills/test-suite/SKILL.md::orphaned-from-index","severity":"S2","effort":"E0","confidence":100,"files":[".claude/skills/test-suite/SKILL.md",".claude/skills/SKILL_INDEX.md"],"why_it_matters":"test-suite provides multi-phase UI testing but is not listed in SKILL_INDEX.md. Referenced in CLAUDE.md Section 6 but invisible in index.","suggested_fix":"Add test-suite to Testing category in SKILL_INDEX.md","acceptance_tests":["test-suite listed in SKILL_INDEX.md"]}
{"category":"ai-optimization","title":"SKILL_INDEX.md claims 55 total skills but count is inaccurate","fingerprint":"ai-optimization::.claude/skills/SKILL_INDEX.md::inaccurate-skill-count","severity":"S3","effort":"E0","confidence":95,"files":[".claude/skills/SKILL_INDEX.md"],"why_it_matters":"Header claims 55 skills but filesystem has 56 directories, index has duplicate listings, and 9 skills are missing from the index. Misleading metadata.","suggested_fix":"Recalculate: count unique skill directories, remove duplicates, add missing skills, update header count","acceptance_tests":["Total count matches number of unique entries in index","No duplicate listings"]}
{"category":"ai-optimization","title":"Agent prompts in audit-process lack CRITICAL RETURN PROTOCOL","fingerprint":"ai-optimization::.claude/skills/audit-process/SKILL.md::missing-return-protocol","severity":"S2","effort":"E1","confidence":90,"files":[".claude/skills/audit-process/SKILL.md"],"why_it_matters":"audit-process has 12+ Task() agent prompts that lack the CRITICAL RETURN PROTOCOL. Agents may return verbose summaries, bloating orchestrator context and risking overflow.","suggested_fix":"Add 'Return ONLY: COMPLETE: [id] wrote N findings to [path]' to every Task() prompt in audit-process","acceptance_tests":["Every Task() prompt in audit-process contains Return ONLY: COMPLETE pattern","No agent returns full findings to orchestrator"]}
{"category":"ai-optimization","title":"Agent prompts in audit-process Stage 1 use markdown output instead of JSONL","fingerprint":"ai-optimization::.claude/skills/audit-process/SKILL.md::stage1-markdown-not-jsonl","severity":"S3","effort":"E2","confidence":85,"files":[".claude/skills/audit-process/SKILL.md"],"why_it_matters":"Stage 1 agents write .md files instead of JSONL. The markdown format cannot be programmatically aggregated or deduplicated.","suggested_fix":"Convert Stage 1 inventory output to JSONL for consistency or document why markdown is intentional.","acceptance_tests":["Stage 1 output format is documented as intentional OR converted to JSONL","Aggregation pipeline handles Stage 1 output"]}
{"category":"ai-optimization","title":"Agent prompts in audit-documentation lack explicit JSONL format spec","fingerprint":"ai-optimization::.claude/skills/audit-documentation/SKILL.md::vague-agent-prompts","severity":"S2","effort":"E1","confidence":80,"files":[".claude/skills/audit-documentation/SKILL.md"],"why_it_matters":"audit-documentation agents describe what to look for but do not include a JSONL schema template. Agents may produce inconsistent output formats, breaking aggregation.","suggested_fix":"Add the standard JSONL schema template to each agent prompt","acceptance_tests":["Every agent prompt includes JSONL schema example","Output files parse cleanly with jq"]}
{"category":"ai-optimization","title":"Agent prompts in audit-enhancements reference subagent without JSONL format","fingerprint":"ai-optimization::.claude/skills/audit-enhancements/SKILL.md::missing-jsonl-spec-in-prompt","severity":"S2","effort":"E1","confidence":75,"files":[".claude/skills/audit-enhancements/SKILL.md"],"why_it_matters":"audit-enhancements agent prompts lack explicit JSONL schema, output path, and return protocol.","suggested_fix":"Update audit-enhancements to match the agent prompt quality standard: JSONL schema, explicit output path, CRITICAL RETURN PROTOCOL","acceptance_tests":["All agent prompts include JSONL schema example","All agent prompts include CRITICAL RETURN PROTOCOL"]}
{"category":"ai-optimization","title":"FALSE_POSITIVES.jsonl not referenced in audit-process or audit-enhancements","fingerprint":"ai-optimization::.claude/skills/audit-process/SKILL.md::no-false-positives-check","severity":"S2","effort":"E1","confidence":85,"files":[".claude/skills/audit-process/SKILL.md",".claude/skills/audit-enhancements/SKILL.md"],"why_it_matters":"audit-process and audit-enhancements do not load FALSE_POSITIVES.jsonl, meaning they will re-report known false positives every run.","suggested_fix":"Add FALSE_POSITIVES.jsonl loading step to Pre-Audit Setup in both skills","acceptance_tests":["Both skills load FALSE_POSITIVES.jsonl in setup","Agent prompts include instruction to check fingerprints against false positives"]}
{"category":"ai-optimization","title":"pre-commit-fixer agent prompts are generic category dispatches, not structured","fingerprint":"ai-optimization::.claude/skills/pre-commit-fixer/SKILL.md::unstructured-agent-dispatch","severity":"S3","effort":"E1","confidence":70,"files":[".claude/skills/pre-commit-fixer/SKILL.md"],"why_it_matters":"pre-commit-fixer spawns subagents for fixes but references agent types generically without structured prompts. Agents receive error output but no explicit fix-and-verify workflow.","suggested_fix":"Add structured prompt templates for each Category B fix type: include error output, affected files, expected fix pattern, and verification command","acceptance_tests":["Each Category B fix type has a prompt template","Prompt includes verification step"]}
{"category":"ai-optimization","title":"MCP git server configured but unused and redundant with native Bash git","fingerprint":"ai-optimization::.mcp.json::git-server-unused","severity":"S3","effort":"E0","confidence":95,"files":[".mcp.json"],"why_it_matters":"The git MCP server is configured in .mcp.json but not enabled, has zero references, and duplicates native git CLI via Bash.","suggested_fix":"Remove the 'git' entry from .mcp.json mcpServers.","acceptance_tests":["git entry removed from .mcp.json","grep -r 'mcp__git__' .claude/ returns no results"]}
{"category":"ai-optimization","title":"MCP memory server configured but not enabled - 3 skills have dead mcp__memory__ code paths","fingerprint":"ai-optimization::.mcp.json::memory-server-not-enabled","severity":"S2","effort":"E1","confidence":90,"files":[".mcp.json",".claude/settings.local.json",".claude/skills/save-context/SKILL.md",".claude/skills/audit-enhancements/SKILL.md",".claude/skills/pr-retro/SKILL.md"],"why_it_matters":"The memory server is in .mcp.json but missing from enabledMcpjsonServers. Three skills reference mcp__memory__ tools that will silently fail.","suggested_fix":"Either add 'memory' to enabledMcpjsonServers or remove mcp__memory__ references from the 3 skills and delete the memory entry from .mcp.json.","acceptance_tests":["Either memory is enabled and tools work, OR all mcp__memory__ references removed","No silent failures when running affected skills"]}
{"category":"ai-optimization","title":"MCP filesystem server duplicates native Claude Code Read/Write/Glob/Grep tools","fingerprint":"ai-optimization::.mcp.json::filesystem-server-redundant","severity":"S2","effort":"E1","confidence":85,"files":[".mcp.json",".claude/settings.local.json"],"why_it_matters":"The filesystem MCP server provides tools that duplicate native Claude Code capabilities. Consumes a process slot, adds startup latency, and 7 permissions are pre-approved despite zero skill references.","suggested_fix":"Remove 'filesystem' from .mcp.json and enabledMcpjsonServers. Remove mcp__filesystem__* permissions from settings.local.json.","acceptance_tests":["filesystem entry removed from .mcp.json","filesystem removed from enabledMcpjsonServers","mcp__filesystem__* permissions removed from settings.local.json"]}
{"category":"ai-optimization","title":"MCP github server enabled but not configured - redundant with gh CLI","fingerprint":"ai-optimization::.claude/settings.local.json::github-server-unconfigured","severity":"S3","effort":"E0","confidence":80,"files":[".claude/settings.local.json",".mcp.json"],"why_it_matters":"'github' is listed in enabledMcpjsonServers but has no entry in .mcp.json. Zero skills reference mcp__github__ tools. All GitHub operations use gh CLI.","suggested_fix":"Remove 'github' from enabledMcpjsonServers.","acceptance_tests":["github removed from enabledMcpjsonServers"]}
{"category":"ai-optimization","title":"7 mcp__filesystem__ permissions approved in settings.local.json for unused server","fingerprint":"ai-optimization::.claude/settings.local.json::stale-filesystem-permissions","severity":"S3","effort":"E0","confidence":90,"files":[".claude/settings.local.json"],"why_it_matters":"settings.local.json has 7 pre-approved mcp__filesystem__* permissions that bloat the permissions list for an unused server.","suggested_fix":"Remove all mcp__filesystem__* entries from settings.local.json permissions.allow array.","acceptance_tests":["No mcp__filesystem__* entries in settings.local.json permissions.allow"]}
{"category":"ai-optimization","title":"3 mcp__serena__ permissions approved but serena is in disabledMcpjsonServers","fingerprint":"ai-optimization::.claude/settings.local.json::stale-serena-permissions","severity":"S3","effort":"E0","confidence":95,"files":[".claude/settings.local.json",".claude/settings.json"],"why_it_matters":"settings.local.json has 3 approved mcp__serena__ permissions but serena is explicitly disabled. Dead entries that add clutter.","suggested_fix":"Remove all mcp__serena__* entries from settings.local.json permissions.allow array.","acceptance_tests":["No mcp__serena__* entries in settings.local.json permissions.allow"]}
{"category":"ai-optimization","title":"MCP global template includes puppeteer which conflicts with playwright","fingerprint":"ai-optimization::.claude/mcp.global-template.json::puppeteer-playwright-conflict","severity":"S3","effort":"E0","confidence":75,"files":[".claude/mcp.global-template.json"],"why_it_matters":"The global MCP template suggests puppeteer but the project uses playwright. Installing both creates competing browser automation servers.","suggested_fix":"Update mcp.global-template.json to suggest playwright instead of puppeteer.","acceptance_tests":["mcp.global-template.json references playwright not puppeteer"]}
{"category":"ai-optimization","title":"MCP firebase server enabled but not configured - may rely on plugin auto-discovery","fingerprint":"ai-optimization::.claude/settings.local.json::firebase-server-ambiguous","severity":"S3","effort":"E0","confidence":70,"files":[".claude/settings.local.json",".mcp.json"],"why_it_matters":"'firebase' is in enabledMcpjsonServers but has no entry in .mcp.json. Configuration is implicit rather than explicit, which is fragile.","suggested_fix":"Either add firebase server configuration to .mcp.json or verify it works via plugin and document that dependency.","acceptance_tests":["Firebase MCP tools either work reliably or are removed from enabledMcpjsonServers"]}
{"category":"ai-optimization","title":"session-begin SKILL.md reads ROADMAP.md (3164 lines) in full at every session start","fingerprint":"ai-optimization::.claude/skills/session-begin/SKILL.md::full-roadmap-read","severity":"S2","effort":"E1","confidence":92,"files":[".claude/skills/session-begin/SKILL.md","ROADMAP.md"],"why_it_matters":"ROADMAP.md is 3164 lines. Reading it fully at session start consumes ~4K tokens. Session-begin only needs the Active Sprint section (typically <100 lines).","suggested_fix":"Change session-begin to read only the Active Sprint section using offset/limit parameters. Add a grep-first pattern to find the section offset dynamically.","acceptance_tests":["session-begin reads ROADMAP.md with offset/limit targeting Active Sprint section","Full ROADMAP.md is NOT loaded into context at session start"]}
{"category":"ai-optimization","title":"session-begin instructs reading CODE_PATTERNS.md (600 lines) at startup","fingerprint":"ai-optimization::.claude/skills/session-begin/SKILL.md::code-patterns-startup-read","severity":"S3","effort":"E1","confidence":85,"files":[".claude/skills/session-begin/SKILL.md","docs/agent_docs/CODE_PATTERNS.md"],"why_it_matters":"Session-begin instruction to scan CODE_PATTERNS.md can lead to a full 600-line read when only the Quick Reference (~50 lines) is needed. Tier 2 content loaded at Tier 1 time.","suggested_fix":"Make instruction explicit: 'Read CODE_PATTERNS.md lines 1-60 only'. Move full read to on-demand when actually writing code.","acceptance_tests":["CODE_PATTERNS.md is not fully loaded at session start","Quick Reference section is available when code writing begins"]}
{"category":"ai-optimization","title":"session-begin reads Technical Debt INDEX.md + AI_WORKFLOW.md + DOCUMENT_DEPENDENCIES.md as mandatory","fingerprint":"ai-optimization::.claude/skills/session-begin/SKILL.md::excessive-mandatory-reads","severity":"S2","effort":"E1","confidence":88,"files":[".claude/skills/session-begin/SKILL.md"],"why_it_matters":"Mandatory startup reads exceed 4000 lines. Steps 8-9 load INDEX.md (152 lines), DOCUMENT_DEPENDENCIES.md (423 lines), and trigger crossdoc:check. Only actionable when there are actual issues.","suggested_fix":"Make Steps 8-9 conditional: only read INDEX.md if TDMS metrics show S0 items, only run crossdoc:check if docs were modified since last session.","acceptance_tests":["Steps 8-9 are conditional on relevant changes","Total mandatory startup reads under 500 lines when no issues","crossdoc:check only runs when doc files changed since last session"]}
{"category":"ai-optimization","title":"compact-restore.js injects full recovery context even when handoff is stale","fingerprint":"ai-optimization::.claude/hooks/compact-restore.js::stale-handoff-injection","severity":"S3","effort":"E1","confidence":78,"files":[".claude/hooks/compact-restore.js"],"why_it_matters":"compact-restore.js always outputs the full recovery block (~30 lines) regardless of how old the handoff data is. If handoff.json is hours or days old, it injects irrelevant recovery context.","suggested_fix":"Add a staleness threshold (60 minutes). Output a 1-line summary for stale handoffs instead of the full recovery block.","acceptance_tests":["Handoff data older than 60 minutes produces a 1-line summary","Recent compaction still gets full recovery context"]}
{"category":"ai-optimization","title":"pr-review SKILL.md is 840 lines loaded entirely when skill is invoked","fingerprint":"ai-optimization::.claude/skills/pr-review/SKILL.md::oversized-skill-file","severity":"S2","effort":"E2","confidence":85,"files":[".claude/skills/pr-review/SKILL.md"],"why_it_matters":"At 840 lines (~10K tokens), pr-review includes detailed examples, anti-patterns, and agent selection matrices. Much of this is rarely needed in a single invocation.","suggested_fix":"Split into a core protocol (~300 lines) and a reference section in pr-review/REFERENCE.md loaded on-demand.","acceptance_tests":["pr-review SKILL.md core is under 400 lines","Reference sections are in a separate file"]}
{"category":"ai-optimization","title":"audit-comprehensive SKILL.md is 854 lines loaded entirely for every comprehensive audit","fingerprint":"ai-optimization::.claude/skills/audit-comprehensive/SKILL.md::oversized-skill-file","severity":"S2","effort":"E2","confidence":82,"files":[".claude/skills/audit-comprehensive/SKILL.md"],"why_it_matters":"At 854 lines, the largest skill file. Recovery and triage sections are only needed in specific circumstances.","suggested_fix":"Extract Recovery and Triage sections into separate reference files loaded on-demand.","acceptance_tests":["audit-comprehensive SKILL.md is under 500 lines","Recovery and triage loaded only when needed"]}
{"category":"ai-optimization","title":"Edit and MultiEdit hook lists are identical 9-hook copies of Write hooks","fingerprint":"ai-optimization::.claude/settings.json::duplicated-hook-lists","severity":"S3","effort":"E1","confidence":95,"files":[".claude/settings.json"],"why_it_matters":"Edit and MultiEdit PostToolUse hook arrays are near-exact copies of Write hooks (minus audit-s0s1-validator). This triplicates configuration maintenance. settings.json has ~180 lines of duplicated hook definitions.","suggested_fix":"Use a single matcher pattern for shared hooks and keep Write-only hooks separate. This reduces settings.json by ~120 lines.","acceptance_tests":["settings.json has one shared hook block for write/edit/multiedit","Total settings.json is under 180 lines"]}
{"category":"ai-optimization","title":"alerts-reminder.js injects context-consuming messages on every UserPromptSubmit","fingerprint":"ai-optimization::.claude/hooks/alerts-reminder.js::context-injection-every-prompt","severity":"S2","effort":"E1","confidence":85,"files":[".claude/hooks/alerts-reminder.js"],"why_it_matters":"When alerts exist, injects 3-4 lines per user message to stdout (context). Over 30+ messages, this adds ~100 lines of repeated alert text to conversation context.","suggested_fix":"Add cooldown: only inject to stdout once per 10 minutes. Subsequent reminders go to stderr.","acceptance_tests":["Alert text injected to stdout at most once per 10 minutes","Subsequent reminders go to stderr"]}
{"category":"ai-optimization","title":"analyze-user-request.js high-confidence matches inject directive into context on every match","fingerprint":"ai-optimization::.claude/hooks/analyze-user-request.js::directive-context-injection","severity":"S3","effort":"E1","confidence":80,"files":[".claude/hooks/analyze-user-request.js"],"why_it_matters":"Every mention of 'bug' or 'broken' reinjects the PRE-TASK directive to stdout, consuming context tokens repeatedly. The agent-trigger-enforcer already tracks this per-session.","suggested_fix":"Add session-level deduplication: emit each directive type to stdout at most once per session.","acceptance_tests":["Each PRE-TASK directive type injected to stdout at most once per session","State file tracks emitted directives"]}
{"category":"ai-optimization","title":"session-begin SKILL.md is 361 lines with redundant hook-automated sections","fingerprint":"ai-optimization::.claude/skills/session-begin/SKILL.md::skill-bloat","severity":"S3","effort":"E1","confidence":82,"files":[".claude/skills/session-begin/SKILL.md"],"why_it_matters":"Sections 0b (Cross-Session Validation) and 1b (Session Gap Detection) describe functionality already automated by hooks. ~60 lines of context wasted on information the agent does not need to act on.","suggested_fix":"Remove sections 0b and 1b, replace with a 2-line reference to automatic hook output.","acceptance_tests":["session-begin SKILL.md under 300 lines","Automated hook sections replaced with brief references"]}
{"category":"ai-optimization","title":"code-reviewer SKILL.md contains generic boilerplate not specific to this project","fingerprint":"ai-optimization::.claude/skills/code-reviewer/SKILL.md::generic-boilerplate","severity":"S3","effort":"E1","confidence":78,"files":[".claude/skills/code-reviewer/SKILL.md"],"why_it_matters":"313-line skill has ~150 lines mentioning Python, Docker, Kubernetes, PostgreSQL, Flutter etc. that are not part of this project. Wastes ~2K tokens of irrelevant context.","suggested_fix":"Remove generic boilerplate sections. Keep only SoNash-specific review guidance. Target under 200 lines.","acceptance_tests":["code-reviewer SKILL.md under 200 lines","No references to technologies not in this project"]}
{"category":"ai-optimization","title":"commit-log.jsonl has no rotation/size-cap logic (39KB, append-only)","fingerprint":"ai-optimization::.claude/state/commit-log.jsonl::no-rotation","severity":"S2","effort":"E1","confidence":95,"files":[".claude/state/commit-log.jsonl",".claude/hooks/commit-tracker.js"],"why_it_matters":"commit-log.jsonl is append-only with no rotation. At 39KB after ~10 days, it will grow unbounded. The handoff.json pre-compaction save embeds the FULL commitLog array, amplifying the bloat.","suggested_fix":"Add rotation: when line count exceeds 500, archive older entries to commit-log.archive.jsonl and truncate to most recent 200.","acceptance_tests":["commit-log.jsonl stays under 200 lines after rotation","Archived entries preserved in commit-log.archive.jsonl"]}
{"category":"ai-optimization","title":"handoff.json embeds full commitLog array (25KB, unbounded growth)","fingerprint":"ai-optimization::.claude/state/handoff.json::embedded-commit-log","severity":"S2","effort":"E1","confidence":95,"files":[".claude/state/handoff.json",".claude/hooks/pre-compaction-save.js"],"why_it_matters":"handoff.json is 25KB, with commitLog consuming most of that. pre-compaction-save.js copies entire commit-log.jsonl into handoff.json on every compaction.","suggested_fix":"Limit commitLog to last 15 entries in pre-compaction-save.js. Full history remains in commit-log.jsonl.","acceptance_tests":["handoff.json commitLog at most 15 entries","handoff.json under 10KB"]}
{"category":"ai-optimization","title":"reviews.jsonl has no rotation (19KB, 30+ entries, threshold is 50)","fingerprint":"ai-optimization::.claude/state/reviews.jsonl::no-rotation","severity":"S3","effort":"E1","confidence":90,"files":[".claude/state/reviews.jsonl",".claude/STATE_SCHEMA.md"],"why_it_matters":"No archival code exists despite STATE_SCHEMA.md recommending it at >50 entries. Currently at ~30 entries. At current velocity, 50-entry threshold will be hit within 2 sessions.","suggested_fix":"Add rotation: when exceeds 50 lines, archive older entries to reviews.archive.jsonl.","acceptance_tests":["reviews.jsonl stays under 50 entries","Archived reviews preserved"]}
{"category":"ai-optimization","title":"warned-files.json grows unbounded (4KB, 48 entries, no expiry)","fingerprint":"ai-optimization::.claude/state/warned-files.json::no-expiry","severity":"S3","effort":"E1","confidence":85,"files":[".claude/state/warned-files.json","scripts/check-pattern-compliance.js"],"why_it_matters":"Entries accumulate indefinitely with no expiry or cleanup. Old entries for deleted files or resolved patterns waste space.","suggested_fix":"Add expiry: remove entries older than 30 days or where the referenced file no longer exists.","acceptance_tests":["Entries older than 30 days are removed","Entries referencing deleted files are pruned"]}
{"category":"ai-optimization","title":"task-audit-template-overhaul.state.json is stale (7 days, all steps pending)","fingerprint":"ai-optimization::.claude/state/task-audit-template-overhaul.state.json::stale-task","severity":"S3","effort":"E0","confidence":95,"files":[".claude/state/task-audit-template-overhaul.state.json"],"why_it_matters":"Task state file last updated 2026-02-07, all steps 'pending', but audit template overhaul was completed. The handoff.json also embeds this stale state in taskStates.","suggested_fix":"Delete the stale file. Fix session-end cleanup to remove 'planned' status files older than 7 days.","acceptance_tests":["Stale state file deleted","session-end cleanup handles old 'planned' status files"]}
{"category":"ai-optimization","title":"override-log.jsonl has no rotation or size cap","fingerprint":"ai-optimization::.claude/override-log.jsonl::no-rotation","severity":"S3","effort":"E1","confidence":85,"files":[".claude/override-log.jsonl","scripts/log-override.js"],"why_it_matters":"Append-only with no rotation logic. Currently small but will grow unbounded over time.","suggested_fix":"Add rotation: when entries exceed 100, archive older entries.","acceptance_tests":["override-log.jsonl stays under 100 entries","Old entries archived"]}
{"category":"ai-optimization","title":"agent-invocations.jsonl has no rotation or size cap","fingerprint":"ai-optimization::.claude/state/agent-invocations.jsonl::no-rotation","severity":"S3","effort":"E1","confidence":85,"files":[".claude/state/agent-invocations.jsonl",".claude/hooks/track-agent-invocation.js"],"why_it_matters":"Append-only with no cleanup logic. Designed to log every agent invocation, will accumulate rapidly with increased agent usage.","suggested_fix":"Add size-cap: if file exceeds 200 lines, truncate to most recent 100.","acceptance_tests":["agent-invocations.jsonl stays under 200 lines","Truncation preserves most recent entries"]}
{"category":"ai-optimization","title":"velocity-log.jsonl has malformed sprint field data","fingerprint":"ai-optimization::.claude/state/velocity-log.jsonl::malformed-sprint","severity":"S2","effort":"E1","confidence":100,"files":[".claude/state/velocity-log.jsonl","scripts/velocity/track-session.js"],"why_it_matters":"All 5 entries have a malformed sprint field containing full markdown table row instead of sprint name. Corrupts velocity analytics and trend calculations.","suggested_fix":"Fix the sprint extraction regex in track-session.js. Retroactively fix existing entries or re-seed the file.","acceptance_tests":["New entries have clean sprint names","Sprint field contains no markdown table syntax"]}
{"category":"ai-optimization","title":".claude/tmp-alerts.json persists across sessions (temp file not cleaned up)","fingerprint":"ai-optimization::.claude/tmp-alerts.json::persistent-temp","severity":"S3","effort":"E0","confidence":90,"files":[".claude/tmp-alerts.json",".claude/skills/alerts/scripts/run-alerts.js"],"why_it_matters":"Untracked temporary file persists across sessions. session-end cleanup does not remove it.","suggested_fix":"Add cleanup of .claude/tmp-*.json to session-end or session-start.js.","acceptance_tests":["No .claude/tmp-*.json files persist after session-end","session-start.js cleans stale temp files"]}
{"category":"ai-optimization","title":"session-end does not clean .session-agents.json or .agent-trigger-state.json","fingerprint":"ai-optimization::.claude/skills/session-end/SKILL.md::missing-ephemeral-cleanup","severity":"S3","effort":"E0","confidence":90,"files":[".claude/skills/session-end/SKILL.md",".claude/hooks/.session-state.json"],"why_it_matters":"session-end reads but never deletes ephemeral state files. Stale data can affect the next session's agent tracking.","suggested_fix":"Add rm -f commands in session-end step 6 for .session-agents.json and .agent-trigger-state.json.","acceptance_tests":[".session-agents.json deleted after session-end",".agent-trigger-state.json deleted after session-end"]}
{"category":"ai-optimization","title":"MEMORY.md contains completed/stale entries","fingerprint":"ai-optimization::MEMORY.md::stale-entries","severity":"S3","effort":"E0","confidence":80,"files":["C:\\Users\\jason\\.claude\\projects\\C--Users-jason-Workspace-dev-projects-sonash-v0\\memory\\MEMORY.md"],"why_it_matters":"MEMORY.md contains entries marked as 'COMPLETE' that no longer need to occupy memory space.","suggested_fix":"Remove completed sections. Set currentDate automatically rather than manually.","acceptance_tests":["MEMORY.md no longer contains sections marked COMPLETE","No stale date references"]}
{"category":"ai-optimization","title":".session-state.json shows 166 begins vs 16 ends (10:1 ratio)","fingerprint":"ai-optimization::.claude/hooks/.session-state.json::begin-end-imbalance","severity":"S2","effort":"E1","confidence":90,"files":[".claude/hooks/.session-state.json",".claude/skills/session-end/SKILL.md"],"why_it_matters":"~90% of sessions end without running session-end, meaning state cleanup almost never runs. All cleanup issues are compounded by session-end being rarely executed.","suggested_fix":"Add lightweight automatic cleanup to session-start.js: remove stale temp files, prune old task states, check JSONL sizes.","acceptance_tests":["session-start.js performs basic state hygiene","Stale temp files removed at session start","JSONL sizes warned if oversized"]}
