{"severity":"S0","category":"Critical Gap","finding":"Backlog enforcement workflow checks non-existent file","description":"backlog-enforcement.yml checks AUDIT_FINDINGS_BACKLOG.md which was archived 2026-01-31 in TDMS Phase 2. The workflow gracefully exits with code 0 when file is missing, meaning backlog enforcement is COMPLETELY BYPASSED in CI.","impact":"Zero backlog health enforcement. S0/S1 debt items can accumulate indefinitely without CI blocking PRs.","file":".github/workflows/backlog-enforcement.yml","line":"35-43","evidence":"Lines 35-43: if [ ! -f \"docs/AUDIT_FINDINGS_BACKLOG.md\" ]; then echo \"total=0\" >> $GITHUB_OUTPUT; exit 0; fi","remediation":"Update workflow to check docs/technical-debt/MASTER_DEBT.jsonl instead. Use scripts/debt/validate-schema.js for enforcement.","verification_steps":["Create PR with S0 item in MASTER_DEBT.jsonl","Verify backlog-enforcement workflow blocks the PR","Verify threshold enforcement (25 item limit) works"],"canon_id":"CI-001"}
{"severity":"S1","category":"Continue-on-error Abuse","finding":"CI allows pattern compliance failures on main branch","description":"ci.yml line 75 uses continue-on-error: true for pattern compliance check on push to main. This means pattern violations can be merged to main without blocking.","impact":"Pattern violations accumulate in main branch. Anti-patterns documented in CODE_PATTERNS.md (230+ patterns) are not enforced post-merge.","file":".github/workflows/ci.yml","line":"71-76","evidence":"Lines 71-76: Pattern compliance check (push to main) ... continue-on-error: true ... run: npm run patterns:check-all","remediation":"Remove continue-on-error OR document explicit exceptions in CLAUDE.md. Pattern violations should block main branch.","verification_steps":["Introduce pattern violation in file","Push to main branch directly","Verify CI fails (not just warns)"],"canon_id":"CI-002"}
{"severity":"S1","category":"Continue-on-error Abuse","finding":"Documentation check is non-blocking in CI","description":"ci.yml line 78-81 runs npm run docs:check with continue-on-error: true. Comment says 'templates/stubs have expected issues', but this allows ANY doc issue to slip through.","impact":"Broken cross-references, missing required sections, stale dates can merge without detection.","file":".github/workflows/ci.yml","line":"78-81","evidence":"Lines 78-81: Documentation check ... continue-on-error: true ... run: npm run docs:check","remediation":"Split docs:check into --strict (block on active docs) and --lenient (warn on templates). Only use continue-on-error for templates.","verification_steps":["Break cross-reference in active doc (e.g., ROADMAP.md)","Create PR","Verify CI fails (not just warns)"],"canon_id":"CI-003"}
{"severity":"S1","category":"Continue-on-error Abuse","finding":"Audit validation non-blocking in CI","description":"ci.yml line 90 runs audit:validate with continue-on-error: true. Pre-commit hook (line 193-224) BLOCKS on S0/S1 violations, but CI does not.","impact":"Developers can bypass pre-commit with SKIP_AUDIT_VALIDATION=1 and merge broken audit files.","file":".github/workflows/ci.yml","line":"87-91","evidence":"Lines 87-91: Validate audit files ... continue-on-error: true ... run: npm run audit:validate -- --all","remediation":"Remove continue-on-error for audit validation. If template files need exemption, use --exclude-templates flag.","verification_steps":["Create audit JSONL with S0 item missing verification_steps","Set SKIP_AUDIT_VALIDATION=1 in pre-commit","Push to PR","Verify CI blocks (not pre-commit bypass)"],"canon_id":"CI-004"}
{"severity":"S1","category":"Validation Gap","finding":"Pre-commit runs pattern check on changed files only, CI runs on all files","description":"Pre-commit hook (line 33-42) runs npm run patterns:check (default file list). CI runs patterns:check on PR changed files (line 59-65) BUT patterns:check-all on main push. This creates inconsistency - developers test subset locally, CI checks everything post-merge.","impact":"Developers get false confidence from local pre-commit pass. Pattern violations in unchanged files only caught post-merge.","file":".husky/pre-commit","line":"33-42","evidence":"Pre-commit line 33-42 runs 'npm run patterns:check' (14 critical files per .husky/pre-commit). CI line 59-65 checks changed files only on PR.","remediation":"Align pre-commit and CI: both check changed files on PR, full check only on scheduled weekly run.","verification_steps":["Introduce pattern violation in non-critical file","Run pre-commit (should pass)","Create PR (CI should catch violation)"],"canon_id":"CI-005"}
{"severity":"S1","category":"Race Condition","finding":"No concurrency control on most workflows","description":"Only sync-readme.yml has concurrency control (line 6-8). Other workflows (ci.yml, backlog-enforcement.yml, docs-lint.yml, review-check.yml) can run concurrently on rapid pushes, creating race conditions in PR comments/labels.","impact":"Duplicate PR comments, label thrashing, wasted CI minutes. review-check.yml and docs-lint.yml both upsert comments - concurrent runs can create duplicates.","file":".github/workflows/*.yml","line":"N/A","evidence":"sync-readme.yml has 'concurrency: group: sync-readme-main' but ci.yml, backlog-enforcement.yml, docs-lint.yml lack concurrency groups.","remediation":"Add concurrency groups to all PR workflows: concurrency: { group: 'ci-${{ github.head_ref }}', cancel-in-progress: true }","verification_steps":["Push 2 commits rapidly to PR","Check Actions tab for concurrent runs","Verify only latest run executes after fix"],"canon_id":"CI-006"}
{"severity":"S2","category":"Testing Gap","finding":"Tests fail but CI passed on recent commit","description":"npm test shows 1 failing test (phase-complete-check.test.js) but recent commit e5bde5b merged successfully. Either tests are flaky or continue-on-error is hiding failures.","impact":"Broken functionality can merge if tests are flaky or CI doesn't enforce test failures.","file":".github/workflows/ci.yml","line":"115-125","evidence":"Local test run shows: 'ℹ pass 280 ℹ fail 1' but commit e5bde5b 'fix: address Qodo review suggestions (batch 5) + audit logging' merged to main.","remediation":"Investigate test flakiness. Add test retry logic (max 2 retries) OR mark flaky tests as skipped with JIRA ticket.","verification_steps":["Run npm test 3 times locally","Document which tests fail inconsistently","Add retry logic to CI workflow"],"canon_id":"CI-007"}
{"severity":"S2","category":"Continue-on-error Abuse","finding":"Technical debt validation non-blocking in CI","description":"ci.yml lines 98-111 check ROADMAP debt references and view staleness with continue-on-error: true. Pre-commit (line 242-259) BLOCKS on schema issues but not view staleness.","impact":"MASTER_DEBT.jsonl and generated views can drift. Developers can merge with stale views, breaking TDMS Phase 8 guarantees.","file":".github/workflows/ci.yml","line":"98-111","evidence":"Lines 98-111: Check ROADMAP debt references ... continue-on-error: true ... Verify technical debt views current ... continue-on-error: true","remediation":"Make view staleness check blocking. Add npm script: 'debt:check-views' that fails if git diff detects changes after regeneration.","verification_steps":["Modify MASTER_DEBT.jsonl without regenerating views","Create PR","Verify CI fails (not just warns)"],"canon_id":"CI-008"}
{"severity":"S2","category":"Validation Gap","finding":"Pre-commit skips tests for doc-only commits, CI always runs tests","description":"Pre-commit (line 67-89) skips tests if all staged files match doc patterns (*.md, *.jsonl, docs/, .claude/). CI (line 115-125) always runs full test suite. This creates inconsistency.","impact":"Developers expect fast doc-only commits locally but CI takes 20+ seconds running tests. Also creates potential bypass - commit JSON config as .jsonl to skip tests.","file":".husky/pre-commit","line":"67-89","evidence":"Lines 71-74: if [ -z \"$NON_DOC_FILES\" ]; then DOC_ONLY_COMMIT=1; echo \"⏭️ Skipping tests (doc-only commit)\"; fi","remediation":"Align pre-commit and CI: if PR only changes docs/*, skip tests in CI too. Use paths filter in ci.yml.","verification_steps":["Create doc-only PR (only *.md changes)","Verify CI skips test job","Modify .jsonl file, verify tests still run"],"canon_id":"CI-009"}
{"severity":"S2","category":"Validation Gap","finding":"docs-lint.yml only checks markdown files, misses broken refs in code comments","description":"docs-lint.yml (line 37-42) only checks **.md files. Code comments in TS/JS files often link to docs (e.g., 'See ARCHITECTURE.md#schema') but these aren't validated.","impact":"Code comments can have broken doc links. Developers follow stale references, wasting time.","file":".github/workflows/docs-lint.yml","line":"37-42","evidence":"Lines 37-42: files: | **/*.md | docs/**/*.md (no .ts, .tsx, .js files)","remediation":"Extend docs-lint to check code comments. Use AST parser to extract JSDoc/TSDoc links and validate them.","verification_steps":["Add broken doc link in JSDoc comment (e.g., @see MISSING.md)","Create PR","Verify CI warns about broken link"],"canon_id":"CI-010"}
{"severity":"S2","category":"Validation Gap","finding":"Pre-push checks security patterns but pre-commit does not","description":"Pre-push hook (line 37-79) runs security-check.js on changed files. Pre-commit hook does NOT run security checks. This means developers can commit insecure code locally, only blocked at push.","impact":"Insecure code sits in local commits. If developer force-pushes or bypasses pre-push, security issues merge.","file":".husky/pre-commit","line":"N/A","evidence":"Pre-commit runs: ESLint (line 7-16), patterns:check (line 33-42), but NO security:check. Pre-push runs security:check (line 37-79).","remediation":"Move security:check to pre-commit (fast - only checks changed files). Keep blocking in pre-push as backup.","verification_steps":["Add execSync with template literal (SEC-001 violation)","Run git commit (should block)","Verify pre-commit catches security issue"],"canon_id":"CI-011"}
{"severity":"S2","category":"Missing Validation","finding":"No CI check for DOCUMENTATION_INDEX.md staleness","description":"Pre-commit (line 133-153) blocks if .md files change but DOCUMENTATION_INDEX.md not updated. CI has no equivalent check.","impact":"Developers can bypass pre-commit with SKIP_DOC_INDEX_CHECK=1 and merge with stale index.","file":".github/workflows/ci.yml","line":"N/A","evidence":"Pre-commit line 133-153 blocks on stale index. No equivalent in ci.yml.","remediation":"Add step to ci.yml: 'Check doc index staleness' - regenerate index, check git diff, fail if different.","verification_steps":["Add new .md file, skip doc index update","Set SKIP_DOC_INDEX_CHECK=1 in pre-commit","Create PR","Verify CI blocks (not pre-commit bypass)"],"canon_id":"CI-012"}
{"severity":"S2","category":"Unclear Enforcement","finding":"review-check.yml is continue-on-error but doesn't actually enforce anything","description":"review-check.yml (line 31-34) runs check-review-needed.js with continue-on-error: true. The workflow only comments/labels, never blocks. This is informational only, not enforcement.","impact":"Misleading workflow name 'Review Trigger Check' implies enforcement. Developers ignore warnings, merge without human review on Tier 3/4 changes.","file":".github/workflows/review-check.yml","line":"31-34","evidence":"Lines 31-34: Run review trigger check ... continue-on-error: true (never fails workflow, only comments)","remediation":"Rename to 'review-recommendation.yml' OR make blocking for Tier 4 changes (firebase.json, workflows, package.json).","verification_steps":["Modify firebase.json (Tier 4 change)","Create PR","Verify workflow either blocks OR clearly labeled as recommendation"],"canon_id":"CI-013"}
{"severity":"S2","category":"Job Dependency Gap","finding":"Build job depends on lint-typecheck-test but not on other validation jobs","description":"ci.yml line 137 shows 'build' job needs: lint-typecheck-test. But backlog-health and security-patterns jobs (in backlog-enforcement.yml) are independent. Build can succeed while backlog/security jobs fail.","impact":"PR shows green checkmark from 'build' success even if backlog/security jobs failed. Misleading status.","file":".github/workflows/ci.yml","line":"134-137","evidence":"Lines 134-137: build: ... needs: lint-typecheck-test (no dependency on backlog-enforcement.yml jobs)","remediation":"Use required status checks in branch protection rules. Require ALL jobs (ci.yml, backlog-enforcement.yml, docs-lint.yml) to pass.","verification_steps":["Check branch protection rules on main","Verify backlog-health is required status check","Create PR that fails backlog check, verify merge blocked"],"canon_id":"CI-014"}
{"severity":"S3","category":"Optimization","finding":"CI runs npm ci twice (lint job + build job)","description":"ci.yml line 25 runs npm ci, then build job (line 150) runs npm ci again. Dependencies are cached but still takes 10-15s per job.","impact":"Wasted CI time. ~20-30s per PR that could be saved by sharing node_modules artifact.","file":".github/workflows/ci.yml","line":"25, 150","evidence":"Lines 25 and 150 both run 'npm ci' independently.","remediation":"Upload node_modules as artifact in lint job, download in build job. OR use Docker layer caching.","verification_steps":["Check CI run time before/after optimization","Verify build job still has correct dependencies"],"canon_id":"CI-015"}
{"severity":"S3","category":"Maintenance","finding":"validate-plan.yml only triggers on specific file path, likely stale","description":"validate-plan.yml (line 6-7) only triggers on changes to docs/archive/completed-plans/INTEGRATED_IMPROVEMENT_PLAN.md. This file is archived - workflow is likely dead code.","impact":"Dead workflow wastes maintenance effort. Confuses contributors about which validations run.","file":".github/workflows/validate-plan.yml","line":"6-7","evidence":"Lines 6-7: paths: - 'docs/archive/completed-plans/INTEGRATED_IMPROVEMENT_PLAN.md' (archived file, never changes)","remediation":"Delete validate-plan.yml OR update to check active planning docs (SESSION_CONTEXT.md, ROADMAP.md).","verification_steps":["Check git history - when was validate-plan.yml last triggered","Archive or update workflow"],"canon_id":"CI-016"}
{"severity":"S2","category":"documentation","file":".claude/skills/code-reviewer/SKILL.md","line":22,"title":"Code-reviewer skill references non-functional Python scripts","description":"The code-reviewer skill (lines 22-30) references three Python scripts (pr_analyzer.py, code_quality_checker.py, review_report_generator.py) that appear to be placeholder templates rather than functional code review tools. The scripts exist but contain generic boilerplate code without actual review logic.","recommendation":"Either: (1) Implement the Python scripts with actual code review functionality, or (2) Remove references to these scripts and update the skill to use existing Node.js-based review tools like patterns:check, lint, etc.","evidence":["Script at .claude/skills/code-reviewer/scripts/pr_analyzer.py is a template with placeholder methods","SKILL.md lines 22-84 describe features that don't match actual script implementation","No Python dependencies in package.json for code review tools"]}
{"severity":"S3","category":"documentation","file":".claude/skills/code-reviewer/references/code_review_checklist.md","line":1,"title":"Code-reviewer reference files contain only placeholder content","description":"The reference files (code_review_checklist.md, coding_standards.md, common_antipatterns.md) referenced in the code-reviewer skill contain generic placeholder content without actual code review patterns or standards specific to this project.","recommendation":"Either: (1) Populate these files with actual project-specific code review patterns from CODE_PATTERNS.md and CLAUDE.md, or (2) Update code-reviewer skill to reference existing docs/agent_docs/CODE_PATTERNS.md instead.","evidence":["code_review_checklist.md lines 1-117 are generic placeholders","No references to Next.js, Firebase, or project-specific patterns","Existing CODE_PATTERNS.md has 230+ actual patterns"]}
{"severity":"S2","category":"functionality","file":".claude/skills/session-begin/SKILL.md","line":201,"title":"Session-begin auto-run scripts may fail silently","description":"Lines 201-223 specify that three scripts (patterns:check, review:check, lessons:surface) must run automatically during session-begin. However, there's no error handling guidance if scripts fail, and the skill says to 'note it as N/A in audit' without specifying where this audit is or how to track failures.","recommendation":"Add specific error handling steps: (1) If script fails, display error to user immediately (hook output is collapsed), (2) Save failure status to .claude/session-state.json, (3) Specify which audit file should track script execution (likely session-end audit).","evidence":["Lines 216-220 say 'If any script fails... note as N/A in audit' but no audit file specified","No reference to error display mechanism","Hook output is collapsed per CLAUDE.md line 10"]}
{"severity":"S3","category":"documentation","file":".claude/skills/session-begin/SKILL.md","line":229,"title":"Session-begin references potentially inconsistent TECHNICAL_DEBT_MASTER.md","description":"Line 229 references TECHNICAL_DEBT_MASTER.md as the single source of truth for tech debt, but the actual canonical source is docs/technical-debt/MASTER_DEBT.jsonl (JSONL format). The markdown file may be a view generated from the JSONL.","recommendation":"Verify the relationship between TECHNICAL_DEBT_MASTER.md and MASTER_DEBT.jsonl. Update skill documentation to clarify which is canonical and which is a generated view. Reference the TDMS documentation at docs/technical-debt/PROCEDURE.md.","evidence":["Line 229 references TECHNICAL_DEBT_MASTER.md","Multiple debt skills reference MASTER_DEBT.jsonl as canonical","TDMS uses JSONL as source of truth per add-manual-debt and verify-technical-debt skills"]}
{"severity":"S2","category":"consistency","file":".claude/skills/alerts/SKILL.md","line":81,"title":"Alerts skill references MCP memory functions that may not be available","description":"Lines 81-82 reference mcp__memory__read_graph() as a session context check, but MCP tools availability varies by environment. The skill doesn't handle the case where MCP memory server is unavailable.","recommendation":"Add conditional logic: (1) Check if MCP memory server is available before calling, (2) Gracefully handle unavailability (skip check rather than fail), (3) Document in skill that this check is optional if MCP unavailable.","evidence":["Line 81 lists MCP memory status check as required","No error handling for unavailable MCP servers","save-context skill also assumes MCP availability"]}
{"severity":"S3","category":"documentation","file":".claude/skills/audit-code/SKILL.md","line":299,"title":"Audit-code references validate:canon script without explaining CANON concept","description":"Line 299 references 'npm run validate:canon' and mentions 'CANON files' without explanation. New users or sessions won't know what CANON schema is or which files it applies to.","recommendation":"Add brief inline explanation or link to CANON documentation. For example: 'CANON files (standardized audit/debt schemas in docs/technical-debt/) must pass validation...'","evidence":["Line 299 assumes reader knows what CANON is","No link to schema documentation","Script exists in package.json but concept is undefined in skill"]}
{"severity":"S2","category":"process","file":".claude/skills/systematic-debugging/SKILL.md","line":307,"title":"Systematic-debugging references superpowers skills that don't exist in SKILL_INDEX","description":"Lines 307-310 reference 'superpowers:test-driven-development' and 'superpowers:verification-before-completion' skills, but these don't appear in SKILL_INDEX.md. May be outdated references or missing skills.","recommendation":"Either: (1) Create the referenced superpowers skills if they're needed, (2) Remove references and inline the guidance, or (3) Update to reference existing skills like webapp-testing or session-begin verification steps.","evidence":["SKILL_INDEX.md lists 49 skills, none named superpowers:*","Lines 307, 310 reference skills that don't exist","using-superpowers exists but is different (Claude superpowers guide)"]}
{"severity":"S3","category":"documentation","file":".claude/skills/pr-review/SKILL.md","line":79,"title":"PR-review tiered access pattern references archive location without validation","description":"Line 79 references docs/archive/REVIEWS_1-40.md for historical reviews. While this file exists, the tiered access model may be outdated if reviews have been further archived or consolidated.","recommendation":"Verify current archive state and update tiered access documentation. Check if archival criteria in lines 414-422 are current and if review archive locations are accurate.","evidence":["File exists but may not be current","Archival criteria specify 1500 lines + 10 reviews but don't specify current threshold","Line 79 assumes single archive file for reviews 1-40"]}
{"severity":"S2","category":"functionality","file":".claude/skills/verify-technical-debt/SKILL.md","line":126,"title":"Verify-technical-debt references resolve-item.js script without validating existence","description":"Lines 126-139 provide examples using 'node scripts/debt/resolve-item.js' but don't validate the script exists before instructing usage. If script is missing or renamed, skill will fail.","recommendation":"Add validation step at beginning of skill: Check if required scripts exist (resolve-item.js, generate-views.js) and provide clear error if missing. Alternatively, make script paths configurable.","evidence":["Lines 126-139 assume script exists","Script was confirmed to exist during audit","No error handling if script missing or moved"]}
{"severity":"S2","category":"documentation","file":".claude/skills/SKILL_INDEX.md","line":3,"title":"SKILL_INDEX shows last updated 2026-01-31 but may be stale","description":"Header claims 'Last Updated: 2026-01-31' (today) and 'Total Skills: 49', but verification is needed to ensure all listed skills actually exist and new skills haven't been added.","recommendation":"Add automated validation: Create a script that counts actual skills in .claude/skills/ directory and compares against SKILL_INDEX.md count. Run during session-begin to detect drift.","evidence":["Manual count shows 49 directories in .claude/skills (matches index)","Index maintenance section (lines 130-136) is manual process","No automated validation of skill count or descriptions"]}
{"severity":"S3","category":"documentation","file":".claude/skills/add-manual-debt/SKILL.md","line":95,"title":"Debt intake scripts lack validation for duplicate DEBT-XXXX IDs","description":"Lines 92-97 describe intake-manual.js script behavior including 'Assigns next available DEBT-XXXX ID' but don't specify how conflicts are handled if MASTER_DEBT.jsonl is edited externally or corrupted.","recommendation":"Document or implement: (1) ID conflict detection and resolution, (2) Validation that assigned ID doesn't already exist, (3) Recovery procedure if JSONL corruption causes duplicate IDs.","evidence":["Line 95 says 'Assigns next available DEBT-XXXX ID'","No mention of conflict resolution","JSONL format is manually editable, vulnerable to corruption"]}
{"severity":"S3","category":"consistency","file":".claude/skills/session-end/SKILL.md","line":35,"title":"Session-end skill is very minimal compared to session-begin","description":"Session-end skill is only 43 lines with minimal checklist (5 items), while session-begin is 279 lines with extensive checks. This asymmetry may lead to incomplete session cleanup and documentation drift.","recommendation":"Review session-end checklist for completeness. Consider adding: (1) Verify all TodoWrite items completed or documented, (2) Check for uncommitted changes, (3) Update SESSION_CONTEXT.md with session summary, (4) Run alerts to catch issues before leaving.","evidence":["session-end SKILL.md is 43 lines vs session-begin 279 lines","No TodoWrite check in session-end","No verification that session-begin checklist items were completed"]}
{"severity":"S2","category":"documentation","file":"CLAUDE.md","line":19,"title":"CLAUDE.md Session Start Protocol references pending-alerts.json without format spec","description":"CLAUDE.md lines 19-20 instruct to read .claude/pending-alerts.json and tell user about alerts, but don't specify the JSON schema or how to interpret alert severity/types.","recommendation":"Add inline example or link to alerts skill documentation. Specify JSON schema expected: {deferred_pr: [], backlog: [{severity, title}], ...}","evidence":["Lines 19-20 say 'read pending-alerts.json' without format info","File exists but schema undefined in CLAUDE.md","alerts skill has schema but not referenced from CLAUDE.md"]}
{"severity":"S3","category":"process","file":".claude/skills/audit-code/SKILL.md","line":40,"title":"Audit-code suggests querying SonarCloud MCP but doesn't validate availability","description":"Lines 40-46 describe querying SonarCloud via MCP (mcp__sonarcloud__get_issues) as optional 'if available', but don't provide fallback guidance if MCP unavailable. May cause confusion during audit execution.","recommendation":"Clarify: (1) Is SonarCloud MCP required or truly optional? (2) If optional, provide alternative data source or note to skip this step. (3) Document what 'available' means (environment variable? tool check?).","evidence":["Line 40 says 'if MCP available'","No check procedure for MCP availability","No fallback if unavailable"]}
