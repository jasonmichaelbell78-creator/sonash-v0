{"id":"PROC-001","category":"CI","severity":"S2","effort":"E1","confidence":"HIGH","verified":"TOOL_VALIDATED","file":".github/workflows/auto-label-review-tier.yml","line":18,"title":"GitHub Actions using version tags instead of commit SHAs","description":"5 workflows use actions/checkout@v4, actions/setup-node@v4, and tj-actions/changed-files@v46 instead of pinning to commit SHAs. Version tags can be moved, creating supply chain risk.","recommendation":"Pin all GitHub Actions to full commit SHAs. backlog-enforcement.yml already follows this pattern correctly.","evidence":["auto-label-review-tier.yml:18 uses actions/checkout@v4","docs-lint.yml:36 uses tj-actions/changed-files@v46","backlog-enforcement.yml:17 uses actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 (correct)"],"cross_ref":"sonarcloud"}
{"id":"PROC-002","category":"CI","severity":"S3","effort":"E0","confidence":"MEDIUM","verified":"MANUAL_ONLY","file":".github/workflows/docs-lint.yml","line":36,"title":"tj-actions/changed-files without CVE-pinned version","description":"docs-lint.yml uses tj-actions/changed-files@v46 without SHA pin. ci.yml correctly pins to SHA for CVE-2025-30066 protection.","recommendation":"Update to pinned SHA like ci.yml does: tj-actions/changed-files@c65cd883420fd2eb864698a825fc4162dd94482c","evidence":["docs-lint.yml:36 uses @v46","ci.yml correctly uses SHA-pinned version"],"cross_ref":"MANUAL_ONLY"}
{"id":"PROC-003","category":"GitHooks","severity":"S3","effort":"E0","confidence":"HIGH","verified":"TOOL_VALIDATED","file":".husky/pre-commit","line":21,"title":"lint-staged using npx --no-install may fail if not in cache","description":"Pre-commit hook uses 'npx --no-install lint-staged' which will fail if lint-staged isn't already cached. This is intentional security measure but causes the issue we've been experiencing.","recommendation":"Document workaround in DEVELOPMENT.md: run 'npm exec lint-staged' or 'npx lint-staged' once to cache the package.","evidence":["pre-commit:22 npx --no-install lint-staged","Error: npm error npx canceled due to missing packages"],"cross_ref":"MANUAL_ONLY"}
{"id":"PROC-004","category":"ClaudeHooks","severity":"S3","effort":"E0","confidence":"HIGH","verified":"TOOL_VALIDATED","file":".claude/hooks/session-start.sh","line":245,"title":"Multiple trap commands may override each other","description":"session-start.sh has trap at line 245 for PATTERN_ERR_TMP but earlier trap at line 42 for TEST_TMPFILE (in pre-commit). Only last trap per signal is active.","recommendation":"Consolidate trap handlers or use a cleanup function that handles multiple temp files.","evidence":["Line 245: trap 'rm -f \"$PATTERN_ERR_TMP\"' EXIT","Earlier scripts may have their own traps"],"cross_ref":"MANUAL_ONLY"}
{"id":"PROC-005","category":"Scripts","severity":"S2","effort":"E1","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"scripts/","line":0,"title":"28 scripts have 715 console.log/error/warn calls without structured logging","description":"Scripts rely on console.* calls which mix errors with stdout, making programmatic parsing difficult. No centralized logging utility exists.","recommendation":"Create scripts/lib/logger.js with levels (debug, info, warn, error) and JSON output option. Gradually migrate high-traffic scripts.","evidence":["grep found 715 console.* calls across 28 scripts","validate-audit.js:38, ai-review.js:36 among top offenders"],"cross_ref":"MANUAL_ONLY"}
{"id":"PROC-006","category":"Scripts","severity":"S3","effort":"E0","confidence":"MEDIUM","verified":"MANUAL_ONLY","file":"scripts/check-cross-doc-deps.js","line":1,"title":"Script has minimal console output (1 call)","description":"check-cross-doc-deps.js has only 1 console call, suggesting minimal user feedback during execution.","recommendation":"Add progress indicators for longer operations.","evidence":["grep count: 1 console call in check-cross-doc-deps.js"],"cross_ref":"MANUAL_ONLY"}
{"id":"PROC-007","category":"Triggers","severity":"S3","effort":"E0","confidence":"HIGH","verified":"TOOL_VALIDATED","file":"docs/TRIGGERS.md","line":1,"title":"TRIGGERS.md last updated 2026-01-02 but hooks updated since","description":"TRIGGERS.md documents 68+ enforcement points but was last updated 2026-01-02. Pre-commit hook has 8 checks (documented) and pre-push has 7 checks. Document may be slightly stale.","recommendation":"Update TRIGGERS.md to reflect current hook counts and any changes since 2026-01-02.","evidence":["TRIGGERS.md version 1.3, last updated 2026-01-02","Pre-commit has 8 checks, pre-push has 7 checks"],"cross_ref":"MANUAL_ONLY"}
{"id":"PROC-008","category":"ProcessDocs","severity":"S3","effort":"E0","confidence":"HIGH","verified":"TOOL_VALIDATED","file":".claude/commands/","line":0,"title":"All 12 slash commands have frontmatter descriptions","description":"All commands in .claude/commands/ have proper YAML frontmatter with descriptions. This is working as expected.","recommendation":"No action needed - this is a positive finding.","evidence":["grep found 12 files with frontmatter","All audit-*.md, session-*.md, etc. have descriptions"],"cross_ref":"MANUAL_ONLY"}
{"id":"PROC-009","category":"CI","severity":"S2","effort":"E1","confidence":"MEDIUM","verified":"MANUAL_ONLY","file":".github/workflows/ci.yml","line":99,"title":"Artifact upload without retention policy","description":"CI workflow uploads coverage artifacts but doesn't specify retention period. Default is 90 days which may accumulate storage.","recommendation":"Add retention-days: 7 to actions/upload-artifact@v4 for coverage artifacts.","evidence":["ci.yml:99 uses actions/upload-artifact@v4 without retention-days"],"cross_ref":"MANUAL_ONLY"}
{"id":"PROC-010","category":"GitHooks","severity":"S2","effort":"E1","confidence":"HIGH","verified":"TOOL_VALIDATED","file":".husky/pre-push","line":48,"title":"Git diff with @{u}...HEAD fails on new branches without upstream","description":"Pre-push hook line 48 uses @{u}...HEAD which fails silently on branches without upstream tracking. The hook handles this gracefully but could be clearer.","recommendation":"Add explicit message when no upstream is detected instead of 'No upstream or no JS/TS/JSON changes detected'.","evidence":["pre-push:48 git diff --name-only --diff-filter=ACMR @{u}...HEAD","Error handled at line 52-53"],"cross_ref":"MANUAL_ONLY"}
