{"category":"process","title":"Orphaned: seed-commit-log.js","fingerprint":"process::scripts/seed-commit-log.js::orphaned","severity":"S2","effort":"E1","confidence":"HIGH","files":["scripts/seed-commit-log.js:1"],"why_it_matters":"Orphaned development/testing script increases maintenance burden without providing value","suggested_fix":"Remove if no longer needed, or document intended testing workflow","acceptance_tests":["Verify no callers exist","Confirm it's only for testing","Remove and confirm no breakage"],"file":"scripts/seed-commit-log.js","line":1,"description":"Orphaned development/testing script increases maintenance burden without providing value","recommendation":"Remove if no longer needed, or document intended testing workflow","id":"process::scripts/seed-commit-log.js::orphaned"}
{"category":"process","title":"Orphaned: sync-claude-settings.js","fingerprint":"process::scripts/sync-claude-settings.js::orphaned","severity":"S2","effort":"E1","confidence":"HIGH","files":["scripts/sync-claude-settings.js:1"],"why_it_matters":"Orphaned setup/config script with no references in automation or documentation","suggested_fix":"Remove if obsolete, or document setup workflow that requires it","acceptance_tests":["Search all files for references","Verify setup process works without it","Remove and test setup"],"file":"scripts/sync-claude-settings.js","line":1,"description":"Orphaned setup/config script with no references in automation or documentation","recommendation":"Remove if obsolete, or document setup workflow that requires it","id":"process::scripts/sync-claude-settings.js::orphaned"}
{"category":"process","title":"Orphaned: update-legacy-lines.js","fingerprint":"process::scripts/update-legacy-lines.js::orphaned","severity":"S2","effort":"E1","confidence":"HIGH","files":["scripts/update-legacy-lines.js:1"],"why_it_matters":"Code modernization script with no references - likely completed its purpose","suggested_fix":"Remove if migration is complete, or schedule remaining work","acceptance_tests":["Check if legacy code markers still exist","Remove script if work is done","Archive with completion notes if needed"],"file":"scripts/update-legacy-lines.js","line":1,"description":"Code modernization script with no references - likely completed its purpose","recommendation":"Remove if migration is complete, or schedule remaining work","id":"process::scripts/update-legacy-lines.js::orphaned"}
{"category":"process","title":"Orphaned: create-canonical-findings.js","fingerprint":"process::scripts/create-canonical-findings.js::orphaned","severity":"S2","effort":"E1","confidence":"HIGH","files":["scripts/create-canonical-findings.js:1"],"why_it_matters":"Listed as called by 'audit consolidation workflows' but no workflow actually calls it","suggested_fix":"Remove if obsolete, or integrate into actual workflow if needed","acceptance_tests":["Verify aggregate-audit-findings.js handles this","Check if functionality is duplicated","Remove and run audit workflows"],"file":"scripts/create-canonical-findings.js","line":1,"description":"Listed as called by 'audit consolidation workflows' but no workflow actually calls it","recommendation":"Remove if obsolete, or integrate into actual workflow if needed","id":"process::scripts/create-canonical-findings.js::orphaned"}
{"category":"process","title":"Orphaned: generate-detailed-sonar-report.js","fingerprint":"process::scripts/generate-detailed-sonar-report.js::orphaned","severity":"S2","effort":"E1","confidence":"HIGH","files":["scripts/generate-detailed-sonar-report.js:1"],"why_it_matters":"SonarCloud workflow exists but doesn't call this script - orphaned reporting tool","suggested_fix":"Remove if unused, or integrate into sonarcloud.yml if reports are needed","acceptance_tests":["Check if sonarcloud.yml provides all needed reports","Remove and verify SonarCloud integration works","Document if manual use only"],"file":"scripts/generate-detailed-sonar-report.js","line":1,"description":"SonarCloud workflow exists but doesn't call this script - orphaned reporting tool","recommendation":"Remove if unused, or integrate into sonarcloud.yml if reports are needed","id":"process::scripts/generate-detailed-sonar-report.js::orphaned"}
{"category":"process","title":"Orphaned: generate-placement-report.js","fingerprint":"process::scripts/generate-placement-report.js::orphaned","severity":"S2","effort":"E1","confidence":"HIGH","files":["scripts/generate-placement-report.js:1"],"why_it_matters":"Listed as called by 'documentation workflows' but no workflow uses it","suggested_fix":"Remove if check-doc-placement.js supersedes it, or integrate if needed","acceptance_tests":["Verify check-doc-placement.js provides same functionality","Remove and check doc workflows","Test npm run docs:placement"],"file":"scripts/generate-placement-report.js","line":1,"description":"Listed as called by 'documentation workflows' but no workflow uses it","recommendation":"Remove if check-doc-placement.js supersedes it, or integrate if needed","id":"process::scripts/generate-placement-report.js::orphaned"}
{"category":"process","title":"Orphaned: migrate-existing-findings.js","fingerprint":"process::scripts/migrate-existing-findings.js::orphaned","severity":"S2","effort":"E1","confidence":"HIGH","files":["scripts/migrate-existing-findings.js:1"],"why_it_matters":"One-time migration script no longer needed - technical debt","suggested_fix":"Remove after confirming migration is complete and stable","acceptance_tests":["Verify all findings migrated successfully","Check git history for last use","Archive with migration notes"],"file":"scripts/migrate-existing-findings.js","line":1,"description":"One-time migration script no longer needed - technical debt","recommendation":"Remove after confirming migration is complete and stable","id":"process::scripts/migrate-existing-findings.js::orphaned"}
{"category":"process","title":"Orphaned: regenerate-findings-index.js","fingerprint":"process::scripts/regenerate-findings-index.js::orphaned","severity":"S2","effort":"E1","confidence":"HIGH","files":["scripts/regenerate-findings-index.js:1"],"why_it_matters":"No references found in any workflow, skill, or npm script","suggested_fix":"Remove if aggregate-audit-findings.js handles this, or integrate if needed","acceptance_tests":["Check if functionality exists elsewhere","Remove and run audit aggregation","Verify findings index updates correctly"],"file":"scripts/regenerate-findings-index.js","line":1,"description":"No references found in any workflow, skill, or npm script","recommendation":"Remove if aggregate-audit-findings.js handles this, or integrate if needed","id":"process::scripts/regenerate-findings-index.js::orphaned"}
{"category":"process","title":"Orphaned: verify-sonar-phase.js","fingerprint":"process::scripts/verify-sonar-phase.js::orphaned","severity":"S2","effort":"E1","confidence":"HIGH","files":["scripts/verify-sonar-phase.js:1"],"why_it_matters":"Listed for SonarCloud workflows but sonarcloud.yml doesn't call it","suggested_fix":"Remove if SonarCloud integration doesn't need phase verification, or integrate if needed","acceptance_tests":["Check if phase verification is still required","Remove and test SonarCloud workflow","Verify skills reference if any"],"file":"scripts/verify-sonar-phase.js","line":1,"description":"Listed for SonarCloud workflows but sonarcloud.yml doesn't call it","recommendation":"Remove if SonarCloud integration doesn't need phase verification, or integrate if needed","id":"process::scripts/verify-sonar-phase.js::orphaned"}
{"category":"process","title":"Orphaned: assign-review-tier.js disabled in workflow","fingerprint":"process::.github/workflows/auto-label-review-tier.yml::orphaned-script","severity":"S1","effort":"E2","confidence":"HIGH","files":[".github/workflows/auto-label-review-tier.yml:56","scripts/assign-review-tier.js:1"],"why_it_matters":"Script is commented out in auto-label-review-tier.yml with duplicate logic inline - creates confusion and maintenance burden","suggested_fix":"Either integrate assign-review-tier.js or remove it and keep inline logic","acceptance_tests":["Decide on permanent solution","If keeping script: uncomment and remove inline logic","If removing script: delete file and document tier rules","Test PR labeling after change"],"file":".github/workflows/auto-label-review-tier.yml","line":56,"description":"Script is commented out in auto-label-review-tier.yml with duplicate logic inline - creates confusion and maintenance burden","recommendation":"Either integrate assign-review-tier.js or remove it and keep inline logic","id":"process::.github/workflows/auto-label-review-tier.yml::orphaned-script","evidence":[{"type":"code_reference","detail":".github/workflows/auto-label-review-tier.yml:56"},{"type":"description","detail":"Script is commented out in auto-label-review-tier.yml with duplicate logic inline - creates confusion and maintenance burden"}],"verification_steps":{"first_pass":{"method":"code_search","evidence_collected":[".github/workflows/auto-label-review-tier.yml:56"]},"second_pass":{"method":"contextual_review","confirmed":true},"tool_confirmation":{"tool":"NONE","result":"confirmed via manual code review","reference":".github/workflows/auto-label-review-tier.yml:56"}}}
{"category":"process","title":"Orphaned: TypeScript migration scripts (14 files)","fingerprint":"process::scripts/*.ts::orphaned-migrations","severity":"S2","effort":"E1","confidence":"HIGH","files":["scripts/dedupe-quotes.ts:1","scripts/enrich-addresses.ts:1","scripts/import-nashville-links.ts:1","scripts/migrate-addresses.ts:1","scripts/migrate-library-content.ts:1","scripts/migrate-meetings-dayindex.ts:1","scripts/migrate-to-journal.ts:1","scripts/retry-failures.ts:1","scripts/seed-meetings.ts:1","scripts/seed-real-data.ts:1","scripts/seed-sober-living-data.ts:1","scripts/set-admin-claim.ts:1","scripts/sync-geocache.ts:1","scripts/test-geocode.ts:1"],"why_it_matters":"14 TypeScript database seeding/migration scripts are not called by any automation - likely one-time use completed","suggested_fix":"Move to scripts/archive/ or scripts/migrations-archive/ to preserve history without clutter","acceptance_tests":["Confirm migrations are complete and stable","Move to archive directory","Update .gitignore if needed","Document migration completion date"],"file":"scripts/dedupe-quotes.ts","line":1,"description":"14 TypeScript database seeding/migration scripts are not called by any automation - likely one-time use completed","recommendation":"Move to scripts/archive/ or scripts/migrations-archive/ to preserve history without clutter","id":"process::scripts/*.ts::orphaned-migrations"}
{"category":"process","title":"Orphaned npm script: learning:category","fingerprint":"process::package.json::npm-script-learning-category","severity":"S2","effort":"E1","confidence":"HIGH","files":["package.json:38"],"why_it_matters":"npm script exists but is not documented, called by any workflow, or referenced in skills","suggested_fix":"Remove if experimental, or document purpose and integrate into learning workflow","acceptance_tests":["Verify script works if kept","Document in DEVELOPMENT.md if useful","Remove if not needed"],"file":"package.json","line":38,"description":"npm script exists but is not documented, called by any workflow, or referenced in skills","recommendation":"Remove if experimental, or document purpose and integrate into learning workflow","id":"process::package.json::npm-script-learning-category"}
{"category":"process","title":"Orphaned npm script: learning:since","fingerprint":"process::package.json::npm-script-learning-since","severity":"S2","effort":"E1","confidence":"HIGH","files":["package.json:39"],"why_it_matters":"npm script exists but is not documented, called by any workflow, or referenced in skills","suggested_fix":"Remove if experimental, or document purpose and integrate into learning workflow","acceptance_tests":["Verify script works if kept","Document in DEVELOPMENT.md if useful","Remove if not needed"],"file":"package.json","line":39,"description":"npm script exists but is not documented, called by any workflow, or referenced in skills","recommendation":"Remove if experimental, or document purpose and integrate into learning workflow","id":"process::package.json::npm-script-learning-since"}
{"category":"process","title":"Orphaned npm script: phase:complete:auto","fingerprint":"process::package.json::npm-script-phase-complete-auto","severity":"S2","effort":"E1","confidence":"HIGH","files":["package.json:23"],"why_it_matters":"npm script with --auto flag never called by workflows or skills - unclear purpose","suggested_fix":"Remove if not needed, or integrate into phase completion workflow","acceptance_tests":["Check if phase:complete is sufficient","Remove if duplicate functionality","Document auto mode if keeping"],"file":"package.json","line":23,"description":"npm script with --auto flag never called by workflows or skills - unclear purpose","recommendation":"Remove if not needed, or integrate into phase completion workflow","id":"process::package.json::npm-script-phase-complete-auto"}
{"category":"process","title":"Obsolete: backlog-enforcement.yml checks deleted file","fingerprint":"process::.github/workflows/backlog-enforcement.yml::obsolete-file-check","severity":"S1","effort":"E2","confidence":"HIGH","files":[".github/workflows/backlog-enforcement.yml:32"],"why_it_matters":"Workflow checks AUDIT_FINDINGS_BACKLOG.md which was archived in TDMS Phase 2 (2026-01-31) - workflow gracefully skips but wastes CI resources","suggested_fix":"Remove backlog-health job or update to check docs/technical-debt/MASTER_DEBT.jsonl instead","acceptance_tests":["Decide if backlog health check still needed","Update to check MASTER_DEBT.jsonl if keeping","Remove job if obsolete","Update workflow trigger conditions if needed"],"file":".github/workflows/backlog-enforcement.yml","line":32,"description":"Workflow checks AUDIT_FINDINGS_BACKLOG.md which was archived in TDMS Phase 2 (2026-01-31) - workflow gracefully skips but wastes CI resources","recommendation":"Remove backlog-health job or update to check docs/technical-debt/MASTER_DEBT.jsonl instead","id":"process::.github/workflows/backlog-enforcement.yml::obsolete-file-check","evidence":[{"type":"code_reference","detail":".github/workflows/backlog-enforcement.yml:32"},{"type":"description","detail":"Workflow checks AUDIT_FINDINGS_BACKLOG.md which was archived in TDMS Phase 2 (2026-01-31) - workflow gracefully skips but wastes CI resources"}],"verification_steps":{"first_pass":{"method":"code_search","evidence_collected":[".github/workflows/backlog-enforcement.yml:32"]},"second_pass":{"method":"contextual_review","confirmed":true},"tool_confirmation":{"tool":"NONE","result":"confirmed via manual code review","reference":".github/workflows/backlog-enforcement.yml:32"}}}
{"category":"process","title":"Narrow trigger: validate-plan.yml for specific archived file","fingerprint":"process::.github/workflows/validate-plan.yml::narrow-trigger","severity":"S2","effort":"E1","confidence":"HIGH","files":[".github/workflows/validate-plan.yml:6"],"why_it_matters":"Workflow only triggers on PR changes to docs/archive/completed-plans/INTEGRATED_IMPROVEMENT_PLAN.md - extremely specific path unlikely to be modified","suggested_fix":"Broaden to any completed-plans/*.md or remove if INTEGRATED_IMPROVEMENT_PLAN is fully archived","acceptance_tests":["Check if other plans need validation","Update path pattern if needed","Remove workflow if plan is stable"],"file":".github/workflows/validate-plan.yml","line":6,"description":"Workflow only triggers on PR changes to docs/archive/completed-plans/INTEGRATED_IMPROVEMENT_PLAN.md - extremely specific path unlikely to be modified","recommendation":"Broaden to any completed-plans/*.md or remove if INTEGRATED_IMPROVEMENT_PLAN is fully archived","id":"process::.github/workflows/validate-plan.yml::narrow-trigger"}
{"category":"process","title":"Manual-only scripts not in automation","fingerprint":"process::scripts/manual-only::documentation-gap","severity":"S3","effort":"E1","confidence":"HIGH","files":["scripts/ai-review.js:1","scripts/add-false-positive.js:1"],"why_it_matters":"ai-review.js and add-false-positive.js are manual command-line tools not in automation - need documentation of when to use them","suggested_fix":"Add to DEVELOPMENT.md under 'Manual Scripts' section with usage examples","acceptance_tests":["Document ai-review.js usage workflow","Document add-false-positive.js workflow","Add examples to command reference","Verify scripts work as documented"],"file":"scripts/ai-review.js","line":1,"description":"ai-review.js and add-false-positive.js are manual command-line tools not in automation - need documentation of when to use them","recommendation":"Add to DEVELOPMENT.md under 'Manual Scripts' section with usage examples","id":"process::scripts/manual-only::documentation-gap"}
{"category":"process","title":"Duplicated: ESLint validation in pre-commit AND CI","fingerprint":"process::.husky/pre-commit::eslint-duplication","severity":"S2","effort":"E1","confidence":"HIGH","files":[".husky/pre-commit:9",".github/workflows/ci.yml:28"],"why_it_matters":"Running ESLint in both pre-commit and CI is redundant - pre-commit already blocks commits with errors, so CI check adds no value but doubles execution time","suggested_fix":"Keep ESLint blocking in pre-commit, make CI check non-blocking or remove it entirely. CI should only catch cases where pre-commit was bypassed","acceptance_tests":["ESLint runs once per commit lifecycle","CI doesn't duplicate pre-commit blocking checks","Documentation clarifies which checks are gates vs audits"],"file":".husky/pre-commit","line":9,"description":"Running ESLint in both pre-commit and CI is redundant - pre-commit already blocks commits with errors, so CI check adds no value but doubles execution time","recommendation":"Keep ESLint blocking in pre-commit, make CI check non-blocking or remove it entirely. CI should only catch cases where pre-commit was bypassed","id":"process::.husky/pre-commit::eslint-duplication"}
{"category":"process","title":"Duplicated: Pattern compliance check in pre-commit AND CI","fingerprint":"process::.husky/pre-commit::pattern-check-duplication","severity":"S2","effort":"E1","confidence":"HIGH","files":[".husky/pre-commit:35",".github/workflows/ci.yml:58-75"],"why_it_matters":"Pattern compliance runs in pre-commit (blocking all files) and CI (PR changed files only). This creates inconsistent behavior and wastes CI resources","suggested_fix":"Decide single source: either pre-commit blocks all or CI blocks changed files. Remove the other. Current setup means pre-commit catches issues CI might miss","acceptance_tests":["Pattern check runs in exactly one place","Behavior is consistent for all commits","Documentation clarifies pattern enforcement strategy"],"file":".husky/pre-commit","line":35,"description":"Pattern compliance runs in pre-commit (blocking all files) and CI (PR changed files only). This creates inconsistent behavior and wastes CI resources","recommendation":"Decide single source: either pre-commit blocks all or CI blocks changed files. Remove the other. Current setup means pre-commit catches issues CI might miss","id":"process::.husky/pre-commit::pattern-check-duplication"}
{"category":"process","title":"Duplicated: Technical debt schema validation in pre-commit AND CI","fingerprint":"process::.husky/pre-commit::debt-validation-duplication","severity":"S2","effort":"E1","confidence":"HIGH","files":[".husky/pre-commit:248","github/workflows/ci.yml:95"],"why_it_matters":"Tech debt schema validation runs in both pre-commit (blocking when MASTER_DEBT.jsonl staged) and CI. Double validation on same file wastes resources","suggested_fix":"Keep pre-commit validation (faster feedback). Make CI check non-blocking or remove it","acceptance_tests":["Schema validation runs once per commit","CI provides visibility without duplication","Fast local feedback preserved"],"file":".husky/pre-commit","line":248,"description":"Tech debt schema validation runs in both pre-commit (blocking when MASTER_DEBT.jsonl staged) and CI. Double validation on same file wastes resources","recommendation":"Keep pre-commit validation (faster feedback). Make CI check non-blocking or remove it","id":"process::.husky/pre-commit::debt-validation-duplication"}
{"category":"process","title":"Duplicated: CANON schema validation in pre-commit AND CI","fingerprint":"process::.husky/pre-commit::canon-validation-duplication","severity":"S2","effort":"E1","confidence":"HIGH","files":[".husky/pre-commit:97",".github/workflows/ci.yml:84"],"why_it_matters":"CANON validation runs in pre-commit (non-blocking warning) and CI (blocking). Inconsistent - same validation with different severity in two places","suggested_fix":"Unify validation behavior. Either pre-commit blocks or CI blocks, not both. Current state: pre-commit warns, CI blocks - confusing","acceptance_tests":["CANON validation has single blocking point","Severity is consistent across environments","Clear documentation of validation strategy"],"file":".husky/pre-commit","line":97,"description":"CANON validation runs in pre-commit (non-blocking warning) and CI (blocking). Inconsistent - same validation with different severity in two places","recommendation":"Unify validation behavior. Either pre-commit blocks or CI blocks, not both. Current state: pre-commit warns, CI blocks - confusing","id":"process::.husky/pre-commit::canon-validation-duplication"}
{"category":"process","title":"Duplicated: Test execution in pre-commit AND CI","fingerprint":"process::.husky/pre-commit::test-duplication","severity":"S1","effort":"E2","confidence":"HIGH","files":[".husky/pre-commit:59-87",".github/workflows/ci.yml:115"],"why_it_matters":"Tests run in pre-commit (conditionally blocking) AND CI (always blocking). For config changes, tests run twice. Adds 30-60s to commit+push workflow","suggested_fix":"Pre-commit: quick smoke tests only for high-risk changes. CI: full test suite. Or skip pre-commit tests entirely, rely on CI","acceptance_tests":["Tests run once per commit-push cycle OR","Pre-commit runs subset, CI runs full suite","Total test time reduced by 30-50%"],"file":".husky/pre-commit","line":59,"description":"Tests run in pre-commit (conditionally blocking) AND CI (always blocking). For config changes, tests run twice. Adds 30-60s to commit+push workflow","recommendation":"Pre-commit: quick smoke tests only for high-risk changes. CI: full test suite. Or skip pre-commit tests entirely, rely on CI","id":"process::.husky/pre-commit::test-duplication","evidence":[{"type":"code_reference","detail":".husky/pre-commit:59"},{"type":"description","detail":"Tests run in pre-commit (conditionally blocking) AND CI (always blocking). For config changes, tests run twice. Adds 30-60s to commit+push workflow"}],"verification_steps":{"first_pass":{"method":"code_search","evidence_collected":[".husky/pre-commit:59"]},"second_pass":{"method":"contextual_review","confirmed":true},"tool_confirmation":{"tool":"NONE","result":"confirmed via manual code review","reference":".husky/pre-commit:59"}}}
{"category":"process","title":"Duplicated: Path validation logic across 16+ hooks","fingerprint":"process::.claude/hooks::path-validation-duplication","severity":"S1","effort":"E2","confidence":"HIGH","files":[".claude/hooks/check-edit-requirements.js:18-63",".claude/hooks/check-write-requirements.js:18-63",".claude/hooks/firestore-write-block.js:40-99",".claude/hooks/repository-pattern-check.js:50-108",".claude/hooks/typescript-strict-check.js:19-78",".claude/hooks/test-mocking-validator.js:19-78",".claude/hooks/app-check-validator.js:19-78","scripts/lib/validate-paths.js:50-137"],"why_it_matters":"16+ hooks duplicate identical path validation (security checks, traversal prevention, normalization). Total ~800 lines. Shared utility exists but unused. Bug fixes must be applied 16+ times","suggested_fix":"All hooks import and use validateFilePath() from scripts/lib/validate-paths.js. Delete inline duplicates","acceptance_tests":["All hooks use shared validateFilePath()","No inline path validation remains","Security fix in validate-paths.js applies to all hooks","Test coverage for shared utility is comprehensive"],"file":".claude/hooks/check-edit-requirements.js","line":18,"description":"16+ hooks duplicate identical path validation (security checks, traversal prevention, normalization). Total ~800 lines. Shared utility exists but unused. Bug fixes must be applied 16+ times","recommendation":"All hooks import and use validateFilePath() from scripts/lib/validate-paths.js. Delete inline duplicates","id":"process::.claude/hooks::path-validation-duplication","evidence":[{"type":"code_reference","detail":".claude/hooks/check-edit-requirements.js:18"},{"type":"description","detail":"16+ hooks duplicate identical path validation (security checks, traversal prevention, normalization). Total ~800 lines. Shared utility exists but unused. Bug fixes must be applied 16+ times"}],"verification_steps":{"first_pass":{"method":"code_search","evidence_collected":[".claude/hooks/check-edit-requirements.js:18"]},"second_pass":{"method":"contextual_review","confirmed":true},"tool_confirmation":{"tool":"NONE","result":"confirmed via manual code review","reference":".claude/hooks/check-edit-requirements.js:18"}}}
{"category":"process","title":"Duplicated: File reading logic across 5 hooks","fingerprint":"process::.claude/hooks::file-reading-duplication","severity":"S2","effort":"E1","confidence":"HIGH","files":[".claude/hooks/firestore-write-block.js:114-124",".claude/hooks/repository-pattern-check.js:123-133",".claude/hooks/typescript-strict-check.js:104-114",".claude/hooks/test-mocking-validator.js:95-105",".claude/hooks/app-check-validator.js:92-102"],"why_it_matters":"5 hooks duplicate identical file reading logic: check if content provided, resolve path, readFileSync with error handling. ~50 lines duplicated","suggested_fix":"Create shared utility readFileForHook(filePath, projectDir) in scripts/lib/validate-paths.js. All hooks use it","acceptance_tests":["Shared readFileForHook() utility exists","All hooks use shared implementation","Error handling is consistent","No inline file reading remains"],"file":".claude/hooks/firestore-write-block.js","line":114,"description":"5 hooks duplicate identical file reading logic: check if content provided, resolve path, readFileSync with error handling. ~50 lines duplicated","recommendation":"Create shared utility readFileForHook(filePath, projectDir) in scripts/lib/validate-paths.js. All hooks use it","id":"process::.claude/hooks::file-reading-duplication"}
{"category":"process","title":"Duplicated: Error message extraction pattern across 42+ files","fingerprint":"process::scripts::error-handling-duplication","severity":"S1","effort":"E2","confidence":"HIGH","files":["scripts/check-pattern-compliance.js:40","scripts/check-doc-headers.js:65-67","scripts/check-cross-doc-deps.js:64","scripts/debt/validate-schema.js:31","scripts/lib/sanitize-error.js:63-95"],"why_it_matters":"Pattern 'err instanceof Error ? err.message : String(err)' appears in 42+ files. Shared sanitizeError() utility exists but unused. Inconsistent error handling","suggested_fix":"All scripts import and use sanitizeError() from scripts/lib/sanitize-error.js. Replace inline pattern","acceptance_tests":["All scripts use shared sanitizeError()","No inline error extraction remains","Error messages are consistently sanitized","Security: no sensitive data in logs"],"file":"scripts/check-pattern-compliance.js","line":40,"description":"Pattern 'err instanceof Error ? err.message : String(err)' appears in 42+ files. Shared sanitizeError() utility exists but unused. Inconsistent error handling","recommendation":"All scripts import and use sanitizeError() from scripts/lib/sanitize-error.js. Replace inline pattern","id":"process::scripts::error-handling-duplication","evidence":[{"type":"code_reference","detail":"scripts/check-pattern-compliance.js:40"},{"type":"description","detail":"Pattern 'err instanceof Error ? err.message : String(err)' appears in 42+ files. Shared sanitizeError() utility exists but unused. Inconsistent error handling"}],"verification_steps":{"first_pass":{"method":"code_search","evidence_collected":["scripts/check-pattern-compliance.js:40"]},"second_pass":{"method":"contextual_review","confirmed":true},"tool_confirmation":{"tool":"NONE","result":"confirmed via manual code review","reference":"scripts/check-pattern-compliance.js:40"}}}
{"category":"process","title":"Duplicated: TTY-aware color code across 3+ scripts","fingerprint":"process::scripts::tty-color-duplication","severity":"S3","effort":"E1","confidence":"HIGH","files":["scripts/check-doc-headers.js:48-56","scripts/check-cross-doc-deps.js:32-42","scripts/run-consolidation.js"],"why_it_matters":"TTY color detection and color object creation duplicated across scripts. ~15 lines each. Inconsistent color usage","suggested_fix":"Create shared getColors() utility in scripts/lib/ that returns color object. All scripts import it","acceptance_tests":["Shared getColors() utility exists","All scripts use shared implementation","Color output is consistent","Non-TTY output has no escape codes"],"file":"scripts/check-doc-headers.js","line":48,"description":"TTY color detection and color object creation duplicated across scripts. ~15 lines each. Inconsistent color usage","recommendation":"Create shared getColors() utility in scripts/lib/ that returns color object. All scripts import it","id":"process::scripts::tty-color-duplication"}
{"category":"process","title":"Duplicated: Security validations across all hooks","fingerprint":"process::.claude/hooks::security-validation-duplication","severity":"S2","effort":"E2","confidence":"HIGH","files":[".claude/hooks/check-edit-requirements.js:40-62",".claude/hooks/firestore-write-block.js:76-99",".claude/hooks/pattern-check.js:69-90"],"why_it_matters":"All hooks duplicate identical security validations: startsWith('-') check, multiline rejection, backslash normalization, absolute path blocking, traversal detection. Already covered by validateFilePath() but duplicated inline","suggested_fix":"Use validateFilePath() from validate-paths.js which includes all security checks. Delete inline duplicates","acceptance_tests":["No inline security validation remains","All hooks use validateFilePath()","Security checks are comprehensive and consistent"],"file":".claude/hooks/check-edit-requirements.js","line":40,"description":"All hooks duplicate identical security validations: startsWith('-') check, multiline rejection, backslash normalization, absolute path blocking, traversal detection. Already covered by validateFilePath() but duplicated inline","recommendation":"Use validateFilePath() from validate-paths.js which includes all security checks. Delete inline duplicates","id":"process::.claude/hooks::security-validation-duplication"}
{"category":"process","title":"Duplicated: Git staged files retrieval across scripts","fingerprint":"process::scripts::git-staged-duplication","severity":"S3","effort":"E1","confidence":"HIGH","files":["scripts/check-cross-doc-deps.js:83-97","scripts/check-doc-headers.js","scripts/check-agent-compliance.js"],"why_it_matters":"Multiple scripts duplicate git diff --cached --name-only logic with error handling. ~15 lines each","suggested_fix":"Create shared getStagedFiles() utility in scripts/lib/. All scripts import it","acceptance_tests":["Shared getStagedFiles() utility exists","All scripts use shared implementation","Error handling is consistent"],"file":"scripts/check-cross-doc-deps.js","line":83,"description":"Multiple scripts duplicate git diff --cached --name-only logic with error handling. ~15 lines each","recommendation":"Create shared getStagedFiles() utility in scripts/lib/. All scripts import it","id":"process::scripts::git-staged-duplication"}
{"category":"process","title":"Duplicated: Config loading pattern across 17+ files","fingerprint":"process::scripts::config-loading-duplication","severity":"S3","effort":"E1","confidence":"HIGH","files":["scripts/check-pattern-compliance.js:34-43","scripts/check-doc-headers.js:69-77","scripts/check-cross-doc-deps.js:60-67","scripts/debt/validate-schema.js:26-34"],"why_it_matters":"17+ files duplicate loadConfig/loadConfigWithRegex pattern with try-catch and error message extraction. ~10 lines each. Shared utility exists but usage is inconsistent","suggested_fix":"Create loadConfigSafe() wrapper that handles try-catch internally. All scripts use one-liner: const config = loadConfigSafe('name')","acceptance_tests":["Shared loadConfigSafe() wrapper exists","All scripts use simplified one-liner","Error messages are consistent","Config loading is DRY"],"file":"scripts/check-pattern-compliance.js","line":34,"description":"17+ files duplicate loadConfig/loadConfigWithRegex pattern with try-catch and error message extraction. ~10 lines each. Shared utility exists but usage is inconsistent","recommendation":"Create loadConfigSafe() wrapper that handles try-catch internally. All scripts use one-liner: const config = loadConfigSafe('name')","id":"process::scripts::config-loading-duplication"}
{"category":"process","title":"Duplicated: Base directory resolution across hooks","fingerprint":"process::.claude/hooks::basedir-resolution-duplication","severity":"S2","effort":"E1","confidence":"HIGH","files":[".claude/hooks/check-edit-requirements.js:18",".claude/hooks/pattern-check.js:31-47",".claude/hooks/firestore-write-block.js:40-50"],"why_it_matters":"All hooks duplicate baseDir resolution: path.resolve(process.env.CLAUDE_PROJECT_DIR || process.cwd()) plus security validation. ~10 lines each across 16+ hooks","suggested_fix":"Create getProjectDir() utility in validate-paths.js that returns validated project directory. All hooks use it","acceptance_tests":["Shared getProjectDir() utility exists","All hooks use shared implementation","Security validation is consistent","CLAUDE_PROJECT_DIR handling is uniform"],"file":".claude/hooks/check-edit-requirements.js","line":18,"description":"All hooks duplicate baseDir resolution: path.resolve(process.env.CLAUDE_PROJECT_DIR || process.cwd()) plus security validation. ~10 lines each across 16+ hooks","recommendation":"Create getProjectDir() utility in validate-paths.js that returns validated project directory. All hooks use it","id":"process::.claude/hooks::basedir-resolution-duplication"}
{"category":"process","title":"Duplicated: JSON argument parsing across hooks","fingerprint":"process::.claude/hooks::json-parsing-duplication","severity":"S3","effort":"E1","confidence":"HIGH","files":[".claude/hooks/check-edit-requirements.js:20-31",".claude/hooks/firestore-write-block.js:59-69",".claude/hooks/pattern-check.js:49-67"],"why_it_matters":"All hooks duplicate JSON argument parsing: try parse, extract file_path/content, handle errors. ~15 lines each across 16+ hooks","suggested_fix":"Create parseHookArgs(arg) utility that returns {filePath, content, error}. All hooks use it","acceptance_tests":["Shared parseHookArgs() utility exists","All hooks use shared implementation","Error handling is consistent","Parsing logic is DRY"],"file":".claude/hooks/check-edit-requirements.js","line":20,"description":"All hooks duplicate JSON argument parsing: try parse, extract file_path/content, handle errors. ~15 lines each across 16+ hooks","recommendation":"Create parseHookArgs(arg) utility that returns {filePath, content, error}. All hooks use it","id":"process::.claude/hooks::json-parsing-duplication"}
{"category":"process","title":"Duplicated: File extension checks across hooks","fingerprint":"process::.claude/hooks::extension-check-duplication","severity":"S3","effort":"E1","confidence":"HIGH","files":[".claude/hooks/firestore-write-block.js:102",".claude/hooks/typescript-strict-check.js:81",".claude/hooks/repository-pattern-check.js:111",".claude/hooks/test-mocking-validator.js:81"],"why_it_matters":"Multiple hooks check file extensions with regex patterns. While patterns differ, the approach is duplicated","suggested_fix":"Create utility hasExtension(filePath, extensions) that accepts array of extensions. Standardize extension checking","acceptance_tests":["Shared hasExtension() utility exists","Extension checks are consistent","Code is more readable"],"file":".claude/hooks/firestore-write-block.js","line":102,"description":"Multiple hooks check file extensions with regex patterns. While patterns differ, the approach is duplicated","recommendation":"Create utility hasExtension(filePath, extensions) that accepts array of extensions. Standardize extension checking","id":"process::.claude/hooks::extension-check-duplication"}
{"category":"process","title":"Duplicated: ALLOWED_PATHS pattern matching across hooks","fingerprint":"process::.claude/hooks::allowed-paths-duplication","severity":"S2","effort":"E2","confidence":"HIGH","files":[".claude/hooks/firestore-write-block.js:30-38",".claude/hooks/repository-pattern-check.js:37-47",".claude/hooks/test-mocking-validator.js:88-92"],"why_it_matters":"Multiple hooks define ALLOWED_PATHS arrays and test with .some(pattern.test). Pattern is identical but lists differ. Hard to maintain consistency","suggested_fix":"Centralize path exemption rules in config file. Create isPathExempt(filePath, ruleSet) utility that loads from config","acceptance_tests":["Exemption rules in config file","Shared isPathExempt() utility","All hooks use shared implementation","Rules are easy to update"],"file":".claude/hooks/firestore-write-block.js","line":30,"description":"Multiple hooks define ALLOWED_PATHS arrays and test with .some(pattern.test). Pattern is identical but lists differ. Hard to maintain consistency","recommendation":"Centralize path exemption rules in config file. Create isPathExempt(filePath, ruleSet) utility that loads from config","id":"process::.claude/hooks::allowed-paths-duplication"}
{"category":"process","title":"Duplicated: check-edit-requirements and check-write-requirements logic","fingerprint":"process::.claude/hooks::edit-write-requirements-duplication","severity":"S1","effort":"E2","confidence":"HIGH","files":[".claude/hooks/check-edit-requirements.js:1-108",".claude/hooks/check-write-requirements.js:1-106"],"why_it_matters":"These two hooks are 95% identical. Same path validation (lines 18-63), same security checks, same file type detection. Only difference: priority order and specific messages. ~200 lines duplicated","suggested_fix":"Merge into single check-file-requirements.js that handles both Edit and Write. Pass operation type as parameter","acceptance_tests":["Single check-file-requirements.js exists","Handles both Edit and Write operations","Shared validation logic","Priority order configurable","Old hooks deleted"],"file":".claude/hooks/check-edit-requirements.js","line":1,"description":"These two hooks are 95% identical. Same path validation (lines 18-63), same security checks, same file type detection. Only difference: priority order and specific messages. ~200 lines duplicated","recommendation":"Merge into single check-file-requirements.js that handles both Edit and Write. Pass operation type as parameter","id":"process::.claude/hooks::edit-write-requirements-duplication","evidence":[{"type":"code_reference","detail":".claude/hooks/check-edit-requirements.js:1"},{"type":"description","detail":"These two hooks are 95% identical. Same path validation (lines 18-63), same security checks, same file type detection. Only difference: priority order and specific messages. ~200 lines duplicated"}],"verification_steps":{"first_pass":{"method":"code_search","evidence_collected":[".claude/hooks/check-edit-requirements.js:1"]},"second_pass":{"method":"contextual_review","confirmed":true},"tool_confirmation":{"tool":"NONE","result":"confirmed via manual code review","reference":".claude/hooks/check-edit-requirements.js:1"}}}
{"category":"process","title":"Duplicated: Pattern check implementation between hook and script","fingerprint":"process::patterns::check-implementation-duplication","severity":"S2","effort":"E2","confidence":"HIGH","files":[".claude/hooks/pattern-check.js:1-223","scripts/check-pattern-compliance.js:1-400"],"why_it_matters":"Hook invokes script but also duplicates path validation, file size checks, and output formatting. Hook should be thin wrapper, not duplicate logic","suggested_fix":"Hook should only validate input and delegate to script. Remove duplicated validation logic from hook","acceptance_tests":["Hook is thin wrapper (<50 lines)","All validation in script","No duplicated logic","Hook handles only I/O formatting"],"file":".claude/hooks/pattern-check.js","line":1,"description":"Hook invokes script but also duplicates path validation, file size checks, and output formatting. Hook should be thin wrapper, not duplicate logic","recommendation":"Hook should only validate input and delegate to script. Remove duplicated validation logic from hook","id":"process::patterns::check-implementation-duplication"}
{"category":"process","title":"Duplicated: Validation between validate-audit.js and validate-schema.js","fingerprint":"process::validation::audit-schema-duplication","severity":"S2","effort":"E2","confidence":"HIGH","files":["scripts/validate-audit.js:1-80","scripts/debt/validate-schema.js:1-80"],"why_it_matters":"Both validators load schema from config, validate JSONL structure, check required fields. Core validation logic is similar but implemented twice","suggested_fix":"Extract shared validateJsonlSchema(file, schemaConfig) utility. Both validators use it with different schema configs","acceptance_tests":["Shared validateJsonlSchema() utility exists","Both validators use shared core","Only schema-specific logic differs","Validation behavior is consistent"],"file":"scripts/validate-audit.js","line":1,"description":"Both validators load schema from config, validate JSONL structure, check required fields. Core validation logic is similar but implemented twice","recommendation":"Extract shared validateJsonlSchema(file, schemaConfig) utility. Both validators use it with different schema configs","id":"process::validation::audit-schema-duplication"}
{"category":"process","title":"Never executes: AUDIT_FINDINGS_BACKLOG.md backlog check","fingerprint":"process::.github/workflows/backlog-enforcement.yml::never-executes-backlog-check","severity":"S3","effort":"E0","confidence":"HIGH","files":[".github/workflows/backlog-enforcement.yml:32","scripts/check-backlog-health.js:148"],"why_it_matters":"Workflow checks for docs/AUDIT_FINDINGS_BACKLOG.md which doesn't exist (archived in TDMS Phase 2). The check always exits early with 0 items, making the entire job pointless. Script check-backlog-health.js also references this non-existent file.","suggested_fix":"Remove backlog-health job from workflow or update to check docs/technical-debt/MASTER_DEBT.jsonl instead","acceptance_tests":["Job removed from backlog-enforcement.yml","OR job updated to check MASTER_DEBT.jsonl"],"file":".github/workflows/backlog-enforcement.yml","line":32,"description":"Workflow checks for docs/AUDIT_FINDINGS_BACKLOG.md which doesn't exist (archived in TDMS Phase 2). The check always exits early with 0 items, making the entire job pointless. Script check-backlog-health.js also references this non-existent file.","recommendation":"Remove backlog-health job from workflow or update to check docs/technical-debt/MASTER_DEBT.jsonl instead","id":"process::.github/workflows/backlog-enforcement.yml::never-executes-backlog-check"}
{"category":"process","title":"Never executes: npm script test:coverage:report","fingerprint":"process::package.json::never-executes-test-coverage-report","severity":"S3","effort":"E0","confidence":"HIGH","files":["package.json:13"],"why_it_matters":"Script defined but never called in any workflow, hook, or automation. Only appears in audit documentation. Creates impression of functionality that doesn't execute.","suggested_fix":"Remove script from package.json or add to CI workflow if coverage reporting is needed","acceptance_tests":["Script removed from package.json","OR script called in .github/workflows/ci.yml"],"file":"package.json","line":13,"description":"Script defined but never called in any workflow, hook, or automation. Only appears in audit documentation. Creates impression of functionality that doesn't execute.","recommendation":"Remove script from package.json or add to CI workflow if coverage reporting is needed","id":"process::package.json::never-executes-test-coverage-report"}
{"category":"process","title":"Never executes: npm script learning:category","fingerprint":"process::package.json::never-executes-learning-category","severity":"S3","effort":"E0","confidence":"HIGH","files":["package.json:38"],"why_it_matters":"Script defined but never called in any workflow, hook, documentation, or automation. Likely vestigial from development.","suggested_fix":"Remove script from package.json","acceptance_tests":["Script removed from package.json"],"file":"package.json","line":38,"description":"Script defined but never called in any workflow, hook, documentation, or automation. Likely vestigial from development.","recommendation":"Remove script from package.json","id":"process::package.json::never-executes-learning-category"}
{"category":"process","title":"Never executes: npm script learning:since","fingerprint":"process::package.json::never-executes-learning-since","severity":"S3","effort":"E0","confidence":"HIGH","files":["package.json:39"],"why_it_matters":"Script defined but only referenced in archived plan. Not called in any active workflow or automation.","suggested_fix":"Remove script from package.json","acceptance_tests":["Script removed from package.json"],"file":"package.json","line":39,"description":"Script defined but only referenced in archived plan. Not called in any active workflow or automation.","recommendation":"Remove script from package.json","id":"process::package.json::never-executes-learning-since"}
{"category":"process","title":"Never executes: npm script config:validate","fingerprint":"process::package.json::never-executes-config-validate","severity":"S3","effort":"E0","confidence":"MEDIUM","files":["package.json:52"],"why_it_matters":"Inline script to validate JSON config files. Mentioned in DEVELOPMENT.md but never called in CI, pre-commit, or pre-push hooks. Manual-only scripts reduce reliability.","suggested_fix":"Add to pre-commit hook when scripts/config/*.json files are modified, or remove if configs are stable","acceptance_tests":["Added to .husky/pre-commit for config file changes","OR removed from package.json"],"file":"package.json","line":52,"description":"Inline script to validate JSON config files. Mentioned in DEVELOPMENT.md but never called in CI, pre-commit, or pre-push hooks. Manual-only scripts reduce reliability.","recommendation":"Add to pre-commit hook when scripts/config/*.json files are modified, or remove if configs are stable","id":"process::package.json::never-executes-config-validate"}
{"category":"process","title":"Never executes: npm script session:summary","fingerprint":"process::package.json::never-executes-session-summary","severity":"S3","effort":"E0","confidence":"HIGH","files":["package.json:41"],"why_it_matters":"Script passes --summary flag to log-session-activity.js but is only documented, never automated. Manual-only logging reduces effectiveness.","suggested_fix":"Remove script or add to session-end skill/workflow","acceptance_tests":["Script removed from package.json","OR added to .claude/skills/session-end/SKILL.md"],"file":"package.json","line":41,"description":"Script passes --summary flag to log-session-activity.js but is only documented, never automated. Manual-only logging reduces effectiveness.","recommendation":"Remove script or add to session-end skill/workflow","id":"process::package.json::never-executes-session-summary"}
{"category":"process","title":"Never executes: npm script override:list","fingerprint":"process::package.json::never-executes-override-list","severity":"S3","effort":"E0","confidence":"HIGH","files":["package.json:43"],"why_it_matters":"Lists overrides logged by log-override.js but never called in automation. Only manual execution means oversight data is not reviewed systematically.","suggested_fix":"Remove script or add to weekly/monthly automated review process","acceptance_tests":["Script removed from package.json","OR added to scheduled GitHub Action or session checkpoint"],"file":"package.json","line":43,"description":"Lists overrides logged by log-override.js but never called in automation. Only manual execution means oversight data is not reviewed systematically.","recommendation":"Remove script or add to weekly/monthly automated review process","id":"process::package.json::never-executes-override-list"}
{"category":"process","title":"Never executes: GitHub workflow master branch trigger","fingerprint":"process::.github/workflows/backlog-enforcement.yml::never-executes-master-branch","severity":"S3","effort":"E0","confidence":"HIGH","files":[".github/workflows/backlog-enforcement.yml:5"],"why_it_matters":"Workflow configured to trigger on [main, master] but repo only has 'main' branch. The 'master' condition never fires, cluttering the trigger configuration.","suggested_fix":"Remove 'master' from branches array, keep only 'main'","acceptance_tests":["branches: [main] (without master)"],"file":".github/workflows/backlog-enforcement.yml","line":5,"description":"Workflow configured to trigger on [main, master] but repo only has 'main' branch. The 'master' condition never fires, cluttering the trigger configuration.","recommendation":"Remove 'master' from branches array, keep only 'main'","id":"process::.github/workflows/backlog-enforcement.yml::never-executes-master-branch"}
{"category":"process","title":"Never executes: validate-plan workflow for archived file","fingerprint":"process::.github/workflows/validate-plan.yml::never-executes-validate-plan","severity":"S2","effort":"E1","confidence":"HIGH","files":[".github/workflows/validate-plan.yml:7"],"why_it_matters":"Workflow triggers only when docs/archive/completed-plans/INTEGRATED_IMPROVEMENT_PLAN.md changes. This file is archived and unlikely to be modified, making the entire workflow dormant.","suggested_fix":"Archive/disable workflow or expand paths to include active plan documents","acceptance_tests":["Workflow file moved to docs/archive/workflows/","OR paths updated to include docs/plans/*.md"],"file":".github/workflows/validate-plan.yml","line":7,"description":"Workflow triggers only when docs/archive/completed-plans/INTEGRATED_IMPROVEMENT_PLAN.md changes. This file is archived and unlikely to be modified, making the entire workflow dormant.","recommendation":"Archive/disable workflow or expand paths to include active plan documents","id":"process::.github/workflows/validate-plan.yml::never-executes-validate-plan"}
