{"id":295,"date":"2026-02-10","title":"PR #359 — Unsafe err.message, Silent Catches, Full Filepath Logging","source":"sonarcloud+qodo+ci","pr":359,"patterns":["unsafe-errmessage-access-recurring","silent-catch-blocks"],"fixed":13,"deferred":2,"rejected":1,"critical":9,"major":0,"minor":4,"trivial":0,"total":15,"learnings":["Root cause: Agent prompt didn't specify the safe pattern explicitly","Prevention: Pattern checker catches this in CI; always use","Root cause: Defensive \"don't break hooks\" approach went too far","Prevention: Always log at minimum `console.warn` with context","Fixed: 13 items (9 unsafe err.message, 2 silent catches, 2 filepath logging)","Deferred: 2 items (atomic writes for state files — architectural change)"]}
{"id":296,"date":"2026-02-10","title":"PR #359 R2 — Path Redaction, Atomic Writes, State Dir Fallback","source":"qodo","pr":359,"patterns":["path-info-leakage-conflicting-reviews","non-atomic-file-writes"],"fixed":7,"deferred":0,"rejected":0,"critical":0,"major":2,"minor":5,"trivial":0,"total":7,"learnings":["Root cause: Reviewers optimize for different concerns","Prevention: Default to `path.basename()` in hook logs","Root cause: Original code used simple writeFileSync","Prevention: Always use tmp+rename pattern for state files","Fixed: 7 items (2 path redaction, 4 atomic writes, 1 state dir fallback)","When reviewers conflict, security concerns take priority"]}
{"id":297,"date":"2026-02-11","title":"PR #359 R3 — Windows Atomic Writes, Null State Dir, Evidence Dedup","source":"qodo","pr":359,"patterns":["state-utilsjs-getstatedir-null-fallback","windows-safe-atomic-writes-7-locations","debt-2450-evidence-dedup","mergedfrom-unknown-removal"],"fixed":0,"deferred":0,"rejected":0,"critical":0,"major":0,"minor":0,"trivial":0,"total":11,"learnings":["Windows `fs.renameSync` fails if destination exists — always"]}
{"id":298,"date":"2026-02-12","title":"PR #361 — Graduation State Safety, Append Flag, JSON Parse Guards","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":17,"deferred":1,"rejected":0,"critical":0,"major":5,"minor":8,"trivial":4,"total":17,"learnings":["Qodo Compliance + SonarCloud + Qodo Code Suggestions + Doc Lint","Root cause: Copied common Node.js pattern without thinking about atomicity","Prevention: Direct read in try/catch, check err.code for ENOENT","Root cause: \"Best effort\" state file didn't seem critical enough for atomic","Prevention: All state files should use atomic write pattern","Root cause: Didn't know about `{ flag: 'a' }` option"]}
{"id":299,"date":"2026-02-12","title":"PR #361 R2 — Cognitive Complexity, ESLint Fixer Safety, Cross-Platform Fixes","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":18,"deferred":0,"rejected":0,"critical":3,"major":10,"minor":10,"trivial":0,"total":23,"learnings":["Root cause: Mixed concerns in single functions (formatting + logic + I/O)","Prevention: Extract formatting helpers (formatResultRow, printViolation,","Root cause: Auto-fix assumed all statements could be wrapped in try/catch","Prevention: Only auto-fix ExpressionStatements, return null for others","Root cause: POSIX rename is atomic, Windows rename requires destination","Prevention: unlinkSync destination before renameSync"]}
{"id":300,"date":"2026-02-08","title":"PR #351 ROADMAP Cleanup - CI + Qodo + SonarCloud","source":"sonarcloud+qodo+ci","pr":351,"patterns":[],"fixed":8,"deferred":0,"rejected":2,"critical":0,"major":2,"minor":6,"trivial":0,"total":8,"learnings":["Mixed (CI failures, Qodo PR Suggestions, SonarCloud S5852)","Root cause: Plan was written before doc linting was enforced","Prevention: Doc header + section check runs in CI on all changed `.md`","Root cause: Regex used nested `[\\s\\S]*?` quantifiers","Prevention: Use string-based parsing (indexOf + split) for frontmatter","Root cause: Set comparison was case-sensitive","Prevention: Normalize to lowercase on both add and lookup"]}
{"id":301,"date":"2026-02-06","title":"PR #342 Multi-AI Audit Data Quality - Doc Lint + Qodo","source":"qodo","pr":342,"patterns":[],"fixed":14,"deferred":1,"rejected":3,"critical":0,"major":0,"minor":0,"trivial":0,"total":18,"learnings":["Root cause: Author wrote links relative to repo root, not file location","Prevention: Doc lint catches this automatically; run before commit","Root cause: Kimi model outputs non-standard severity format","Prevention: fix-schema.js should normalize P-severity to S-severity","Root cause: aggregate-category.js fingerprint matching not catching all","Prevention: Add fingerprint normalization (lowercase, strip punctuation)"]}
{"id":302,"date":"2026-02-12","title":"PR #361 R3 — Symlink Clobber, Backup-and-Replace, ESLint Loc Fallback, O(n) Index","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":10,"deferred":0,"rejected":4,"critical":0,"major":3,"minor":6,"trivial":1,"total":14,"learnings":["Root cause: mkdirSync + writeFileSync pattern doesn't check symlinks","Prevention: Always lstatSync before writing to verify not a symlink","Root cause: unlinkSync before renameSync is not atomic","Prevention: backup-and-replace pattern (rename old to .bak, rename new,","Root cause: Some parsers don't populate loc","Prevention: Always guard with `target.loc ? ... : fallback`"]}
{"id":303,"date":"2026-02-12","title":"PR #361 R4 — TOCTOU Symlink, Corrupt State Guard, Cognitive Complexity, Bug Fix","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":10,"deferred":0,"rejected":5,"critical":0,"major":2,"minor":7,"trivial":5,"total":20,"learnings":["Root cause: check-then-use pattern on filesystem","Prevention: Call lstatSync directly, handle ENOENT in catch","Root cause: Same fallback for \"no file\" and \"corrupt file\"","Prevention: Return null for corruption, {} for ENOENT, caller uses ??","Root cause: Copy-paste from different pattern format","Prevention: Schema validation for pattern definitions"]}
{"id":304,"date":"2026-02-12","title":"PR #361 R5 — State Wipe Prevention, Dir Symlink Guard, Fixer Safety","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":6,"deferred":0,"rejected":16,"critical":0,"major":0,"minor":0,"trivial":0,"total":22,"learnings":["Root cause: applyGraduation saved even when load failed","Prevention: Track null vs {} separately, skip save on null","Root cause: Only file-level symlink check, dir can also be a symlink","Prevention: Check dir with isSymlink() before mkdirSync/writes","Fixed: 6 items (state wipe prevention, dir symlink x2, isSymlink try/catch,","Rejected: 16 items (repeats: String.raw, regex 38, i assignment, catch naming,"]}
{"id":305,"date":"2026-02-12","title":"PR #362 R1 — IMS→TDMS Merge Cognitive Complexity + Code Quality","source":"sonarcloud+qodo","pr":362,"patterns":[],"fixed":0,"deferred":0,"rejected":0,"critical":0,"major":0,"minor":0,"trivial":0,"total":9,"learnings":["SonarCloud (5 issues) + Qodo Compliance (1) + Qodo Suggestions (8)","Root cause: mapDocStandardsToTdms and mapEnhancementAuditToTdms had 60+","Prevention: Extract mapFirstFileToFile + mapCommonAuditFields shared","Root cause: Each field checked individually → high cognitive complexity","Prevention: preserveEnhancementFields iterates field array","Root cause: printProcessingResults had 3 nested print sections"],"sourceBreakdown":"SonarCloud (5 issues) + Qodo Compliance (1) + Qodo Suggestions (8)"}
{"id":306,"date":"2026-02-12","title":"PR #362 R2 — Edge Cases: Line 0, Falsy Fields, Windows Paths","source":"qodo","pr":362,"patterns":[],"fixed":0,"deferred":0,"rejected":0,"critical":0,"major":0,"minor":0,"trivial":0,"total":11,"learnings":["Prevention: Use `!== undefined` for numeric fields that can be 0","Prevention: Use `!== undefined` for string fields that can be empty","Prevention: Check for `.`, `/`, AND `\\\\` in path validation","Fixed: QS-1 (line 0 edge case), QS-4 (preserveEnhancementFields !==","Dismissed: SEC-1 (terminal escape - CLI tool), CMP-1/CMP-2 (pre-existing","File path validation should handle Windows backslash separators"],"sourceBreakdown":"Qodo Compliance (5) + Qodo Suggestions (6) **PR/Branch:** PR #362"}
{"id":307,"date":"2026-02-12","title":"PR #362 R3 — SonarCloud Negated Condition + File Path Warning Guard","source":"sonarcloud+qodo","pr":362,"patterns":[],"fixed":0,"deferred":0,"rejected":0,"critical":0,"major":0,"minor":0,"trivial":0,"total":9,"learnings":["Qodo Compliance (3) + Qodo Suggestions (5) + SonarCloud (1)","Prevention: Put positive/meaningful case first with `=== undefined`","Prevention: Guard with `normalizedFile &&` before validation","Fixed: SC-1 (flip negated condition L128), QS-5 (guard file path warning)","Dismissed: CMP-1 (operator field already present since R1), CMP-2 (historical","SonarCloud \"unexpected negated condition\" catches real readability issues"],"sourceBreakdown":"Qodo Compliance (3) + Qodo Suggestions (5) + SonarCloud (1)"}
{"id":308,"date":"2026-02-12","title":"PR #362 R4 — ReDoS Fix, Cognitive Complexity, Cross-Validation, Atomic Writes","source":"sonarcloud+qodo","pr":362,"patterns":["cross-validation-must-apply-mismatch-not-just-warn","cognitive-complexity-reduction-via-function-extraction","backup-swap-atomic-write-with-tryfinally-cleanup","replaceall-over-replace-with-g-flag","regex-operator-precedence----needs---","capture-output-once-in-shell-hooks"],"fixed":0,"deferred":0,"rejected":0,"critical":1,"major":0,"minor":0,"trivial":0,"total":18,"learnings":["SonarCloud (1 CRITICAL) + Qodo Compliance (6) + Qodo Suggestions"]}
{"id":309,"date":"2026-02-12","title":"PR #362 R5 — ReDoS Overlapping Quantifiers, Complexity Extraction, Multiline Regex","source":"sonarcloud+qodo","pr":362,"patterns":["cognitive-complexity-reduction-via-standalone-function-extra","jsonstringify-over-manual-string-escaping-in-templates","scope-regex-character-classes-to-single-lines-with-n","shell-if-varcmd-for-set--e-safety"],"fixed":0,"deferred":0,"rejected":0,"critical":0,"major":0,"minor":0,"trivial":0,"total":8,"learnings":["SonarCloud (2 S5852 + 3 code smells) + Qodo Suggestions (8)"],"sourceBreakdown":"SonarCloud (2 S5852 + 3 code smells) + Qodo Suggestions (8)"}
{"id":310,"date":"2026-02-13","title":"Qodo PR Suggestions — Alerts v3 Health Score, Edge Cases, Path Normalization","source":"qodo","pr":null,"patterns":[],"fixed":3,"deferred":1,"rejected":0,"critical":0,"major":0,"minor":2,"trivial":0,"total":4,"learnings":["Root cause: `continue` on missing categories + dynamic `totalWeight`","Prevention: Always normalize against fixed total possible weight","Root cause: No parent commit to diff against","Prevention: Fallback to empty tree hash","Root cause: Audit tool outputs Windows paths","Prevention: Normalize at ingest time"]}
{"id":311,"date":"2026-02-14","title":"SonarCloud + Qodo — PR #365 Audit Ecosystem Branch","source":"sonarcloud+qodo","pr":365,"patterns":[],"fixed":33,"deferred":0,"rejected":1,"critical":1,"major":5,"minor":21,"trivial":0,"total":33,"learnings":["SonarCloud Issues/Hotspots + Qodo PR Suggestions + Qodo Compliance","Root cause: PATTERN_KEYWORDS array uses `/gi` flags","Prevention: Always reset `lastIndex = 0` or use `exec()` pattern","Root cause: Unix-first development, untested Windows paths","Prevention: Always normalize with `replaceAll(\"\\\\\", \"/\")` in hooks","Root cause: Using single regex alternation for file exclusion lists","Prevention: Use `pathExcludeList` (string array) instead of regex"]}
{"id":312,"date":"2026-02-14","title":"CI Regex Complexity + Qodo R2 — PR #365","source":"sonarcloud+qodo","pr":365,"patterns":[],"fixed":8,"deferred":0,"rejected":0,"critical":0,"major":1,"minor":7,"trivial":0,"total":8,"learnings":["Root cause: `(?=\\r?\\n\\r?\\n|\\r?\\n##|\\r?\\n---)` — 3 alternatives with shared","Fix: `(?=\\r?\\n(?:\\r?\\n|##|---))` — factor out common `\\r?\\n`","Root cause: Regex not constrained to header area","Prevention: Slice content to header area (first 4000 chars) before matching","Fixed: 8 items across 5 files"]}
{"id":313,"date":"2026-02-14","title":"CI Feedback + Qodo R3 — Orphaned DEBT + Bounded Regex","source":"qodo+ci","pr":365,"patterns":[],"fixed":11,"deferred":0,"rejected":0,"critical":0,"major":3,"minor":6,"trivial":0,"total":11,"learnings":["Root cause: Dedup heuristic too aggressive on similar entries","Prevention: Cross-check ROADMAP.md references before dedup","Root cause: Direct object spread from parsed config","Prevention: Use `Object.create(null)` + skip dangerous keys","Root cause: Regex assumes `##` directly followed by whitespace+text","Prevention: Use `##\\s*(?:[^\\w\\r\\n]+\\s*)?Name` for emoji tolerance"]}
{"id":314,"date":"2026-02-14","title":"SonarCloud Regex Hotspots + Qodo Robustness R4 — PR #365","source":"sonarcloud+qodo","pr":365,"patterns":[],"fixed":13,"deferred":0,"rejected":0,"critical":0,"major":5,"minor":6,"trivial":0,"total":13,"learnings":["SonarCloud Security Hotspots (S5852) + Qodo PR Suggestions + Qodo","Root cause: Function kept as stub but regex not removed","Prevention: When disabling a check, remove the regex too","Root cause: Off-by-one in O(n) optimization from Review #255","Prevention: Always set `lastIdx = match.index + match[0].length`","Root cause: Alternatives added incrementally without refactoring","Prevention: Factor common prefixes in regex alternations"]}
{"id":315,"date":"2026-02-14","title":"SonarCloud + Qodo R5 — Residual Regex, Stack Traces, Windows Compat","source":"sonarcloud+qodo","pr":365,"patterns":[],"fixed":13,"deferred":0,"rejected":0,"critical":0,"major":4,"minor":7,"trivial":2,"total":13,"learnings":["SonarCloud Security Hotspots (S5852) + Qodo PR Suggestions + Qodo","Root cause: Incomplete sanitization — caught + logged but then rethrown","Prevention: Use `process.exit(1)` instead of `throw` when error is fatal","Root cause: Regex was the initial tool; never reconsidered as complexity","Prevention: For section extraction, prefer split-and-scan over regex","Root cause: Pattern added in Review #255 without Windows testing","Prevention: Always `unlinkSync(dest)` before `renameSync(src, dest)`"]}
{"id":316,"date":"2026-02-14","title":"PR #366 R1 — SonarCloud Regex + Qodo Robustness + CI Blockers","source":"sonarcloud+qodo","pr":366,"patterns":[],"fixed":0,"deferred":6,"rejected":0,"critical":0,"major":4,"minor":11,"trivial":0,"total":21,"learnings":["SonarCloud Security Hotspots (S5852) + Qodo PR Suggestions + Qodo","New: `testFn` alternative to `pattern` field in pattern compliance checker"]}
{"id":317,"date":"2026-02-15","title":"PR #366 R2 — SonarCloud Two-Strikes + Qodo Robustness","source":"sonarcloud+qodo","pr":366,"patterns":["sonarcloud-s5852-two-strikes-rule-applied","git-status---porcelain--z-renamecopy-parse-bug","defensive-state-shape-normalization","atomic-write-consistency","numberisfinite-guard-for-timestamp-purging"],"fixed":0,"deferred":3,"rejected":0,"critical":0,"major":3,"minor":8,"trivial":0,"total":14,"learnings":["SonarCloud Security Hotspots (S5852) + Qodo PR Suggestions + Qodo","Two-strikes regex→string (2), rename/copy parse (1), sprint type","DEBT-2957 (project dir escape — architectural), DEBT-2958"]}
{"id":318,"date":"2026-02-15","title":"PR #366 R3 — Atomic Write Hardening + State Normalization","source":"qodo","pr":366,"patterns":["backup-swap-atomic-writes","mkdirsync-before-atomic-write","state-shape-normalization","git-porcelain-record-validation","numberisfinite-guards"],"fixed":0,"deferred":4,"rejected":1,"critical":0,"major":0,"minor":10,"trivial":0,"total":15,"learnings":["DEBT-2960 (symlink overwrite in rotate-state.js —","Chunk-based line counting for large-context-warning.js — byte"]}
{"id":319,"date":"2026-02-15","title":"PR #366 R4 — Symlink Guard + Future Timestamp + Skip-Abuse Bug","source":"qodo","pr":366,"patterns":["symlink-write-guard-in-savejson","future-timestamp-defense","skip-abuse-alert-24h7d-data-mismatch-bug","crlf-jsonl-parsing-on-windows","consistent-caps-on-file-lists"],"fixed":0,"deferred":0,"rejected":0,"critical":0,"major":1,"minor":5,"trivial":0,"total":9,"learnings":["Symlink guard (1), future timestamp (1), skip-abuse bug (1), CRLF","DEBT-2957 (env path trust), DEBT-2958 (audit trails),"]}
{"id":320,"date":"2026-02-15","title":"PR #366 R5 — Parent Dir Symlink + Clock Skew + Prototype Pollution","source":"qodo","pr":366,"patterns":["parent-directory-symlink-attack","clock-skew-defense","prototype-pollution-via-counter-objects","symlink-check-on-reads","size-based-rotation-guard"],"fixed":0,"deferred":0,"rejected":0,"critical":0,"major":0,"minor":8,"trivial":0,"total":9,"learnings":["Same files appearing 3+ consecutive rounds — holistic"]}
{"id":321,"date":"2026-02-15","title":"PR #366 R6 — Shared Symlink Guard + Self-Healing Cooldown + Bug Fixes","source":"qodo","pr":366,"patterns":["shared-symlink-helper","self-healing-future-timestamps","toctou-race","milestone-string-bug","hook-output-protocol"],"fixed":0,"deferred":0,"rejected":2,"critical":0,"major":2,"minor":9,"trivial":1,"total":14,"learnings":["Created shared `.claude/hooks/lib/symlink-guard.js` with"]}
{"id":322,"date":"2026-02-15","title":"PR #366 R7 — Comprehensive Symlink Guard Hardening","source":"qodo","pr":366,"patterns":[],"fixed":9,"deferred":0,"rejected":3,"critical":0,"major":0,"minor":0,"trivial":0,"total":12,"learnings":["Every atomic write needs `isSafeToWrite()` on BOTH the target","When introducing a shared security helper, audit ALL write paths in"]}
{"id":324,"date":"2026-02-16","title":"PR #367 R1 — Alerts Overhaul Security + Code Quality","source":"sonarcloud+qodo","pr":367,"patterns":[],"fixed":36,"deferred":7,"rejected":7,"critical":0,"major":0,"minor":0,"trivial":0,"total":30,"learnings":["SonarCloud (24) + Qodo PR Compliance (6) + Qodo Code Suggestions","Parallel 3-agent review processing (security / code quality / hooks+docs)","First use of propagation check on new scripts added in same PR","SonarCloud cognitive complexity deferrals (6 items, all pre-existing CC 16-64)"],"sourceBreakdown":"SonarCloud (24) + Qodo PR Compliance (6) + Qodo Code Suggestions"}
{"id":"retro-371","type":"retrospective","pr":371,"date":"2026-02-17","rounds":2,"totalItems":45,"fixed":38,"rejected":7,"deferred":0,"churnChains":0,"automationCandidates":["Absolute path leakage","S5852 Regex DoS false pos.","Options object for 7+ params"],"skillsToUpdate":[],"processImprovements":["Post-extraction CC verification","Upgrade CC rule to error","Fix Qodo suppression"],"learnings":[]}
