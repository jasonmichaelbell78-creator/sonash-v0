{"id":307,"date":"2026-02-12","title":"PR #362 R3 — SonarCloud Negated Condition + File Path Warning Guard","source":"qodo+sonarcloud","pr":362,"patterns":["negated-conditions-reduce-readability","missing-guard-on-file-path-warning"],"fixed":2,"deferred":0,"learnings":["SonarCloud \"unexpected negated condition\" catches real readability issues","File validation should skip items without file fields entirely, not warn"]}
{"id":308,"date":"2026-02-12","title":"PR #362 R4 — ReDoS Fix, Cognitive Complexity, Cross-Validation, Atomic Writes","source":"qodo+sonarcloud","pr":362,"patterns":["s5852-redos","cross-validation-must-apply-mismatch-not-just-warn","cognitive-complexity-reduction-via-function-extraction","backup-swap-atomic-write-with-try-finally-cleanup","replaceall-over-replace-with-g-flag","regex-operator-precedence-needs","capture-output-once-in-shell-hooks"],"fixed":12,"deferred":0,"learnings":["S5852 ReDoS: Replace lazy `[^|]+?` with greedy `[^|]*` in table-parsing regex (CRITICAL) — Lazy quantifiers on negated character classes create catastrophic backtracking. Greedy `[^|]*` is inherently safe because the character class can't match the delimiter.","Cross-validation must APPLY mismatch, not just warn — Both `run-consolidation.js` and `sync-consolidation-counter.js` detected CODE_PATTERNS.md vs log mismatches but continued using the wrong value. Fix: `lastConsolidated = codePatternsInfo.lastReview` before computing counts.","Cognitive complexity reduction via function extraction — Extract `crossValidateLastConsolidated()` and `parseTriggerSection()` to keep `getConsolidationStatus()` under 15.","Backup-swap atomic write with try...finally cleanup — Write to .tmp, rename existing to .bak, rename .tmp to target, clean up .bak on success. Restore from .bak if rename fails. Always clean up .tmp in finally block.","`replaceAll` over `replace` with `/g` flag — ES2021 `replaceAll` is clearer for global replacements. For literal strings, avoids regex entirely.","Regex operator precedence: `^-|-$` needs `(?:^-|-$)` — Without grouping, `^-|-$` is parsed as `(^-)` OR `(-$)`, not alternation of anchored patterns.","Capture output once in shell hooks — Instead of running a command twice (once suppressed, once to show output), capture with `$(cmd 2>&1)` and check `$?`. Halves execution time."]}
{"id":309,"date":"2026-02-12","title":"PR #362 R5 — ReDoS Overlapping Quantifiers, Complexity Extraction, Multiline Regex","source":"qodo+sonarcloud","pr":362,"patterns":["redos-from-overlapping-quantifiers-s-before","cognitive-complexity-reduction-via-standalone-function-extraction","json-stringify-over-manual-string-escaping-in-templates","scope-regex-character-classes-to-single-lines-with-n","shell-if-var-cmd-for-set-e-safety"],"fixed":9,"deferred":0,"learnings":["ReDoS from overlapping quantifiers: `\\s*` before `[^|]*` — Even safe character classes become vulnerable when preceded by `\\s*` that matches the same whitespace. Remove redundant `\\s*` when captures are `.trim()`'d anyway.","Cognitive complexity reduction via standalone function extraction — Extract loops and parsing logic into standalone functions (not just class methods) to maximize complexity reduction per extraction.","`JSON.stringify()` over manual string escaping in templates — Eliminates nested template literals AND handles all special characters. Safer than `.replaceAll('\"', ...)`.","Scope regex character classes to single lines with `[^\\n...]` — Generic negated classes like `[^|]*` or `[^,)]+` can match across newlines. Add `\\n` to negation for line-scoped patterns.","Shell `if ! var=\"$(cmd)\"` for `set -e` safety — Combining assignment and test in one statement prevents `set -e` from aborting on non-zero exit before the variable is set."]}
{"id":310,"date":"2026-02-13","title":"Qodo PR Suggestions — Alerts v3 Health Score, Edge Cases, Path Normalization","source":"qodo","pr":null,"patterns":["health-score-inflation","initial-commit-edge-case","backslash-path-separators"],"fixed":3,"deferred":1,"learnings":["Health score functions should normalize against fixed total weight, not dynamic available weight","Git operations should handle initial-commit edge cases with empty tree hash","JSONL data files should normalize path separators at ingest time for cross-platform consistency"]}
{"id":311,"date":"2026-02-14","title":"SonarCloud + Qodo - PR #365 Audit Ecosystem Branch","source":"sonarcloud+qodo","pr":365,"patterns":["global-regex-lastindex-bug","windows-cross-platform-gaps","regex-complexity-accumulation","unbounded-whitespace-in-markdown-regex"],"fixed":33,"deferred":0,"learnings":["pathExcludeList is the preferred mechanism for file exclusions (avoids regex complexity limits)","Persist state cleanup (warned-files.json TTL purge was in-memory only)","spawnSync git rev-parse --show-toplevel is the reliable way to find repo root","Always reset lastIndex = 0 or use exec() pattern with /g regex"]}
{"id":312,"date":"2026-02-14","title":"CI Regex Complexity + Qodo R2 - PR #365","source":"sonarcloud+qodo","pr":365,"patterns":["sonarcloud-regex-complexity-over-20","document-version-regex-anchoring"],"fixed":8,"deferred":0,"learnings":["spawnSync without timeout can hang in pre-push hooks - always add timeout: 3000","maxBuffer on execFileSync prevents crash on large diffs","isTrivialChange needs file-type awareness: # lines in .sh are comments but headings in .md","Factor common prefixes in regex alternations to reduce complexity"]}
{"id":313,"date":"2026-02-14","title":"CI Feedback + Qodo R3 - Orphaned DEBT + Bounded Regex","source":"ci+qodo","pr":365,"patterns":["dedup-removing-referenced-debt-entries","prototype-pollution-in-config-objects","emoji-tolerant-section-matching"],"fixed":11,"deferred":0,"learnings":["MEMORY.md critical bug: changes to MASTER_DEBT.jsonl MUST sync to raw/deduped.jsonl","Atomic writes (write .tmp + rename) prevent corruption on crash","Context-aware trivial detection: # is a comment in .sh/.yml but a heading in .md","Cross-check ROADMAP.md references before dedup"]}
{"id":314,"date":"2026-02-14","title":"SonarCloud Regex Hotspots + Qodo Robustness R4 - PR #365","source":"sonarcloud+qodo","pr":365,"patterns":["dead-code-harboring-regex-complexity","incremental-line-counting-bug","regex-lookahead-factoring","non-global-regex-guard"],"fixed":13,"deferred":0,"learnings":["Remove regex from disabled checks - dead code still triggers SonarCloud","\\s* to \\s+ is a simple backtracking reduction when at least one space is always present","File size guards before readFileSync prevent local DoS on state files","Repo-relative paths (path.relative) are more reliable than raw string normalization for git diff"]}
{"id":315,"date":"2026-02-14","title":"SonarCloud + Qodo R5 - Residual Regex, Stack Traces, Windows Compat","source":"sonarcloud+qodo","pr":365,"patterns":["stack-trace-leakage-via-rethrown-errors","complex-regex-where-string-parsing-suffices","windows-renamesync-fails-when-dest-exists","file-size-budgets-for-regex-scanning"],"fixed":13,"deferred":0,"learnings":["path.basename() for log output prevents leaking user home directory paths","git rev-parse --show-toplevel is more reliable than process.cwd() for repo root","Block comment interior lines (* ...) should be treated as trivial in diff analysis","Memoizing isTrivialChange with a Map avoids redundant git diff calls per file"]}
{"id":316,"date":"2026-02-14","title":"PR #366 R1 - SonarCloud Regex + Qodo Robustness + CI Blockers","source":"sonarcloud+qodo+ci","pr":366,"patterns":["sonarcloud-s5852-two-strikes-regex","atomic-file-writes","unbounded-state-growth-pruning","ci-broken-links","master-debt-jsonl-sync"],"fixed":15,"deferred":6,"learnings":["SonarCloud two-strikes rule: if flagged twice, replace regex with string parsing","Atomic write pattern: tmp+rmSync+rename","State pruning: 24h TTL for directive-dedup, 30-day expiry for suggestedAgents","CI broken links in doc files need plain text annotation replacement","MASTER_DEBT.jsonl sync: changes must propagate to deduped.jsonl"]}
{"id":317,"date":"2026-02-15","title":"PR #366 R2 - SonarCloud Two-Strikes + Qodo Robustness","source":"sonarcloud+qodo","pr":366,"patterns":["sonarcloud-s5852-two-strikes-string-parsing","git-porcelain-rename-copy-parse-bug","defensive-state-shape-normalization","atomic-write-consistency","number-isfinite-guard"],"fixed":11,"deferred":3,"learnings":["Two-strikes regex to string: replace both remaining regexes with pure string parsing","Git status --porcelain -z rename/copy entries need indexed loop + i++ skip for second path","Defensive state shape normalization prevents crashes on corrupted JSON","Number.isFinite guard prevents purge bypass on corrupted timestamps"]}
{"id":318,"date":"2026-02-15","title":"PR #366 R3 - Atomic Write Hardening + State Normalization","source":"qodo","pr":366,"patterns":["backup-swap-atomic-writes","mkdirsync-before-atomic-write","state-shape-normalization","git-porcelain-record-validation","number-isfinite-guards"],"fixed":10,"deferred":4,"learnings":["Backup-swap atomic write: write tmp, rename original to .bak, rename tmp to original, rm .bak","mkdirSync before atomic write prevents first-run failures in clean environment","State shape normalization: validate JSON shape after parse","Git porcelain record validation: check line length and format before parsing XY fields","Number.isFinite guards on cooldown timestamps and uses/phase counters"]}
{"id":319,"date":"2026-02-15","title":"PR #366 R4 - Symlink Guard + Future Timestamp + Skip-Abuse Bug","source":"qodo","pr":366,"patterns":["symlink-write-guard-savejson","future-timestamp-defense","skip-abuse-24h-7d-data-mismatch","crlf-jsonl-parsing-windows","file-list-caps"],"fixed":6,"deferred":0,"learnings":["Symlink write guard: lstatSync().isSymbolicLink() before writing state files","Future timestamps from clock skew should trigger cooldown, not bypass it","Skip-abuse alert: separate byType24h and byType7d for accurate reporting","CRLF JSONL parsing: trim each line before JSON.parse on Windows","Consistent caps on file lists: match existing caps across all arrays"]}
{"id":320,"date":"2026-02-15","title":"PR #366 R5 - Parent Dir Symlink + Clock Skew + Prototype Pollution","source":"qodo","pr":366,"patterns":["parent-directory-symlink-attack","clock-skew-defense","prototype-pollution-counter-objects","symlink-check-on-reads","size-based-rotation-guard"],"fixed":8,"deferred":0,"learnings":["Parent directory can be a symlink redirecting writes - check path.dirname() + lstatSync()","Clock skew defense: future timestamps (ageMs < 0) should trigger cooldown","Prototype pollution: use Object.create(null) + String(key) for counter objects","Symlink check on reads: getContent() needs symlink check to prevent content injection","Size-based rotation: gate behind fs.statSync() size threshold instead of every-append"]}
{"id":321,"date":"2026-02-15","title":"PR #366 R6 - Shared Symlink Guard + Self-Healing Cooldown + Bug Fixes","source":"qodo","pr":366,"patterns":["shared-symlink-helper","self-healing-future-timestamps","toctou-race-try-catch","milestone-string-bug","hook-output-protocol"],"fixed":11,"deferred":0,"learnings":["Centralized isSafeToWrite() with ancestor traversal stops symlink ping-pong","Self-healing: ageMs < 0 deletes corrupt cooldown instead of permanently blocking","TOCTOU race: existsSync + lstatSync wrapped in try/catch, fail-closed","Hook output protocol: must print ok even when suppressing directives"]}
{"id":322,"date":"2026-02-15","title":"PR #366 R7 - Comprehensive Symlink Guard Hardening","source":"qodo","pr":366,"patterns":["issafetowrite-on-both-target-and-tmp","inline-to-shared-helper-migration","rotate-state-all-4-paths","path-isabsolute-check"],"fixed":9,"deferred":0,"learnings":["Every atomic write needs isSafeToWrite() on BOTH target AND tmp file","When introducing shared security helper, audit ALL write paths in one pass","rotate-state.js: all 4 atomic write paths need symlink guards","path.isAbsolute() check: reject relative paths in symlink guard"]}
{"id":323,"date":"2026-02-15","title":"PR #366 R8 — tmpPath Symlink Guards + Firestore Regex Bypass Fix","source":"qodo+sonarcloud","pr":366,"patterns":["tmppath-symlink-guard","firestore-regex-hyphen-bypass","log-override-path-resolve"],"fixed":7,"deferred":0,"learnings":["tmpPath symlink guards needed on 5 files","Firestore regex hyphen bypass: \\w+ to [A-Za-z0-9_-]+","Propagation check confirmed all atomic write paths guarded"]}
{"id":324,"date":"2026-02-16","title":"PR #367 R1 — Alerts Overhaul Security + Code Quality","source":"sonarcloud+qodo","pr":367,"patterns":[],"fixed":36,"deferred":7,"learnings":["SonarCloud (24) + Qodo PR Compliance (6) + Qodo Code Suggestions","Parallel 3-agent review processing (security / code quality / hooks+docs)","First use of propagation check on new scripts added in same PR","SonarCloud cognitive complexity deferrals (6 items, all pre-existing CC 16-64)"]}
{"id":325,"date":"2026-02-16","title":"PR #367 R2 — Trend Bug, Suppression Logic, Security Hardening","source":"sonarcloud+qodo+ci","pr":367,"patterns":["r1-agent-incomplete-fixes","exit-trap-overwrite","category-wide-suppression-blocked"],"fixed":21,"deferred":6,"learnings":["CI (Prettier) + SonarCloud (15) + Qodo PR Compliance (5) + Qodo Code","Parallel agent results need explicit verification against the original item","Shell EXIT trap chaining requires capturing previous trap with `trap -p EXIT`","SonarCloud cognitive complexity items are consistently pre-existing (CC 16-64)"]}
{"id":326,"date":"2026-02-16","title":"PR #367 R3 — Weight Normalization, CC Reduction, Symlink Guards","source":"sonarcloud+qodo","pr":367,"patterns":["tool-conflict-resolution","cc-reduction-via-extraction","type-safe-defensive-coding"],"fixed":8,"deferred":6,"learnings":["SonarCloud (11) + Qodo PR Compliance (2) + Qodo Code Suggestions (8)","When tools conflict (SonarCloud vs pattern compliance), document the conflict","Health score weight normalization is already handled by `measuredWeight`","Deduplicating extracted learnings with a Set prevents data quality issues in"]}
{"id":327,"date":"2026-02-16","title":"PR #367 R4 — Fail Closed, Log Injection, Trap Chaining, Input Normalization","source":"sonarcloud+qodo","pr":367,"patterns":["fail-closed-security","log-injection-prevention","shell-trap-chaining"],"fixed":13,"deferred":6,"learnings":["SonarCloud (9) + Qodo PR Compliance (5) + Qodo Code Suggestions (10)","Fail-open fallbacks for security modules are a recurring anti-pattern","Shell EXIT traps must be chained, not overwritten","Running validate-audit.js twice is wasteful; capture output once"]}
{"id":328,"date":"2026-02-16","title":"PR #367 R5 — Suppression Validation, POSIX Portability, Newline Propagation","source":"sonarcloud+qodo","pr":367,"patterns":["suppression-type-guard","posix-grep-portability","skip-reason-propagation-miss"],"fixed":9,"deferred":6,"learnings":["SonarCloud (8) + Qodo PR Compliance (5) + Qodo Code Suggestions (9)","Propagation check must cover both shell hooks AND JS scripts for same env vars","grep -P is GNU extension not POSIX — use wc -l for newline detection","Suppression files are external input — validate entry types before property access","ENOENT string codes lost by numeric-only error.code check — preserve in stderr"]}
{"id":329,"date":"2026-02-16","title":"PR #367 R6 — Control Chars, suppressAll, POSIX CR Fix, Severity Normalization","source":"sonarcloud+qodo","pr":367,"patterns":["control-char-validation","suppress-all-explicit","posix-cr-detection","severity-normalization"],"fixed":5,"deferred":6,"learnings":["SonarCloud (8) + Qodo Compliance (3) + Qodo Suggestions (5)","Control char validation \u0000-\u001f catches more injection vectors than just CR/LF","Category-wide suppression needs explicit suppressAll: true flag","ANSI-C quoting $\x27...\x27 is bash-only not POSIX sh — use printf variable","Severity clamp to known values prevents NaN in warning counts"]}
{"id":329,"date":"2026-02-16","title":"PR #367 R6 — Control Chars, suppressAll, POSIX CR Fix, Severity Normalization","source":"sonarcloud+qodo","pr":367,"patterns":["control-char-length-validation","suppressall-explicit-flag","posix-cr-detection","severity-normalization"],"fixed":5,"deferred":6,"learnings":["SonarCloud (8) + Qodo Compliance (3) + Qodo Suggestions (5)","Control character validation catches more injection vectors than just CR/LF","Category-wide suppression is a dangerous footgun — require explicit opt-in","Shell portability: `$'...'` ANSI-C quoting is bash-only, not POSIX sh","Propagation of validation patterns across all 3 JS scripts + 2 shell hooks"]}
{"id":330,"date":"2026-02-16","title":"PR #367 R7 — codePointAt, suppressAll Category Guard, Code Fence Parsing, EXIT Trap","source":"sonarcloud+qodo","pr":367,"patterns":["codePointAt-vs-charCodeAt","suppressAll-requires-category","code-fence-awareness","posix-exit-trap-helper","shell-control-char-validation"],"fixed":8,"deferred":6,"learnings":["codePointAt handles surrogate pairs and astral Unicode correctly","Category-wide suppression needs both suppressAll: true AND a valid category","Markdown parsing must account for code fences to avoid false header matches","Shell trap chaining via sed is fragile; a helper function is more maintainable","Always propagate validation patterns from JS to shell hooks and vice versa"]}{"id":331,"date":"2026-02-16","title":"PR #368 R3 — Symlink Hardening, shell:true Elimination, Ternary Extract","source":"sonarcloud+qodo","pr":368,"patterns":["symlink-guard-must-check-file-and-directory","shelltrue-cmd-suffix-on-windows","nested-ternaries-are-sonarcloud-code-smells","capture-error-in-catch-blocks","truncate-user-supplied-audit-fields","spawnsync-needs-statuserror-checks"],"fixed":12,"deferred":0,"learnings":["SonarCloud (1) + Qodo Compliance (5) + Qodo Suggestions (7)","Round 2 found the symlink guard from R1 was incomplete (checked dir but not","The shell:true issue persisted across 4 compliance rounds because the fix was","Non-canonical categories in TDMS examples (`cross-domain`) would break"]}
{"id":332,"date":"2026-02-16","title":"PR #368 R4 — DoS Length Check, Fingerprint Stability, File Perms","source":"sonarcloud+qodo","pr":368,"patterns":["length-check-before-expensive-iteration","deterministic-fingerprint-generation","restrictive-file-permissions-on-audit-logs","schema-alignment-fingerprint-vs-id"],"fixed":8,"deferred":0,"learnings":["SonarCloud (2) + Qodo Compliance (5) + Qodo Suggestions (5)","Qodo compliance continues to flag SKIP_REASON persistence as a risk across","The symlink guard ancestor-directory claim is incorrect — `realpathSync`"]}
{"id":333,"date":"2026-02-16","title":"PR #368 R5 — TOCTOU fd-Write, Argument Injection, Symlink Directory Guard","source":"sonarcloud+qodo","pr":368,"patterns":["toctou-in-file-creation-write","argument-injection-via-concatenated-flags","symlink-directory-pre-check","dont-propagate-invalid-input"],"fixed":8,"deferred":0,"learnings":["Qodo Compliance (3) + Qodo Suggestions (9) + SonarCloud (1)","SonarCloud Security Hotspot matched the TOCTOU race already identified by Qodo","Qodo compliance continues to flag SKIP_REASON stdout logging (R3, R4, R5) —","The `e?.cause?.code` pattern for Node.js error chain traversal improves"]}
{"id":334,"date":"2026-02-16","title":"PR #368 R6 — fstatSync fd Validation, Empty-Reason-on-Failure, EXIT Trap Robustness","source":"sonarcloud+qodo","pr":368,"patterns":["fstatsync-after-fd-open","never-return-unsafe-values-on-validation-failure","shell-trap-chaining-via-variable-accumulation","propagation-template-changes-must-update-live-code"],"fixed":8,"deferred":0,"learnings":["Qodo Compliance (3) + Qodo Suggestions (7) + SonarCloud (2 Hotspots)","SonarCloud 2 Security Hotspots were the same TOCTOU/symlink pattern from R5.","Qodo compliance continues to flag SKIP_REASON persistence (R3-R6) — by-design,","Pseudocode in SKILL.md needs the same rigor as production code — `groupBy`"]}
{"id":330,"date":"2026-02-16","title":"PR #367 R7 — codePointAt, suppressAll Category Guard, Code Fence Parsing, EXIT Trap","source":"sonarcloud+qodo","pr":367,"patterns":["codepointat-vs-charcodeat","suppressall-requires-category","code-fence-awareness","posix-exit-trap-chaining","shell-control-char-validation"],"fixed":8,"deferred":6,"learnings":["SonarCloud (11) + Qodo Compliance (2) + Qodo Suggestions (8)","Category-wide suppression needs both `suppressAll: true` AND a valid category","Markdown parsing must account for code fences to avoid false header matches","Shell trap chaining via sed is fragile; a helper function is more maintainable","Always propagate validation patterns from JS to shell hooks and vice versa"]}
{"id":331,"date":"2026-02-16","title":"PR #368 R3 — Symlink Hardening, shell:true Elimination, Ternary Extract","source":"sonarcloud+qodo","pr":368,"patterns":["symlink-guard-must-check-file-and-directory","shelltrue-cmd-suffix-on-windows","nested-ternaries-are-sonarcloud-code-smells","capture-error-in-catch-blocks","truncate-user-supplied-audit-fields","spawnsync-needs-statuserror-checks"],"fixed":12,"deferred":0,"learnings":["SonarCloud (1) + Qodo Compliance (5) + Qodo Suggestions (7)","Round 2 found the symlink guard from R1 was incomplete (checked dir but not","The shell:true issue persisted across 4 compliance rounds because the fix was","Non-canonical categories in TDMS examples (`cross-domain`) would break"]}
{"id":285,"date":"2026-02-11","title":"PR #360 R3 — Pre-commit Hook Fix, Final severity Sweep, Defensive Parsing","source":"qodo+ci","pr":360,"patterns":["documentationindexmd-prettier-ci-failure-3rd-occurrence","severityimpact-in-resolve-itemjs220","objectcreatenull-for-prototype-less-clones"],"fixed":7,"deferred":0,"learnings":["Qodo Code Suggestions R3 + CI Failure **PR/Branch:**","Pre-commit hooks that regenerate files MUST re-run formatters before staging","Field renames across a codebase need `grep -rn` on the ENTIRE directory","Three rounds to fully sweep severity→impact proves grep-first approach is","Object.create(null) is safer than {} for untrusted data cloning"]}
{"id":286,"date":"2026-02-11","title":"PR #360 R4 — Prototype Pollution, TOCTOU, Evidence Sanitization, CLI Robustness","source":"qodo","pr":360,"patterns":["safecloneobject-must-be-applied-immediately-after-jsonparse","toctou-in-path-validation","evidence-array-type-sanitization","utf-8-bom-on-first-line","absolute-script-paths-in-execfilesync"],"fixed":8,"deferred":3,"learnings":["Qodo Compliance R4 + Qodo Code Suggestions R4 **PR/Branch:**","Deferred: 3 (1 new ENH-0003 Markdown injection, 2 already tracked)","TOCTOU: always use validated/resolved path for all subsequent file operations","Evidence arrays need type + trim + dedup sanitization (not just Array.isArray)","BOM stripping is essential for cross-platform JSONL parsing","CLI scripts must use \\_\\_dirname-relative paths for execFileSync portability","Logging functions should never crash the main flow — wrap in try/catch"]}
{"id":287,"date":"2026-02-11","title":"PR #360 R5 — impactSort Falsy Bug, ID Drift, Audit Outcome, Evidence Sanitization","source":"qodo","pr":360,"patterns":["falsy-0-in-lookup-tables","id-drift-from-line-suffixes-in-mergedfrom","always-sanitize-not-just-on-merge","audit-log-outcome-field"],"fixed":7,"deferred":1,"learnings":["Qodo Compliance R5 + Qodo Code Suggestions R5 **PR/Branch:**","Deferred: 1 (resource exhaustion — already DEBT-2747 S2 scope)","Evidence sanitization must run unconditionally (no guard on secondary length)","Audit logs need explicit outcome field (success/partial_failure/failure)","BOM stripping needed in intake-audit.js too, not just validate-schema.js"]}
{"id":288,"date":"2026-02-11","title":"PR #360 R6 — Semantic Merge Logic, PII in Logs, Timestamp Integrity, Path Normalization","source":"qodo","pr":360,"patterns":["flag-only-vs-destructive-merge","pii-in-audit-logs","timestamp-integrity","stateful-regex-in-loops"],"fixed":8,"deferred":2,"learnings":["Qodo Compliance R6 + Qodo Code Suggestions R6 **PR/Branch:**","Deferred: 2 (streaming JSONL — arch change; dedup audit coverage — scope","Semantic match Pass 3 should flag-only, not merge — uncertain items need human","PII compliance: hash usernames, log only basenames of file paths","Spread order matters: `{ ...obj, timestamp }` protects system-generated fields","Guard `RegExp.test()` in loops against stateful g/y flags","Non-object JSON (null, arrays, primitives) can pass `JSON.parse()` — validate"]}
{"id":289,"date":"2026-02-11","title":"PR #360 R7 — Symlink Guards, Pass 3 File Grouping, Schema Hardening, Honesty Guard","source":"qodo","pr":360,"patterns":["symlink-file-overwrite","pass-3-file-grouping","honesty-guard","schema-config-hardening"],"fixed":10,"deferred":2,"learnings":["Qodo Compliance R7 + Qodo Code Suggestions R7 **PR/Branch:**","Deferred: 2 (evidence dedup data fix, placeholder provenance data fix —","Symlink guard pattern: `fs.lstatSync().isSymbolicLink()` before writes, ENOENT","File grouping for pairwise passes reduces complexity proportionally to file","Non-fatal operator hashing: initialize with fallback, single try/catch,","Honesty guard: `counter_argument` required for enhancement-audit format inputs","Whitespace-only strings should be treated as missing for required fields"]}
{"id":290,"date":"2026-02-11","title":"PR #360 R8 — CI Fix, Pass 0 No-File Guard, Symlink Guards Expansion, Format Precision","source":"qodo+ci","pr":360,"patterns":["ci-blocker","pass-0-no-file-guard","symlink-guard-expansion","enhancement-audit-format-precision","pass-3-safety-cap"],"fixed":11,"deferred":1,"learnings":["Qodo Compliance R8 + Qodo Code Suggestions R8 + CI Failure","Fixed: 11 items (2 CI blockers + 9 improvements)","Deferred: 1 (evidence dedup data fix — pipeline handles)","Pattern checker requires `instanceof Error` before `.message` — use canonical","Pass 0 parametric dedup: items without `file` must not share group keys","Enhancement-audit detection: check `typeof === \"string\" && trim()` and","Fingerprint field needs type guard (`typeof !== \"string\"` → error, not crash)"]}
{"id":291,"date":"2026-02-11","title":"PR #360 R9 — Prototype Pollution Guard, Fail-Closed Symlink, Atomic Writes","source":"qodo","pr":360,"patterns":["prototype-pollution","fail-closed-symlink-guard","atomic-write-for-canonical-output","schema-stable-reviewneeded-entries","symlink-guard-coverage"],"fixed":10,"deferred":1,"learnings":["Qodo Compliance R9 + Qodo Code Suggestions R9 **PR/Branch:**","Fixed: 10 items across 5 files","Deferred: 1 (evidence dedup data fix — pipeline handles)","Fail-closed: if lstat throws EACCES/EPERM, throw rather than silently continue","Atomic write pattern: writeFileSync to `.tmp.${pid}` + renameSync + finally","Acceptance evidence: sanitize with type coercion, trim, filter, and length cap","BOM strip on first line + CRLF trimEnd prevents parse failures on"]}
{"id":292,"date":"2026-02-11","title":"PR #360 R10 — Fail-Closed Guards, safeClone Coverage, DoS Cap, Audit Trail","source":"qodo","pr":360,"patterns":["assertnotsymlink-fail-closed","safecloneobject-coverage-gap","temp-file-hardening","algorithmic-dos","audit-trail","pipeline-write-resilience"],"fixed":11,"deferred":1,"learnings":["Qodo Compliance R10 + Qodo Code Suggestions R10 **PR/Branch:**","Fixed: 11 items across 7 files (5 scripts + validate-schema + learnings log)","Deferred: 1 (evidence data dedup — pipeline handles)","Pairwise pass cap (MAX_PAIRWISE_ITEMS=5000) prevents quadratic blowup","Pipeline append writes need try/catch + process.exit(2) for controlled failure","Sanitize BOTH existing evidence and new acceptance evidence for consistency"]}
{"id":293,"date":"2026-02-11","title":"PR #360 R11 — Markdown Injection, EEXIST Recovery, Windows Compat, Schema Validation","source":"qodo","pr":360,"patterns":["markdown-injection","stale-temp-files","deep-nesting","non-fatal-fallback-writes","cross-source-pollution","terminal-escape-injection","windows-compat"],"fixed":11,"deferred":0,"learnings":["Qodo Compliance R11 + Qodo Code Suggestions R11 **PR/Branch:**","Fixed: 11 items across 7 files (6 scripts + learnings log)","EEXIST recovery: unlink stale tmp + retry with wx flag","Fallback/regenerable files should use console.warn, not process.exit","Terminal escape strip regex:","Windows rename compat: `if (existsSync) unlinkSync` before `renameSync`","Schema config arrays should be validated immediately after load"]}
{"id":294,"date":"2026-02-11","title":"PR #360 R12 — CI Fix, TOCTOU Recheck, BiDi Strip, ID Validation, Log Decoupling","source":"qodo+ci","pr":360,"patterns":["ci-failure","toctou-recheck","bidi-spoofing","escapemarkdown-robustness","id-propagation","log-decoupling","line-number-strictness"],"fixed":12,"deferred":0,"learnings":["CI Failure (ESLint no-control-regex) + Qodo Compliance R12 + Qodo","Fixed: 12 items across 6 scripts + learnings log","CI: green (0 ESLint errors)","Extracted `sanitizeLogSnippet()` with compiled regexes at module scope for","TOCTOU mitigation: re-assert symlink check immediately before destructive","BiDi control chars: `/[\\u202A-\\u202E\\u2066-\\u2069]/g`"]}
{"id":295,"date":"2026-02-10","title":"PR #359 — Unsafe err.message, Silent Catches, Full Filepath Logging","source":"sonarcloud+qodo+ci","pr":359,"patterns":["unsafe-errmessage-access-recurring","silent-catch-blocks"],"fixed":13,"deferred":2,"learnings":["SonarCloud + Qodo + CI Pattern Compliance **PR/Branch:** PR #359","Root cause: Agent prompt didn't specify the safe pattern explicitly","Prevention: Pattern checker catches this in CI; always use","Root cause: Defensive \"don't break hooks\" approach went too far","Prevention: Always log at minimum `console.warn` with context","Fixed: 13 items (9 unsafe err.message, 2 silent catches, 2 filepath logging)","Deferred: 2 items (atomic writes for state files — architectural change)"]}
{"id":296,"date":"2026-02-10","title":"PR #359 R2 — Path Redaction, Atomic Writes, State Dir Fallback","source":"qodo","pr":359,"patterns":["path-info-leakage-conflicting-reviews","non-atomic-file-writes"],"fixed":7,"deferred":0,"learnings":["Qodo Compliance + Code Suggestions **PR/Branch:** PR #359","Root cause: Reviewers optimize for different concerns","Prevention: Default to `path.basename()` in hook logs","Root cause: Original code used simple writeFileSync","Prevention: Always use tmp+rename pattern for state files","Fixed: 7 items (2 path redaction, 4 atomic writes, 1 state dir fallback)","When reviewers conflict, security concerns take priority"]}
{"id":297,"date":"2026-02-11","title":"PR #359 R3 — Windows Atomic Writes, Null State Dir, Evidence Dedup","source":"qodo","pr":359,"patterns":["state-utilsjs-getstatedir-null-fallback","windows-safe-atomic-writes-7-locations","debt-2450-evidence-dedup","mergedfrom-unknown-removal"],"fixed":0,"deferred":0,"learnings":["Qodo Code Suggestions **PR/Branch:** PR #359","Windows `fs.renameSync` fails if destination exists — always"]}
{"id":298,"date":"2026-02-12","title":"PR #361 — Graduation State Safety, Append Flag, JSON Parse Guards","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":17,"deferred":1,"learnings":["Qodo Compliance + SonarCloud + Qodo Code Suggestions + Doc Lint","PR #361 (claude/analyze-repo-install-ceMkn) **Suggestions:** 19","Root cause: Copied common Node.js pattern without thinking about atomicity","Prevention: Direct read in try/catch, check err.code for ENOENT","Root cause: \"Best effort\" state file didn't seem critical enough for atomic","Prevention: All state files should use atomic write pattern","Root cause: Didn't know about `{ flag: 'a' }` option"]}
{"id":299,"date":"2026-02-12","title":"PR #361 R2 — Cognitive Complexity, ESLint Fixer Safety, Cross-Platform Fixes","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":18,"deferred":0,"learnings":["SonarCloud + Qodo Code Suggestions **PR/Branch:** PR #361","Root cause: Mixed concerns in single functions (formatting + logic + I/O)","Prevention: Extract formatting helpers (formatResultRow, printViolation,","Root cause: Auto-fix assumed all statements could be wrapped in try/catch","Prevention: Only auto-fix ExpressionStatements, return null for others","Root cause: POSIX rename is atomic, Windows rename requires destination","Prevention: unlinkSync destination before renameSync"]}
{"id":300,"date":"2026-02-08","title":"PR #351 ROADMAP Cleanup - CI + Qodo + SonarCloud","source":"sonarcloud+qodo+ci","pr":351,"patterns":[],"fixed":8,"deferred":0,"learnings":["Mixed (CI failures, Qodo PR Suggestions, SonarCloud S5852)","Root cause: Plan was written before doc linting was enforced","Prevention: Doc header + section check runs in CI on all changed `.md`","Root cause: Regex used nested `[\\s\\S]*?` quantifiers","Prevention: Use string-based parsing (indexOf + split) for frontmatter","Root cause: Set comparison was case-sensitive","Prevention: Normalize to lowercase on both add and lookup"]}
{"id":301,"date":"2026-02-06","title":"PR #342 Multi-AI Audit Data Quality - Doc Lint + Qodo","source":"qodo","pr":342,"patterns":[],"fixed":14,"deferred":1,"learnings":["Doc Lint + Qodo Code Suggestions **PR/Branch:**","Root cause: Author wrote links relative to repo root, not file location","Prevention: Doc lint catches this automatically; run before commit","Root cause: Kimi model outputs non-standard severity format","Prevention: fix-schema.js should normalize P-severity to S-severity","Root cause: aggregate-category.js fingerprint matching not catching all","Prevention: Add fingerprint normalization (lowercase, strip punctuation)"]}
{"id":302,"date":"2026-02-12","title":"PR #361 R3 — Symlink Clobber, Backup-and-Replace, ESLint Loc Fallback, O(n) Index","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":10,"deferred":0,"learnings":["Qodo Compliance + Qodo Code Suggestions + SonarCloud **PR/Branch:**","Root cause: mkdirSync + writeFileSync pattern doesn't check symlinks","Prevention: Always lstatSync before writing to verify not a symlink","Root cause: unlinkSync before renameSync is not atomic","Prevention: backup-and-replace pattern (rename old to .bak, rename new,","Root cause: Some parsers don't populate loc","Prevention: Always guard with `target.loc ? ... : fallback`"]}
{"id":303,"date":"2026-02-12","title":"PR #361 R4 — TOCTOU Symlink, Corrupt State Guard, Cognitive Complexity, Bug Fix","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":10,"deferred":0,"learnings":["Qodo Compliance + Qodo Code Suggestions + SonarCloud **PR/Branch:**","Root cause: check-then-use pattern on filesystem","Prevention: Call lstatSync directly, handle ENOENT in catch","Root cause: Same fallback for \"no file\" and \"corrupt file\"","Prevention: Return null for corruption, {} for ENOENT, caller uses ??","Root cause: Copy-paste from different pattern format","Prevention: Schema validation for pattern definitions"]}
{"id":304,"date":"2026-02-12","title":"PR #361 R5 — State Wipe Prevention, Dir Symlink Guard, Fixer Safety","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":6,"deferred":0,"learnings":["Qodo Compliance + Qodo Code Suggestions + SonarCloud **PR/Branch:**","Root cause: applyGraduation saved even when load failed","Prevention: Track null vs {} separately, skip save on null","Root cause: Only file-level symlink check, dir can also be a symlink","Prevention: Check dir with isSymlink() before mkdirSync/writes","Fixed: 6 items (state wipe prevention, dir symlink x2, isSymlink try/catch,","Rejected: 16 items (repeats: String.raw, regex 38, i assignment, catch naming,"]}
{"id":305,"date":"2026-02-12","title":"PR #362 R1 — IMS→TDMS Merge Cognitive Complexity + Code Quality","source":"sonarcloud+qodo","pr":362,"patterns":[],"fixed":0,"deferred":0,"learnings":["SonarCloud (5 issues) + Qodo Compliance (1) + Qodo Suggestions (8)","PR #362 (claude/new-session-uaNwX) **Suggestions:** 14 total","Root cause: mapDocStandardsToTdms and mapEnhancementAuditToTdms had 60+","Prevention: Extract mapFirstFileToFile + mapCommonAuditFields shared","Root cause: Each field checked individually → high cognitive complexity","Prevention: preserveEnhancementFields iterates field array","Root cause: printProcessingResults had 3 nested print sections"]}
{"id":306,"date":"2026-02-12","title":"PR #362 R2 — Edge Cases: Line 0, Falsy Fields, Windows Paths","source":"qodo","pr":362,"patterns":[],"fixed":0,"deferred":0,"learnings":["Qodo Compliance (5) + Qodo Suggestions (6) **PR/Branch:** PR #362","Prevention: Use `!== undefined` for numeric fields that can be 0","Prevention: Use `!== undefined` for string fields that can be empty","Prevention: Check for `.`, `/`, AND `\\\\` in path validation","Fixed: QS-1 (line 0 edge case), QS-4 (preserveEnhancementFields !==","Dismissed: SEC-1 (terminal escape - CLI tool), CMP-1/CMP-2 (pre-existing","File path validation should handle Windows backslash separators"]}
{"id":336,"date":"2026-02-17","title":"PR #369 R2 — CC Reduction, Push Batching, Symlink Guards, Line Normalization","source":"sonarcloud+qodo","pr":369,"patterns":["cc-extraction-helpers","arraypush-batching","normalizereporelpath","table-column-alignment","numberisfinite-for-line-0"],"fixed":24,"deferred":0,"learnings":["SonarCloud (18 Issues + 3 Hotspots) + Qodo Compliance (5) + Qodo","S5852 regex DoS (3): Linear regex `(\\d+)\\s+commits` has no backtracking risk","S4036 PATH lookup (2): Dev CLI tools, not production server code","TOCTOU race: Acceptable for local dev tooling","JSONL data quality (6): Pre-existing entries outside PR diff scope"]}
{"id":337,"date":"2026-02-17","title":"PR #369 R3 — Repo Containment, Canonical Categories, Date Validation, Write Guard","source":"sonarcloud+qodo","pr":369,"patterns":["repo-containment-for-cli-input","dir-to-canonical-category-mapping","sincedate-validation","writefilesync-trycatch","string-line-normalization-in-getfileref"],"fixed":7,"deferred":0,"learnings":["SonarCloud (1 Hotspot + 2 Issues) + Qodo Compliance (3) + Qodo"]}
{"id":338,"date":"2026-02-17","title":"PR #369 R4 — realpathSync Hardening, Atomic Write, Fail-Fast JSONL","source":"sonarcloud+qodo","pr":369,"patterns":["realpathsync-lstatsync-for-path-containment","atomic-write-pattern","fail-fast-on-invalid-jsonl","early-return-on-invalid-date"],"fixed":6,"deferred":0,"learnings":["SonarCloud (1 Hotspot) + Qodo Suggestions (11) **PR/Branch:**"]}
{"id":339,"date":"2026-02-17","title":"PR #369 R5 — CC Extraction, tmpFile Symlink, ISO Date Normalization","source":"sonarcloud+qodo","pr":null,"patterns":["extract-validateinputpath-for-cc-reduction","tmpfile-symlink-guard","iso-timestamp-normalization","guard---apply-loop-against-closedfiltered-items","cross-platform-atomic-rename"],"fixed":7,"deferred":0,"learnings":["SonarCloud (1 CC Issue) + Qodo Security (1) + Qodo Compliance (1) +"]}
{"id":340,"date":"2026-02-17","title":"PR #369 R6 — CC Extraction x2, wx Flag, Atomic writeMasterDebt, Collision Detection","source":"sonarcloud+qodo","pr":null,"patterns":["extract-guardsymlink-atomicwrite-for-cc-reduction","extract-classifyopenitems-applyresolutions-for-cc-reduction","exclusive-create-flag-wx","atomic-write-for-writemasterdebt","return-canonical-path","finding-key-collision-detection"],"fixed":7,"deferred":0,"learnings":["SonarCloud (2 CC Issues) + Qodo Security (1) + Qodo Suggestions (8)"]}
{"id":341,"date":"2026-02-17","title":"PR #369 R7 — CC indexByKey, Ancestor Symlink, fstatSync Forward Scan, Error -1","source":"sonarcloud+qodo","pr":null,"patterns":["extract-indexbykey-for-cc-reduction","ancestor-symlink-containment","dir-dest-symlink-guards-in-fallback","fstatsync-forward-scan","return--1-on-git-error"],"fixed":7,"deferred":0,"learnings":["SonarCloud (1 CC Issue) + Qodo Security (2) + Qodo Compliance (2) +"]}
{"id":342,"date":"2026-02-17","title":"PR #369 R8 — CC buildResults+statusIcon, guardSymlink+safeRename, Symlink Walk, detectAndMapFormat","source":"sonarcloud+qodo","pr":null,"patterns":["extract-buildresultsstatusicon-for-cc-reduction","extract-guardsymlinksaferename-for-cc-reduction","skip-symlinks-in-directory-walk","restrict-fstatsync-scan-to-opensync","sequential-format-detection","error-field-as-string","silent-error-in---json-mode"],"fixed":8,"deferred":0,"learnings":["SonarCloud (3 Issues) + Qodo Security (1) + Qodo Compliance (2) +"]}
{"id":343,"date":"2026-02-17","title":"PR #369 R9 — Fail-Closed guardSymlink, Non-Object Guard, Pattern Recognizer, Source ID Regex","source":"qodo","pr":null,"patterns":["fail-closed-guardsymlink","non-object-guard-in-detectandmapformat","recognize-guardsymlink-in-pattern-checker","source-id-regex-alignment","file-path-normalization-warning"],"fixed":5,"deferred":0,"learnings":["Qodo Suggestions (9) **PR/Branch:**"]}
