{"id":285,"date":"2026-02-11","title":"PR #360 R3 — Pre-commit Hook Fix, Final severity Sweep, Defensive Parsing","source":"qodo+ci","pr":360,"patterns":["documentationindexmd-prettier-ci-failure-3rd-occurrence","severityimpact-in-resolve-itemjs220","objectcreatenull-for-prototype-less-clones"],"fixed":7,"deferred":0,"learnings":["Qodo Code Suggestions R3 + CI Failure **PR/Branch:**","Pre-commit hooks that regenerate files MUST re-run formatters before staging","Field renames across a codebase need `grep -rn` on the ENTIRE directory","Three rounds to fully sweep severity→impact proves grep-first approach is","Object.create(null) is safer than {} for untrusted data cloning"]}
{"id":286,"date":"2026-02-11","title":"PR #360 R4 — Prototype Pollution, TOCTOU, Evidence Sanitization, CLI Robustness","source":"qodo","pr":360,"patterns":["safecloneobject-must-be-applied-immediately-after-jsonparse","toctou-in-path-validation","evidence-array-type-sanitization","utf-8-bom-on-first-line","absolute-script-paths-in-execfilesync"],"fixed":8,"deferred":3,"learnings":["Qodo Compliance R4 + Qodo Code Suggestions R4 **PR/Branch:**","Deferred: 3 (1 new ENH-0003 Markdown injection, 2 already tracked)","TOCTOU: always use validated/resolved path for all subsequent file operations","Evidence arrays need type + trim + dedup sanitization (not just Array.isArray)","BOM stripping is essential for cross-platform JSONL parsing","CLI scripts must use \\_\\_dirname-relative paths for execFileSync portability","Logging functions should never crash the main flow — wrap in try/catch"]}
{"id":287,"date":"2026-02-11","title":"PR #360 R5 — impactSort Falsy Bug, ID Drift, Audit Outcome, Evidence Sanitization","source":"qodo","pr":360,"patterns":["falsy-0-in-lookup-tables","id-drift-from-line-suffixes-in-mergedfrom","always-sanitize-not-just-on-merge","audit-log-outcome-field"],"fixed":7,"deferred":1,"learnings":["Qodo Compliance R5 + Qodo Code Suggestions R5 **PR/Branch:**","Deferred: 1 (resource exhaustion — already DEBT-2747 S2 scope)","Evidence sanitization must run unconditionally (no guard on secondary length)","Audit logs need explicit outcome field (success/partial_failure/failure)","BOM stripping needed in intake-audit.js too, not just validate-schema.js"]}
{"id":288,"date":"2026-02-11","title":"PR #360 R6 — Semantic Merge Logic, PII in Logs, Timestamp Integrity, Path Normalization","source":"qodo","pr":360,"patterns":["flag-only-vs-destructive-merge","pii-in-audit-logs","timestamp-integrity","stateful-regex-in-loops"],"fixed":8,"deferred":2,"learnings":["Qodo Compliance R6 + Qodo Code Suggestions R6 **PR/Branch:**","Deferred: 2 (streaming JSONL — arch change; dedup audit coverage — scope","Semantic match Pass 3 should flag-only, not merge — uncertain items need human","PII compliance: hash usernames, log only basenames of file paths","Spread order matters: `{ ...obj, timestamp }` protects system-generated fields","Guard `RegExp.test()` in loops against stateful g/y flags","Non-object JSON (null, arrays, primitives) can pass `JSON.parse()` — validate"]}
{"id":289,"date":"2026-02-11","title":"PR #360 R7 — Symlink Guards, Pass 3 File Grouping, Schema Hardening, Honesty Guard","source":"qodo","pr":360,"patterns":["symlink-file-overwrite","pass-3-file-grouping","honesty-guard","schema-config-hardening"],"fixed":10,"deferred":2,"learnings":["Qodo Compliance R7 + Qodo Code Suggestions R7 **PR/Branch:**","Deferred: 2 (evidence dedup data fix, placeholder provenance data fix —","Symlink guard pattern: `fs.lstatSync().isSymbolicLink()` before writes, ENOENT","File grouping for pairwise passes reduces complexity proportionally to file","Non-fatal operator hashing: initialize with fallback, single try/catch,","Honesty guard: `counter_argument` required for enhancement-audit format inputs","Whitespace-only strings should be treated as missing for required fields"]}
{"id":290,"date":"2026-02-11","title":"PR #360 R8 — CI Fix, Pass 0 No-File Guard, Symlink Guards Expansion, Format Precision","source":"qodo+ci","pr":360,"patterns":["ci-blocker","pass-0-no-file-guard","symlink-guard-expansion","enhancement-audit-format-precision","pass-3-safety-cap"],"fixed":11,"deferred":1,"learnings":["Qodo Compliance R8 + Qodo Code Suggestions R8 + CI Failure","Fixed: 11 items (2 CI blockers + 9 improvements)","Deferred: 1 (evidence dedup data fix — pipeline handles)","Pattern checker requires `instanceof Error` before `.message` — use canonical","Pass 0 parametric dedup: items without `file` must not share group keys","Enhancement-audit detection: check `typeof === \"string\" && trim()` and","Fingerprint field needs type guard (`typeof !== \"string\"` → error, not crash)"]}
{"id":291,"date":"2026-02-11","title":"PR #360 R9 — Prototype Pollution Guard, Fail-Closed Symlink, Atomic Writes","source":"qodo","pr":360,"patterns":["prototype-pollution","fail-closed-symlink-guard","atomic-write-for-canonical-output","schema-stable-reviewneeded-entries","symlink-guard-coverage"],"fixed":10,"deferred":1,"learnings":["Qodo Compliance R9 + Qodo Code Suggestions R9 **PR/Branch:**","Fixed: 10 items across 5 files","Deferred: 1 (evidence dedup data fix — pipeline handles)","Fail-closed: if lstat throws EACCES/EPERM, throw rather than silently continue","Atomic write pattern: writeFileSync to `.tmp.${pid}` + renameSync + finally","Acceptance evidence: sanitize with type coercion, trim, filter, and length cap","BOM strip on first line + CRLF trimEnd prevents parse failures on"]}
{"id":292,"date":"2026-02-11","title":"PR #360 R10 — Fail-Closed Guards, safeClone Coverage, DoS Cap, Audit Trail","source":"qodo","pr":360,"patterns":["assertnotsymlink-fail-closed","safecloneobject-coverage-gap","temp-file-hardening","algorithmic-dos","audit-trail","pipeline-write-resilience"],"fixed":11,"deferred":1,"learnings":["Qodo Compliance R10 + Qodo Code Suggestions R10 **PR/Branch:**","Fixed: 11 items across 7 files (5 scripts + validate-schema + learnings log)","Deferred: 1 (evidence data dedup — pipeline handles)","Pairwise pass cap (MAX_PAIRWISE_ITEMS=5000) prevents quadratic blowup","Pipeline append writes need try/catch + process.exit(2) for controlled failure","Sanitize BOTH existing evidence and new acceptance evidence for consistency"]}
{"id":293,"date":"2026-02-11","title":"PR #360 R11 — Markdown Injection, EEXIST Recovery, Windows Compat, Schema Validation","source":"qodo","pr":360,"patterns":["markdown-injection","stale-temp-files","deep-nesting","non-fatal-fallback-writes","cross-source-pollution","terminal-escape-injection","windows-compat"],"fixed":11,"deferred":0,"learnings":["Qodo Compliance R11 + Qodo Code Suggestions R11 **PR/Branch:**","Fixed: 11 items across 7 files (6 scripts + learnings log)","EEXIST recovery: unlink stale tmp + retry with wx flag","Fallback/regenerable files should use console.warn, not process.exit","Terminal escape strip regex:","Windows rename compat: `if (existsSync) unlinkSync` before `renameSync`","Schema config arrays should be validated immediately after load"]}
{"id":294,"date":"2026-02-11","title":"PR #360 R12 — CI Fix, TOCTOU Recheck, BiDi Strip, ID Validation, Log Decoupling","source":"qodo+ci","pr":360,"patterns":["ci-failure","toctou-recheck","bidi-spoofing","escapemarkdown-robustness","id-propagation","log-decoupling","line-number-strictness"],"fixed":12,"deferred":0,"learnings":["CI Failure (ESLint no-control-regex) + Qodo Compliance R12 + Qodo","Fixed: 12 items across 6 scripts + learnings log","CI: green (0 ESLint errors)","Extracted `sanitizeLogSnippet()` with compiled regexes at module scope for","TOCTOU mitigation: re-assert symlink check immediately before destructive","BiDi control chars: `/[\\u202A-\\u202E\\u2066-\\u2069]/g`"]}
{"id":295,"date":"2026-02-10","title":"PR #359 — Unsafe err.message, Silent Catches, Full Filepath Logging","source":"sonarcloud+qodo+ci","pr":359,"patterns":["unsafe-errmessage-access-recurring","silent-catch-blocks"],"fixed":13,"deferred":2,"learnings":["SonarCloud + Qodo + CI Pattern Compliance **PR/Branch:** PR #359","Root cause: Agent prompt didn't specify the safe pattern explicitly","Prevention: Pattern checker catches this in CI; always use","Root cause: Defensive \"don't break hooks\" approach went too far","Prevention: Always log at minimum `console.warn` with context","Fixed: 13 items (9 unsafe err.message, 2 silent catches, 2 filepath logging)","Deferred: 2 items (atomic writes for state files — architectural change)"]}
{"id":296,"date":"2026-02-10","title":"PR #359 R2 — Path Redaction, Atomic Writes, State Dir Fallback","source":"qodo","pr":359,"patterns":["path-info-leakage-conflicting-reviews","non-atomic-file-writes"],"fixed":7,"deferred":0,"learnings":["Qodo Compliance + Code Suggestions **PR/Branch:** PR #359","Root cause: Reviewers optimize for different concerns","Prevention: Default to `path.basename()` in hook logs","Root cause: Original code used simple writeFileSync","Prevention: Always use tmp+rename pattern for state files","Fixed: 7 items (2 path redaction, 4 atomic writes, 1 state dir fallback)","When reviewers conflict, security concerns take priority"]}
{"id":297,"date":"2026-02-11","title":"PR #359 R3 — Windows Atomic Writes, Null State Dir, Evidence Dedup","source":"qodo","pr":359,"patterns":["state-utilsjs-getstatedir-null-fallback","windows-safe-atomic-writes-7-locations","debt-2450-evidence-dedup","mergedfrom-unknown-removal"],"fixed":0,"deferred":0,"learnings":["Qodo Code Suggestions **PR/Branch:** PR #359","Windows `fs.renameSync` fails if destination exists — always"]}
{"id":298,"date":"2026-02-12","title":"PR #361 — Graduation State Safety, Append Flag, JSON Parse Guards","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":17,"deferred":1,"learnings":["Qodo Compliance + SonarCloud + Qodo Code Suggestions + Doc Lint","PR #361 (claude/analyze-repo-install-ceMkn) **Suggestions:** 19","Root cause: Copied common Node.js pattern without thinking about atomicity","Prevention: Direct read in try/catch, check err.code for ENOENT","Root cause: \"Best effort\" state file didn't seem critical enough for atomic","Prevention: All state files should use atomic write pattern","Root cause: Didn't know about `{ flag: 'a' }` option"]}
{"id":299,"date":"2026-02-12","title":"PR #361 R2 — Cognitive Complexity, ESLint Fixer Safety, Cross-Platform Fixes","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":18,"deferred":0,"learnings":["SonarCloud + Qodo Code Suggestions **PR/Branch:** PR #361","Root cause: Mixed concerns in single functions (formatting + logic + I/O)","Prevention: Extract formatting helpers (formatResultRow, printViolation,","Root cause: Auto-fix assumed all statements could be wrapped in try/catch","Prevention: Only auto-fix ExpressionStatements, return null for others","Root cause: POSIX rename is atomic, Windows rename requires destination","Prevention: unlinkSync destination before renameSync"]}
{"id":300,"date":"2026-02-08","title":"PR #351 ROADMAP Cleanup - CI + Qodo + SonarCloud","source":"sonarcloud+qodo+ci","pr":351,"patterns":[],"fixed":8,"deferred":0,"learnings":["Mixed (CI failures, Qodo PR Suggestions, SonarCloud S5852)","Root cause: Plan was written before doc linting was enforced","Prevention: Doc header + section check runs in CI on all changed `.md`","Root cause: Regex used nested `[\\s\\S]*?` quantifiers","Prevention: Use string-based parsing (indexOf + split) for frontmatter","Root cause: Set comparison was case-sensitive","Prevention: Normalize to lowercase on both add and lookup"]}
{"id":301,"date":"2026-02-06","title":"PR #342 Multi-AI Audit Data Quality - Doc Lint + Qodo","source":"qodo","pr":342,"patterns":[],"fixed":14,"deferred":1,"learnings":["Doc Lint + Qodo Code Suggestions **PR/Branch:**","Root cause: Author wrote links relative to repo root, not file location","Prevention: Doc lint catches this automatically; run before commit","Root cause: Kimi model outputs non-standard severity format","Prevention: fix-schema.js should normalize P-severity to S-severity","Root cause: aggregate-category.js fingerprint matching not catching all","Prevention: Add fingerprint normalization (lowercase, strip punctuation)"]}
{"id":302,"date":"2026-02-12","title":"PR #361 R3 — Symlink Clobber, Backup-and-Replace, ESLint Loc Fallback, O(n) Index","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":10,"deferred":0,"learnings":["Qodo Compliance + Qodo Code Suggestions + SonarCloud **PR/Branch:**","Root cause: mkdirSync + writeFileSync pattern doesn't check symlinks","Prevention: Always lstatSync before writing to verify not a symlink","Root cause: unlinkSync before renameSync is not atomic","Prevention: backup-and-replace pattern (rename old to .bak, rename new,","Root cause: Some parsers don't populate loc","Prevention: Always guard with `target.loc ? ... : fallback`"]}
{"id":303,"date":"2026-02-12","title":"PR #361 R4 — TOCTOU Symlink, Corrupt State Guard, Cognitive Complexity, Bug Fix","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":10,"deferred":0,"learnings":["Qodo Compliance + Qodo Code Suggestions + SonarCloud **PR/Branch:**","Root cause: check-then-use pattern on filesystem","Prevention: Call lstatSync directly, handle ENOENT in catch","Root cause: Same fallback for \"no file\" and \"corrupt file\"","Prevention: Return null for corruption, {} for ENOENT, caller uses ??","Root cause: Copy-paste from different pattern format","Prevention: Schema validation for pattern definitions"]}
{"id":304,"date":"2026-02-12","title":"PR #361 R5 — State Wipe Prevention, Dir Symlink Guard, Fixer Safety","source":"sonarcloud+qodo","pr":361,"patterns":[],"fixed":6,"deferred":0,"learnings":["Qodo Compliance + Qodo Code Suggestions + SonarCloud **PR/Branch:**","Root cause: applyGraduation saved even when load failed","Prevention: Track null vs {} separately, skip save on null","Root cause: Only file-level symlink check, dir can also be a symlink","Prevention: Check dir with isSymlink() before mkdirSync/writes","Fixed: 6 items (state wipe prevention, dir symlink x2, isSymlink try/catch,","Rejected: 16 items (repeats: String.raw, regex 38, i assignment, catch naming,"]}
{"id":305,"date":"2026-02-12","title":"PR #362 R1 — IMS→TDMS Merge Cognitive Complexity + Code Quality","source":"sonarcloud+qodo","pr":362,"patterns":[],"fixed":0,"deferred":0,"learnings":["SonarCloud (5 issues) + Qodo Compliance (1) + Qodo Suggestions (8)","PR #362 (claude/new-session-uaNwX) **Suggestions:** 14 total","Root cause: mapDocStandardsToTdms and mapEnhancementAuditToTdms had 60+","Prevention: Extract mapFirstFileToFile + mapCommonAuditFields shared","Root cause: Each field checked individually → high cognitive complexity","Prevention: preserveEnhancementFields iterates field array","Root cause: printProcessingResults had 3 nested print sections"]}
{"id":306,"date":"2026-02-12","title":"PR #362 R2 — Edge Cases: Line 0, Falsy Fields, Windows Paths","source":"qodo","pr":362,"patterns":[],"fixed":0,"deferred":0,"learnings":["Qodo Compliance (5) + Qodo Suggestions (6) **PR/Branch:** PR #362","Prevention: Use `!== undefined` for numeric fields that can be 0","Prevention: Use `!== undefined` for string fields that can be empty","Prevention: Check for `.`, `/`, AND `\\\\` in path validation","Fixed: QS-1 (line 0 edge case), QS-4 (preserveEnhancementFields !==","Dismissed: SEC-1 (terminal escape - CLI tool), CMP-1/CMP-2 (pre-existing","File path validation should handle Windows backslash separators"]}
{"id":336,"date":"2026-02-17","title":"PR #369 R2 — CC Reduction, Push Batching, Symlink Guards, Line Normalization","source":"sonarcloud+qodo","pr":369,"patterns":["cc-extraction-helpers","arraypush-batching","normalizereporelpath","table-column-alignment","numberisfinite-for-line-0"],"fixed":24,"deferred":0,"learnings":["SonarCloud (18 Issues + 3 Hotspots) + Qodo Compliance (5) + Qodo","S5852 regex DoS (3): Linear regex `(\\d+)\\s+commits` has no backtracking risk","S4036 PATH lookup (2): Dev CLI tools, not production server code","TOCTOU race: Acceptable for local dev tooling","JSONL data quality (6): Pre-existing entries outside PR diff scope"]}
{"id":337,"date":"2026-02-17","title":"PR #369 R3 — Repo Containment, Canonical Categories, Date Validation, Write Guard","source":"sonarcloud+qodo","pr":369,"patterns":["repo-containment-for-cli-input","dir-to-canonical-category-mapping","sincedate-validation","writefilesync-trycatch","string-line-normalization-in-getfileref"],"fixed":7,"deferred":0,"learnings":["SonarCloud (1 Hotspot + 2 Issues) + Qodo Compliance (3) + Qodo"]}
{"id":338,"date":"2026-02-17","title":"PR #369 R4 — realpathSync Hardening, Atomic Write, Fail-Fast JSONL","source":"sonarcloud+qodo","pr":369,"patterns":["realpathsync-lstatsync-for-path-containment","atomic-write-pattern","fail-fast-on-invalid-jsonl","early-return-on-invalid-date"],"fixed":6,"deferred":0,"learnings":["SonarCloud (1 Hotspot) + Qodo Suggestions (11) **PR/Branch:**"]}
{"id":339,"date":"2026-02-17","title":"PR #369 R5 — CC Extraction, tmpFile Symlink, ISO Date Normalization","source":"sonarcloud+qodo","pr":null,"patterns":["extract-validateinputpath-for-cc-reduction","tmpfile-symlink-guard","iso-timestamp-normalization","guard---apply-loop-against-closedfiltered-items","cross-platform-atomic-rename"],"fixed":7,"deferred":0,"learnings":["SonarCloud (1 CC Issue) + Qodo Security (1) + Qodo Compliance (1) +"]}
{"id":340,"date":"2026-02-17","title":"PR #369 R6 — CC Extraction x2, wx Flag, Atomic writeMasterDebt, Collision Detection","source":"sonarcloud+qodo","pr":null,"patterns":["extract-guardsymlink-atomicwrite-for-cc-reduction","extract-classifyopenitems-applyresolutions-for-cc-reduction","exclusive-create-flag-wx","atomic-write-for-writemasterdebt","return-canonical-path","finding-key-collision-detection"],"fixed":7,"deferred":0,"learnings":["SonarCloud (2 CC Issues) + Qodo Security (1) + Qodo Suggestions (8)"]}
{"id":341,"date":"2026-02-17","title":"PR #369 R7 — CC indexByKey, Ancestor Symlink, fstatSync Forward Scan, Error -1","source":"sonarcloud+qodo","pr":null,"patterns":["extract-indexbykey-for-cc-reduction","ancestor-symlink-containment","dir-dest-symlink-guards-in-fallback","fstatsync-forward-scan","return--1-on-git-error"],"fixed":7,"deferred":0,"learnings":["SonarCloud (1 CC Issue) + Qodo Security (2) + Qodo Compliance (2) +"]}
{"id":342,"date":"2026-02-17","title":"PR #369 R8 — CC buildResults+statusIcon, guardSymlink+safeRename, Symlink Walk, detectAndMapFormat","source":"sonarcloud+qodo","pr":null,"patterns":["extract-buildresultsstatusicon-for-cc-reduction","extract-guardsymlinksaferename-for-cc-reduction","skip-symlinks-in-directory-walk","restrict-fstatsync-scan-to-opensync","sequential-format-detection","error-field-as-string","silent-error-in---json-mode"],"fixed":8,"deferred":0,"learnings":["SonarCloud (3 Issues) + Qodo Security (1) + Qodo Compliance (2) +"]}
{"id":343,"date":"2026-02-17","title":"PR #369 R9 — Fail-Closed guardSymlink, Non-Object Guard, Pattern Recognizer, Source ID Regex","source":"qodo","pr":null,"patterns":["fail-closed-guardsymlink","non-object-guard-in-detectandmapformat","recognize-guardsymlink-in-pattern-checker","source-id-regex-alignment","file-path-normalization-warning"],"fixed":5,"deferred":0,"learnings":["Qodo Suggestions (9) **PR/Branch:**"]}
