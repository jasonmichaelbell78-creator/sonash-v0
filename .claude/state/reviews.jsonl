{"id":285,"date":"2026-02-11","title":"PR #360 R3 — Pre-commit Hook Fix, Final severity Sweep, Defensive Parsing","source":"qodo+ci","pr":360,"patterns":["documentation-index-md-prettier-ci-failure-3rd-occurrence","severity-impact-in-resolve-item-js-220","object-createnull-for-prototype-less-clones"],"fixed":7,"deferred":0,"learnings":["Pre-commit hooks that regenerate files MUST re-run formatters before staging","Field renames across a codebase need `grep -rn` on the ENTIRE directory","Three rounds to fully sweep severity→impact proves grep-first approach is essential","Object.create(null) is safer than {} for untrusted data cloning"]}
{"id":286,"date":"2026-02-11","title":"PR #360 R4 — Prototype Pollution, TOCTOU, Evidence Sanitization, CLI Robustness","source":"qodo","pr":360,"patterns":["safecloneobject-must-be-applied-immediately-after-json-parse","toctou-in-path-validation","evidence-array-type-sanitization","utf-8-bom-on-first-line","absolute-script-paths-in-execfilesync"],"fixed":8,"deferred":3,"learnings":["safeCloneObject must wrap JSON.parse output BEFORE any property access","TOCTOU: always use validated/resolved path for all subsequent file operations","Evidence arrays need type + trim + dedup sanitization (not just Array.isArray)","BOM stripping is essential for cross-platform JSONL parsing","CLI scripts must use \\_\\_dirname-relative paths for execFileSync portability","Logging functions should never crash the main flow — wrap in try/catch","Validation errors go to stderr (console.error), not stdout (console.log)"]}
{"id":287,"date":"2026-02-11","title":"PR #360 R5 — impactSort Falsy Bug, ID Drift, Audit Outcome, Evidence Sanitization","source":"qodo","pr":360,"patterns":["falsy-0-in-lookup-tables","id-drift-from-line-suffixes-in-merged-from","always-sanitize-not-just-on-merge","audit-log-outcome-field"],"fixed":7,"deferred":1,"learnings":["`||` vs `??` for numeric lookup: 0 is falsy, null/undefined are nullish","merged_from IDs with @line: suffixes need base-form normalization for stable lookups","Evidence sanitization must run unconditionally (no guard on secondary length)","Audit logs need explicit outcome field (success/partial_failure/failure)","logIntake needs same try/catch pattern as logResolution (Review #286 R4)","BOM stripping needed in intake-audit.js too, not just validate-schema.js"]}
{"id":288,"date":"2026-02-11","title":"PR #360 R6 — Semantic Merge Logic, PII in Logs, Timestamp Integrity, Path Normalization","source":"qodo","pr":360,"patterns":["flag-only-vs-destructive-merge","pii-in-audit-logs","timestamp-integrity","stateful-regex-in-loops"],"fixed":8,"deferred":2,"learnings":["Semantic match Pass 3 should flag-only, not merge — uncertain items need human review","PII compliance: hash usernames, log only basenames of file paths","Spread order matters: `{ ...obj, timestamp }` protects system-generated fields","Guard `RegExp.test()` in loops against stateful g/y flags","`normalizeFilePath` should strip trailing `:line` suffixes for hash consistency","Non-object JSON (null, arrays, primitives) can pass `JSON.parse()` — validate type","Audit outcome should reflect scope: \"ingested\" vs \"success\" when downstream steps remain","Empty evidence arrays should be deleted, not set to `[]`"]}
{"id":289,"date":"2026-02-11","title":"PR #360 R7 — Symlink Guards, Pass 3 File Grouping, Schema Hardening, Honesty Guard","source":"qodo","pr":360,"patterns":["symlink-file-overwrite","pass-3-file-grouping","honesty-guard","schema-config-hardening"],"fixed":10,"deferred":2,"learnings":["Symlink guard pattern: `fs.lstatSync().isSymbolicLink()` before writes, ENOENT is safe","File grouping for pairwise passes reduces complexity proportionally to file distribution","`new RegExp(source)` drops flags — use `new RegExp(source, flags.replace(/g|y/g, \"\"))` + `lastIndex=0`","Non-fatal operator hashing: initialize with fallback, single try/catch, String() coercion","Honesty guard: `counter_argument` required for enhancement-audit format inputs","Whitespace-only strings should be treated as missing for required fields","Schema arrays should validate element types (isStringArray), not just Array.isArray","Confidence threshold needs range validation (0-100) in schema config"]}
{"id":290,"date":"2026-02-11","title":"PR #360 R8 — CI Fix, Pass 0 No-File Guard, Symlink Guards Expansion, Format Precision","source":"qodo+ci","pr":360,"patterns":["ci-blocker","pass-0-no-file-guard","symlink-guard-expansion","enhancement-audit-format-precision","pass-3-safety-cap"],"fixed":11,"deferred":1,"learnings":["Pattern checker requires `instanceof Error` before `.message` — use canonical form","Pass 0 parametric dedup: items without `file` must not share group keys","`crypto.randomUUID()` creates unique keys for ungroupable items","Enhancement-audit detection: check `typeof === \"string\" && trim()` and `Array.isArray && length > 0`","`__dirname` for child script paths ensures CWD independence","Fingerprint field needs type guard (`typeof !== \"string\"` → error, not crash)","Number.isFinite rejects NaN/Infinity; for-loop catches sparse array holes"]}
{"id":291,"date":"2026-02-11","title":"PR #360 R9 — Prototype Pollution Guard, Fail-Closed Symlink, Atomic Writes","source":"qodo","pr":360,"patterns":["prototype-pollution","fail-closed-symlink-guard","atomic-write-for-canonical-output","schema-stable-reviewneeded-entries","symlink-guard-coverage"],"fixed":10,"deferred":1,"learnings":["`safeCloneObject` with `Object.create(null)` prevents prototype pollution from JSONL","Fail-closed: if lstat throws EACCES/EPERM, throw rather than silently continue","Atomic write pattern: writeFileSync to `.tmp.${pid}` + renameSync + finally cleanup","reviewNeeded entries: consistent shape (`item_a`, `item_b`, `meta`) aids downstream","Acceptance evidence: sanitize with type coercion, trim, filter, and length cap (500)","BOM strip on first line + CRLF trimEnd prevents parse failures on Windows-edited files"]}
{"id":292,"date":"2026-02-11","title":"PR #360 R10 — Fail-Closed Guards, safeClone Coverage, DoS Cap, Audit Trail","source":"qodo","pr":360,"patterns":["assertnotsymlink-fail-closed","safecloneobject-coverage-gap","temp-file-hardening","algorithmic-dos","audit-trail","pipeline-write-resilience"],"fixed":11,"deferred":1,"learnings":["assertNotSymlink must rethrow at end of catch to fail closed on unexpected errors","`{ flag: \"wx\" }` prevents overwriting existing tmp files (TOCTOU defense)","Pairwise pass cap (MAX_PAIRWISE_ITEMS=5000) prevents quadratic blowup","run_metadata entry in dedup log enables standalone execution reconstruction","Pipeline append writes need try/catch + process.exit(2) for controlled failure","Sanitize BOTH existing evidence and new acceptance evidence for consistency"]}
{"id":293,"date":"2026-02-11","title":"PR #360 R11 — Markdown Injection, EEXIST Recovery, Windows Compat, Schema Validation","source":"qodo","pr":360,"patterns":["markdown-injection","stale-temp-files","deep-nesting","non-fatal-fallback-writes","cross-source-pollution","terminal-escape-injection","windows-compat"],"fixed":11,"deferred":0,"learnings":["`<[^>]*>` regex strips HTML tags from Markdown output to prevent injection","EEXIST recovery: unlink stale tmp + retry with wx flag","safeCloneObject should throw on depth > 200, not silently truncate","Fallback/regenerable files should use console.warn, not process.exit","Terminal escape strip regex: `/[\\u001b\\u009b][[()#;?]*...[0-9A-ORZcf-nqry=><]/g`","Windows rename compat: `if (existsSync) unlinkSync` before `renameSync`","Schema config arrays should be validated immediately after load"]}
{"id":294,"date":"2026-02-11","title":"PR #360 R12 — CI Fix, TOCTOU Recheck, BiDi Strip, ID Validation, Log Decoupling","source":"qodo+ci","pr":360,"patterns":["ci-failure","toctou-recheck","bidi-spoofing","escapemarkdown-robustness","id-propagation","log-decoupling","line-number-strictness"],"fixed":12,"deferred":0,"learnings":["`eslint-disable-next-line` applies to the NEXT LINE only; multi-line `.replace()` calls put the regex on line+2, requiring block-level disable/enable","Extracted `sanitizeLogSnippet()` with compiled regexes at module scope for reuse","TOCTOU mitigation: re-assert symlink check immediately before destructive operation","BiDi control chars: `/[\\u202A-\\u202E\\u2066-\\u2069]/g`","`String(text)` coercion handles numeric/boolean inputs in escapeMarkdown","`/^\\d+$/.test(s)` guards parseInt from accepting malformed strings like \"12abc\"","`toLineNumber()` should reject 0 and negative values for line numbers"]}
{"id":295,"date":"2026-02-10","title":"PR #359 — Unsafe err.message, Silent Catches, Full Filepath Logging","source":"mixed","pr":359,"patterns":["unsafe-err-message-access-recurring","silent-catch-blocks"],"fixed":13,"deferred":2,"learnings":["Agent-generated code must be validated against project pattern rules","The `err instanceof Error ? err.message : String(err)` pattern is enforced by CI — new code MUST use it"]}
{"id":296,"date":"2026-02-10","title":"PR #359 R2 — Path Redaction, Atomic Writes, State Dir Fallback","source":"qodo","pr":359,"patterns":["path-info-leakage-conflicting-reviews","non-atomic-file-writes"],"fixed":7,"deferred":0,"learnings":["When reviewers conflict, security concerns take priority","Atomic write pattern: `writeFileSync(tmp) → renameSync(tmp, target)`","State dir creation should fall back to projectDir on failure"]}
{"id":297,"date":"2026-02-11","title":"PR #359 R3 — Windows Atomic Writes, Null State Dir, Evidence Dedup","source":"qodo","pr":359,"patterns":["state-utils-js-getstatedir-null-fallback","windows-safe-atomic-writes-7-locations","debt-2450-evidence-dedup"],"fixed":10,"deferred":1,"learnings":["Windows `fs.renameSync` fails if destination exists — always `rmSync` first. This is CODE_PATTERNS.md \"Windows atomic rename\" pattern (already documented)."]}
{"id":298,"date":"2026-02-12","title":"PR #361 — Graduation State Safety, Append Flag, JSON Parse Guards","source":"mixed","pr":361,"patterns":["toctou-in-loadwarnedfiles","non-atomic-savewarnedfiles","unbounded-file-growth-via-read-append-pattern","silent-catch-blocks-in-the-very-file-that-detects-them-ironic","sonarcloud-regex-dos-5-hotspots","eslint-auto-fix-generates-swallowed-catch-blocks"],"fixed":17,"deferred":1,"learnings":["State persistence code needs the same rigor as production code","Pattern checker should eat its own dog food (practice what it preaches)","JSONL append: use `{ flag: 'a' }` not read+concatenate+write"]}
{"id":299,"date":"2026-02-12","title":"PR #361 R2 — Cognitive Complexity, ESLint Fixer Safety, Cross-Platform Fixes","source":"qodo+sonarcloud","pr":361,"patterns":["cognitive-complexity-extraction","eslint-auto-fixer-scope-safety","cross-platform-atomic-rename","path-normalization-for-state-tracking","parser-agnostic-ast-node-positioning","string-raw-sonarcloud-findings"],"fixed":18,"deferred":0,"learnings":["Extract helper functions to reduce cognitive complexity below SonarCloud threshold","ESLint auto-fixers must never change variable scope (wrap only ExpressionStatements)","Windows needs unlinkSync before renameSync for atomic write pattern","Normalize path separators in state tracking keys for cross-platform consistency"]}
{"id":300,"date":"2026-02-08","title":"PR #351 ROADMAP Cleanup - CI + Qodo + SonarCloud","source":"mixed","pr":351,"patterns":["doc-lint-required-sections","redos-in-frontmatter-regex","case-insensitive-installid","cli-flag-injection-via-user-args"],"fixed":8,"deferred":0,"learnings":["Auto-generated DOCUMENTATION_INDEX.md picks up `<!-- prettier-ignore-start -->` as description if it's the first non-heading line — need to fix generator","Pattern compliance `pathExcludeList` is the correct way to handle verified try/catch files"]}
{"id":301,"date":"2026-02-06","title":"PR #342 Multi-AI Audit Data Quality - Doc Lint + Qodo","source":"doc-lint+qodo","pr":342,"patterns":["skill-md-relative-paths","jsonl-severity-standardization","duplicate-canon-entries","key-naming-inconsistency"],"fixed":14,"deferred":1,"learnings":["Skills in .claude/skills/ need ../../../ prefix for repo-root file links","Kimi model outputs P-severity; add normalization to fix-schema.js pipeline","aggregate-category.js needs more aggressive fingerprint dedup"]}
{"id":302,"date":"2026-02-12","title":"PR #361 R3 — Symlink Clobber, Backup-and-Replace, ESLint Loc Fallback, O(n) Index","source":"qodo+sonarcloud","pr":361,"patterns":["symlink-clobber-on-state-writes","state-loss-on-failed-rename","eslint-fixer-crash-without-loc"],"fixed":10,"deferred":0,"learnings":["Our own BOM-handling pattern checker missed our own new code (ironic)","Backup-and-replace is safer than delete-then-rename for atomic writes on Windows","O(n^2) nested loop in TOCTOU rule indexed to O(n) with Map"]}
{"id":303,"date":"2026-02-12","title":"PR #361 R4 — TOCTOU Symlink, Corrupt State Guard, Cognitive Complexity, Bug Fix","source":"qodo+sonarcloud","pr":361,"patterns":["toctou-in-symlink-check","corrupt-state-wipes-graduation-history","exclude-vs-pathexclude-property-name-bug-in-writefile-missing-encoding"],"fixed":10,"deferred":0,"learnings":["existsSync+lstatSync is itself a TOCTOU; call lstatSync directly","Extract helpers (tryUnlink, isSymlink) to reduce cognitive complexity","Property name typos in config objects are silent bugs"]}
{"id":304,"date":"2026-02-12","title":"PR #361 R5 — State Wipe Prevention, Dir Symlink Guard, Fixer Safety","source":"qodo+sonarcloud","pr":361,"patterns":["corrupt-state-wipe","directory-level-symlink-attacks"],"fixed":6,"deferred":0,"learnings":["When loadWarnedFiles returns null (corruption), caller must NOT overwrite","Directory symlinks are as dangerous as file symlinks","ESLint auto-fix `return;` is invalid outside functions — use empty TODO block"]}
{"id":305,"date":"2026-02-12","title":"PR #362 R1 — IMS→TDMS Merge Cognitive Complexity + Code Quality","source":"qodo+sonarcloud","pr":362,"patterns":["shared-helper-extraction-for-duplicated-format-mapping-logic","enhancement-field-preservation-loop-replaces-10-individual-if-statements","format-stats-warnings-printing-extracted-from-main-results-function"],"fixed":9,"deferred":3,"learnings":["Shared helpers reduce complexity across multiple callers simultaneously","replaceAll() preferred over replace(/pattern/g) (SonarCloud es2021 rule)","Return warnings alongside errors for complete validation feedback"]}
{"id":306,"date":"2026-02-12","title":"PR #362 R2 — Edge Cases: Line 0, Falsy Fields, Windows Paths","source":"qodo","pr":362,"patterns":["line-0-is-falsy-in-js","empty-string-is-falsy","windows-path-separator-not-checked-in-isvalidfilepath"],"fixed":4,"deferred":0,"learnings":["`!== undefined` is safer than truthy check for any field that accepts 0 or \"\"","File path validation should handle Windows backslash separators","Qodo R2 sometimes contradicts R1 suggestions (pr_number null vs omit)"]}
{"id":307,"date":"2026-02-12","title":"PR #362 R3 — SonarCloud Negated Condition + File Path Warning Guard","source":"qodo+sonarcloud","pr":362,"patterns":["negated-conditions-reduce-readability","missing-guard-on-file-path-warning"],"fixed":2,"deferred":0,"learnings":["SonarCloud \"unexpected negated condition\" catches real readability issues","File validation should skip items without file fields entirely, not warn"]}
{"id":308,"date":"2026-02-12","title":"PR #362 R4 — ReDoS Fix, Cognitive Complexity, Cross-Validation, Atomic Writes","source":"qodo+sonarcloud","pr":362,"patterns":["s5852-redos","cross-validation-must-apply-mismatch-not-just-warn","cognitive-complexity-reduction-via-function-extraction","backup-swap-atomic-write-with-try-finally-cleanup","replaceall-over-replace-with-g-flag","regex-operator-precedence-needs","capture-output-once-in-shell-hooks"],"fixed":12,"deferred":0,"learnings":["S5852 ReDoS: Replace lazy `[^|]+?` with greedy `[^|]*` in table-parsing regex (CRITICAL) — Lazy quantifiers on negated character classes create catastrophic backtracking. Greedy `[^|]*` is inherently safe because the character class can't match the delimiter.","Cross-validation must APPLY mismatch, not just warn — Both `run-consolidation.js` and `sync-consolidation-counter.js` detected CODE_PATTERNS.md vs log mismatches but continued using the wrong value. Fix: `lastConsolidated = codePatternsInfo.lastReview` before computing counts.","Cognitive complexity reduction via function extraction — Extract `crossValidateLastConsolidated()` and `parseTriggerSection()` to keep `getConsolidationStatus()` under 15.","Backup-swap atomic write with try...finally cleanup — Write to .tmp, rename existing to .bak, rename .tmp to target, clean up .bak on success. Restore from .bak if rename fails. Always clean up .tmp in finally block.","`replaceAll` over `replace` with `/g` flag — ES2021 `replaceAll` is clearer for global replacements. For literal strings, avoids regex entirely.","Regex operator precedence: `^-|-$` needs `(?:^-|-$)` — Without grouping, `^-|-$` is parsed as `(^-)` OR `(-$)`, not alternation of anchored patterns.","Capture output once in shell hooks — Instead of running a command twice (once suppressed, once to show output), capture with `$(cmd 2>&1)` and check `$?`. Halves execution time."]}
{"id":309,"date":"2026-02-12","title":"PR #362 R5 — ReDoS Overlapping Quantifiers, Complexity Extraction, Multiline Regex","source":"qodo+sonarcloud","pr":362,"patterns":["redos-from-overlapping-quantifiers-s-before","cognitive-complexity-reduction-via-standalone-function-extraction","json-stringify-over-manual-string-escaping-in-templates","scope-regex-character-classes-to-single-lines-with-n","shell-if-var-cmd-for-set-e-safety"],"fixed":9,"deferred":0,"learnings":["ReDoS from overlapping quantifiers: `\\s*` before `[^|]*` — Even safe character classes become vulnerable when preceded by `\\s*` that matches the same whitespace. Remove redundant `\\s*` when captures are `.trim()`'d anyway.","Cognitive complexity reduction via standalone function extraction — Extract loops and parsing logic into standalone functions (not just class methods) to maximize complexity reduction per extraction.","`JSON.stringify()` over manual string escaping in templates — Eliminates nested template literals AND handles all special characters. Safer than `.replaceAll('\"', ...)`.","Scope regex character classes to single lines with `[^\\n...]` — Generic negated classes like `[^|]*` or `[^,)]+` can match across newlines. Add `\\n` to negation for line-scoped patterns.","Shell `if ! var=\"$(cmd)\"` for `set -e` safety — Combining assignment and test in one statement prevents `set -e` from aborting on non-zero exit before the variable is set."]}
{"id":310,"date":"2026-02-13","title":"Qodo PR Suggestions — Alerts v3 Health Score, Edge Cases, Path Normalization","source":"qodo","pr":null,"patterns":["health-score-inflation","initial-commit-edge-case","backslash-path-separators"],"fixed":3,"deferred":1,"learnings":["Health score functions should normalize against fixed total weight, not dynamic available weight","Git operations should handle initial-commit edge cases with empty tree hash","JSONL data files should normalize path separators at ingest time for cross-platform consistency"]}
{"id":311,"date":"2026-02-14","title":"SonarCloud + Qodo - PR #365 Audit Ecosystem Branch","source":"sonarcloud+qodo","pr":365,"patterns":["global-regex-lastindex-bug","windows-cross-platform-gaps","regex-complexity-accumulation","unbounded-whitespace-in-markdown-regex"],"fixed":33,"deferred":0,"learnings":["pathExcludeList is the preferred mechanism for file exclusions (avoids regex complexity limits)","Persist state cleanup (warned-files.json TTL purge was in-memory only)","spawnSync git rev-parse --show-toplevel is the reliable way to find repo root","Always reset lastIndex = 0 or use exec() pattern with /g regex"]}
{"id":312,"date":"2026-02-14","title":"CI Regex Complexity + Qodo R2 - PR #365","source":"sonarcloud+qodo","pr":365,"patterns":["sonarcloud-regex-complexity-over-20","document-version-regex-anchoring"],"fixed":8,"deferred":0,"learnings":["spawnSync without timeout can hang in pre-push hooks - always add timeout: 3000","maxBuffer on execFileSync prevents crash on large diffs","isTrivialChange needs file-type awareness: # lines in .sh are comments but headings in .md","Factor common prefixes in regex alternations to reduce complexity"]}
{"id":313,"date":"2026-02-14","title":"CI Feedback + Qodo R3 - Orphaned DEBT + Bounded Regex","source":"ci+qodo","pr":365,"patterns":["dedup-removing-referenced-debt-entries","prototype-pollution-in-config-objects","emoji-tolerant-section-matching"],"fixed":11,"deferred":0,"learnings":["MEMORY.md critical bug: changes to MASTER_DEBT.jsonl MUST sync to raw/deduped.jsonl","Atomic writes (write .tmp + rename) prevent corruption on crash","Context-aware trivial detection: # is a comment in .sh/.yml but a heading in .md","Cross-check ROADMAP.md references before dedup"]}
{"id":314,"date":"2026-02-14","title":"SonarCloud Regex Hotspots + Qodo Robustness R4 - PR #365","source":"sonarcloud+qodo","pr":365,"patterns":["dead-code-harboring-regex-complexity","incremental-line-counting-bug","regex-lookahead-factoring","non-global-regex-guard"],"fixed":13,"deferred":0,"learnings":["Remove regex from disabled checks - dead code still triggers SonarCloud","\\s* to \\s+ is a simple backtracking reduction when at least one space is always present","File size guards before readFileSync prevent local DoS on state files","Repo-relative paths (path.relative) are more reliable than raw string normalization for git diff"]}
{"id":315,"date":"2026-02-14","title":"SonarCloud + Qodo R5 - Residual Regex, Stack Traces, Windows Compat","source":"sonarcloud+qodo","pr":365,"patterns":["stack-trace-leakage-via-rethrown-errors","complex-regex-where-string-parsing-suffices","windows-renamesync-fails-when-dest-exists","file-size-budgets-for-regex-scanning"],"fixed":13,"deferred":0,"learnings":["path.basename() for log output prevents leaking user home directory paths","git rev-parse --show-toplevel is more reliable than process.cwd() for repo root","Block comment interior lines (* ...) should be treated as trivial in diff analysis","Memoizing isTrivialChange with a Map avoids redundant git diff calls per file"]}
{"id":316,"date":"2026-02-14","title":"PR #366 R1 - SonarCloud Regex + Qodo Robustness + CI Blockers","source":"sonarcloud+qodo+ci","pr":366,"patterns":["sonarcloud-s5852-two-strikes-regex","atomic-file-writes","unbounded-state-growth-pruning","ci-broken-links","master-debt-jsonl-sync"],"fixed":15,"deferred":6,"learnings":["SonarCloud two-strikes rule: if flagged twice, replace regex with string parsing","Atomic write pattern: tmp+rmSync+rename","State pruning: 24h TTL for directive-dedup, 30-day expiry for suggestedAgents","CI broken links in doc files need plain text annotation replacement","MASTER_DEBT.jsonl sync: changes must propagate to deduped.jsonl"]}
{"id":317,"date":"2026-02-15","title":"PR #366 R2 - SonarCloud Two-Strikes + Qodo Robustness","source":"sonarcloud+qodo","pr":366,"patterns":["sonarcloud-s5852-two-strikes-string-parsing","git-porcelain-rename-copy-parse-bug","defensive-state-shape-normalization","atomic-write-consistency","number-isfinite-guard"],"fixed":11,"deferred":3,"learnings":["Two-strikes regex to string: replace both remaining regexes with pure string parsing","Git status --porcelain -z rename/copy entries need indexed loop + i++ skip for second path","Defensive state shape normalization prevents crashes on corrupted JSON","Number.isFinite guard prevents purge bypass on corrupted timestamps"]}
{"id":318,"date":"2026-02-15","title":"PR #366 R3 - Atomic Write Hardening + State Normalization","source":"qodo","pr":366,"patterns":["backup-swap-atomic-writes","mkdirsync-before-atomic-write","state-shape-normalization","git-porcelain-record-validation","number-isfinite-guards"],"fixed":10,"deferred":4,"learnings":["Backup-swap atomic write: write tmp, rename original to .bak, rename tmp to original, rm .bak","mkdirSync before atomic write prevents first-run failures in clean environment","State shape normalization: validate JSON shape after parse","Git porcelain record validation: check line length and format before parsing XY fields","Number.isFinite guards on cooldown timestamps and uses/phase counters"]}
{"id":319,"date":"2026-02-15","title":"PR #366 R4 - Symlink Guard + Future Timestamp + Skip-Abuse Bug","source":"qodo","pr":366,"patterns":["symlink-write-guard-savejson","future-timestamp-defense","skip-abuse-24h-7d-data-mismatch","crlf-jsonl-parsing-windows","file-list-caps"],"fixed":6,"deferred":0,"learnings":["Symlink write guard: lstatSync().isSymbolicLink() before writing state files","Future timestamps from clock skew should trigger cooldown, not bypass it","Skip-abuse alert: separate byType24h and byType7d for accurate reporting","CRLF JSONL parsing: trim each line before JSON.parse on Windows","Consistent caps on file lists: match existing caps across all arrays"]}
{"id":320,"date":"2026-02-15","title":"PR #366 R5 - Parent Dir Symlink + Clock Skew + Prototype Pollution","source":"qodo","pr":366,"patterns":["parent-directory-symlink-attack","clock-skew-defense","prototype-pollution-counter-objects","symlink-check-on-reads","size-based-rotation-guard"],"fixed":8,"deferred":0,"learnings":["Parent directory can be a symlink redirecting writes - check path.dirname() + lstatSync()","Clock skew defense: future timestamps (ageMs < 0) should trigger cooldown","Prototype pollution: use Object.create(null) + String(key) for counter objects","Symlink check on reads: getContent() needs symlink check to prevent content injection","Size-based rotation: gate behind fs.statSync() size threshold instead of every-append"]}
{"id":321,"date":"2026-02-15","title":"PR #366 R6 - Shared Symlink Guard + Self-Healing Cooldown + Bug Fixes","source":"qodo","pr":366,"patterns":["shared-symlink-helper","self-healing-future-timestamps","toctou-race-try-catch","milestone-string-bug","hook-output-protocol"],"fixed":11,"deferred":0,"learnings":["Centralized isSafeToWrite() with ancestor traversal stops symlink ping-pong","Self-healing: ageMs < 0 deletes corrupt cooldown instead of permanently blocking","TOCTOU race: existsSync + lstatSync wrapped in try/catch, fail-closed","Hook output protocol: must print ok even when suppressing directives"]}
{"id":322,"date":"2026-02-15","title":"PR #366 R7 - Comprehensive Symlink Guard Hardening","source":"qodo","pr":366,"patterns":["issafetowrite-on-both-target-and-tmp","inline-to-shared-helper-migration","rotate-state-all-4-paths","path-isabsolute-check"],"fixed":9,"deferred":0,"learnings":["Every atomic write needs isSafeToWrite() on BOTH target AND tmp file","When introducing shared security helper, audit ALL write paths in one pass","rotate-state.js: all 4 atomic write paths need symlink guards","path.isAbsolute() check: reject relative paths in symlink guard"]}
{"id":323,"date":"2026-02-15","title":"PR #366 R8 — tmpPath Symlink Guards + Firestore Regex Bypass Fix","source":"qodo+sonarcloud","pr":366,"patterns":["tmppath-symlink-guard","firestore-regex-hyphen-bypass","log-override-path-resolve"],"fixed":7,"deferred":0,"learnings":["tmpPath symlink guards needed on 5 files","Firestore regex hyphen bypass: \\w+ to [A-Za-z0-9_-]+","Propagation check confirmed all atomic write paths guarded"]}
{"id":324,"date":"2026-02-16","title":"PR #367 R1 — Alerts Overhaul Security + Code Quality","source":"sonarcloud+qodo","pr":367,"patterns":[],"fixed":36,"deferred":7,"learnings":["SonarCloud (24) + Qodo PR Compliance (6) + Qodo Code Suggestions","Parallel 3-agent review processing (security / code quality / hooks+docs)","First use of propagation check on new scripts added in same PR","SonarCloud cognitive complexity deferrals (6 items, all pre-existing CC 16-64)"]}
{"id":325,"date":"2026-02-16","title":"PR #367 R2 — Trend Bug, Suppression Logic, Security Hardening","source":"sonarcloud+qodo+ci","pr":367,"patterns":["r1-agent-incomplete-fixes","exit-trap-overwrite","category-wide-suppression-blocked"],"fixed":21,"deferred":6,"learnings":["CI (Prettier) + SonarCloud (15) + Qodo PR Compliance (5) + Qodo Code","Parallel agent results need explicit verification against the original item","Shell EXIT trap chaining requires capturing previous trap with `trap -p EXIT`","SonarCloud cognitive complexity items are consistently pre-existing (CC 16-64)"]}
{"id":326,"date":"2026-02-16","title":"PR #367 R3 — Weight Normalization, CC Reduction, Symlink Guards","source":"sonarcloud+qodo","pr":367,"patterns":["tool-conflict-resolution","cc-reduction-via-extraction","type-safe-defensive-coding"],"fixed":8,"deferred":6,"learnings":["SonarCloud (11) + Qodo PR Compliance (2) + Qodo Code Suggestions (8)","When tools conflict (SonarCloud vs pattern compliance), document the conflict","Health score weight normalization is already handled by `measuredWeight`","Deduplicating extracted learnings with a Set prevents data quality issues in"]}
{"id":327,"date":"2026-02-16","title":"PR #367 R4 — Fail Closed, Log Injection, Trap Chaining, Input Normalization","source":"sonarcloud+qodo","pr":367,"patterns":["fail-closed-security","log-injection-prevention","shell-trap-chaining"],"fixed":13,"deferred":6,"learnings":["SonarCloud (9) + Qodo PR Compliance (5) + Qodo Code Suggestions (10)","Fail-open fallbacks for security modules are a recurring anti-pattern","Shell EXIT traps must be chained, not overwritten","Running validate-audit.js twice is wasteful; capture output once"]}
{"id":328,"date":"2026-02-16","title":"PR #367 R5 — Suppression Validation, POSIX Portability, Newline Propagation","source":"sonarcloud+qodo","pr":367,"patterns":["suppression-type-guard","posix-grep-portability","skip-reason-propagation-miss"],"fixed":9,"deferred":6,"learnings":["SonarCloud (8) + Qodo PR Compliance (5) + Qodo Code Suggestions (9)","Propagation check must cover both shell hooks AND JS scripts for same env vars","grep -P is GNU extension not POSIX — use wc -l for newline detection","Suppression files are external input — validate entry types before property access","ENOENT string codes lost by numeric-only error.code check — preserve in stderr"]}
{"id":329,"date":"2026-02-16","title":"PR #367 R6 — Control Chars, suppressAll, POSIX CR Fix, Severity Normalization","source":"sonarcloud+qodo","pr":367,"patterns":["control-char-validation","suppress-all-explicit","posix-cr-detection","severity-normalization"],"fixed":5,"deferred":6,"learnings":["SonarCloud (8) + Qodo Compliance (3) + Qodo Suggestions (5)","Control char validation \u0000-\u001f catches more injection vectors than just CR/LF","Category-wide suppression needs explicit suppressAll: true flag","ANSI-C quoting $\x27...\x27 is bash-only not POSIX sh — use printf variable","Severity clamp to known values prevents NaN in warning counts"]}
{"id":329,"date":"2026-02-16","title":"PR #367 R6 — Control Chars, suppressAll, POSIX CR Fix, Severity Normalization","source":"sonarcloud+qodo","pr":367,"patterns":["control-char-length-validation","suppressall-explicit-flag","posix-cr-detection","severity-normalization"],"fixed":5,"deferred":6,"learnings":["SonarCloud (8) + Qodo Compliance (3) + Qodo Suggestions (5)","Control character validation catches more injection vectors than just CR/LF","Category-wide suppression is a dangerous footgun — require explicit opt-in","Shell portability: `$'...'` ANSI-C quoting is bash-only, not POSIX sh","Propagation of validation patterns across all 3 JS scripts + 2 shell hooks"]}

{"id":330,"date":"2026-02-16","title":"PR #367 R7 — codePointAt, suppressAll Category Guard, Code Fence Parsing, EXIT Trap","source":"sonarcloud+qodo","pr":367,"patterns":["codePointAt-vs-charCodeAt","suppressAll-requires-category","code-fence-awareness","posix-exit-trap-helper","shell-control-char-validation"],"fixed":8,"deferred":6,"learnings":["codePointAt handles surrogate pairs and astral Unicode correctly","Category-wide suppression needs both suppressAll: true AND a valid category","Markdown parsing must account for code fences to avoid false header matches","Shell trap chaining via sed is fragile; a helper function is more maintainable","Always propagate validation patterns from JS to shell hooks and vice versa"]}